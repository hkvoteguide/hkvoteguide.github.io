{"version":3,"sources":["constants/dcregion.js","ui/theme.js","utils/helper.js","components/atoms/charts/StackedNormalizedHorizontalBarChart.js","components/atoms/Slider/index.js","components/atoms/Text.js","components/atoms/Columns.js","components/molecules/ValueSlider.js","components/molecules/TabBar.js","components/organisms/Tabs.js","components/atoms/Rows.js","components/organisms/PredictionChartPanel.js","components/molecules/CheckBox.js","queries/gql.js","components/molecules/LoadingButton.js","components/templates/CampCompareChartContainer.js","components/atoms/Countdown.js","components/atoms/Alert.js","utils/features.js","components/molecules/AddressSearcher.js","components/molecules/PeopleSearcher.js","reducers/drawer.js","ContextStore.js","components/organisms/AreaTabs.js","components/molecules/DistrictSelector.js","components/organisms/SearchTab.js","components/pages/landing/index.js","components/atoms/Avatar.js","components/organisms/ScrollableTabs.js","components/templates/CouncillorMeetingAttendance.js","components/containers/CouncillorMeetingAttendanceContainer.js","components/molecules/Card.js","components/atoms/Link.js","components/templates/PersonElectionHistories.js","components/containers/PersonElectionHistoriesContainer.js","components/templates/FCPersonData.js","components/pages/profile/index.js","components/OLMap.js","ui/responsive.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/atoms/charts/WaffleChart.js","components/district/Metrics.js","components/pages/district/index.js","components/atoms/Tag.js","components/containers/CandidatesContainer.js","components/organisms/ConstituencyCard.js","components/atoms/Loading.js","components/pages/district/list.js","components/DCCACompareMap.js","components/templates/Councillor.js","components/containers/CouncillorContainer.js","components/atoms/Button.js","components/atoms/charts/GroupedBarChart.js","components/containers/DistrictNewVoterChartContainer.js","components/district/DCCAOverview.js","components/pages/battleground/index.js","components/pages/disclaimer/index.js","components/pages/notfound/index.js","components/organisms/MobileAppBar.js","components/organisms/Footer.js","WithTracker.js","components/organisms/SearchMenu.js","components/pages/SearchDrawer.js","components/pages/district/overview.js","App.js","index.js"],"names":["DCREGION","A","zh_hk","en_us","unelected_dc_seat","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","FONT_FAMILY","typography","useNextVariants","fontSize","fontFamily","join","h1","fontWeight","h2","h3","h4","h5","h6","body1","lineHeight","body2","COLORS","main","text","primary","background","mainText","dark","backgroundColor","color","camp","democracy","establishment","localist","other","uncertain","common","success","green","failure","red","secondaryBackgroundColor","createMuiTheme","palette","contrastText","secondary","getDistrictListUriFromTag","tag","concat","getDistrictOverviewUriFromTag","code","getConstituencyUriFromTag","getColorFromCamp","泛民","民主","建制","本土","傘兵","自決","其他","不明","getColorFromPoliticalAffiliation","pa","mapping","_arr","Object","keys","_i","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","party","value","includes","err","return","getProfilePath","person","name_en","name_zh","uuid","Styled","styled","Box","_templateObject","StackedNormalizedHorizontalBarChart","props","_useState","useState","width","height","_useState2","slicedToArray","dimensions","setDimensions","CAMP_COLORS","d3Container","useRef","updateLegend","res","svg","data","label","count","map","d","reduce","c","v","overhalf_count","total","selectAll","remove","legend","enter","append","attr","i","style","drawChart","columns","margin","labels","series","d3","slice","offset","forEach","s","index","y","domain","key","range","unknown","name","padding","x","current","select","empty","bar","bandwidth","transition","delay","Math","random","duration","groups","f","call","g","tickSizeOuter","on","k","getCodeFromDistrictName","window","location","ticks","middle","updateWindowSize","clientWidth","useEffect","addEventListener","useLayoutEffect","react_default","a","createElement","ref","atoms_Slider","Slider","Typography","Text_templateObject","SuccessText","_templateObject2","FailureText","_templateObject3","Text","Columns_templateObject","SliderContainer","ValueSlider_templateObject","Label","ValueSlider_templateObject2","ValueSlider","setValue","className","Columns","onChange","event","newValue","TabBar","titles","selectedTab","setSelectedTab","Fragment","Tabs","centered","title","Tab","id","aria-controls","TabPanel","children","objectWithoutProperties","assign","component","role","aria-labelledby","ScrollableTabs","_React$useState","React","_React$useState2","child","hidden","Rows_templateObject","StyledValueSlider","PredictionChartPanel_templateObject","TabSection","PredictionChartPanel_templateObject2","StyledCheckBox","checked","setChecked","FormControlLabel","control","Checkbox","target","PredictionChartPanel_templateObject3","PredictionChartPanel","settings","setSettings","setSettingConfigFunc","field","flag","config","defineProperty","camp_rate","toConsumableArray","vote_rate","setSettingFunc","objectSpread","buttonLayout","variant","Rows","reference_last_election","auto_won_add_components","CONSTITUENCIES_DATA","QUERY_CONSTITUENCIES","gql","gql_templateObject","QUERY_GET_CONSTITUENCIES_BY_TAG","gql_templateObject2","QUERY_CONSTITUENCY_STATS","gql_templateObject3","QUERY_GET_DISTRICT","_templateObject4","QUERY_GET_AREA","_templateObject5","QUERY_GET_PERSON_ELECTIONS","_templateObject6","QUERY_GET_PERSON_MEETING_ATTENDANCES","_templateObject7","QUERY_GET_COUNCILLOR","_templateObject8","QUERY_GET_CANDIDATES","_templateObject9","QUERY_GET_CONSTITUENCY_CAMP_DATA","_templateObject10","StyledCircularProgress","CircularProgress","LoadingButton_templateObject","Container","div","CampCompareChartContainer_templateObject","PredictionChartHeader","CampCompareChartContainer_templateObject2","StyledLoadingButton","isLoading","onClick","Button","disabled","size","CampCompareChartContainer_templateObject3","FETCH_CAMP_DATA","CampCompareChartContainer_templateObject4","convertToD3Compatible","sortFunc","非建制","values","acc","sort","b","AGE_GROUP_MIDDLE","AGE_GROUP_OLD","groupExpectDataByRegionAndCamp","constituencies","getProjectedVotes","type","voteStats","filter","subtype","stat","settingIndex","indexOf","category_2","votePercentage","yellowPercentage","getVoteCountBySetting","expectedResult","constituency","predecessors","predecessor","candidates","onlyCandidate","votes","vote_stats","push","mock","maxVote","projectedVotes","establishCount","cacode","byCodes","_","groupBy","r","p","val","CampCompareChartContainer","predictEnabled","setPredictEnabled","_React$useState3","_React$useState4","react_apollo_esm","query","variables","year","_ref3","loading","error","dataForD3","candidate","groupDataByRegionAndCamp","dcd_candidates","_ref4","defaultChartData","d3Data","dcd_constituencies","indexFromOriginalChartData","record","float","organisms_PredictionChartPanel","TimeGrid","Grid","Countdown_templateObject","Time","Countdown_templateObject2","Unit","Countdown_templateObject3","Countdown","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","state","days","hours","min","sec","_this2","interval","setInterval","date","calculateCountdown","setState","stop","endDate","diff","Date","parse","timeLeft","years","millisec","floor","clearInterval","String","countDown","container","item","xs","addLeadingZeros","Component","defaultProps","Alert","Alert_templateObject","getAllFeaturesFromPoint","_ref","lng","lat","pt","turf","result","dc2019","features","feature","poly","geometry","coordinates","properties","CACODE","renderInputComponent","inputProps","classes","_inputProps$inputRef","inputRef","TextField","fullWidth","InputProps","node","input","disableUnderline","endAdornment","InputAdornment","position","IconButton","aria-label","Search_default","renderSuggestion","suggestion","isHighlighted","matches","match","parts","MenuItem","selected","part","highlight","getSuggestionValue","IntegrationAutosuggest","suggestions","debounced","handleSuggestionsFetchRequested","_ref2","cancel","debounce","getSuggestions","then","handleSuggestionsClearRequested","handleChange","handleSuggestionSelected","suggestionValue","suggestionIndex","sectionIndex","method","coordinate","handleAddressSelected","inputValue","trim","toLowerCase","AddressParser","records","fullAddress","LANG_ZH","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","root","dist_default","placeholder","InputLabelProps","shrink","theme","suggestionsList","suggestInput","renderSuggestionsContainer","options","Paper","square","containerProps","withStyles","flexGrow","suggestionsContainerOpen","zIndex","marginTop","spacing","display","listStyleType","borderRadius","boxShadow","textDecoration","searchButton","GET_PEOPLE","PeopleSearcher_templateObject","PeopleSearcher_templateObject2","withApollo","handlePeopleSelected","_useState3","_useState4","setSuggestions","fetchUsers","asyncToGenerator","regenerator_default","mark","_callee","keyword","wrap","_context","prev","client","nameRegex","sent","abrupt","dcd_people","_x","apply","arguments","PeopleSearcher_Container","evt","_ref6","_ref5","homeUrl","process","avatarPath","suggestionNameStyle","marginLeft","selectedSuggestionNameStyle","Avatar","src","imgProps","onError","e","DRAWER_OPEN","DRAWER_CLOSE","drawer","action","open","drawerInitialState","ContextStore","createContext","AreasTabs","AreaTabs_templateObject","AreasTab","AreaTabs_templateObject2","AreaTabs","expanded","setExpanded","AreaTabs_TabPanel","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","DistrictExpansionPanel","ExpansionPanel","DistrictSelector_templateObject3","DistrictExpansionPanelSummary","ExpansionPanelSummary","DistrictSelector_templateObject4","DistrictExpansionPanelDetails","ExpansionPanelDetails","DistrictSelector_templateObject5","DistrictWrapper","DistrictSelector_templateObject6","withRouter","dispatch","useContext","renderArea","area","area_code","districts","dc_code","expandIcon","ExpandMore_default","dc_name_zh","district","history","DistrictSelector_Container","areas","uniqBy","dcd_districts","area_name_zh","areasWithDistricts","areaNames","SearchTab_templateObject","ExpandedRow","SearchTab_templateObject2","ContentRowContainer","SearchTab_templateObject3","AddressSearchContainer","SearchTab_templateObject4","TabContainer","SearchTab_templateObject5","TabButton","SearchTab_templateObject6","active","path","onTabSelected","tab","SearchTab_Container","molecules_DistrictSelector","AddressSearcher","molecules_PeopleSearcher","landing_templateObject","TopSection","landing_templateObject2","StyledCampCompareChartContainer","landing_templateObject3","CountdownContainer","landing_templateObject4","StyledSearchTab","SearchTab","landing_templateObject5","IndexPage","autoCompleteList","gutterBottom","textAlign","atoms_Countdown","landing_Container","PeopleAvatar","Avatar_templateObject","dimension","borderwidth","StyledAppBar","AppBar","ScrollableTabs_templateObject","indicatorcolor","shouldCenter","ScrollableTabs_TabPanel","MobileTableCell","TableCell","CouncillorMeetingAttendance_templateObject","CouncillorMeetingAttendace","meetings","Table","TableHead","TableRow","align","TableBody","m","scope","meeting","meet_name","meet_type","meet_year","attended","propsType","PropTypes","array","CouncillorMeetingAttendaceContainer","personId","person_id","flatten","dcd_councillors","meeting_attendances","CouncillorMeetingAttendance","int","StyledCard","Card","Card_templateObject","PlainCard","UnstyledLink","Link","Link_templateObject","UnstyledNavLink","NavLink","Link_templateObject2","DefaultLink","Link_templateObject3","PersonElectionHistoriesTitle","PersonElectionHistories_templateObject","PersonElectionHistories","histories","to","Card_PlainCard","NavigateNext_default","political_affiliation","is_won","PersonElectionHistoriesContainer","templates_PersonElectionHistories","dcd_people_by_pk","FCPersonData_templateObject","StyledButton","FCPersonData_templateObject2","FCPersonData","fcUuid","fcUri","FCPersonData_Container","focus","string","GET_PEOPLE_PROFILE","profile_templateObject","FlexRowContainer","profile_templateObject2","CandidateHeaderContainer","profile_templateObject3","CandidateAvatorContainer","profile_templateObject4","PersonName","profile_templateObject5","YearDiv","profile_templateObject6","PersonHighlightContainer","profile_templateObject7","ElectionHistoryPaper","profile_templateObject8","ElectionHistoryContentGrid","profile_templateObject9","ElectionHistoryContentSpan","profile_templateObject10","ElectionHistoryContentHeaderSpan","_templateObject11","ElectionDetailButton","_templateObject12","ProfilePage","handleElectionDetailButton","election","yob","md","vote_percentage","params","currentTerm","councillors","lastElection","personHighlight","estimated_yob","related_organization","career","occupation","fc_uuid","marginBottom","term_to","pr","ScrollableTabs_ScrollableTabs","containers_PersonElectionHistoriesContainer","templates_FCPersonData","CouncillorMeetingAttendanceContainer","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","font","highlightStyle","OLMap","handleMapClick","_this$props","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","featuresLayer","_this$props2","dc","dc2003","dc2007","dc2011","dc2015","find","isDCDataExist","featureSource","VectorSource","GeoJSON","readFeatures","VectorLayer","source","getText","setText","getProperties","CNAME","layers","TileLayer","XYZ","url","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","getSize","Select","addInteraction","highlightedFeature","getSource","removeFeature","addFeature","bps","createBreakpoints","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","StyledDivier","Divider","DistrictCard_templateObject6","SeperatedRow","DistrictCard_templateObject7","DistrictCard","onPrevElection","ArrowBack_default","getFullYear","onNextElection","ArrowForward_default","stations","councillor","DistrictCard_Container","border","renderPrevElectionButton","renderNextElectionButton","station","MainAreas_templateObject","MainAreas","MainAreas_Container","flexWrap","alignContent","mr","WaffleChart","squareValue","theData","population","units","round","percentage","Array","split","groupIndex","squareSize","row","col","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","parseInt","_data$dc_constituenci","dc_constituencies","vote_stat","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","gender","Metrics_Container","charts_WaffleChart","FullWidthBox","district_templateObject","LowerBackgroundContainer","district_templateObject2","district_templateObject3","up","DistrictCardContainer","district_templateObject4","DistrictPage","handleCandidateSelected","handleChangeDistrict","nextProps","nextState","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","district_FlexRowContainer","sm","components_OLMap","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","StyledChip","Chip","Tag_templateObject","Tag","handleClick","CandidatesContainer_templateObject","CandidateList","CandidatesContainer_templateObject2","Candidate","CandidatesContainer_templateObject3","CandidateNumber","CandidatesContainer_templateObject4","CandidateName","CandidatesContainer_templateObject5","CandidatesContainer","election_type","CandidatesContainer_Container","IMAGE_HOST_URI","candidate_number","ConstituencyCard_templateObject","sortedTags","tags","ConstituencyCard_StyledCard","Tag_Tag","stopPropagation","containers_CandidatesContainer","Placeholder","Loading_templateObject","CentredCircularProgress","Loading_templateObject2","Loading","thickness","list_templateObject","DistrictListPage","_props$match$params","Loading_Loading","list_Container","organisms_ConstituencyCard","DCCACompareMap_templateObject","DCCACompareMap","DCCACompareMap_MapContainer","Councillor","meta","participatedOrdinary","participatedByElection","lastParticipated","votesDiff","isWon","participatedElections","electionYear","myVotes","highestVotes","max","getCouncillorMeta","term_from","substring","alignSelf","CouncillorContainer","templates_Councillor","number","UnstyledButton","Button_templateObject","GroupedBarChart","maxBy","chart","yScale","x0","x1","tickSizeInner","tickFormat","DistrictNewVoterChartContainer","filters","filterIndex","setFilterIndex","changeFilter","getDataForChat","category_1","console","chartData","increased","mostIncreasedGroup","newVotes","groupedByAge","genders","groupedByGender","types","groupedByType","newVoters","totalVoters","getMeta","DCCAOverview_templateObject","DCCAOverview","showGraph","voterData","new_voters_percentage","aggregations","new_voters","all_voters","toFixed","DCCAOverview_Container","toggleGraph","KeyboardArrowUp_default","groupVoteStat","VOTERS","NEW_VOTERS","battleground_templateObject","BreadcrumbsContainer","battleground_templateObject2","ToggleMapButton","battleground_templateObject3","BattleGroundPage","showMap","previousDistricts","intersect_area","Breadcrumbs","separator","battleground_Container","district_DCCAOverview","ExpandLess_default","Collapse","in","components_DCCACompareMap","containers_CouncillorContainer","disclaimer_templateObject","DisclaimerPage","disclaimer_Container","href","NotFoundPage","MobileAppBar_templateObject","AppBarTitle","MobileAppBar_templateObject2","MobileAppBar","MobileAppBar_StyledAppBar","Toolbar","disableGutters","Menu_default","StyledFooter","Footer_templateObject","StyledDivider","Footer_templateObject2","StyledFooterLink","Footer_templateObject3","LinkBox","Footer_templateObject4","data-href","data-width","data-layout","data-action","data-size","data-show-faces","data-share","GoogleAnalytics","initialize","withTracker","WrappedComponent","trackPage","page","set","pageview","_React$Component","HOC","inherits","createClass","pathname","currentPage","nextPage","SearchMenu_templateObject","muiName","SearchMenu_templateObject2","LeftMargin","SearchMenu_templateObject3","organisms_SearchTab","SearchDrawer_templateObject","MenuContainer","SearchDrawer_templateObject2","NavBarButton","SearchDrawer_templateObject3","SearchDrawer_Container","Close_default","organisms_SearchMenu","overview_templateObject","DistrictOverviewPage","overview_Container","ApolloClient","uri","useStyles","makeStyles","drawerPaper","Root","App_templateObject","ContentContainer","App_templateObject2","Wrapper","App_templateObject3","App","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","MuiThemeProvider_default","src_ContextStore","Provider","CssBaseline","organisms_MobileAppBar","react_router","exact","NotfoundPage","organisms_Footer","Drawer","paper","anchor","SearchDrawer","ReactDOM","render","react_router_dom","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.72dd106b.chunk.js","sourcesContent":["// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n    unelected_dc_seat: 0,\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n    unelected_dc_seat: 0,\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n    unelected_dc_seat: 0,\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n    unelected_dc_seat: 0,\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n    unelected_dc_seat: 0,\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n    unelected_dc_seat: 0,\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n    unelected_dc_seat: 0,\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n    unelected_dc_seat: 0,\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n    unelected_dc_seat: 0,\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n    unelected_dc_seat: 2,\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n    unelected_dc_seat: 1,\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n    unelected_dc_seat: 6,\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n    unelected_dc_seat: 4,\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n    unelected_dc_seat: 2,\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n    unelected_dc_seat: 2,\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n    unelected_dc_seat: 1,\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n    unelected_dc_seat: 1,\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n    unelected_dc_seat: 8,\n  },\n}\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red, green } from '@material-ui/core/colors'\nexport const headingFontFamily = 'Noto Sans TC, sans-serif'\nexport const bodyFontFamily = 'Noto Sans TC, sans-serif'\n\nexport const FONT_FAMILY = [\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: FONT_FAMILY.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n    fontSize: 20,\n    fontWeight: 500,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 22,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: FONT_FAMILY,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n    fontSize: 14,\n    lineHeight: 1.4,\n  },\n  body2: {\n    fontFamily: bodyFontFamily,\n    fontSize: 12,\n  },\n}\n\nexport const COLORS = {\n  main: {\n    text: '#000',\n    primary: '#7B68EE', // mediumslateblue\n    background: '#fff',\n  },\n  mainText: 'black',\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  camp: {\n    democracy: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    establishment: {\n      background: '#45b6ff',\n      text: 'black',\n    },\n    localist: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    other: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n    uncertain: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n  },\n  common: {\n    success: green[800],\n    failure: red[800],\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: COLORS.main.primary,\n      contrastText: COLORS.main.text,\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n  },\n})\n","import { DCREGION } from 'constants/dcregion'\n\nexport const getDistrictListUriFromTag = tag => `/district/2019/tags/${tag}`\n\nexport const getDistrictOverviewUriFromTag = code => `/district/2019/${code}`\n\nexport const getConstituencyUriFromTag = code => `/district/2019/${code}`\n\nexport const getCodeFromDistrictName = name => {\n  let code = 'A'\n  Object.keys(DCREGION).forEach(k => {\n    if (DCREGION[k].zh_hk === name) {\n      code = k\n    }\n  })\n  return code\n}\n\n/**\n * Passing a councillor object and get the meta data for it\n * (By QUERY_GET_COUNCILLOR_AND_CANDIDATES query)\n */\nexport const getCouncillorMeta = councillor => {\n  const result = {\n    participatedOrdinary: 0,\n    participatedByElection: 0,\n    lastParticipated: {\n      year: 2019,\n      type: 'ordinary',\n      votesDiff: 0,\n      votes: 0,\n      isWon: false,\n    },\n  }\n\n  // should already sorted from query\n  const participatedElections = councillor.person.candidates || []\n  result.participatedByElection = participatedElections.filter(\n    c => c.election_type === 'by-election'\n  ).length\n  result.participatedOrdinary = participatedElections.filter(\n    c => c.election_type === 'ordinary'\n  ).length\n\n  if (participatedElections.length > 0) {\n    // Filter out 2019 result\n    const e = participatedElections.filter(\n      e => !(e.year === 2019 && e.election_type === 'ordinary')\n    )[0]\n    const electionYear = e.year\n\n    const myVotes = e.constituency.candidates.find(\n      c => c.person.id === councillor.person.id && c.year === electionYear\n    ).votes\n    const highestVotes = e.constituency.candidates\n      .filter(\n        c => c.person.id !== councillor.person.id && c.year === electionYear\n      )\n      .map(c => c.votes)\n      .reduce((c, v) => Math.max(c, v), 0)\n    result.lastParticipated = {\n      year: e.year,\n      isWon: e.is_won,\n      votesDiff: myVotes - highestVotes,\n      votes: myVotes,\n      type: e.election_type,\n    }\n  }\n  // if (person.candidates) {\n  //   const sortedElections = person.candidates.sort((a, b) => b.year - a.year)\n  //   result.lastParticipatedYear = sortedElections[0].year\n  //   result.participationCount = sortedElections.length\n\n  //   let relectedCount = 0\n  //   for (let i = 0; i < sortedElections.length; i++) {\n  //     const { is_won } = sortedElections[i]\n  //     if (!is_won) {\n  //       break\n  //     }\n  //     relectedCount++\n  //   }\n\n  //   result.relectedCount = relectedCount - 1\n\n  //   sortedElections.forEach(election => {\n  //     const year = election.year\n  //     const yearResult = {}\n\n  //     yearResult.uncontested =\n  //       election.constituency.candidates.length === 1 ? true : false\n\n  //     const myVotes = election.constituency.candidates.find(\n  //       c => c.person_id === person.id\n  //     ).votes\n  //     const highestVotes = election.constituency.candidates\n  //       .filter(c => c.person_id !== person.id)\n  //       .map(c => c.votes)\n  //       .reduce((c, v) => Math.max(c, v), 0)\n\n  //     yearResult.votes = myVotes\n  //     yearResult.diff = myVotes - highestVotes\n\n  //     result[year] = yearResult\n  //   })\n  // }\n\n  // console.log(result)\n  return result\n}\n\nexport const getColorFromCamp = camp => {\n  if (!camp) return 'uncertain'\n  const mapping = {\n    泛民: 'democracy',\n    民主: 'democracy',\n    建制: 'establishment',\n    本土: 'localist',\n    傘兵: 'localist',\n    自決: 'localist',\n    其他: 'other',\n    不明: 'uncertain',\n  }\n\n  return mapping[camp] || 'uncertain'\n}\n\nexport const getColorFromPoliticalAffiliation = pa => {\n  if (!pa) return 'uncertain'\n\n  const mapping = {\n    democracy: [\n      '民主黨',\n      '公民黨',\n      '香港民主民生協進會',\n      '民協',\n      '社會民主連線',\n      '支聯會',\n      '民主動力',\n      '街坊工友服務處',\n      '街工',\n      '工黨',\n      '職工盟',\n      '新民主同盟',\n      '香港本土',\n      '獨立民主派',\n    ],\n    establishment: [\n      '民主建港協進聯盟',\n      '民建聯',\n      '新界社團聯會',\n      '新社聯',\n      '香港工會聯合會',\n      '工聯會',\n      '港九勞工社團聯會',\n      '香港經濟民生聯盟',\n      '西九新動力',\n      '自由黨',\n      '新民黨',\n      '新世紀論壇',\n    ],\n    localist: [\n      '香港眾志',\n      '青年新政',\n      '本土民主前線',\n      '東九龍社區關注組',\n      '天水圍民生關注平台',\n      '慈雲山建設力量',\n      '屯門社區關注組',\n      '長沙灣社區發展力量',\n      '社區網絡聯盟',\n      '沙田社區網絡',\n      '荃灣社區網絡',\n      '天水圍社區發展網絡',\n      '屯門社區網絡',\n      '葵青連結動力',\n      '藍田社區網絡',\n      '埔向晴天',\n      '荃灣民生動力',\n      '北區動源',\n      '維多利亞社區協會',\n    ],\n    other: ['民主思路', '新思維'],\n  }\n\n  for (let camp of Object.keys(mapping)) {\n    for (let party of mapping[camp]) {\n      if (pa.includes(party)) {\n        return camp\n      }\n    }\n  }\n\n  return 'uncertain'\n}\n\nexport const getProfilePath = person => {\n  const { name_en, name_zh, uuid } = person\n  return `/profile/${name_zh || name_en}/${uuid}`\n}\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\nimport * as d3 from 'd3'\nimport { FONT_FAMILY, COLORS } from 'ui/theme'\nimport {\n  getConstituencyUriFromTag,\n  getCodeFromDistrictName,\n} from 'utils/helper'\n\nconst ROW_HEIGHT = 20\n\nconst Styled = styled(Box)`\n  && {\n    .link {\n      text {\n        cursor: pointer;\n        color: ${COLORS.main.primary};\n        font-weight: 500;\n      }\n    }\n  }\n`\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const CAMP_COLORS = [\n    COLORS.camp.establishment.background,\n    COLORS.camp.other.background,\n    COLORS.camp.democracy.background,\n  ]\n\n  const d3Container = useRef(null)\n\n  const updateLegend = (res, svg) => {\n    const data = [\n      {\n        camp: 'establishment',\n        label: '建制',\n        color: CAMP_COLORS[0],\n        count: res.data.map(d => d['建制']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['建制'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n      // {\n      //   camp: 'other',\n      //   label: '其他',\n      //   color: CAMP_COLOR_OTH,\n      //   count: res.data.map(d => d['其他']).reduce((c, v) => c + v, 0),\n      // },\n      {\n        camp: 'democracy',\n        label: '非建制',\n        color: CAMP_COLORS[2],\n        count: res.data.map(d => d['非建制']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['非建制'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n    ]\n\n    svg.selectAll('.legend').remove()\n\n    const legend = svg\n      .selectAll('legend')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr(\n        'transform',\n        (d, i) => `translate(${i * (dimensions.width - 100)}, 8)`\n      )\n\n    legend\n      .append('text')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dy', '.5em')\n      .style('text-anchor', 'start')\n      .attr('font-size', '14px')\n      .text(function(d) {\n        return d.overhalf_count > 9\n          ? `${d.label}${d.overhalf_count}區過半數`\n          : ''\n      })\n\n    legend\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', 16)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return d.color\n      })\n\n    legend\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 29)\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return `${d.label} ${d.count}席`\n      })\n  }\n\n  const drawChart = res => {\n    const { columns, data } = res\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const margin = { top: 65, right: 15, bottom: 0, left: 50 }\n    const width = dimensions.width\n    const height = data.length * ROW_HEIGHT + margin.top + margin.bottom\n\n    const labels = ['建制', '其他', '非建制']\n    const series = d3\n      .stack()\n      .keys(columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    series.forEach((s, index) => {\n      s.forEach((d, y) => {\n        d.count = data[y][labels[index]]\n        d.index = index\n      })\n    })\n\n    const yAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(${margin.left},0)`)\n        .attr('class', 'link')\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(CAMP_COLORS)\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const isCreate = d3\n      .select(d3Container.current)\n      .select('svg')\n      .empty()\n\n    if (isCreate) {\n      const svg = d3\n        .select(d3Container.current)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height)\n\n      const bar = svg\n        .append('g')\n        .selectAll('g')\n        .data(series)\n        .enter()\n        .append('g')\n\n      bar\n        .attr('fill', d => color(d.key))\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .attr('x', d => (d.index === 0 ? x(d[0]) : x(d[1])))\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', 0)\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => x(d[0]))\n        .attr('width', d => x(d[1]) - x(d[0]))\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', '12px')\n        .attr('fill', d => {\n          switch (d.index) {\n            case 0:\n            case 2:\n              return 'black'\n            default:\n              return 'white'\n          }\n        })\n\n      // Add the y axis and add on click function to it\n      svg.append('g').call(yAxis)\n      svg.selectAll('.tick').on('click', function(d, i) {\n        const code = getCodeFromDistrictName(d)\n        window.location = getConstituencyUriFromTag(code)\n      })\n\n      svg.append('g').call(xAxis)\n\n      // middle line\n      const middle = (width + margin.left - margin.right) / 2\n      svg\n        .append('line')\n        .attr('x1', middle + 1)\n        .attr('y1', margin.top)\n        .attr('x2', middle + 1)\n        .attr('y2', height - margin.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#3a3a3a')\n        .attr('opacity', '0.6')\n        .style('stroke-dasharray', '10, 4')\n\n      //Legend\n      updateLegend(res, svg)\n    } else {\n      // Update chart\n      const svg = d3.select(d3Container.current).select('svg')\n\n      const bar = svg\n        .select('g')\n        .selectAll('g')\n        .data(series)\n\n      bar\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => {\n          return x(d[0])\n        })\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', d => x(d[1]) - x(d[0]))\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('opacity', 0)\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n      bar\n        .selectAll('text')\n        .transition()\n        .delay(function(d) {\n          return 800 + Math.random() * 500\n        })\n        .attr('opacity', 1)\n\n      updateLegend(res, svg)\n    }\n  }\n\n  const updateWindowSize = () => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', updateWindowSize)\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    updateWindowSize()\n  }, [])\n\n  return (\n    <Styled>\n      <div ref={d3Container} style={{ height: 'auto', width: '100%' }}></div>\n    </Styled>\n  )\n}\n","import React from 'react'\nimport Slider from '@material-ui/core/Slider'\n\nexport default props => {\n  return <Slider {...props} />\n}\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${COLORS.primary};\n  }\n`\n\nexport const SuccessText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.success};\n    }\n  }\n`\n\nexport const FailureText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.failure};\n    }\n  }\n`\n\nexport default props => {\n  return <Typography {...props} />\n}\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Slider from 'components/atoms/Slider'\nimport Text from 'components/atoms/Text'\n\nimport Columns from 'components/atoms/Columns'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\n\nconst SliderContainer = styled(Box)`\n  && {\n    padding-left: 16px;\n    flex-grow: 1;\n    padding-right: 16px;\n  }\n`\n\nconst Label = styled(Text)`\n  && {\n    min-width: 80px;\n  }\n`\n\nexport const ValueSlider = props => {\n  const { value, setValue } = props\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue)\n  }\n\n  const { label, className, color } = props\n  return (\n    <div className={className}>\n      <Columns>\n        <Label>{label}</Label>\n        <SliderContainer>\n          <Slider value={value} onChange={handleSliderChange} color={color} />\n        </SliderContainer>\n        <Text>{value}%</Text>\n      </Columns>\n    </div>\n  )\n}\n\nValueSlider.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.number.isRequired,\n  setValue: PropTypes.func.isRequired,\n}\n\nexport default ValueSlider\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\n\nTabBar.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n  selectedTab: PropTypes.number.isRequired,\n  setSelectedTab: PropTypes.func.isRequired,\n}\n\nexport default function TabBar(props) {\n  const { titles, selectedTab, setSelectedTab } = props\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n\n  return (\n    <>\n      <Tabs value={selectedTab} onChange={handleChange} centered={true}>\n        {titles.map((title, index) => (\n          <Tab\n            label={title}\n            id={`scrollable-auto-tab-${index}`}\n            key={index}\n            aria-controls={`scrollable-auto-tabpanel-${index}`}\n          />\n        ))}\n      </Tabs>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Typography from '@material-ui/core/Typography'\nimport TabBar from 'components/molecules/TabBar'\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n}\n\nexport default function ScrollableTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(0)\n  const { titles, children } = props\n\n  return (\n    <>\n      <TabBar\n        titles={titles}\n        setSelectedTab={setSelectedTab}\n        selectedTab={selectedTab}\n      />\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport ValueSlider from 'components/molecules/ValueSlider'\nimport CheckBox from 'components/molecules/CheckBox'\nimport PropTypes from 'prop-types'\nimport Tabs from 'components/organisms/Tabs'\nimport { COLORS } from 'ui/theme'\nimport Text from 'components/atoms/Text'\nimport Rows from 'components/atoms/Rows'\nimport { Box } from '@material-ui/core'\n\nconst StyledValueSlider = styled(ValueSlider)`\n  && {\n    margin-top: 8px;\n    .MuiSlider-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst TabSection = styled(Box)`\n  && {\n    padding: 8px 0 0;\n  }\n`\n\nconst StyledCheckBox = styled(CheckBox)`\n  && {\n    .MuiSvgIcon-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nPredictionChartPanel.propTypes = {\n  settings: PropTypes.object.isRequired,\n  setSettings: PropTypes.func.isRequired,\n}\n\nfunction PredictionChartPanel(props) {\n  const { settings, setSettings } = props\n\n  const setSettingConfigFunc = field => flag => {\n    setSettings({\n      config: Object.assign(settings.config, { [field]: flag }),\n      camp_rate: [...settings.camp_rate],\n      vote_rate: [...settings.vote_rate],\n    })\n  }\n  const setSettingFunc = (x, y) => value =>\n    setSettings({\n      config: {\n        ...settings.config,\n      },\n      camp_rate: settings.camp_rate.map((v, i) =>\n        x === 0 && y === i ? value : v\n      ),\n      vote_rate: settings.vote_rate.map((v, i) =>\n        x === 1 && y === i ? value : v\n      ),\n    })\n  return (\n    <div>\n      <Tabs titles={['投票取向', '投票率', '設定']} buttonLayout=\"centered\">\n        <TabSection>\n          <Text variant=\"h5\">非建制支持率</Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.camp_rate[0]}\n            setValue={setSettingFunc(0, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.camp_rate[1]}\n            setValue={setSettingFunc(0, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.camp_rate[2]}\n            setValue={setSettingFunc(0, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n        <TabSection>\n          <Text variant=\"h5\">已登記選民投票率</Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.vote_rate[0]}\n            setValue={setSettingFunc(1, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.vote_rate[1]}\n            setValue={setSettingFunc(1, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.vote_rate[2]}\n            setValue={setSettingFunc(1, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n        <TabSection>\n          <Rows>\n            <StyledCheckBox\n              label=\"參考上一屆資料\"\n              checked={settings.config.reference_last_election}\n              setChecked={setSettingConfigFunc('reference_last_election')}\n            ></StyledCheckBox>\n            <StyledCheckBox\n              label=\"自動當選議席加入對手\"\n              checked={settings.config.auto_won_add_components}\n              setChecked={setSettingConfigFunc('auto_won_add_components')}\n            ></StyledCheckBox>\n          </Rows>\n        </TabSection>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default PredictionChartPanel\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FormControlLabel, Checkbox } from '@material-ui/core/'\n\nCheckBox.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  setChecked: PropTypes.func.isRequired,\n}\n\nexport default function CheckBox(props) {\n  const { label, checked, setChecked, className } = props\n\n  function handleChange(event) {\n    setChecked(event.target.checked)\n  }\n\n  return (\n    <>\n      <FormControlLabel\n        className={className}\n        control={<Checkbox checked={checked} onChange={handleChange} />}\n        label={label}\n      />\n    </>\n  )\n}\n","// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nid\nname_zh\nname_en\ndistrict {\n  dc_code\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n  type\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      intersect_area\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }  \n}\n`\n\nexport const QUERY_GET_CONSTITUENCIES_BY_TAG = gql`\nquery($year: Int!, $tag: String!) {\n  dcd_constituencies(\n    where: { year: { _eq: $year }, tags: { tag: {_eq: $tag} } }\n    order_by: {code: asc }\n  ) {\n    ${CONSTITUENCIES_DATA}\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_DISTRICT = gql`\n  query($year: Int!, $code: String!) {\n    dcd_districts( where: { dc_code: { _eq: $code} }) {\n      area_code\n      area_name_zh\n      dc_code\n      dc_name_zh\n      constituencies( where: { year: { _eq: $year } }, order_by: {code: asc} ) {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_AREA = gql`\n  query {\n    dcd_districts {\n      area_code\n      area_name_zh\n      dc_code\n      dc_name_zh\n      constituencies(where: { year: { _eq: 2019 } }) {\n        code\n        name_zh\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_ELECTIONS = gql`\n  query get_person_elections($person_id: Int!) {\n    dcd_people_by_pk(id: $person_id) {\n      candidates(order_by: { year: desc }) {\n        year\n        constituency {\n          name_zh\n          code\n        }\n        election_type\n        camp\n        political_affiliation\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_MEETING_ATTENDANCES = gql`\n  query get_meeting_attendance($person_id: Int!) {\n    dcd_councillors(where: { person: { id: { _eq: $person_id } } }) {\n      year\n      cacode\n      term_from\n      term_to\n      career\n      district {\n        dc_name_zh\n      }\n      political_affiliation\n      post\n      constituency {\n        id\n        name_zh\n      }\n      meeting_attendances(\n        order_by: { meeting: { meet_year: desc }, total: desc }\n      ) {\n        meeting {\n          meet_name\n          meet_type\n          meet_year\n        }\n        attended\n        total\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_COUNCILLOR = gql`\n  query fetch_councillors($year: Int!, $code: String!) {\n    dcd_councillors(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { term_to: desc }\n    ) {\n      year\n      term_to\n      term_from\n      political_affiliation\n      constituency {\n        name_zh\n        name_en\n        code\n      }\n      person {\n        id\n        name_en\n        name_zh\n        uuid\n        candidates(order_by: { year: desc }) {\n          votes\n          is_won\n          year\n          cacode\n          election_type\n          constituency {\n            year\n            name_en\n            name_zh\n            candidates {\n              person {\n                id\n                name_en\n                name_zh\n              }\n              year\n              election_type\n              votes\n              political_affiliation\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CANDIDATES = gql`\n  query fetch_candidates($year: Int!, $code: String!) {\n    dcd_candidates(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { candidate_number: asc }\n    ) {\n      candidate_number\n      is_won\n      political_affiliation\n      election_type\n      camp\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n        related_organization\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONSTITUENCY_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_constituencies(where: { year: { _eq: $year } }) {\n      code\n      predecessors(limit: 1, order_by: { intersect_area: desc }) {\n        predecessor {\n          code\n          candidates {\n            camp\n            votes\n            is_won\n          }\n        }\n      }\n      vote_stats {\n        type\n        subtype\n        category_1\n        category_2\n        count\n      }\n    }\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, CircularProgress } from '@material-ui/core'\nimport Text from 'components/atoms/Text'\nimport styled from 'styled-components'\n\nLoadingButton.propTypes = {\n  onClick: PropTypes.func,\n  isLoading: PropTypes.bool.isRequired,\n  label: PropTypes.string.isRequired,\n}\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  && {\n    margin: 4px;\n  }\n`\n\nexport default function LoadingButton(props) {\n  const { label, isLoading, onClick, className } = props\n\n  return (\n    <>\n      <Button\n        variant=\"outlined\"\n        className={className}\n        disabled={isLoading}\n        onClick={onClick}\n      >\n        {isLoading && <StyledCircularProgress size={14} color=\"secondary\" />}\n        <Text>{label}</Text>\n      </Button>\n    </>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from 'constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/atoms/charts/StackedNormalizedHorizontalBarChart'\nimport PredictionChartPanel from 'components/organisms/PredictionChartPanel'\nimport { QUERY_GET_CONSTITUENCY_CAMP_DATA } from 'queries/gql'\nimport LoadingButton from 'components/molecules/LoadingButton'\nimport Text from 'components/atoms/Text'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst PredictionChartHeader = styled(Box)`\n  && {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst StyledLoadingButton = styled(LoadingButton)`\n  && {\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    padding: 5px 16px;\n    :hover {\n      color: ${COLORS.main.primary};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data, sortFunc) {\n  const res = {\n    data: data\n      .map(d => {\n        return {\n          name: DCREGION[d.code].zh_hk,\n          建制: DCREGION[d.code].unelected_dc_seat + (d.count['建制'] || 0), // 當然議員\n          非建制: d.count['泛民'] || 0,\n          其他: d.count['其他'] || 0,\n          total: Object.values(d.count).reduce((acc, c) => {\n            acc += c\n            return acc\n          }, 0),\n        }\n      })\n      .sort(\n        sortFunc\n          ? sortFunc\n          : (a, b) => b['建制'] / b.total - a['建制'] / a.total\n      ), // default sort by established count\n    columns: ['name', '建制', '其他', '非建制'],\n  }\n  return res\n}\n\nconst sortByDefaultChartOrderFunc = defaultChartData => (a, b) => {\n  const indexFromOriginalChartData = record => {\n    let index = defaultChartData.length\n    defaultChartData.data.forEach((v, i) => {\n      if (v.name === record.name) {\n        index = i\n        return i\n      }\n    })\n    return index\n  }\n  return indexFromOriginalChartData(a) - indexFromOriginalChartData(b)\n}\n\n// const AGE_GROUP_YOUNG = ['18-20', '21-25', '26-30']\nconst AGE_GROUP_MIDDLE = ['31-35', '36-40', '41-45', '46-50', '51-55', '56-60']\nconst AGE_GROUP_OLD = ['61-65', '66-70', '71+']\n\nconst STAT_TYPE_NEW_VOTERS = 'NEW_VOTERS'\nconst STAT_TYPE_ALL_VOTERS = 'VOTERS'\n\nconst groupExpectDataByRegionAndCamp = (constituencies, settings) => {\n  const getVoteCountBySetting = (stat, camp, settings) => {\n    let settingIndex = 0\n    if (AGE_GROUP_MIDDLE.indexOf(stat.category_2) >= 0) {\n      settingIndex = 1\n    } else if (AGE_GROUP_OLD.indexOf(stat.category_2) >= 0) {\n      settingIndex = 2\n    }\n\n    const votePercentage = settings.vote_rate[settingIndex] / 100.0\n    let yellowPercentage = settings.camp_rate[settingIndex] / 100.0\n    if (camp === '建制') {\n      yellowPercentage = 1 - yellowPercentage\n    } else if (camp === '其他') {\n      yellowPercentage = 0 // TODO: how to calculate this?\n    }\n\n    return stat.count * yellowPercentage * votePercentage\n  }\n  const getProjectedVotes = (type, camp, settings, voteStats) => {\n    return voteStats\n      .filter(s => s.subtype === type)\n      .map(s => getVoteCountBySetting(s, camp, settings))\n      .reduce((c, v) => c + v, 0)\n  }\n  // First calculate the winner\n  const expectedResult = constituencies.map(constituency => {\n    let camp = '建制' // default camp = 建制 is this good?\n\n    if (\n      constituency.predecessors &&\n      constituency.predecessors.length > 0 &&\n      settings.config.reference_last_election\n    ) {\n      // if there is predecessor, we use only the new voters\n\n      if (\n        constituency.predecessors[0].predecessor.candidates.length === 1 &&\n        settings.config.auto_won_add_components\n      ) {\n        const camps = ['泛民', '建制', '其他']\n        const onlyCandidate =\n          constituency.predecessors[0].predecessor.candidates[0]\n        camps.forEach(camp => {\n          // mock the votes for the last election\n          const votes =\n            getProjectedVotes(\n              STAT_TYPE_ALL_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            ) -\n            getProjectedVotes(\n              STAT_TYPE_NEW_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            )\n\n          if (onlyCandidate.camp !== camp) {\n            constituency.predecessors[0].predecessor.candidates.push({\n              camp,\n              votes,\n              mock: true,\n            })\n          } else {\n            onlyCandidate.votes = votes\n          }\n        })\n      }\n      let maxVote = 0\n      constituency.predecessors[0].predecessor.candidates.forEach(c => {\n        const projectedVotes =\n          c.votes +\n          getProjectedVotes(\n            STAT_TYPE_NEW_VOTERS,\n            c.camp,\n            settings,\n            constituency.vote_stats\n          )\n        if (\n          projectedVotes >= maxVote &&\n          (!c.mock || settings.config.auto_won_add_components)\n        ) {\n          camp = c.camp\n          maxVote = projectedVotes\n        }\n      })\n    } else {\n      // else we calculate from all voters\n      const establishCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '建制',\n        settings,\n        constituency.vote_stats\n      )\n      const democracyCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '泛民',\n        settings,\n        constituency.vote_stats\n      )\n      if (democracyCount > establishCount) {\n        camp = '泛民'\n      }\n    }\n\n    return {\n      cacode: constituency.code,\n      camp,\n    }\n  })\n  const byCodes = _.groupBy(expectedResult, c => c.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nconst CampCompareChartContainer = props => {\n  const { className } = props\n  const [predictEnabled, setPredictEnabled] = React.useState(false)\n  const [settings, setSettings] = React.useState({\n    config: {\n      auto_won_add_components: true,\n      reference_last_election: true,\n    },\n    camp_rate: [60, 50, 40],\n    vote_rate: [40, 40, 40],\n  })\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const dataFroGraph = groupDataByRegionAndCamp(data.dcd_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n\n        return (\n          <Query\n            query={QUERY_GET_CONSTITUENCY_CAMP_DATA}\n            variables={{ year: 2019 }}\n          >\n            {({ loading, error, data }) => {\n              let d3Data = dataForD3\n\n              if (!loading && predictEnabled) {\n                const expectedDataForGraph = groupExpectDataByRegionAndCamp(\n                  data.dcd_constituencies,\n                  settings\n                )\n                d3Data = convertToD3Compatible(\n                  expectedDataForGraph,\n                  sortByDefaultChartOrderFunc(dataForD3)\n                )\n              }\n\n              return (\n                <Container className={className}>\n                  <PredictionChartHeader>\n                    <Text variant=\"h5\">\n                      {predictEnabled\n                        ? '2019選舉結果預測'\n                        : '現屆區議會勢力分布'}\n                    </Text>\n                    {!predictEnabled && (\n                      <StyledLoadingButton\n                        style={{ float: 'right' }}\n                        isLoading={loading}\n                        onClick={() => setPredictEnabled(true)}\n                        label=\"預測結果\"\n                      />\n                    )}\n                  </PredictionChartHeader>\n                  {!loading && predictEnabled && (\n                    <PredictionChartPanel\n                      settings={settings}\n                      setSettings={setSettings}\n                    />\n                  )}\n                  <StackedNormalizedHorizontalBarChart\n                    data={d3Data}\n                  ></StackedNormalizedHorizontalBarChart>\n                </Container>\n              )\n            }}\n          </Query>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport { Typography, Grid } from '@material-ui/core'\n\nconst TimeGrid = styled(Grid)`\n  && {\n    text-align: center;\n  }\n`\n\nconst Time = styled(Typography)`\n  && {\n    font-weight: 700;\n  }\n`\n\nconst Unit = styled(Typography)`\n  && {\n  }\n`\n\nclass Countdown extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n    }\n  }\n\n  componentDidMount() {\n    // update every second\n    this.interval = setInterval(() => {\n      const date = this.calculateCountdown(this.props.date)\n      date ? this.setState(date) : this.stop()\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.stop()\n  }\n\n  calculateCountdown(endDate) {\n    let diff = (Date.parse(new Date(endDate)) - Date.parse(new Date())) / 1000\n\n    // clear countdown when date is reached\n    if (diff <= 0) return false\n\n    const timeLeft = {\n      years: 0,\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n      millisec: 0,\n    }\n\n    // calculate time difference between now and expected date\n    if (diff >= 365.25 * 86400) {\n      // 365.25 * 24 * 60 * 60\n      timeLeft.years = Math.floor(diff / (365.25 * 86400))\n      diff -= timeLeft.years * 365.25 * 86400\n    }\n    if (diff >= 86400) {\n      // 24 * 60 * 60\n      timeLeft.days = Math.floor(diff / 86400)\n      diff -= timeLeft.days * 86400\n    }\n    if (diff >= 3600) {\n      // 60 * 60\n      timeLeft.hours = Math.floor(diff / 3600)\n      diff -= timeLeft.hours * 3600\n    }\n    if (diff >= 60) {\n      timeLeft.min = Math.floor(diff / 60)\n      diff -= timeLeft.min * 60\n    }\n    timeLeft.sec = diff\n\n    return timeLeft\n  }\n\n  stop() {\n    clearInterval(this.interval)\n  }\n\n  addLeadingZeros(value) {\n    value = String(value)\n    while (value.length < 2) {\n      value = '0' + value\n    }\n    return value\n  }\n\n  render() {\n    const countDown = this.state\n\n    return (\n      <>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.days)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.hours)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.min)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.sec)}</Time>\n          </TimeGrid>\n        </Grid>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">天</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">小時</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">分鐘</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">秒</Unit>\n          </TimeGrid>\n        </Grid>\n      </>\n    )\n  }\n}\n\nCountdown.defaultProps = {\n  date: new Date(),\n}\n\nexport default Countdown\n","import styled from 'styled-components'\nimport Columns from 'components/atoms/Columns'\nimport { COLORS } from 'ui/theme'\n\nexport const Alert = styled(Columns)`\n  && {\n    width: 100%;\n    padding: 4px 16px 1px;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n  }\n`\n","import * as turf from '@turf/turf'\n\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getAllFeaturesFromPoint = ({ lng, lat }) => {\n  const pt = turf.point([lng, lat])\n  // TODO: consider using different year in future\n  // but need to take care of app size\n  const result = {\n    code: null,\n    year: 2019,\n  }\n  for (let i = 0; i < dc2019.features.length; i++) {\n    const feature = dc2019.features[i]\n    const poly = turf.polygon(feature.geometry.coordinates)\n    if (turf.booleanPointInPolygon(pt, poly)) {\n      result.code = feature.properties.CACODE\n      break\n    }\n  }\n  return result\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport match from 'autosuggest-highlight/match'\nimport parse from 'autosuggest-highlight/parse'\nimport TextField from '@material-ui/core/TextField'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport { getAllFeaturesFromPoint } from 'utils/features'\nimport _ from 'lodash'\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          classes: {\n            input: classes.input,\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton color=\"primary\" aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.label, query)\n  const parts = parse(suggestion.label, matches)\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      {parts.map((part, index) =>\n        part.highlight ? (\n          <span key={String(index)} style={{ fontWeight: 500 }}>\n            {part.text}\n          </span>\n        ) : (\n          <strong key={String(index)} style={{ fontWeight: 300 }}>\n            {part.text}\n          </strong>\n        )\n      )}\n    </MenuItem>\n  )\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#7B68EE',\n  },\n})\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    value: '',\n    suggestions: [],\n  }\n\n  debounced = null\n\n  async getSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    const inputLength = inputValue.length\n\n    if (inputLength > 0) {\n      const records = await AddressParser.parse(inputValue)\n      const result = records\n        .filter((_, index) => index < 10)\n        .map(record => ({\n          coordinate: record.coordinate(),\n          label: record.fullAddress(AddressParser.Address.LANG_ZH),\n        }))\n\n      return result\n    }\n\n    return []\n  }\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    if (this.debounced) {\n      this.debounced.cancel()\n    }\n    this.debounced = _.debounce(() => {\n      this.getSuggestions(value).then(result => {\n        this.setState({\n          suggestions: result,\n        })\n      })\n    }, 300)\n    this.debounced()\n  }\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    })\n  }\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    })\n  }\n\n  handleSuggestionSelected = (\n    event,\n    { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }\n  ) => {\n    const constituency = getAllFeaturesFromPoint(suggestion.coordinate)\n    // TODO: better to use action to dispatch this event\n    this.props.handleAddressSelected(constituency)\n\n    this.setState({\n      value: '',\n    })\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      onSuggestionSelected: this.handleSuggestionSelected,\n      getSuggestionValue,\n      renderSuggestion,\n    }\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: '輸入屋苑自動搜尋 !',\n            value: this.state.value,\n            onChange: this.handleChange('value'),\n            InputLabelProps: {\n              shrink: true,\n            },\n          }}\n          theme={{\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n            input: classes.suggestInput,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper\n              square\n              {...options.containerProps}\n              style={{\n                width: '100%',\n              }}\n            >\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    )\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(IntegrationAutosuggest)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport { Box, TextField } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Avatar from '@material-ui/core/Avatar'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport { withApollo } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport _ from 'lodash'\nimport styled from 'styled-components'\n\nconst GET_PEOPLE = gql`\n  query($nameRegex: String) {\n    dcd_people(\n      where: {\n        _or: [\n          { name_zh: { _like: $nameRegex } }\n          { name_en: { _like: $nameRegex } }\n        ]\n      }\n      limit: 50\n    ) {\n      id\n      uuid\n      name_zh\n      name_en\n    }\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton color=\"primary\" aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nconst styles = theme => ({\n  root: {\n    height: 100,\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#ffd731',\n  },\n})\n\nconst PeopleSearcher = props => {\n  const { classes, handlePeopleSelected } = props\n  const [value, setValue] = useState('')\n  const [suggestions, setSuggestions] = useState([])\n  let debounced = null\n\n  const onChange = (event, { newValue }) => {\n    setValue(newValue)\n  }\n\n  const fetchUsers = async keyword => {\n    const { data } = await props.client.query({\n      query: GET_PEOPLE,\n      variables: {\n        nameRegex: `%${keyword}%`,\n      },\n    })\n    return data.dcd_people\n  }\n\n  const onSuggestionsFetchRequested = ({ value }) => {\n    if (debounced) {\n      debounced.cancel()\n    }\n    debounced = _.debounce(() => {\n      fetchUsers(value).then(result => {\n        setSuggestions(result)\n      })\n    }, 500)\n    debounced()\n  }\n\n  const onSuggestionsClearRequested = () => {\n    setSuggestions([])\n  }\n\n  const getSuggestionValue = suggestion => {\n    return suggestion.name_zh ? suggestion.name_zh : suggestion.name_en\n  }\n\n  const renderSuggestion = (suggestion, { query, isHighlighted }) => {\n    const homeUrl = process.env.REACT_APP_HOST_URI\n    const { uuid, name_zh, name_en } = suggestion\n    const avatarPath = uuid\n      ? `${homeUrl}/static/images/avatar/${uuid}.jpg`\n      : `${homeUrl}/static/images/avatar/default.png`\n\n    // keyword this is not accessible here. so define the style here\n    const suggestionNameStyle = {\n      marginLeft: '20px',\n      lineHeight: '45px',\n    }\n    const boldStyle = {\n      fontWeight: '800',\n    }\n    const selectedSuggestionNameStyle = {\n      ...suggestionNameStyle,\n      ...boldStyle,\n    }\n\n    return (\n      <MenuItem selected={isHighlighted} component=\"div\">\n        <Avatar\n          src={avatarPath}\n          imgProps={{\n            onError: e => {\n              e.target.src = `${homeUrl}/static/images/avatar/default.png`\n            },\n          }}\n          style={{\n            width: '48px',\n            height: '48px',\n            borderRadius: 0,\n          }}\n        />\n        <span\n          style={\n            isHighlighted ? suggestionNameStyle : selectedSuggestionNameStyle\n          }\n        >\n          {name_zh ? name_zh : name_en}\n        </span>\n      </MenuItem>\n    )\n  }\n\n  const renderSuggestionsContainer = options => (\n    <Paper\n      square\n      {...options.containerProps}\n      style={{\n        width: '100%',\n      }}\n    >\n      {options.children}\n    </Paper>\n  )\n\n  const onSuggestionSelected = (evt, { suggestion }) => {\n    handlePeopleSelected(suggestion)\n  }\n\n  // Autosuggest will pass through all these props to the input.\n  const inputProps = {\n    classes,\n    placeholder: '輸入候選人姓名...',\n    value,\n    onChange,\n    InputLabelProps: {\n      shrink: true,\n    },\n  }\n\n  // Finally, render it!\n  return (\n    <Container>\n      <Autosuggest\n        suggestions={suggestions}\n        onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={onSuggestionsClearRequested}\n        onSuggestionSelected={onSuggestionSelected}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        renderSuggestionsContainer={renderSuggestionsContainer}\n        inputProps={inputProps}\n        renderInputComponent={renderInputComponent}\n        theme={{\n          suggestionsList: classes.suggestionsList,\n          suggestion: classes.suggestion,\n          input: classes.suggestInput,\n        }}\n      />\n    </Container>\n  )\n}\n\nPeopleSearcher.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withApollo(withStyles(styles)(PeopleSearcher))\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\n\nconst AreasTabs = styled(Tabs)`\n  && {\n  }\n`\n\nconst AreasTab = styled(Tab)`\n  && {\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`district-tabpanel-${index}`}\n      aria-labelledby={`district-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n}\n\nexport default function AreaTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.expanded ? 0 : false\n  )\n  const [expanded, setExpanded] = React.useState(props.expanded)\n  const { titles, children } = props\n\n  function handleChange(event, newValue) {\n    if (selectedTab === newValue) {\n      setExpanded(!expanded)\n      setSelectedTab(false)\n    } else {\n      setExpanded(true)\n      setSelectedTab(newValue)\n    }\n  }\n\n  return (\n    <>\n      <AreasTabs value={selectedTab} onChange={handleChange} centered>\n        {titles.map((title, index) => (\n          <AreasTab\n            label={title}\n            id={`district-tab-${index}`}\n            key={index}\n            aria-controls={`district-tabpanel-${index}`}\n          />\n        ))}\n      </AreasTabs>\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={!expanded || selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import React from 'react'\nimport { Typography, Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n} from '@material-ui/core'\nimport _ from 'lodash'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_AREA } from 'queries/gql'\nimport Grid from '@material-ui/core/Grid'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport AreaTabs from 'components/organisms/AreaTabs'\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n} from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n    text-align: left;\n  }\n`\n\nconst DistrictExpansionPanel = styled(ExpansionPanel)`\n  && {\n    margin: 5px 0;\n    box-shadow: none;\n  }\n`\n\nconst DistrictExpansionPanelSummary = styled(ExpansionPanelSummary)`\n  && {\n  }\n`\n\nconst DistrictExpansionPanelDetails = styled(ExpansionPanelDetails)`\n  && {\n    padding: 16px;\n  }\n`\n\nconst DistrictWrapper = styled(Grid)`\n  && {\n    margin: 0 5px;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  const renderDCCA = district => {\n    return (\n      <div>\n        <DistrictContainer\n          key={district.dc_code}\n          onClick={() => {\n            dispatch({ type: DRAWER_CLOSE })\n            props.history.push(getDistrictOverviewUriFromTag(district.dc_code))\n          }}\n          color=\"secondary\"\n        >\n          <Typography variant=\"h5\">總覽</Typography>\n        </DistrictContainer>\n        {district.constituencies.map(c => {\n          return (\n            <DistrictContainer\n              key={c.code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(getConstituencyUriFromTag(c.code))\n              }}\n              color=\"secondary\"\n            >\n              <Typography variant=\"h5\">{c.name_zh}</Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const renderArea = area => {\n    return (\n      <DistrictWrapper key={area.area_code}>\n        {area.districts.map((d, index) => (\n          <DistrictExpansionPanel key={`district-panel-${d.dc_code}`}>\n            <DistrictExpansionPanelSummary\n              aria-controls=\"panel1a-content\"\n              id=\"panel1a-header\"\n              expandIcon={<ExpandMoreIcon />}\n            >\n              <Typography variant=\"h5\">{d.dc_name_zh}</Typography>\n            </DistrictExpansionPanelSummary>\n            <DistrictExpansionPanelDetails>\n              {renderDCCA(d)}\n            </DistrictExpansionPanelDetails>\n          </DistrictExpansionPanel>\n        ))}\n      </DistrictWrapper>\n    )\n  }\n\n  return (\n    <Container>\n      <Query query={QUERY_GET_AREA}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const areas = _.uniqBy(\n            data.dcd_districts.map(d => ({\n              area_code: d.area_code,\n              area_name_zh: d.area_name_zh,\n            })),\n            'area_code'\n          )\n\n          const areasWithDistricts = areas.map(a => ({\n            ...a,\n            districts: data.dcd_districts.filter(\n              d => d.area_name_zh === a.area_name_zh\n            ),\n          }))\n\n          const areaNames = areas.map(a => a.area_name_zh)\n\n          return (\n            <AreaTabs titles={areaNames} expanded={props.expanded}>\n              {areasWithDistricts.map(a => {\n                return renderArea(a)\n              })}\n            </AreaTabs>\n          )\n        }}\n      </Query>\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport AddressSearcher from 'components/molecules/AddressSearcher'\nimport PeopleSearcher from 'components/molecules/PeopleSearcher'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport { COLORS } from 'ui/theme'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport { getProfilePath } from 'utils/helper'\nimport DistrictSelector from 'components/molecules/DistrictSelector'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    position: relative;\n    left: 0;\n    right: 0;\n    padding: 21px 16px 21px 16px;\n  }\n`\n\nconst TabContainer = styled(Box)`\n  && {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    margin: 10px 10px 15px 10px;\n    padding-bottom: 15px;\n    color: ${props =>\n      props.active === 'active' ? COLORS.main.primary : COLORS.main.text};\n    border-bottom: ${props =>\n      props.active === 'active' ? `1px solid ${COLORS.main.primary}` : 'none'};\n    border-radius: 0px;\n  }\n`\n\nfunction SearchTab(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.selectedTab || 'district'\n  )\n  function handleAddressSelected(result) {\n    /* TODO:\n      Use context (?) to store the Global district result array\n      When user select click previous button in district page,\n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${result.year}/${result.code}`)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function handlePeopleSelected(person) {\n    const path = getProfilePath(person)\n    props.history.push(path)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function onTabSelected(tab) {\n    return () => {\n      setSelectedTab(tab)\n    }\n  }\n\n  function renderSearchDistrict() {\n    return (\n      <ContentRowContainer>\n        <DistrictSelector expanded={false} />\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  function renderSearchPeople() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <PeopleSearcher handlePeopleSelected={handlePeopleSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  return (\n    <Container>\n      <TabContainer>\n        <TabButton\n          active={selectedTab === 'district' ? 'active' : 'inactive'}\n          onClick={onTabSelected('district')}\n        >\n          <Typography variant=\"h3\">找選區</Typography>\n        </TabButton>\n        <TabButton\n          active={selectedTab === 'people' ? 'active' : 'inactive'}\n          onClick={onTabSelected('people')}\n        >\n          <Typography variant=\"h3\">找候選人</Typography>\n        </TabButton>\n      </TabContainer>\n      {selectedTab === 'district'\n        ? renderSearchDistrict()\n        : renderSearchPeople()}\n    </Container>\n  )\n}\n\nexport default withRouter(SearchTab)\n","import React, { Component } from 'react'\nimport CampCompareChartContainer from 'components/templates/CampCompareChartContainer'\nimport Countdown from 'components/atoms/Countdown'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport { Alert } from 'components/atoms/Alert'\nimport SearchTab from 'components/organisms/SearchTab'\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 16px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst StyledCampCompareChartContainer = styled(CampCompareChartContainer)`\n  && {\n    margin-top: 16px;\n  }\n`\nconst CountdownContainer = styled.div`\n  && {\n    width: 100%;\n    margin: 0 auto 16px;\n  }\n`\n\nconst StyledSearchTab = styled(SearchTab)`\n  && {\n    padding: 100px;\n  }\n`\n\nconst electionDate = 'Nov 24, 2019 07:30:00'\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n  onTabSelected(type) {}\n\n  render() {\n    return (\n      <>\n        <Alert>\n          <Typography variant=\"h6\" gutterBottom>\n            區議會選舉提名期現已展開，至10月17日結束。\n          </Typography>\n        </Alert>\n        <TopSection>\n          {Date.parse(new Date(electionDate)) > Date.parse(new Date()) && (\n            <CountdownContainer>\n              <Typography\n                variant=\"h5\"\n                style={{ textAlign: 'center' }}\n                gutterBottom\n              >\n                距離投票日\n              </Typography>\n              <Countdown date={electionDate} />\n            </CountdownContainer>\n          )}\n          {/* <LandingIcon /> */}\n        </TopSection>\n        <Container>\n          <StyledSearchTab />\n          <StyledCampCompareChartContainer />\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default IndexPage\n","import styled from 'styled-components'\nimport Avatar from '@material-ui/core/Avatar'\nimport { COLORS } from 'ui/theme'\n\nexport const PeopleAvatar = styled(Avatar)`\n  && {\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    border: ${props => props.borderwidth}px\n      ${props => props.camp && COLORS.camp[props.camp].background} solid;\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    background: white;\n    .MuiTabs-indicator {\n      background: ${props => props.indicatorcolor || 'black'};\n    }\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n  buttonLayout: PropTypes.oneOf(['left', 'centered']),\n}\n\nScrollableTabs.defaultProps = {\n  buttonLayout: 'left',\n}\n\nexport default function ScrollableTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(0)\n  const { titles, children, buttonLayout, indicatorcolor } = props\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n\n  const shouldCenter = buttonLayout === 'centered' ? true : false\n\n  return (\n    <>\n      <StyledAppBar position=\"static\" indicatorcolor={indicatorcolor}>\n        <Tabs\n          value={selectedTab}\n          onChange={handleChange}\n          centered={shouldCenter}\n        >\n          {titles.map((title, index) => (\n            <Tab\n              label={title}\n              id={`scrollable-auto-tab-${index}`}\n              key={index}\n              aria-controls={`scrollable-auto-tabpanel-${index}`}\n            />\n          ))}\n        </Tabs>\n      </StyledAppBar>\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport styled from 'styled-components'\n\nconst MobileTableCell = styled(TableCell)`\n  && {\n    padding: 8px 10px;\n  }\n`\n\nconst CouncillorMeetingAttendace = props => {\n  const { meetings } = props\n\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <MobileTableCell align=\"left\">會議</MobileTableCell>\n          <MobileTableCell align=\"left\">性質</MobileTableCell>\n          <MobileTableCell align=\"left\">年份</MobileTableCell>\n          <MobileTableCell align=\"left\">與席</MobileTableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {meetings.map((m, index) => (\n          <TableRow key={index}>\n            <MobileTableCell component=\"th\" scope=\"row\">\n              {m.meeting.meet_name}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_type}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_year}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.attended}/{m.total}\n            </MobileTableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  )\n}\n\nCouncillorMeetingAttendace.propsType = {\n  meetings: PropTypes.array,\n}\n\nexport default CouncillorMeetingAttendace\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_MEETING_ATTENDANCES } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport CouncillorMeetingAttendace from 'components/templates/CouncillorMeetingAttendance'\nimport _ from 'lodash'\n\nconst CouncillorMeetingAttendaceContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_MEETING_ATTENDANCES}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const meetings = _.flatten(\n          data.dcd_councillors.map(c => c.meeting_attendances)\n        )\n        return (\n          <>\n            <CouncillorMeetingAttendace meetings={meetings} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorMeetingAttendaceContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default CouncillorMeetingAttendaceContainer\n","import styled from 'styled-components'\nimport Card from '@material-ui/core/Card'\nimport React from 'react'\n\nconst StyledCard = styled(Card)`\n  && {\n    padding: 16px;\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nexport const PlainCard = props => {\n  return <StyledCard {...props}>{props.children}</StyledCard>\n}\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\nimport { COLORS } from 'ui/theme'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: black;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\nexport const DefaultLink = styled(UnstyledLink)`\n  color: ${COLORS.main.primary};\n  font-weight: 500;\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { PlainCard } from 'components/molecules/Card'\nimport Typography from '@material-ui/core/Typography'\nimport { Box, Grid } from '@material-ui/core'\nimport { SuccessText, FailureText } from '../atoms/Text'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\n\nconst PersonElectionHistoriesTitle = styled.div`\n  && {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\nconst PersonElectionHistories = props => {\n  const { histories } = props\n\n  return (\n    <>\n      {histories.map((m, index) => (\n        <UnstyledNavLink\n          key={index}\n          to={m.year === 2019 && `/district/2019/${m.constituency.code}`}\n        >\n          <PlainCard color=\"#fafafa\">\n            <PersonElectionHistoriesTitle>\n              <Box>\n                <Typography variant=\"h6\" gutterBottom>\n                  {m.year}\n                </Typography>\n              </Box>\n              <Box>{m.year === 2019 && <NavigateNextIcon />}</Box>\n            </PersonElectionHistoriesTitle>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h5\">{m.constituency.name_zh}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h5\">{`${m.political_affiliation || '-'}（${\n                  m.camp\n                }）`}</Typography>\n              </Grid>\n              {m.votes > 0 && (\n                <Grid item xs={3}>\n                  {m.is_won ? (\n                    <SuccessText>\n                      {m.votes > 0 ? `${m.votes}票` : '自動當選'}\n                    </SuccessText>\n                  ) : (\n                    <FailureText>{`${m.votes}票`}</FailureText>\n                  )}\n                </Grid>\n              )}\n            </Grid>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h6\">{m.constituency.code}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h6\">報稱政治聯繫</Typography>\n              </Grid>\n              {m.votes > 0 ? (\n                <Grid item xs={3}>\n                  {m.is_won ? (\n                    <SuccessText>當選</SuccessText>\n                  ) : (\n                    <FailureText>落敗</FailureText>\n                  )}\n                </Grid>\n              ) : (\n                <Grid item xs={3}></Grid>\n              )}\n            </Grid>\n          </PlainCard>\n        </UnstyledNavLink>\n      ))}\n    </>\n  )\n}\n\nPersonElectionHistories.propsType = {\n  histories: PropTypes.array,\n}\n\nexport default PersonElectionHistories\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_ELECTIONS } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport PersonElectionHistories from 'components/templates/PersonElectionHistories'\n\nconst PersonElectionHistoriesContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_ELECTIONS}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <PersonElectionHistories\n              histories={data.dcd_people_by_pk.candidates}\n            />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nPersonElectionHistoriesContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default PersonElectionHistoriesContainer\n","//\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button } from '@material-ui/core'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    margin-top: 32px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    border: 1px black solid;\n    height: 48px;\n    padding: 0 32px;\n  }\n`\n\nconst FCPersonData = props => {\n  const { fcUuid, name } = props\n\n  const fcUri = `https://hkfactcheck.io/person/${fcUuid}/${name}`\n\n  return (\n    <>\n      <Container>\n        <StyledButton\n          onClick={() => {\n            const win = window.open(fcUri, '_blank')\n            win.focus()\n          }}\n        >\n          更多資料及往績\n        </StyledButton>\n      </Container>\n    </>\n  )\n}\n\nFCPersonData.propsType = {\n  uuid: PropTypes.string,\n  fcUuid: PropTypes.string,\n}\n\nexport default FCPersonData\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { getColorFromCamp } from 'utils/helper'\nimport CouncillorMeetingAttendanceContainer from 'components/containers/CouncillorMeetingAttendanceContainer'\nimport PersonElectionHistoriesContainer from 'components/containers/PersonElectionHistoriesContainer'\nimport FCPersonData from 'components/templates/FCPersonData'\nimport { SuccessText, FailureText } from 'components/atoms/Text'\nimport { COLORS } from 'ui/theme'\n\n// TODO: add age, camp & related_organization\nconst GET_PEOPLE_PROFILE = gql`\n  query($uuid: uuid!) {\n    dcd_people(where: { uuid: { _eq: $uuid } }) {\n      id\n      uuid\n      fc_uuid\n      name_zh\n      name_en\n      gender\n      related_organization\n      estimated_yob\n      councillors {\n        year\n        cacode\n        term_from\n        term_to\n        career\n        district {\n          dc_name_zh\n        }\n        political_affiliation\n        post\n        constituency {\n          id\n          year\n          name_zh\n        }\n      }\n      candidates {\n        candidate_number\n        is_won\n        occupation\n        political_affiliation\n        age\n        cacode\n        camp\n        election_type\n        year\n      }\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    height: 116px;\n    position: relative;\n    display: flex;\n    background: linear-gradient(\n      ${props => COLORS.camp[props.camp].background} 84px,\n      rgba(255, 255, 255, 0) 32px\n    );\n  }\n`\n\nconst CandidateAvatorContainer = styled(Box)`\n  && {\n    position: absolute;\n    left: 16px;\n    bottom: 8px;\n  }\n`\n\nconst PersonName = styled.div`\n  && {\n    position: absolute;\n    left: 116px;\n    top: 32px;\n    color: ${props => COLORS.camp[props.camp].text};\n  }\n`\n\nconst YearDiv = styled.div`\n  && {\n    font-size: 24px;\n    font-weight: 600;\n    color: #9b9b9b;\n    margin-bottom: 20px;\n  }\n`\n\nconst PersonHighlightContainer = styled(FlexRowContainer)`\n  && {\n    padding: 16px;\n  }\n`\n\nconst ElectionHistoryPaper = styled(Paper)`\n  && {\n    padding: 20px;\n  }\n`\n\nconst ElectionHistoryContentGrid = styled(Grid)`\n  && {\n    padding: 15px;\n  }\n`\n\nconst ElectionHistoryContentSpan = styled(Grid)`\n  && {\n    font-size: 18px;\n    color: #4a4a4a;\n  }\n`\n\nconst ElectionHistoryContentHeaderSpan = styled(ElectionHistoryContentSpan)`\n  && {\n    font-weight: 500;\n  }\n`\nconst ElectionDetailButton = styled.div`\n  && {\n    padding: 15px;\n    font-weight: 600;\n    color: #ffb700;\n    width: 100%;\n    text-align: center;\n    border-radius: 4px;\n    border: 2px solid #ffb700;\n    cursor: pointer;\n  }\n`\n\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderElectionInfoCard(election, yob) {\n    return (\n      <Grid item xs={12} md={4}>\n        <YearDiv>{`${election.year}年`}</YearDiv>\n        <ElectionHistoryPaper>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              地區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {' '}\n              {election.constituency && election.constituency.name\n                ? election.constituency.name\n                : '-'}{' '}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              選區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.constituency.name_zh} （${election.cacode}）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              陣營\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {election.camp ? election.camp : '-'}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              得票率\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.vote_percentage}% （${\n                election.is_won ? (\n                  <SuccessText>當選</SuccessText>\n                ) : (\n                  <FailureText>落敗</FailureText>\n                )\n              }）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionDetailButton\n              onClick={() => {\n                this.handleElectionDetailButton(election.year, election.cacode)\n              }}\n            >\n              查看選舉資料\n            </ElectionDetailButton>\n          </ElectionHistoryContentGrid>\n        </ElectionHistoryPaper>\n      </Grid>\n    )\n  }\n\n  render() {\n    const {\n      match: {\n        params: { uuid },\n      },\n    } = this.props\n\n    const homeUrl = process.env.REACT_APP_HOST_URI\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ uuid }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const person = data.dcd_people[0]\n\n          const currentTerm =\n            person.councillors &&\n            person.councillors[person.councillors.length - 1]\n          const lastElection =\n            person.candidates && person.candidates[person.candidates.length - 1]\n\n          const personHighlight = []\n\n          if (person.estimated_yob) {\n            personHighlight.push({\n              xs: 2,\n              title: '年齡',\n              text: `${2019 - person.estimated_yob}歲`,\n            })\n          }\n\n          personHighlight.push({\n            xs: 5,\n            title: '相關組織',\n            text: person.related_organization || '-',\n          })\n\n          personHighlight.push({\n            xs: 5,\n            title: '職業',\n            text:\n              (currentTerm && currentTerm.career) || lastElection.occupation,\n          })\n\n          const titles = ['參選紀錄']\n\n          if (person.fc_uuid) titles.push('個人立場')\n          titles.push('會議出席率')\n\n          return (\n            <>\n              <CandidateHeaderContainer\n                camp={getColorFromCamp(lastElection && lastElection.camp)}\n              >\n                <CandidateAvatorContainer>\n                  <PeopleAvatar\n                    dimension={'84px'}\n                    borderwidth={'0'}\n                    src={`${homeUrl}/static/images/avatar/${person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                      },\n                    }}\n                  />\n                </CandidateAvatorContainer>\n                <Box>\n                  <PersonName\n                    camp={getColorFromCamp(lastElection && lastElection.camp)}\n                  >\n                    <Typography variant=\"h3\" style={{ marginBottom: '2px' }}>\n                      {person.name_zh || ''}\n                    </Typography>\n                    <Typography variant=\"h5\" style={{ marginBottom: '8px' }}>\n                      {person.name_en || ''}\n                    </Typography>\n                    {currentTerm &&\n                      currentTerm.term_to &&\n                      Date.parse(new Date()) <\n                        Date.parse(currentTerm.term_to) && (\n                        <Typography\n                          variant=\"h6\"\n                          color=\"secondary\"\n                        >{`現任${currentTerm.district.dc_name_zh}區議員（${currentTerm.constituency.name_zh}）`}</Typography>\n                      )}\n                  </PersonName>\n                </Box>\n              </CandidateHeaderContainer>\n\n              <PersonHighlightContainer>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h5\">{highlight.text}</Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h6\">{highlight.title}</Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n              </PersonHighlightContainer>\n              <ScrollableTabs\n                titles={titles}\n                indicatorcolor={\n                  COLORS.camp[\n                    getColorFromCamp(lastElection && lastElection.camp)\n                  ].background\n                }\n              >\n                <PersonElectionHistoriesContainer personId={person.id} />\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                  />\n                )}\n                <CouncillorMeetingAttendanceContainer personId={person.id} />\n              </ScrollableTabs>\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default ProfilePage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'ui/responsive'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nconst SeperatedRow = styled(Box)`\n  && {\n    margin-top: 20px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    councillors: PropTypes.array.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, councillors, district, stations } = this.props\n    const councillor = councillors.length > 0 ? councillors[0] : {}\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedRow>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedRow>\n          <RegionText>{district.dc_name_zh}</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedRow>\n            <Typography variant=\"h6\">區議員</Typography>\n            <Typography>\n              {councillor.person ? councillor.person.name_zh : '-'}\n            </Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">政治聯繫</Typography>\n            <Typography>{councillor.political_affiliation || '-'}</Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">投票站</Typography>\n            {stations.map((station, index) => (\n              <Typography key={index} variant=\"subtitle2\">\n                {station.name_zh}\n              </Typography>\n            ))}\n          </SeperatedRow>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas } = this.props\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          主要屋邨 / 地區\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              <Typography variant=\"body1\">\n                {`${Object.keys(area)[0]} ${area[Object.keys(area)[0]]}`}\n              </Typography>\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\n// import VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from 'components/atoms/charts/WaffleChart'\n\n// TODO: change this to dcd data\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      name: '不能投票',\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      name: '沒有投票',\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      name: '投票失效',\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      name: `投給${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">人口資料</Typography>\n              {/* <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              /> */}\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../OLMap'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'ui/responsive'\n\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = person => {\n    this.props.history.push(\n      `/profile/${person.name_zh || person.name_en}/${person.uuid}`\n    )\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dcd_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox></FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\n\nconst StyledChip = styled(Chip)`\n  && {\n    font-size: 12px;\n    margin-top: 2px;\n    margin-left: 3px;\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      color={props.color}\n      label={props.value}\n      variant={props.variant || 'outlined'}\n      size=\"small\"\n      onClick={props.handleClick}\n    />\n  )\n}\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CANDIDATES } from 'queries/gql'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { UnstyledNavLink } from 'components/atoms/Link'\nimport Rows from 'components/atoms/Rows'\nimport Columns from 'components/atoms/Columns'\nimport { Box, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { getColorFromPoliticalAffiliation } from 'utils/helper'\nimport { COLORS } from 'ui/theme'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 0px 16px;\n  }\n`\n\nconst CandidateList = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-evenly;\n    flex-wrap: wrap;\n  }\n`\n\nconst Candidate = styled(Box)`\n  && {\n    position: relative;\n    width: auto;\n    text-align: center;\n    & > div {\n      margin: 0 auto;\n    }\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: absolute;\n    top: 64px;\n    left: 3px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst CandidateName = styled(Typography)`\n  && {\n    margin-top: 5px;\n    font-weight: 700;\n  }\n`\n\nconst CandidatesContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CANDIDATES}\n      variables={{ code, year }} // variables={{ code, year }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const candidates =\n          data.dcd_candidates &&\n          data.dcd_candidates.filter(c => c.election_type === 'ordinary')\n        return (\n          <Container>\n            {candidates.length > 0 && (\n              <>\n                <Rows>\n                  <Columns>\n                    <Typography variant=\"h6\" gutterBottom>\n                      已接獲提名\n                    </Typography>\n                  </Columns>\n                </Rows>\n                <Rows>\n                  <Columns>\n                    <CandidateList>\n                      {candidates.map(candidate => (\n                        <UnstyledNavLink\n                          key={candidate.person.id}\n                          to={`/profile/${candidate.person.name_zh ||\n                            candidate.person.name_en}/${candidate.person.uuid}`}\n                        >\n                          <Candidate>\n                            <PeopleAvatar\n                              dimension=\"84px\"\n                              borderwidth={'4'}\n                              camp={getColorFromPoliticalAffiliation(\n                                candidate.person.related_organization\n                              )}\n                              src={`${IMAGE_HOST_URI}/static/images/avatar/${candidate.person.uuid}.jpg`}\n                              imgProps={{\n                                onError: e => {\n                                  e.target.src =\n                                    IMAGE_HOST_URI +\n                                    '/static/images/avatar/default.png'\n                                },\n                              }}\n                            />\n                            {candidate.candidate_number > 0 && (\n                              <CandidateNumber\n                                dimension=\"18px\"\n                                camp={getColorFromPoliticalAffiliation(\n                                  candidate.person.related_organization\n                                )}\n                              >\n                                {candidate.candidate_number}\n                              </CandidateNumber>\n                            )}\n                            <CandidateName variant=\"h5\">\n                              {candidate.person.name_zh}\n                            </CandidateName>\n\n                            <Typography variant=\"h6\">\n                              {candidate.political_affiliation}\n                            </Typography>\n                          </Candidate>\n                        </UnstyledNavLink>\n                      ))}\n                    </CandidateList>\n                  </Columns>\n                </Rows>\n              </>\n            )}\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\n\nCandidatesContainer.propsType = {\n  // cacode: PropTypes.string,\n  // year: PropTypes.number,\n}\nexport default CandidatesContainer\n","import React from 'react'\nimport { Card, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { Tag } from 'components/atoms/Tag'\nimport { getDistrictListUriFromTag } from 'utils/helper'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 0 0 16px;\n    padding: 16px;\n    height: auto;\n  }\n`\n\nconst ConstituencyCard = props => {\n  const { year, constituency } = props\n  const { tags } = constituency\n  const sortedTags = tags.sort((a, b) =>\n    a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n  )\n\n  return (\n    <StyledCard\n      onClick={() => {\n        props.history.push(`/district/2019/${constituency.code}`)\n      }}\n    >\n      <Typography variant=\"h6\" gutterBottom>\n        {constituency.name_zh}（{constituency.code}）\n      </Typography>\n      {sortedTags.map((tag, index) => (\n        <Tag\n          key={index}\n          value={tag.tag}\n          variant={tag.type === 'boundary' ? 'default' : 'outlined'}\n          handleClick={evt => {\n            evt.stopPropagation()\n            props.history.push(getDistrictListUriFromTag(tag.tag))\n          }}\n        />\n      ))}\n      <CandidatesContainer year={year} code={constituency.code} />\n    </StyledCard>\n  )\n}\n\nexport default withRouter(ConstituencyCard)\n","import React from 'react'\nimport styled from 'styled-components'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nconst Placeholder = styled.div`\n  && {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst CentredCircularProgress = styled(CircularProgress)`\n  && {\n    max-width: 50%;\n  }\n`\n\nexport const Loading = props => {\n  return (\n    <Placeholder>\n      <CentredCircularProgress thickness={3} size={64} color=\"secondary\" />\n    </Placeholder>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CONSTITUENCIES_BY_TAG } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictListPage = props => {\n  const {\n    match: {\n      params: { year, tag },\n    },\n  } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CONSTITUENCIES_BY_TAG}\n      variables={{ tag, year: 2019 }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${tag}：${data.dcd_constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {data.dcd_constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictListPage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.1)',\n  }),\n  stroke: new Stroke({\n    color: '#356272',\n    width: 1,\n  }),\n  text: new Text({\n    font: '14px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: '#356272',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 3,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,255,0.5)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nclass DCCACompareMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default DCCACompareMap\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport { Tag } from '../atoms/Tag'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport {\n  getColorFromPoliticalAffiliation,\n  getCouncillorMeta,\n} from 'utils/helper'\n\nconst Councillor = props => {\n  const { councillors } = props\n  if (councillors.length === 0) {\n    return <> </>\n  }\n  // we just get the latest councillor from the dc\n  const councillor = councillors[0]\n  const tags = [] //['競逐連任']\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n  const meta = getCouncillorMeta(councillor)\n\n  return (\n    <UnstyledNavLink\n      key={councillor.code}\n      to={`/profile/${councillor.person.name_zh || councillor.person.name_en}/${\n        councillor.person.uuid\n      }`}\n    >\n      <Box>\n        <Box display=\"flex\">\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\" gutterBottom>\n              {`${councillor.term_from.substring(0, 4)} `}\n              {`${councillor.constituency.name_zh} （${councillor.constituency.code}）`}\n            </Typography>\n          </Box>\n          <Box>\n            {tags.length > 0 &&\n              tags.map((tag, index) => <Tag value={tag} key={index} />)}\n          </Box>\n        </Box>\n\n        <Grid container wrap=\"nowrap\" spacing={1}>\n          <Grid item>\n            <PeopleAvatar\n              dimension=\"60px\"\n              borderwidth={'3'}\n              camp={getColorFromPoliticalAffiliation(\n                councillor.political_affiliation\n              )}\n              src={`${IMAGE_HOST_URI}/static/images/avatar/${councillor.person.uuid}.jpg`}\n              imgProps={{\n                onError: e => {\n                  e.target.src =\n                    IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                },\n              }}\n            />\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"h4\" gutterBottom>\n              {councillor.person.name_zh}\n            </Typography>\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">報稱政治聯繫</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {councillor.political_affiliation}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">\n                  {meta.lastParticipated.year}\n                  選舉結果\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {meta.lastParticipated.votesDiff === 0 && '自動當選'}\n                  {meta.lastParticipated.votesDiff > 0 &&\n                    `${\n                      meta.lastParticipated.votesDiff /\n                        meta.lastParticipated.votes >\n                      0.2\n                        ? '大'\n                        : meta.lastParticipated.votesDiff /\n                            meta.lastParticipated.votes <\n                          0.05\n                        ? '險'\n                        : ''\n                    }勝${meta.lastParticipated.votesDiff}票`}\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    </UnstyledNavLink>\n  )\n}\n\nexport default Councillor\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_COUNCILLOR } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport Councillor from 'components/templates/Councillor'\n\nconst CouncillorContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query query={QUERY_GET_COUNCILLOR} variables={{ code, year }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Councillor councillors={data.dcd_councillors} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorContainer.propsType = {\n  cacode: PropTypes.string,\n  year: PropTypes.number,\n}\nexport default CouncillorContainer\n","import styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\n\nexport const UnstyledButton = styled(Button)`\n  && {\n    margin: 0;\n    padding: 0;\n  }\n`\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const color = d3.scaleOrdinal().range(['#ca0020', '#f4a582'])\n\n    const margin = { top: 50, right: 20, bottom: 30, left: 40 }\n\n    const width = dimensions.width - margin.left - margin.right\n    const height = dimensions.width - margin.top - margin.bottom\n\n    const max = _.max(_.maxBy(data, r => _.max(r.values)).values)\n\n    const svg = d3\n      .select(d3Container.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    svg.selectAll('g').remove()\n    const chart = svg\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n\n    const yScale = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, max]) // space for showing legend\n\n    const x0 = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(data.map(s => s.label))\n      .padding(0.1)\n\n    const x1 = d3\n      .scaleBand()\n      .domain(d3.range(2))\n      .range([0, x0.bandwidth() - 10])\n    // y axis\n    chart.append('g').call(d3.axisLeft(yScale))\n\n    // draw the lines\n    chart\n      .append('g')\n      .style('color', 'lightgrey')\n      .style('stroke-opacity', '0.7')\n      .call(\n        d3\n          .axisLeft(yScale)\n          .tickSizeOuter(0)\n          .tickSizeInner(-width)\n          .tickFormat('')\n      )\n\n    // x axis\n    chart\n      .append('g')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(x0))\n      .selectAll('text')\n      .attr('transform', 'translate(0,0)rotate(-45)')\n      .style('text-anchor', 'end')\n      .style('fill', '#69a3b2')\n\n    const slice = svg\n      .selectAll('.slice')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'g')\n      .attr(\n        'transform',\n        d => `translate(${x0(d.label) + margin.left + 5},${margin.top})`\n      )\n\n    slice\n      .selectAll('rect')\n      .data(d => d.values)\n      .enter()\n      .append('rect')\n      .attr('width', x1.bandwidth())\n      .attr('x', (d, i) => x1(i))\n      .attr('y', d => yScale(0))\n      .attr('height', d => height - yScale(0))\n      .style('fill', (d, i) => color(i))\n\n    slice\n      .selectAll('rect')\n      .transition()\n      .delay(function(d) {\n        return Math.random() * 1000\n      })\n      .duration(1000)\n      .attr('y', d => yScale(d))\n      .attr('height', d => height - yScale(d))\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(data[0].labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${i * 20})`)\n\n    legend\n      .append('rect')\n      .attr('x', width - 20)\n      .attr('width', 14)\n      .attr('height', 14)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width)\n      .attr('y', 7)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <svg\n        ref={d3Container}\n        style={{ height: dimensions.width, width: '100%' }}\n      ></svg>\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport GroupedBarChart from 'components/atoms/charts/GroupedBarChart'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCY_STATS } from 'queries/gql'\nimport { Button, Typography } from '@material-ui/core'\n\nexport default props => {\n  const filters = [null, 'FEMALE', 'MALE']\n  const [filterIndex, setFilterIndex] = useState(0)\n\n  const changeFilter = () => {\n    let index = filterIndex + 1\n    if (index === filters.length) {\n      index = 0\n    }\n    setFilterIndex(index)\n  }\n\n  const getDataForChat = voteStats => {\n    /**\n     * voteStats = [{\n     *  type: \"BY_GENDER_AGE\",\n     *  subtype: \"VOTERS/NEW_VOTERS\",\n     *  category_1: \"FEMALE/MALE\",\n     *  category_2: \"21-25\"\n     *  count: 10\n     * }]\n     */\n\n    const isFiltered = gender => {\n      if (gender === 'MALE' && filterIndex === 1) {\n        return false\n      } else if (gender === 'FEMALE' && filterIndex === 2) {\n        return false\n      }\n      return true\n    }\n    const data = _.values(_.groupBy(voteStats, stat => stat.category_2))\n    data.forEach(row => {\n      row.label = row[0].category_2\n      row.values = _.values(_.groupBy(row, r => r.subtype)).map(r =>\n        r\n          .filter(v => isFiltered(v.category_1))\n          .map(v => v.count)\n          .reduce((c, v) => c + v, 0)\n      )\n      row.values = [row.values[0] - row.values[1], row.values[0]]\n      row.labels = ['2018', '2019']\n    })\n\n    /**\n     * [{\n     *  label: \"21-22\",\n     *  values: [200, 159] // -> 2019 vs 2018\n     * }]\n     */\n\n    return data\n  }\n\n  const getMeta = voteStats => {\n    const meta = {\n      increased: 0,\n      mostIncreasedGroup: null,\n    }\n    const total = voteStats\n      .filter(v => v.subtype === 'VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    const newVotes = voteStats\n      .filter(v => v.subtype === 'NEW_VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    let max = 0\n    const groupedByAge = _.groupBy(voteStats, v => v.category_2)\n    Object.keys(groupedByAge).forEach(age => {\n      const genders = groupedByAge[age]\n      const groupedByGender = _.groupBy(genders, v => v.category_1)\n      Object.keys(groupedByGender).forEach(gender => {\n        const types = groupedByGender[gender]\n        const groupedByType = _.groupBy(types, v => v.subtype)\n        const newVoters = groupedByType['NEW_VOTERS'][0].count\n        const totalVoters = groupedByType['VOTERS'][0].count\n        if (newVoters / totalVoters > max) {\n          max = _.round(newVoters / totalVoters, 4)\n          meta.mostIncreasedGroup = {\n            gender,\n            age,\n            max,\n          }\n        }\n      })\n    })\n    // .filter(v => v.subtype === 'NEW_VOTERS')\n    // .forEach(v => {\n    //   if (v.count > max) {\n    //     meta.mostIncreasedGroup = {\n    //       gender: v.category_1,\n    //       age: v.category_2\n    //     }\n    //   }\n    // })\n    meta.increased = _.round(newVotes / (total - newVotes), 4)\n\n    return meta\n  }\n\n  return (\n    // TODO: support page other than battleground page\n    <>\n      <Query\n        query={QUERY_CONSTITUENCY_STATS}\n        variables={{ year: 2019, code: props.code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          if (data.dcd_constituencies.length === 0) {\n            console.error(`cannot find constituency. code: ${props.code}`)\n            return `Error!`\n          }\n          // transform the data to desire format\n          const chartData = getDataForChat(\n            data.dcd_constituencies[0].vote_stats\n          )\n          const meta = getMeta(data.dcd_constituencies[0].vote_stats)\n          return (\n            <>\n              <Typography variant=\"h2\">\n                選民增加{_.round(meta.increased * 100, 2)}%\n              </Typography>\n              <Typography variant=\"h4\">\n                {meta.mostIncreasedGroup.age}歲的\n                {meta.mostIncreasedGroup.gender === 'MALE' ? '男' : '女'}\n                性選民增加了\n                {_.round(meta.mostIncreasedGroup.max * 100, 2)}%\n              </Typography>\n              <Button onClick={changeFilter}>\n                {filterIndex === 0\n                  ? '顯示所有'\n                  : filterIndex === 1\n                  ? '只顯示男性選民'\n                  : '只顯示女性選民'}\n              </Button>\n              <GroupedBarChart data={chartData} />\n            </>\n          )\n        }}\n      </Query>\n    </>\n  )\n}\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport { Tag } from 'components/atoms/Tag'\nimport DistrictNewVoterChartContainer from 'components/containers/DistrictNewVoterChartContainer'\nimport Columns from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport Box from '@material-ui/core/Box'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport KeyboardArrowUp from '@material-ui/icons/KeyboardArrowUp'\nimport { getDistrictListUriFromTag } from 'utils/helper'\nimport { withRouter } from 'react-router-dom'\nimport { SuccessText, FailureText } from 'components/atoms/Text'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 0 16px;\n    box-shadow: none;\n  }\n`\nclass DCCAOverview extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGraph: false,\n    }\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  toggleGraph() {\n    this.setState({\n      showGraph: !this.state.showGraph,\n    })\n  }\n\n  render() {\n    const { code, tags, voterData } = this.props\n    const sortedTags = tags.sort((a, b) =>\n      a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n    )\n    const new_voters_percentage = (\n      (100 * voterData.aggregations.new_voters) /\n      (voterData.aggregations.all_voters - voterData.aggregations.new_voters)\n    ).toFixed(2)\n    return (\n      <>\n        <Container>\n          <Rows>\n            <Columns>\n              <Box>\n                {sortedTags\n                  .filter(tag => tag.type === 'boundary')\n                  .map((tag, index) => (\n                    <Tag\n                      key={index}\n                      value={tag.tag}\n                      variant=\"default\"\n                      handleClick={() => {\n                        this.props.history.push(\n                          getDistrictListUriFromTag(tag.tag)\n                        )\n                      }}\n                    />\n                  ))}\n              </Box>\n            </Columns>\n            <UnstyledButton onClick={this.toggleGraph.bind(this)}>\n              <Typography variant=\"h6\">\n                選民人數 {voterData.aggregations.all_voters} {' ('}\n                {new_voters_percentage > 0 ? (\n                  <SuccessText display=\"inline\">\n                    +{new_voters_percentage}%\n                  </SuccessText>\n                ) : (\n                  <FailureText display=\"inline\">\n                    -{new_voters_percentage}%\n                  </FailureText>\n                )}\n                )\n              </Typography>\n              {this.state.showGraph ? (\n                <KeyboardArrowUp fontSize=\"small\" />\n              ) : (\n                <ExpandMoreIcon fontSize=\"small\" />\n              )}\n            </UnstyledButton>\n            {this.state.showGraph && (\n              <DistrictNewVoterChartContainer code={code} />\n            )}\n          </Rows>\n\n          {sortedTags\n            .filter(tag => tag.type !== 'boundary')\n            .map((tag, index) => (\n              <Tag\n                key={index}\n                value={tag.tag}\n                variant=\"outlined\"\n                handleClick={() => {\n                  this.props.history.push(getDistrictListUriFromTag(tag.tag))\n                }}\n              />\n            ))}\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withRouter(DCCAOverview)\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport DCCACompareMap from '../../DCCACompareMap'\nimport { Query } from 'react-apollo'\nimport MainAreas from 'components/district/MainAreas'\nimport CouncillorContainer from 'components/containers/CouncillorContainer'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\nimport DCCAOverview from 'components/district/DCCAOverview'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\nimport Collapse from '@material-ui/core/Collapse'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { PlainCard } from '../../molecules/Card'\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { Alert } from 'components/atoms/Alert'\nimport { getDistrictOverviewUriFromTag } from 'utils/helper'\n\nconst groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 16px 0;\n  }\n`\n\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\nconst ToggleMapButton = styled(UnstyledButton)`\n  && {\n    border-radius: 0;\n    width: 100%;\n    font-size: 14px;\n    text-align: center;\n  }\n`\n\nclass BattleGroundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showMap: true,\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const { showMap } = this.state\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n          {({ loading, error, data }) => {\n            if (loading) return null\n            if (error) return `Error! ${error}`\n            const district = data.dcd_constituencies[0]\n            const previousDistricts = district.predecessors.filter(\n              district =>\n                district.intersect_area === null ||\n                district.intersect_area > 1000\n            )\n\n            return (\n              <>\n                <BreadcrumbsContainer>\n                  <Breadcrumbs\n                    separator={<NavigateNextIcon fontSize=\"small\" />}\n                    aria-label=\"breadcrumb\"\n                  >\n                    <Typography color=\"textPrimary\"> {year}</Typography>\n                    <UnstyledLink\n                      onClick={() => {\n                        this.props.history.push(\n                          getDistrictOverviewUriFromTag(\n                            district.district.dc_code\n                          )\n                        )\n                      }}\n                    >\n                      <Typography color=\"textPrimary\">\n                        {district.district.dc_name_zh}\n                      </Typography>\n                    </UnstyledLink>\n                    <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                      {district.name_zh}（{code}）\n                    </Typography>\n                  </Breadcrumbs>\n                </BreadcrumbsContainer>\n                <Alert>\n                  <Typography variant=\"h6\" gutterBottom>\n                    區議會選舉提名期現已展開，至10月17日結束。\n                  </Typography>\n                </Alert>\n                <Container>\n                  <CandidatesContainer year={year} code={district.code} />\n                </Container>\n                <DCCAOverview\n                  year={year}\n                  name_zh={district.name_zh}\n                  dc_code={district.district.dc_code}\n                  dc_name_zh={district.district.dc_name_zh}\n                  code={district.code}\n                  tags={district.tags}\n                  voterData={groupVoteStat(district.vote_stats)}\n                />\n                {/* TODO Refactor style for ToggleMap Button */}\n                <ToggleMapButton\n                  onClick={() => this.setState({ showMap: !showMap })}\n                >\n                  {showMap ? '隱藏地圖' : '顯示地圖'}\n                  {showMap ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </ToggleMapButton>\n                <Collapse in={showMap}>\n                  <Box\n                    width={{ sm: '100%', md: '960px' }}\n                    height={{ sm: '300px', md: '400px' }}\n                  >\n                    <DCCACompareMap\n                      year={year}\n                      code={code}\n                      changeDistrict={this.handleChangeDistrict}\n                    />\n                  </Box>\n                </Collapse>\n                <MainAreas areas={district.main_areas || []} />\n                <PlainCard>\n                  <Typography variant=\"h6\">現任區議員</Typography>\n                  {previousDistricts.length > 1 && (\n                    <Typography variant=\"h6\">{`此區與上屆${previousDistricts.length}個選區重疊`}</Typography>\n                  )}\n                  {previousDistricts.map((d, index) => (\n                    <CouncillorContainer\n                      key={index}\n                      year={2015}\n                      code={d.predecessor.code}\n                    />\n                  ))}\n                </PlainCard>\n              </>\n            )\n          }}\n        </Query>\n      </>\n    )\n  }\n}\n\nexport default BattleGroundPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { DefaultLink } from 'components/atoms/Link'\nimport Rows from 'components/atoms/Rows'\nimport Columns from 'components/atoms/Columns'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h5\">關於候選人陣營</Typography>\n        <p>\n          候選人的政治陣營，反映他們對政治議題的看法。一般而言，每人對各項議題可持不同立場，難以用一兩個詞語概括候選人背景。\n        </p>\n        <p>\n          為於清晰及準確之間取平衡，本網站將候選人的政治陣營按以下次序，分為「建制」、「民主」及「其他」。\n        </p>\n        <ol>\n          <li>\n            如候選人屬主流政黨或組織成員，則以其背景劃分，詳細分類可參考附表。\n          </li>\n          <li>\n            如候選人報稱「獨立」，或漏空政治聯繫，則參考其往績，如曾獲某陣營支持、助選或舉辦活動。\n          </li>\n          <li>\n            至於首度參選者，本網站會嘗試按該名侯選人對反修例運動立場劃分：\n            <br />\n            <br />\n            民主：認同運動，要求政府答應運動「五大訴求」\n            <br />\n            建制：反對運動，支持政府「止暴制亂」\n            <br />\n            其他：未有就運動表態，或同時支持以上兩點\n          </li>\n        </ol>\n        <p>\n          如任何人分類有任何意見，歡迎反映或電郵至\n          <DefaultLink href=\"mailto:chiangsumlui@gmail.com\">\n            chiangsumlui@gmail.com\n          </DefaultLink>\n          ，我們會盡快跟進。\n        </p>\n\n        <Typography variant=\"h5\">候選陣營分類</Typography>\n\n        <Rows>\n          <Columns>\n            <p>建制</p>\n            <ul>\n              <li>民建聯</li>\n              <li>工聯會</li>\n              <li>經民聯</li>\n              <li>西九新動力</li>\n              <li>自由黨</li>\n              <li>新民黨</li>\n              <li>新世紀論壇</li>\n              <li>香港社團聯會</li>\n              <li>新界社團聯會</li>\n              <li>九龍社團聯會</li>\n              <li>港九勞工社團聯會</li>\n              <li>香港島各界聯合會</li>\n              <li>社區18</li>\n              <li>公民力量</li>\n              <li>公屋聯會</li>\n            </ul>\n            <p>民主</p>\n            <ul>\n              <li>民主黨</li>\n              <li>公民黨</li>\n              <li>民協</li>\n              <li>街工</li>\n              <li>新民主同盟</li>\n              <li>工黨</li>\n              <li>職工盟</li>\n              <li>社民連</li>\n              <li>人民力量</li>\n              <li>支聯會</li>\n              <li>民主動力</li>\n            </ul>\n          </Columns>\n        </Rows>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </>\n    )\n  }\n}\n\nexport default withStyles(NotFoundPage)\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { UnstyledNavLink } from '../atoms/Link'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    background: white;\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst AppBarTitle = styled(UnstyledNavLink)`\n  && {\n    left: auto;\n    right: auto;\n    width: 100%;\n    position: absolute;\n  }\n`\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\">\n        <Toolbar disableGutters>\n          <AppBarTitle to={'/'}>\n            <Typography variant=\"h1\" align=\"center\">\n              <span role=\"img\" aria-label=\"區議會 2019\">\n                區議會 2019 ✋🏻💜⚡\n              </span>\n            </Typography>\n          </AppBarTitle>\n\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Search\"\n            onClick={() => dispatch({ type: DRAWER_OPEN })}\n          >\n            <MenuIcon />\n          </IconButton>\n        </Toolbar>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Divider from '@material-ui/core/Divider'\nimport { UnstyledLink, DefaultLink } from 'components/atoms/Link'\nimport { Typography } from '@material-ui/core'\nimport Columns from 'components/atoms/Columns'\nimport { withRouter } from 'react-router-dom'\n\nconst StyledFooter = styled(Box)`\n  && {\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n    padding: 16px;\n  }\n`\n\nconst StyledDivider = styled(Divider)`\n  && {\n    margin: 16px 0;\n  }\n`\n\nconst StyledFooterLink = styled(UnstyledLink)`\n  && {\n    color: rgba(0, 0, 0, 0.87);\n  }\n`\n\nconst LinkBox = styled(Box)`\n  && {\n    margin: 8px 16px 8px 0;\n    word-break: keep-all;\n    overflow: hidden;\n  }\n`\n\nfunction Footer(props) {\n  return (\n    <>\n      <StyledFooter>\n        <StyledDivider />\n        <Typography variant=\"body2\" gutterBottom>\n          本網站所刊載資訊全為公開資料，歸納自選舉管理委員會丶選舉事務處丶政府統計處丶各區區議會網站及\n          <DefaultLink href=\"https://github.com/initiummedia/hk_district_council_election\">\n            端傳媒\n          </DefaultLink>\n          ，刊載前已盡力確保資料真確性，如有建議或錯漏，請按下方連結回報。\n        </Typography>\n        <Typography variant=\"body2\">\n          本網站與任何2019年區議會選舉候選人或其助選成員無關，刊載資料目的非為促使或阻礙任何候選人在選舉中當選。\n        </Typography>\n        <StyledDivider />\n        <Columns>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://www.facebook.com/g0vhk.io\"\n            >\n              g0vhk.io\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              onClick={\n                () => props.history.push(`/disclaimer`)\n                // console.log(props)\n              }\n            >\n              關於候選人陣營\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://forms.gle/irD6tEznWPNda6w59\"\n            >\n              反映意見\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://github.com/cswbrian/district-councils-dashboard\"\n            >\n              GitHub\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink target=\"_blank\" href=\"https://hkfactcheck.io/\">\n              選區事實處\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <div\n              className=\"fb-like\"\n              data-href=\"https://dc2019.g0vhk.io\"\n              data-width=\"\"\n              data-layout=\"standard\"\n              data-action=\"like\"\n              data-size=\"small\"\n              data-show-faces=\"true\"\n              data-share=\"true\"\n            ></div>\n          </LinkBox>\n        </Columns>\n      </StyledFooter>\n    </>\n  )\n}\n\nexport default withRouter(Footer)\n","import React from 'react'\nimport GoogleAnalytics from 'react-ga'\n\nconst trackingId = process.env.REACT_APP_GA_TRACKING_ID\nif (!trackingId) {\n  throw new Error(\n    'Invalid google tracking ID. or set to UA-000000-01 if you dont have any'\n  )\n}\nGoogleAnalytics.initialize(trackingId)\n\nconst withTracker = (WrappedComponent, options = {}) => {\n  const trackPage = page => {\n    GoogleAnalytics.set({\n      page,\n      ...options,\n    })\n    GoogleAnalytics.pageview(page)\n  }\n\n  const HOC = class extends React.Component {\n    componentDidMount() {\n      const page = this.props.location.pathname\n      trackPage(page)\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const currentPage = this.props.location.pathname\n      const nextPage = nextProps.location.pathname\n\n      if (currentPage !== nextPage) {\n        trackPage(nextPage)\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />\n    }\n  }\n\n  return HOC\n}\n\nexport default withTracker\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport SearchTab from 'components/organisms/SearchTab'\nimport Typography from '@material-ui/core/Typography'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport { ExpansionPanel } from '@material-ui/core/'\n\nconst StyledExpansionPanel = styled(ExpansionPanel)`\n  && {\n    margin: 0 !important;\n    .Mui-expanded {\n      margin: 0;\n    }\n    border: none;\n    box-shadow: none;\n    ::before {\n      display: none;\n    }\n  }\n`\nStyledExpansionPanel.muiName = 'ExpansionPanel'\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst LeftMargin = styled(ExpandedRow)`\n  && {\n    min-height: 48px;\n    align-items: center;\n    padding: 0 24px 0 24px;\n    cursor: pointer;\n  }\n`\nconst SearchMenu = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  function goToHomePage() {\n    props.history.push('/')\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  return (\n    <>\n      <LeftMargin>\n        <Typography variant=\"h6\" color=\"secondary\" onClick={goToHomePage}>\n          返回首頁\n        </Typography>\n      </LeftMargin>\n\n      <SearchTab />\n      {/*\n      <StyledExpansionPanel\n        square\n        expanded={expanded === 'panel1'}\n        onChange={handleChange('panel1')}\n      >\n        <StyledExpansionPanelSummary\n          aria-controls=\"panel1d-content\"\n          id=\"panel1d-header\"\n        >\n          <Typography variant=\"h6\" color=\"secondary\">\n            找選區\n          </Typography>\n        </StyledExpansionPanelSummary>\n        <StyledExpansionPanelDetail>\n          {renderSearchDistrict()}\n        </StyledExpansionPanelDetail>\n      </StyledExpansionPanel>\n      <StyledExpansionPanel\n        square\n        expanded={expanded === 'panel2'}\n        onChange={handleChange('panel2')}\n      >\n        <StyledExpansionPanelSummary\n          aria-controls=\"panel2d-content\"\n          id=\"panel2d-header\"\n        >\n          <Typography variant=\"h6\" color=\"secondary\">\n            找候選人\n          </Typography>\n        </StyledExpansionPanelSummary>\n        <StyledExpansionPanelDetail>\n          {renderSearchPeople()}\n        </StyledExpansionPanelDetail>\n      </StyledExpansionPanel>\n      <StyledExpansionPanel\n        square\n        expanded={expanded === 'panel3'}\n        onChange={handleChange('panel3')}\n      >\n        <StyledExpansionPanelSummary\n          aria-controls=\"panel3d-content\"\n          id=\"panel3d-header\"\n        >\n          <Typography variant=\"h6\" color=\"secondary\">\n            所有選區\n          </Typography>\n        </StyledExpansionPanelSummary>\n        <StyledExpansionPanelDetail>\n          {renderDistrictSelector()}\n        </StyledExpansionPanelDetail>\n      </StyledExpansionPanel>\n      */}\n    </>\n  )\n}\n\nexport default withRouter(SearchMenu)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport SearchMenu from 'components/organisms/SearchMenu'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst MenuContainer = styled(Box)`\n  && {\n    margin-top: 48px;\n    display: flex;\n    width: 100%;\n    flex-flow: column;\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n  }\n`\n\nfunction AppDrawer(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <Container>\n      <NavBarButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Menu\"\n        onClick={() => {\n          dispatch({ type: DRAWER_CLOSE })\n        }}\n      >\n        <CloseIcon fontSize=\"small\" />\n      </NavBarButton>\n      <MenuContainer>\n        <SearchMenu />\n      </MenuContainer>\n    </Container>\n  )\n}\n\nexport default withRouter(AppDrawer)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_DISTRICT } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictOverviewPage = props => {\n  const {\n    match: {\n      params: { year, code },\n    },\n  } = props\n\n  return (\n    <Query query={QUERY_GET_DISTRICT} variables={{ code, year: 2019 }}>\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        const district = data.dcd_districts[0]\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${district.dc_name_zh}：${district.constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {district.constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictOverviewPage\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport { makeStyles } from '@material-ui/core/styles'\nimport IndexPage from 'components/pages/landing'\nimport ProfilePage from 'components/pages/profile'\nimport DistrictPage from 'components/pages/district'\nimport DistrictListPage from 'components/pages/district/list'\nimport BattleGroundPage from 'components/pages/battleground'\nimport DisclaimerPage from 'components/pages/disclaimer'\nimport NotfoundPage from 'components/pages/notfound'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme from 'ui/theme'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Drawer from '@material-ui/core/Drawer'\nimport MobileAppBar from 'components/organisms/MobileAppBar'\nimport Footer from 'components/organisms/Footer'\nimport drawerReducer from 'reducers/drawer'\nimport ContextStore, { drawerInitialState } from 'ContextStore'\nimport withTracker from './WithTracker'\nimport SearchDrawer from 'components/pages/SearchDrawer'\nimport DistrictOverviewPage from 'components/pages/district/overview'\n\nconst client = new ApolloClient({\n  uri: process.env.REACT_APP_GRAPHQL_URI,\n})\n\nconst useStyles = makeStyles(theme => ({\n  drawerPaper: {\n    width: '100%',\n  },\n}))\n\nconst Root = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    margin: auto;\n    overflow: hidden;\n    background-color: white;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    overflow: auto;\n  }\n`\n\nconst Wrapper = styled(Box)`\n  && {\n    flex: 1;\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n  }\n`\n\nconst App = props => {\n  if (!process.env.REACT_APP_GRAPHQL_URI) {\n    throw new Error('Graphql host not yet set')\n  }\n  const classes = useStyles()\n\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ApolloProvider client={client}>\n      <MuiThemeProvider theme={theme}>\n        <ContextStore.Provider\n          value={{\n            drawer: {\n              state: drawerState,\n              dispatch: drawerDispatch,\n            },\n          }}\n        >\n          <Root>\n            <ContentContainer>\n              <CssBaseline />\n              <Wrapper>\n                <MobileAppBar />\n                <main>\n                  <Switch>\n                    <Route exact path=\"/\" component={withTracker(IndexPage)} />\n                    <Route\n                      path=\"/profile/:name/:uuid\"\n                      component={withTracker(ProfilePage)}\n                    />\n                    <Route\n                      path=\"/district/:year/tags/:tag\"\n                      component={withTracker(DistrictListPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code(\\w{1})\"\n                      component={withTracker(DistrictOverviewPage)}\n                    />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={withTracker(BattleGroundPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={withTracker(DistrictPage)}\n                    />\n                    <Route\n                      path=\"/disclaimer\"\n                      component={withTracker(DisclaimerPage)}\n                    />\n                    <Route component={withTracker(NotfoundPage)} />\n                  </Switch>\n                </main>\n              </Wrapper>\n              <Footer />\n            </ContentContainer>\n            <Drawer\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n              anchor=\"left\"\n              open={drawerState.open}\n              variant=\"persistent\"\n            >\n              <SearchDrawer />\n            </Drawer>\n          </Root>\n        </ContextStore.Provider>\n      </MuiThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}