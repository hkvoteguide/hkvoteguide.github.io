{"version":3,"sources":["queries/gql.js","ui/theme.js","components/atoms/Link.js","components/atoms/Columns.js","components/atoms/Alert.js","components/templates/Summary.js","constants/dcregion.js","utils/helper.js","components/atoms/charts/StackedNormalizedHorizontalBarChart.js","components/atoms/Slider/index.js","components/atoms/Text.js","components/molecules/ValueSlider.js","components/molecules/TabBar.js","components/organisms/Tabs.js","components/atoms/Rows.js","components/organisms/PredictionChartPanel.js","components/molecules/CheckBox.js","components/molecules/LoadingButton.js","components/templates/CampCompareChartContainer.js","components/atoms/Countdown.js","utils/features.js","components/molecules/AddressSearcher.js","components/molecules/PeopleSearcher.js","reducers/drawer.js","ContextStore.js","components/organisms/AreaTabs.js","components/molecules/DistrictSelector.js","components/organisms/SearchTab.js","components/pages/landing/index.js","components/atoms/Avatar.js","components/organisms/ScrollableTabs.js","components/templates/CouncillorMeetingAttendance.js","components/containers/CouncillorMeetingAttendanceContainer.js","components/molecules/Card.js","components/templates/PersonElectionHistories.js","components/containers/PersonElectionHistoriesContainer.js","components/molecules/PersonEvent.js","components/templates/FCPersonData.js","components/atoms/Tag.js","components/pages/profile/index.js","components/OLMap.js","ui/responsive.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/atoms/charts/WaffleChart.js","components/district/Metrics.js","components/pages/district/index.js","components/containers/CandidatesContainer.js","components/organisms/ConstituencyCard.js","components/atoms/Loading.js","components/pages/district/list.js","components/DCCACompareMap.js","components/templates/Councillor.js","components/containers/CouncillorContainer.js","components/atoms/Button.js","components/atoms/charts/GroupedBarChart.js","components/containers/DistrictNewVoterChartContainer.js","components/district/DCCAOverview.js","components/templates/DCCAElectionResult.js","components/templates/DCCAElectionHistories.js","components/pages/battleground/index.js","components/pages/disclaimer/index.js","components/pages/about/dc.js","components/pages/notfound/index.js","components/organisms/MobileAppBar.js","components/organisms/Footer.js","WithTracker.js","components/organisms/SearchMenu.js","components/pages/SearchDrawer.js","components/pages/district/overview.js","App.js","index.js"],"names":["CONSTITUENCIES_DATA","QUERY_CONSTITUENCIES","gql","_templateObject","QUERY_GET_CONSTITUENCIES_BY_TAG","_templateObject2","QUERY_CONSTITUENCY_STATS","_templateObject3","QUERY_GET_DISTRICT","_templateObject4","QUERY_GET_AREA","_templateObject5","QUERY_GET_PERSON_ELECTIONS","_templateObject6","QUERY_GET_PERSON_MEETING_ATTENDANCES","_templateObject7","QUERY_GET_COUNCILLOR","_templateObject8","QUERY_GET_CANDIDATES","_templateObject9","QUERY_GET_CONSTITUENCY_CAMP_DATA","_templateObject10","QUERY_GET_NOMINATION_SUMMARY","_templateObject11","QUERY_GET_LANDING_ALERT","_templateObject12","FONT_FAMILY","typography","useNextVariants","fontSize","fontFamily","join","h1","fontWeight","h2","h3","h4","h5","h6","body1","lineHeight","body2","COLORS","main","text","primary","secondary","background","mainText","dark","backgroundColor","color","camp","democracy","establishment","localist","other","uncertain","common","success","green","failure","red","secondaryBackgroundColor","createMuiTheme","palette","contrastText","UnstyledLink","styled","Link","Link_templateObject","UnstyledNavLink","NavLink","Link_templateObject2","DefaultLink","Link_templateObject3","Box","Columns_templateObject","Alert","Columns","Alert_templateObject","Container","Summary_templateObject","FlexLink","Summary_templateObject2","withRouter","props","react_default","a","createElement","react_apollo_esm","query","_ref","loading","result","error","data","concat","dcd_constituencies","reduce","c","no_of_candidates","candidates","length","district","code","name_zh","stat","max","push","more_than_2","no_competition","Fragment","Typography","variant","gutterBottom","Object","toConsumableArray","Array","keys","reverse","filter","map","noc","i","key","index","onClick","history","DCREGION","A","zh_hk","en_us","unelected_dc_seat","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","getDistrictListUriFromTag","tag","getDistrictOverviewUriFromTag","getConstituencyUriFromTag","getColorFromCamp","泛民","民主","建制","本土","傘兵","自決","其他","不明","getColorFromPoliticalAffiliation","pa","mapping","_arr","_i","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","party","value","includes","err","return","getProfilePath","person","name_en","uuid","formatNumber","num","toString","replace","Styled","StackedNormalizedHorizontalBarChart_templateObject","StackedNormalizedHorizontalBarChart","_useState","useState","width","height","_useState2","slicedToArray","dimensions","setDimensions","CAMP_COLORS","d3Container","useRef","updateLegend","res","svg","label","count","d","v","overhalf_count","total","selectAll","remove","legend","enter","append","attr","style","drawChart","columns","margin","labels","series","d3","slice","offset","forEach","s","y","domain","range","unknown","name","padding","x","current","select","empty","bar","bandwidth","transition","delay","Math","random","duration","groups","f","call","g","tickSizeOuter","on","k","getCodeFromDistrictName","window","location","ticks","middle","updateWindowSize","clientWidth","useEffect","addEventListener","useLayoutEffect","ref","atoms_Slider","Slider","Text_templateObject","SuccessText","Text_templateObject2","FailureText","Text_templateObject3","Text","SliderContainer","ValueSlider_templateObject","Label","ValueSlider_templateObject2","ValueSlider","setValue","className","onChange","event","newValue","TabBar","titles","selectedTab","setSelectedTab","Tabs","centered","title","Tab","id","aria-controls","TabPanel","children","objectWithoutProperties","assign","component","role","aria-labelledby","ScrollableTabs","_React$useState","React","_React$useState2","child","hidden","Rows_templateObject","StyledValueSlider","PredictionChartPanel_templateObject","TabSection","PredictionChartPanel_templateObject2","StyledCheckBox","checked","setChecked","FormControlLabel","control","Checkbox","target","PredictionChartPanel_templateObject3","PredictionChartPanel","settings","setSettings","setSettingConfigFunc","field","flag","config","defineProperty","camp_rate","vote_rate","setSettingFunc","objectSpread","buttonLayout","Rows","reference_last_election","auto_won_add_components","StyledCircularProgress","CircularProgress","LoadingButton_templateObject","WhiteText","LoadingButton_templateObject2","div","CampCompareChartContainer_templateObject","PredictionChartHeader","CampCompareChartContainer_templateObject2","StyledLoadingButton","isLoading","Button","disabled","size","CampCompareChartContainer_templateObject3","FETCH_CAMP_DATA","CampCompareChartContainer_templateObject4","convertToD3Compatible","sortFunc","非建制","values","acc","sort","b","AGE_GROUP_MIDDLE","AGE_GROUP_OLD","groupExpectDataByRegionAndCamp","constituencies","getProjectedVotes","type","voteStats","subtype","settingIndex","indexOf","category_2","votePercentage","yellowPercentage","getVoteCountBySetting","expectedResult","constituency","predecessors","predecessor","onlyCandidate","votes","vote_stats","mock","maxVote","projectedVotes","establishCount","cacode","byCodes","_","groupBy","r","p","val","CampCompareChartContainer","predictEnabled","setPredictEnabled","_React$useState3","_React$useState4","variables","year","_ref3","dataForD3","candidate","groupDataByRegionAndCamp","dcd_candidates","_ref4","defaultChartData","d3Data","indexFromOriginalChartData","record","CampCompareChartContainer_Container","organisms_PredictionChartPanel","TimeGrid","Grid","Countdown_templateObject","Time","Countdown_templateObject2","Unit","Countdown_templateObject3","Countdown","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","state","days","hours","min","sec","_this2","interval","setInterval","date","calculateCountdown","setState","stop","endDate","diff","Date","parse","timeLeft","years","millisec","floor","clearInterval","String","countDown","container","item","xs","addLeadingZeros","Component","defaultProps","getSingleFeatureFromPoint","lng","lat","pt","turf","dc2019","features","feature","poly","geometry","coordinates","properties","CACODE","getAllFeaturesFromPoint","point","featuresArray","arguments","dc2003","dc2007","dc2011","dc2015","polygonProps","n","split","renderInputComponent","inputProps","classes","_inputProps$inputRef","inputRef","TextField","fullWidth","InputProps","node","input","disableUnderline","endAdornment","InputAdornment","position","IconButton","aria-label","Search_default","renderSuggestion","suggestion","isHighlighted","matches","match","parts","MenuItem","selected","part","highlight","getSuggestionValue","IntegrationAutosuggest","suggestions","debounced","handleSuggestionsFetchRequested","_ref2","cancel","debounce","getSuggestions","then","handleSuggestionsClearRequested","handleChange","handleSuggestionSelected","suggestionValue","suggestionIndex","sectionIndex","method","coordinate","handleAddressSelected","inputValue","trim","toLowerCase","AddressParser","records","fullAddress","LANG_ZH","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","root","dist_default","placeholder","InputLabelProps","shrink","theme","suggestionsList","suggestInput","renderSuggestionsContainer","options","Paper","square","containerProps","withStyles","flexGrow","suggestionsContainerOpen","zIndex","marginTop","spacing","display","listStyleType","borderRadius","boxShadow","textDecoration","searchButton","GET_PEOPLE","PeopleSearcher_templateObject","PeopleSearcher_templateObject2","withApollo","handlePeopleSelected","_useState3","_useState4","setSuggestions","fetchUsers","asyncToGenerator","regenerator_default","mark","_callee","keyword","wrap","_context","prev","client","nameRegex","sent","abrupt","dcd_people","_x","apply","PeopleSearcher_Container","evt","_ref6","_ref5","homeUrl","process","avatarPath","suggestionNameStyle","marginLeft","selectedSuggestionNameStyle","Avatar","src","imgProps","onError","e","DRAWER_OPEN","DRAWER_CLOSE","drawer","action","open","drawerInitialState","ContextStore","createContext","AreasTabs","AreaTabs_templateObject","AreasTab","AreaTabs_templateObject2","AreaTabs","expanded","setExpanded","AreaTabs_TabPanel","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","DistrictExpansionPanel","ExpansionPanel","DistrictSelector_templateObject3","DistrictExpansionPanelSummary","ExpansionPanelSummary","DistrictSelector_templateObject4","DistrictExpansionPanelDetails","ExpansionPanelDetails","DistrictSelector_templateObject5","dispatch","useContext","renderArea","area","districts","dc_code","TransitionProps","unmountOnExit","expandIcon","ExpandMore_default","dc_name_zh","DistrictSelector_Container","areas","uniqBy","dcd_districts","area_code","area_name_zh","areasWithDistricts","areaNames","SearchTab_templateObject","ExpandedRow","SearchTab_templateObject2","ContentRowContainer","SearchTab_templateObject3","AddressSearchContainer","SearchTab_templateObject4","TabContainer","SearchTab_templateObject5","TabButton","SearchTab_templateObject6","active","path","onTabSelected","tab","SearchTab_Container","molecules_DistrictSelector","AddressSearcher","molecules_PeopleSearcher","landing_templateObject","TopSection","landing_templateObject2","StyledCampCompareChartContainer","landing_templateObject3","CountdownContainer","landing_templateObject4","StyledSearchTab","SearchTab","landing_templateObject5","IndexPage","autoCompleteList","dcd_config","textAlign","atoms_Countdown","landing_Container","templates_Summary","PeopleAvatar","Avatar_templateObject","dimension","borderwidth","StyledAppBar","AppBar","ScrollableTabs_templateObject","indicatorcolor","_props$tabnumber","tabnumber","shouldCenter","scrollButtons","ScrollableTabs_TabPanel","MobileTableCell","TableCell","CouncillorMeetingAttendance_templateObject","CouncillorMeetingAttendace","meetings","Table","TableHead","TableRow","align","TableBody","m","scope","meeting","meet_name","meet_type","meet_year","attended","propsType","PropTypes","array","CouncillorMeetingAttendaceContainer","personId","person_id","flatten","dcd_councillors","meeting_attendances","CouncillorMeetingAttendance","int","StyledCard","Card","Card_templateObject","PlainCard","PersonElectionHistoriesTitle","PersonElectionHistories_templateObject","createQueryStringToBattlegroundPage","election","targetPath","selectedIndex","findIndex","polygon","find","getCentroidFromYearAndCode","dccaHistories","PersonElectionHistories","histories","election_type","to","Card_PlainCard","NavigateNext_default","political_affiliation","is_won","PersonElectionHistoriesContainer","templates_PersonElectionHistories","dcd_people_by_pk","PersonEvent_templateObject","StyledMicrolink","Microlink","PersonEvent_templateObject2","PersonEvent","eventType","description","validatedUrl","url","exec","validateUrl","PersonEvent_StyledCard","CardContent","getEventTypeText","substring","trimDescription","FCPersonData_templateObject","StyledButton","FCPersonData_templateObject2","FCPersonData","fcUuid","filterFunc","events","setEvents","_fetchData","axios","fetchData","fcUri","FCPersonData_Container","href","molecules_PersonEvent","eventId","focus","string","func","isRequired","StyledChip","Chip","Tag_templateObject","fontsize","backgroundcolor","bordercolor","Tag","handleClick","GET_PEOPLE_PROFILE","profile_templateObject","FlexRowContainer","profile_templateObject2","CandidateHeaderContainer","profile_templateObject3","CandidateAvatorContainer","profile_templateObject4","PersonName","profile_templateObject5","ElectionStatus","profile_templateObject6","FacebookPageButton","profile_templateObject7","PersonHighlightContainer","profile_templateObject8","BreadcrumbsContainer","profile_templateObject9","ProfilePage","handleElectionDetailButton","renderFacebook","fb_id","renderIntroText","currentTerm","term_to","electionResult","renderElectionStatusText","primaryText","tags","Tag_Tag","params","councillors","lastElection","hasMeetings","personHighlight","estimated_yob","related_organization","career","occupation","fc_uuid","Breadcrumbs","separator","marginBottom","pr","ScrollableTabs_ScrollableTabs","templates_FCPersonData","containers_PersonElectionHistoriesContainer","CouncillorMeetingAttendanceContainer","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","font","highlightStyle","OLMap","handleMapClick","_this$props","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","featuresLayer","_this$props2","dc","isDCDataExist","featureSource","VectorSource","GeoJSON","readFeatures","VectorLayer","source","getText","setText","getProperties","CNAME","layers","TileLayer","XYZ","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","getSize","Select","addInteraction","highlightedFeature","getSource","removeFeature","addFeature","bps","createBreakpoints","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","StyledDivier","Divider","DistrictCard_templateObject6","SeperatedRow","DistrictCard_templateObject7","DistrictCard","onPrevElection","ArrowBack_default","getFullYear","onNextElection","ArrowForward_default","stations","councillor","DistrictCard_Container","border","renderPrevElectionButton","renderNextElectionButton","station","MainAreas_templateObject","MainAreas","MainAreas_Container","flexWrap","alignContent","mr","WaffleChart","squareValue","theData","population","units","round","percentage","groupIndex","squareSize","row","col","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","parseInt","_data$dc_constituenci","dc_constituencies","vote_stat","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","gender","Metrics_Container","charts_WaffleChart","FullWidthBox","district_templateObject","LowerBackgroundContainer","district_templateObject2","district_templateObject3","up","DistrictCardContainer","district_templateObject4","DistrictPage","handleCandidateSelected","handleChangeDistrict","nextProps","nextState","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","district_FlexRowContainer","sm","md","components_OLMap","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","CandidatesContainer_templateObject","CandidateList","CandidatesContainer_templateObject2","Candidate","CandidatesContainer_templateObject3","CandidateNumber","CandidatesContainer_templateObject4","CandidateName","CandidatesContainer_templateObject5","CandidatesContainer","CandidatesContainer_Container","direction","IMAGE_HOST_URI","candidate_number","ConstituencyCard_templateObject","TagContainer","ConstituencyCard_templateObject2","sortedTags","ConstituencyCard_StyledCard","stopPropagation","containers_CandidatesContainer","Placeholder","Loading_templateObject","CentredCircularProgress","Loading_templateObject2","Loading","thickness","list_templateObject","DistrictListPage","_props$match$params","Loading_Loading","list_Container","organisms_ConstituencyCard","DCCACompareMap_templateObject","hoverStyle","DCCACompareMap","mapClick","mapBrowserEvent","mapHover","highlightHoveredFeature","handleMapLoaded","controls","featureHover","centroid","getInteriorPoint","getCoordinates","selectBySingleClick","selectByHover","condition","pointerMove","hoveredFeature","DCCACompareMap_MapContainer","Councillor","meta","participatedOrdinary","participatedByElection","lastParticipated","votesDiff","isWon","participatedElections","electionYear","myVotes","highestVotes","getCouncillorMeta","term_from","alignSelf","CouncillorContainer","templates_Councillor","number","UnstyledButton","Button_templateObject","GroupedBarChart","firstColor","secondColor","maxBy","chart","yScale","x0","x1","tickSizeInner","tickFormat","DistrictNewVoterChartContainer","filterIndex","getDataForChat","category_1","console","transformedData","newData","valueDict","ageGroupPrefix","dictKey","getTransformedData","chartData","increased","mostIncreasedGroup","newVotes","groupedByAge","genders","groupedByGender","types","groupedByType","newVoters","totalVoters","getMeta","DCCAOverview_templateObject","DCCAOverview_templateObject2","DCCAOverview","showGraph","voterData","new_voters_percentage","aggregations","new_voters","all_voters","toFixed","DCCAOverview_Container","toggleGraph","KeyboardArrowUp_default","DCCAOverview_TagContainer","DCCAElectionResult_templateObject","CandiateBox","DCCAElectionResult_templateObject2","CandidateAvatar","DCCAElectionResult_templateObject3","DCCAElectionResult_templateObject4","DCCAElectionResult_templateObject5","VotePercentageBar","LinearProgress","DCCAElectionResult_templateObject6","VoteText","DCCAElectionResult_templateObject7","DCCAElectionResult","sortedCandidates","DCCAElectionResult_Container","vote_percentage","vote_sum","DCCAElectionResult_CandidateNumber","DCCAElectionResult_CandidateName","GET_DCCA_ELECTION_HISTORIES","DCCAElectionHistories_templateObject","DCCAElectionResultContainer","DCCAElectionHistories_templateObject2","CampText","DCCAElectionHistories_templateObject3","DCCAElectionHistories","presetTabIndex","filteredHistories","candi","dcd_candidates_aggregate","aggregate","sum","templates_DCCAElectionResult","groupVoteStat","VOTERS","NEW_VOTERS","battleground_templateObject","battleground_templateObject2","ToggleMapButton","battleground_templateObject3","BattleGroundPage","currentPoint","showMap","queryYear","results","RegExp","decodeURIComponent","getParameterByName","search","previousDistricts","intersect_area","pointHistory","DCCAStatus","battleground_BreadcrumbsContainer","battleground_Container","district_DCCAOverview","ExpandLess_default","Collapse","in","components_DCCACompareMap","templates_DCCAElectionHistories","containers_CouncillorContainer","disclaimer_templateObject","DisclaimerPage","disclaimer_Container","dc_templateObject","dc_Container","NotFoundPage","MobileAppBar_templateObject","AppBarTitle","MobileAppBar_templateObject2","MobileAppBar","MobileAppBar_StyledAppBar","Toolbar","disableGutters","Menu_default","StyledFooter","Footer_templateObject","StyledDivider","Footer_templateObject2","StyledFooterLink","Footer_templateObject3","LinkBox","Footer_templateObject4","data-href","data-width","data-layout","data-action","data-size","data-show-faces","data-share","GoogleAnalytics","initialize","withTracker","WrappedComponent","trackPage","page","set","pageview","_React$Component","HOC","inherits","createClass","pathname","currentPage","nextPage","SearchMenu_templateObject","LeftMargin","SearchMenu_templateObject2","goToPage","route","organisms_SearchTab","SearchDrawer_templateObject","MenuContainer","SearchDrawer_templateObject2","NavBarButton","SearchDrawer_templateObject3","SearchDrawer_Container","Close_default","organisms_SearchMenu","overview_templateObject","DistrictOverviewPage","overview_Container","ApolloClient","uri","useStyles","makeStyles","drawerPaper","maxWidth","Root","App_templateObject","ContentContainer","App_templateObject2","Wrapper","App_templateObject3","App","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","MuiThemeProvider_default","src_ContextStore","Provider","CssBaseline","organisms_MobileAppBar","react_router","exact","AboutDCPage","NotfoundPage","organisms_Footer","Drawer","paper","anchor","SearchDrawer","ReactDOM","render","react_router_dom","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.a371cb3c.chunk.js","sourcesContent":["// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nid\nname_zh\nname_en\ndistrict {\n  dc_code\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n  type\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      intersect_area\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }  \n}\n`\n\nexport const QUERY_GET_CONSTITUENCIES_BY_TAG = gql`\nquery($year: Int!, $tag: String!) {\n  dcd_constituencies(\n    where: { year: { _eq: $year }, tags: { tag: {_eq: $tag} } }\n    order_by: {code: asc }\n  ) {\n    ${CONSTITUENCIES_DATA}\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_DISTRICT = gql`\n  query($year: Int!, $code: String!) {\n    dcd_districts( where: { dc_code: { _eq: $code} }) {\n      area_code\n      area_name_zh\n      dc_code\n      dc_name_zh\n      constituencies( where: { year: { _eq: $year } }, order_by: {code: asc} ) {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_AREA = gql`\n  query {\n    dcd_districts {\n      area_code\n      area_name_zh\n      dc_code\n      dc_name_zh\n      constituencies(where: { year: { _eq: 2019 } }) {\n        code\n        name_zh\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_ELECTIONS = gql`\n  query get_person_elections($person_id: Int!) {\n    dcd_people_by_pk(id: $person_id) {\n      candidates(order_by: { year: desc }) {\n        year\n        constituency {\n          name_zh\n          code\n        }\n        election_type\n        camp\n        political_affiliation\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_MEETING_ATTENDANCES = gql`\n  query get_meeting_attendance($person_id: Int!) {\n    dcd_councillors(where: { person: { id: { _eq: $person_id } } }) {\n      year\n      cacode\n      term_from\n      term_to\n      career\n      district {\n        dc_name_zh\n      }\n      political_affiliation\n      post\n      constituency {\n        id\n        name_zh\n      }\n      meeting_attendances(\n        order_by: { meeting: { meet_year: desc }, total: desc }\n      ) {\n        meeting {\n          meet_name\n          meet_type\n          meet_year\n        }\n        attended\n        total\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_COUNCILLOR = gql`\n  query fetch_councillors($year: Int!, $code: String!) {\n    dcd_councillors(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { term_to: desc }\n    ) {\n      year\n      term_to\n      term_from\n      political_affiliation\n      constituency {\n        name_zh\n        name_en\n        code\n      }\n      person {\n        id\n        name_en\n        name_zh\n        uuid\n        candidates(order_by: { year: desc }) {\n          votes\n          is_won\n          year\n          cacode\n          election_type\n          constituency {\n            year\n            name_en\n            name_zh\n            candidates {\n              person {\n                id\n                name_en\n                name_zh\n              }\n              year\n              election_type\n              votes\n              political_affiliation\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CANDIDATES = gql`\n  query fetch_candidates($year: Int!, $code: String!) {\n    dcd_candidates(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { candidate_number: asc }\n    ) {\n      candidate_number\n      is_won\n      political_affiliation\n      election_type\n      camp\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n        related_organization\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONSTITUENCY_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_constituencies(where: { year: { _eq: $year } }) {\n      code\n      predecessors(limit: 1, order_by: { intersect_area: desc }) {\n        predecessor {\n          code\n          candidates {\n            camp\n            votes\n            is_won\n          }\n        }\n      }\n      vote_stats {\n        type\n        subtype\n        category_1\n        category_2\n        count\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_NOMINATION_SUMMARY = gql`\n  query {\n    dcd_constituencies(where: { year: { _eq: 2019 } }) {\n      code\n      name_zh\n      candidates {\n        camp\n        nominated_at\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_LANDING_ALERT = gql`\n  query {\n    dcd_config(where: { key: { _eq: \"landing_alert\" } }) {\n      value\n    }\n  }\n`\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red, green } from '@material-ui/core/colors'\nexport const headingFontFamily = 'Noto Sans TC, sans-serif'\nexport const bodyFontFamily = 'Noto Sans TC, sans-serif'\n\nexport const FONT_FAMILY = [\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: FONT_FAMILY.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n    fontSize: 20,\n    fontWeight: 500,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 22,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: FONT_FAMILY,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n    fontSize: 14,\n    lineHeight: 1.4,\n  },\n  body2: {\n    fontFamily: bodyFontFamily,\n    fontSize: 12,\n  },\n}\n\nexport const COLORS = {\n  main: {\n    text: '#000',\n    primary: '#7B68EE', // mediumslateblue\n    secondary: '#CCC4F8', // 2019-10-19 Hackathon - secondary color to voter bar chart\n    background: '#fff',\n  },\n  mainText: 'black',\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  camp: {\n    democracy: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    establishment: {\n      background: '#45b6ff',\n      text: 'black',\n    },\n    localist: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    other: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n    uncertain: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n  },\n  common: {\n    success: green[800],\n    failure: red[800],\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: COLORS.main.primary,\n      contrastText: COLORS.main.text,\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n  },\n})\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\nimport { COLORS } from 'ui/theme'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: black;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\nexport const DefaultLink = styled(UnstyledLink)`\n  color: ${COLORS.main.primary};\n  font-weight: 500;\n`\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import styled from 'styled-components'\nimport Columns from 'components/atoms/Columns'\nimport { COLORS } from 'ui/theme'\n\nexport const Alert = styled(Columns)`\n  && {\n    width: 100%;\n    padding: 4px 16px 1px;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n  }\n`\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_NOMINATION_SUMMARY } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport { DefaultLink } from 'components/atoms/Link'\nimport Columns from 'components/atoms/Columns'\nimport { Alert } from 'components/atoms/Alert'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 16px;\n    box-shadow: none;\n  }\n`\n\nconst FlexLink = styled(DefaultLink)`\n  && {\n    font-size: 14px;\n    margin-right: 8px;\n  }\n`\nconst Summary = props => {\n  return (\n    <Query query={QUERY_GET_NOMINATION_SUMMARY}>\n      {({ loading, error, data }) => {\n        if (error) return `Error! ${error}`\n\n        let result\n        if (data && data.dcd_constituencies) {\n          result = data.dcd_constituencies.reduce(\n            (a, c) => {\n              a.no_of_candidates += c.candidates.length\n\n              const district = {\n                code: c.code,\n                name_zh: c.name_zh,\n              }\n\n              if (!a.stat[c.candidates.length]) {\n                a.stat[c.candidates.length] = []\n                if (c.candidates.length > a.max) a.max = c.candidates.length\n              }\n\n              a.stat[c.candidates.length].push(district)\n\n              if (c.candidates.length > 2) {\n                const district = {\n                  code: c.code,\n                  name_zh: c.name_zh,\n                }\n                a.more_than_2.push(district)\n              }\n              return a\n            },\n            { no_of_candidates: 0, stat: {}, more_than_2: [], max: 0 }\n          )\n\n          result.no_competition = result.stat['0']\n            ? result.stat['0'].length\n            : 0 + result.stat['1']\n            ? result.stat['1'].length\n            : 0\n        }\n\n        return (\n          <>\n            {result && (\n              <Container>\n                <Typography variant=\"h6\" gutterBottom>\n                  2019年區議會選舉將於11月24日舉行，屆時將選出香港18區區議會共\n                  <b>{data.dcd_constituencies.length}</b>個民選議席。\n                </Typography>\n\n                <Typography variant=\"h6\" gutterBottom>\n                  本網頁已收錄<b>{result.no_of_candidates}</b>\n                  名參選人資料，暫時全港所有選區均有競爭，其中\n                  <b>{result.more_than_2.length}</b>\n                  個選區多於兩人參選。\n                </Typography>\n\n                {[...Array(result.max + 1).keys()]\n                  .reverse()\n                  .filter(a => a > 3)\n                  .map((noc, i) => (\n                    <Typography variant=\"h6\" gutterBottom key={i}>\n                      <Alert>{noc}人參選：</Alert>\n                      <Columns>\n                        {result.stat[noc].map((district, index) => (\n                          <FlexLink\n                            key={index}\n                            onClick={() =>\n                              props.history.push(\n                                `district/2019/${district.code}`\n                              )\n                            }\n                          >\n                            {`${district.name_zh}`}\n                          </FlexLink>\n                        ))}\n                      </Columns>\n                    </Typography>\n                  ))}\n\n                {/* <Columns>\n                  {result.more_than_2.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(`district/2019/${district.code}`)\n                      }\n                    >\n                      {`${district.name_zh}`}\n                    </FlexLink>\n                  ))}\n                </Columns> */}\n              </Container>\n            )}\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default withRouter(Summary)\n","// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n    unelected_dc_seat: 0,\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n    unelected_dc_seat: 0,\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n    unelected_dc_seat: 0,\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n    unelected_dc_seat: 0,\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n    unelected_dc_seat: 0,\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n    unelected_dc_seat: 0,\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n    unelected_dc_seat: 0,\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n    unelected_dc_seat: 0,\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n    unelected_dc_seat: 0,\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n    unelected_dc_seat: 2,\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n    unelected_dc_seat: 1,\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n    unelected_dc_seat: 6,\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n    unelected_dc_seat: 4,\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n    unelected_dc_seat: 2,\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n    unelected_dc_seat: 2,\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n    unelected_dc_seat: 1,\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n    unelected_dc_seat: 1,\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n    unelected_dc_seat: 8,\n  },\n}\n","import { DCREGION } from 'constants/dcregion'\n\nexport const getDistrictListUriFromTag = tag => `/district/2019/tags/${tag}`\n\nexport const getDistrictOverviewUriFromTag = code => `/district/2019/${code}`\n\nexport const getConstituencyUriFromTag = code => `/district/2019/${code}`\n\nexport const getCodeFromDistrictName = name => {\n  let code = 'A'\n  Object.keys(DCREGION).forEach(k => {\n    if (DCREGION[k].zh_hk === name) {\n      code = k\n    }\n  })\n  return code\n}\n\n/**\n * Passing a councillor object and get the meta data for it\n * (By QUERY_GET_COUNCILLOR_AND_CANDIDATES query)\n */\nexport const getCouncillorMeta = councillor => {\n  const result = {\n    participatedOrdinary: 0,\n    participatedByElection: 0,\n    lastParticipated: {\n      year: 2019,\n      type: 'ordinary',\n      votesDiff: 0,\n      votes: 0,\n      isWon: false,\n    },\n  }\n\n  // should already sorted from query\n  const participatedElections = councillor.person.candidates || []\n  result.participatedByElection = participatedElections.filter(\n    c => c.election_type === 'by-election'\n  ).length\n  result.participatedOrdinary = participatedElections.filter(\n    c => c.election_type === 'ordinary'\n  ).length\n\n  if (participatedElections.length > 0) {\n    // Filter out 2019 result\n    const e = participatedElections.filter(\n      e => !(e.year === 2019 && e.election_type === 'ordinary')\n    )[0]\n    const electionYear = e.year\n\n    const myVotes = e.constituency.candidates.find(\n      c => c.person.id === councillor.person.id && c.year === electionYear\n    ).votes\n    const highestVotes = e.constituency.candidates\n      .filter(\n        c => c.person.id !== councillor.person.id && c.year === electionYear\n      )\n      .map(c => c.votes)\n      .reduce((c, v) => Math.max(c, v), 0)\n    result.lastParticipated = {\n      year: e.year,\n      isWon: e.is_won,\n      votesDiff: myVotes - highestVotes,\n      votes: myVotes,\n      type: e.election_type,\n    }\n  }\n  // if (person.candidates) {\n  //   const sortedElections = person.candidates.sort((a, b) => b.year - a.year)\n  //   result.lastParticipatedYear = sortedElections[0].year\n  //   result.participationCount = sortedElections.length\n\n  //   let relectedCount = 0\n  //   for (let i = 0; i < sortedElections.length; i++) {\n  //     const { is_won } = sortedElections[i]\n  //     if (!is_won) {\n  //       break\n  //     }\n  //     relectedCount++\n  //   }\n\n  //   result.relectedCount = relectedCount - 1\n\n  //   sortedElections.forEach(election => {\n  //     const year = election.year\n  //     const yearResult = {}\n\n  //     yearResult.uncontested =\n  //       election.constituency.candidates.length === 1 ? true : false\n\n  //     const myVotes = election.constituency.candidates.find(\n  //       c => c.person_id === person.id\n  //     ).votes\n  //     const highestVotes = election.constituency.candidates\n  //       .filter(c => c.person_id !== person.id)\n  //       .map(c => c.votes)\n  //       .reduce((c, v) => Math.max(c, v), 0)\n\n  //     yearResult.votes = myVotes\n  //     yearResult.diff = myVotes - highestVotes\n\n  //     result[year] = yearResult\n  //   })\n  // }\n\n  // console.log(result)\n  return result\n}\n\nexport const getColorFromCamp = camp => {\n  if (!camp) return 'uncertain'\n  const mapping = {\n    泛民: 'democracy',\n    民主: 'democracy',\n    建制: 'establishment',\n    本土: 'localist',\n    傘兵: 'localist',\n    自決: 'localist',\n    其他: 'other',\n    不明: 'uncertain',\n  }\n\n  return mapping[camp] || 'uncertain'\n}\n\nexport const getColorFromPoliticalAffiliation = pa => {\n  if (!pa) return 'uncertain'\n\n  const mapping = {\n    democracy: [\n      '民主黨',\n      '公民黨',\n      '香港民主民生協進會',\n      '民協',\n      '社會民主連線',\n      '支聯會',\n      '民主動力',\n      '街坊工友服務處',\n      '街工',\n      '工黨',\n      '職工盟',\n      '新民主同盟',\n      '香港本土',\n      '獨立民主派',\n    ],\n    establishment: [\n      '民主建港協進聯盟',\n      '民建聯',\n      '新界社團聯會',\n      '新社聯',\n      '香港工會聯合會',\n      '工聯會',\n      '港九勞工社團聯會',\n      '香港經濟民生聯盟',\n      '西九新動力',\n      '自由黨',\n      '新民黨',\n      '新世紀論壇',\n    ],\n    localist: [\n      '香港眾志',\n      '青年新政',\n      '本土民主前線',\n      '東九龍社區關注組',\n      '天水圍民生關注平台',\n      '慈雲山建設力量',\n      '屯門社區關注組',\n      '長沙灣社區發展力量',\n      '社區網絡聯盟',\n      '沙田社區網絡',\n      '荃灣社區網絡',\n      '天水圍社區發展網絡',\n      '屯門社區網絡',\n      '葵青連結動力',\n      '藍田社區網絡',\n      '埔向晴天',\n      '荃灣民生動力',\n      '北區動源',\n      '維多利亞社區協會',\n    ],\n    other: ['民主思路', '新思維'],\n  }\n\n  for (let camp of Object.keys(mapping)) {\n    for (let party of mapping[camp]) {\n      if (pa.includes(party)) {\n        return camp\n      }\n    }\n  }\n\n  return 'uncertain'\n}\n\nexport const getProfilePath = person => {\n  const { name_en, name_zh, uuid } = person\n  return `/profile/${name_zh || name_en}/${uuid}`\n}\n\nexport const formatNumber = num =>\n  num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')\n\nexport const getParameterByName = (name, url) => {\n  if (!url) url = window.location.href\n  name = name.replace(/[[\\]]/g, '\\\\$&')\n  const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url)\n  if (!results) return null\n  if (!results[2]) return ''\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\nimport * as d3 from 'd3'\nimport { FONT_FAMILY, COLORS } from 'ui/theme'\nimport {\n  getConstituencyUriFromTag,\n  getCodeFromDistrictName,\n} from 'utils/helper'\n\nconst ROW_HEIGHT = 20\n\nconst Styled = styled(Box)`\n  && {\n    .link {\n      text {\n        cursor: pointer;\n        color: ${COLORS.main.primary};\n        font-weight: 500;\n      }\n    }\n  }\n`\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const CAMP_COLORS = [\n    COLORS.camp.establishment.background,\n    COLORS.camp.other.background,\n    COLORS.camp.democracy.background,\n  ]\n\n  const d3Container = useRef(null)\n\n  const updateLegend = (res, svg) => {\n    const data = [\n      {\n        camp: 'establishment',\n        label: '建制',\n        color: CAMP_COLORS[0],\n        count: res.data.map(d => d['建制']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['建制'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n      // {\n      //   camp: 'other',\n      //   label: '其他',\n      //   color: CAMP_COLOR_OTH,\n      //   count: res.data.map(d => d['其他']).reduce((c, v) => c + v, 0),\n      // },\n      {\n        camp: 'democracy',\n        label: '非建制',\n        color: CAMP_COLORS[2],\n        count: res.data.map(d => d['非建制']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['非建制'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n    ]\n\n    svg.selectAll('.legend').remove()\n\n    const legend = svg\n      .selectAll('legend')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr(\n        'transform',\n        (d, i) => `translate(${i * (dimensions.width - 100)}, 8)`\n      )\n\n    legend\n      .append('text')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dy', '.5em')\n      .style('text-anchor', 'start')\n      .attr('font-size', '14px')\n      .text(function(d) {\n        return d.overhalf_count > 9\n          ? `${d.label}${d.overhalf_count}區過半數`\n          : ''\n      })\n\n    legend\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', 16)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return d.color\n      })\n\n    legend\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 29)\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return `${d.label} ${d.count}席`\n      })\n  }\n\n  const drawChart = res => {\n    const { columns, data } = res\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const margin = { top: 65, right: 15, bottom: 0, left: 50 }\n    const width = dimensions.width\n    const height = data.length * ROW_HEIGHT + margin.top + margin.bottom\n\n    const labels = ['建制', '其他', '非建制']\n    const series = d3\n      .stack()\n      .keys(columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    series.forEach((s, index) => {\n      s.forEach((d, y) => {\n        d.count = data[y][labels[index]]\n        d.index = index\n      })\n    })\n\n    const yAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(${margin.left},0)`)\n        .attr('class', 'link')\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(CAMP_COLORS)\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const isCreate = d3\n      .select(d3Container.current)\n      .select('svg')\n      .empty()\n\n    if (isCreate) {\n      const svg = d3\n        .select(d3Container.current)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height)\n\n      const bar = svg\n        .append('g')\n        .selectAll('g')\n        .data(series)\n        .enter()\n        .append('g')\n\n      bar\n        .attr('fill', d => color(d.key))\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .attr('x', d => (d.index === 0 ? x(d[0]) : x(d[1])))\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', 0)\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => x(d[0]))\n        .attr('width', d => x(d[1]) - x(d[0]))\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', '12px')\n        .attr('fill', d => {\n          switch (d.index) {\n            case 0:\n            case 2:\n              return 'black'\n            default:\n              return 'white'\n          }\n        })\n\n      // Add the y axis and add on click function to it\n      svg.append('g').call(yAxis)\n      svg.selectAll('.tick').on('click', function(d, i) {\n        const code = getCodeFromDistrictName(d)\n        window.location = getConstituencyUriFromTag(code)\n      })\n\n      svg.append('g').call(xAxis)\n\n      // middle line\n      const middle = (width + margin.left - margin.right) / 2\n      svg\n        .append('line')\n        .attr('x1', middle + 1)\n        .attr('y1', margin.top)\n        .attr('x2', middle + 1)\n        .attr('y2', height - margin.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#3a3a3a')\n        .attr('opacity', '0.6')\n        .style('stroke-dasharray', '10, 4')\n\n      //Legend\n      updateLegend(res, svg)\n    } else {\n      // Update chart\n      const svg = d3.select(d3Container.current).select('svg')\n\n      const bar = svg\n        .select('g')\n        .selectAll('g')\n        .data(series)\n\n      bar\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => {\n          return x(d[0])\n        })\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', d => x(d[1]) - x(d[0]))\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('opacity', 0)\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n      bar\n        .selectAll('text')\n        .transition()\n        .delay(function(d) {\n          return 800 + Math.random() * 500\n        })\n        .attr('opacity', 1)\n\n      updateLegend(res, svg)\n    }\n  }\n\n  const updateWindowSize = () => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', updateWindowSize)\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    updateWindowSize()\n  }, [])\n\n  return (\n    <Styled>\n      <div ref={d3Container} style={{ height: 'auto', width: '100%' }}></div>\n    </Styled>\n  )\n}\n","import React from 'react'\nimport Slider from '@material-ui/core/Slider'\n\nexport default props => {\n  return <Slider {...props} />\n}\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${COLORS.primary};\n  }\n`\n\nexport const SuccessText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.success};\n    }\n  }\n`\n\nexport const FailureText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.failure};\n    }\n  }\n`\n\nexport default props => {\n  return <Typography {...props} />\n}\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Slider from 'components/atoms/Slider'\nimport Text from 'components/atoms/Text'\n\nimport Columns from 'components/atoms/Columns'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\n\nconst SliderContainer = styled(Box)`\n  && {\n    padding-left: 16px;\n    flex-grow: 1;\n    padding-right: 16px;\n  }\n`\n\nconst Label = styled(Text)`\n  && {\n    min-width: 80px;\n  }\n`\n\nexport const ValueSlider = props => {\n  const { value, setValue } = props\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue)\n  }\n\n  const { label, className, color } = props\n  return (\n    <div className={className}>\n      <Columns>\n        <Label>{label}</Label>\n        <SliderContainer>\n          <Slider value={value} onChange={handleSliderChange} color={color} />\n        </SliderContainer>\n        <Text>{value}%</Text>\n      </Columns>\n    </div>\n  )\n}\n\nValueSlider.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.number.isRequired,\n  setValue: PropTypes.func.isRequired,\n}\n\nexport default ValueSlider\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\n\nTabBar.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n  selectedTab: PropTypes.number.isRequired,\n  setSelectedTab: PropTypes.func.isRequired,\n}\n\nexport default function TabBar(props) {\n  const { titles, selectedTab, setSelectedTab } = props\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n\n  return (\n    <>\n      <Tabs value={selectedTab} onChange={handleChange} centered={true}>\n        {titles.map((title, index) => (\n          <Tab\n            label={title}\n            id={`scrollable-auto-tab-${index}`}\n            key={index}\n            aria-controls={`scrollable-auto-tabpanel-${index}`}\n          />\n        ))}\n      </Tabs>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Typography from '@material-ui/core/Typography'\nimport TabBar from 'components/molecules/TabBar'\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n}\n\nexport default function ScrollableTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(0)\n  const { titles, children } = props\n\n  return (\n    <>\n      <TabBar\n        titles={titles}\n        setSelectedTab={setSelectedTab}\n        selectedTab={selectedTab}\n      />\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport ValueSlider from 'components/molecules/ValueSlider'\nimport CheckBox from 'components/molecules/CheckBox'\nimport PropTypes from 'prop-types'\nimport Tabs from 'components/organisms/Tabs'\nimport { COLORS } from 'ui/theme'\nimport Text from 'components/atoms/Text'\nimport Rows from 'components/atoms/Rows'\nimport { Box } from '@material-ui/core'\n\nconst StyledValueSlider = styled(ValueSlider)`\n  && {\n    margin-top: 8px;\n    .MuiSlider-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst TabSection = styled(Box)`\n  && {\n    padding: 8px 0 0;\n  }\n`\n\nconst StyledCheckBox = styled(CheckBox)`\n  && {\n    .MuiSvgIcon-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nPredictionChartPanel.propTypes = {\n  settings: PropTypes.object.isRequired,\n  setSettings: PropTypes.func.isRequired,\n}\n\nfunction PredictionChartPanel(props) {\n  const { settings, setSettings } = props\n\n  const setSettingConfigFunc = field => flag => {\n    setSettings({\n      config: Object.assign(settings.config, { [field]: flag }),\n      camp_rate: [...settings.camp_rate],\n      vote_rate: [...settings.vote_rate],\n    })\n  }\n  const setSettingFunc = (x, y) => value =>\n    setSettings({\n      config: {\n        ...settings.config,\n      },\n      camp_rate: settings.camp_rate.map((v, i) =>\n        x === 0 && y === i ? value : v\n      ),\n      vote_rate: settings.vote_rate.map((v, i) =>\n        x === 1 && y === i ? value : v\n      ),\n    })\n  return (\n    <div>\n      <Tabs titles={['投票取向', '投票率', '設定']} buttonLayout=\"centered\">\n        <TabSection>\n          <Text variant=\"h5\">非建制支持率</Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.camp_rate[0]}\n            setValue={setSettingFunc(0, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.camp_rate[1]}\n            setValue={setSettingFunc(0, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.camp_rate[2]}\n            setValue={setSettingFunc(0, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n        <TabSection>\n          <Text variant=\"h5\">已登記選民投票率</Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.vote_rate[0]}\n            setValue={setSettingFunc(1, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.vote_rate[1]}\n            setValue={setSettingFunc(1, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.vote_rate[2]}\n            setValue={setSettingFunc(1, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n        <TabSection>\n          <Rows>\n            <StyledCheckBox\n              label=\"只計算新增選民，同時假設上屆投票選民維持相冋政治取向\"\n              checked={settings.config.reference_last_election}\n              setChecked={setSettingConfigFunc('reference_last_election')}\n            ></StyledCheckBox>\n            <StyledCheckBox\n              label=\"為上屆自動當選議員加入對立陣營對手\"\n              checked={settings.config.auto_won_add_components}\n              setChecked={setSettingConfigFunc('auto_won_add_components')}\n            ></StyledCheckBox>\n          </Rows>\n        </TabSection>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default PredictionChartPanel\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FormControlLabel, Checkbox } from '@material-ui/core/'\n\nCheckBox.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  setChecked: PropTypes.func.isRequired,\n}\n\nexport default function CheckBox(props) {\n  const { label, checked, setChecked, className } = props\n\n  function handleChange(event) {\n    setChecked(event.target.checked)\n  }\n\n  return (\n    <>\n      <FormControlLabel\n        className={className}\n        control={<Checkbox checked={checked} onChange={handleChange} />}\n        label={label}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, CircularProgress } from '@material-ui/core'\nimport Text from 'components/atoms/Text'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nLoadingButton.propTypes = {\n  onClick: PropTypes.func,\n  isLoading: PropTypes.bool.isRequired,\n  label: PropTypes.string.isRequired,\n}\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  && {\n    margin: 4px;\n    color: ${COLORS.main.background};\n  }\n`\n\nconst WhiteText = styled(Text)`\n  && {\n    color: ${COLORS.main.background};\n  }\n`\n\nexport default function LoadingButton(props) {\n  const { label, isLoading, onClick, className } = props\n\n  return (\n    <>\n      <Button\n        variant=\"outlined\"\n        className={className}\n        disabled={isLoading}\n        onClick={onClick}\n      >\n        {isLoading && (\n          <>\n            <StyledCircularProgress size={14} color=\"secondary\" />\n            <WhiteText>{label}</WhiteText>\n          </>\n        )}\n        {!isLoading && <>{label}</>}\n      </Button>\n    </>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from 'constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/atoms/charts/StackedNormalizedHorizontalBarChart'\nimport PredictionChartPanel from 'components/organisms/PredictionChartPanel'\nimport { QUERY_GET_CONSTITUENCY_CAMP_DATA } from 'queries/gql'\nimport LoadingButton from 'components/molecules/LoadingButton'\nimport Text from 'components/atoms/Text'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst PredictionChartHeader = styled(Box)`\n  && {\n    display: block;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst StyledLoadingButton = styled(LoadingButton)`\n  && {\n    width: 100%;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    padding: 5px 16px;\n    :hover {\n      color: ${COLORS.main.primary};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data, sortFunc) {\n  const res = {\n    data: data\n      .map(d => {\n        return {\n          name: DCREGION[d.code].zh_hk,\n          建制: DCREGION[d.code].unelected_dc_seat + (d.count['建制'] || 0), // 當然議員\n          非建制: d.count['民主'] || 0,\n          其他: d.count['其他'] || 0,\n          total: Object.values(d.count).reduce((acc, c) => {\n            acc += c\n            return acc\n          }, 0),\n        }\n      })\n      .sort(\n        sortFunc\n          ? sortFunc\n          : (a, b) => b['建制'] / b.total - a['建制'] / a.total\n      ), // default sort by established count\n    columns: ['name', '建制', '其他', '非建制'],\n  }\n  return res\n}\n\nconst sortByDefaultChartOrderFunc = defaultChartData => (a, b) => {\n  const indexFromOriginalChartData = record => {\n    let index = defaultChartData.length\n    defaultChartData.data.forEach((v, i) => {\n      if (v.name === record.name) {\n        index = i\n        return i\n      }\n    })\n    return index\n  }\n  return indexFromOriginalChartData(a) - indexFromOriginalChartData(b)\n}\n\n// const AGE_GROUP_YOUNG = ['18-20', '21-25', '26-30']\nconst AGE_GROUP_MIDDLE = ['31-35', '36-40', '41-45', '46-50', '51-55', '56-60']\nconst AGE_GROUP_OLD = ['61-65', '66-70', '71+']\n\nconst STAT_TYPE_NEW_VOTERS = 'NEW_VOTERS'\nconst STAT_TYPE_ALL_VOTERS = 'VOTERS'\n\nconst groupExpectDataByRegionAndCamp = (constituencies, settings) => {\n  const getVoteCountBySetting = (stat, camp, settings) => {\n    let settingIndex = 0\n    if (AGE_GROUP_MIDDLE.indexOf(stat.category_2) >= 0) {\n      settingIndex = 1\n    } else if (AGE_GROUP_OLD.indexOf(stat.category_2) >= 0) {\n      settingIndex = 2\n    }\n\n    const votePercentage = settings.vote_rate[settingIndex] / 100.0\n    let yellowPercentage = settings.camp_rate[settingIndex] / 100.0\n    if (camp === '建制') {\n      yellowPercentage = 1 - yellowPercentage\n    } else if (camp === '其他') {\n      yellowPercentage = 0 // TODO: how to calculate this?\n    }\n\n    return stat.count * yellowPercentage * votePercentage\n  }\n  const getProjectedVotes = (type, camp, settings, voteStats) => {\n    return voteStats\n      .filter(s => s.subtype === type)\n      .map(s => getVoteCountBySetting(s, camp, settings))\n      .reduce((c, v) => c + v, 0)\n  }\n  // First calculate the winner\n  const expectedResult = constituencies.map(constituency => {\n    let camp = '建制' // default camp = 建制 is this good?\n\n    if (\n      constituency.predecessors &&\n      constituency.predecessors.length > 0 &&\n      settings.config.reference_last_election\n    ) {\n      // if there is predecessor, we use only the new voters\n\n      if (\n        constituency.predecessors[0].predecessor.candidates.length === 1 &&\n        settings.config.auto_won_add_components\n      ) {\n        const camps = ['民主', '建制', '其他']\n        const onlyCandidate =\n          constituency.predecessors[0].predecessor.candidates[0]\n        camps.forEach(camp => {\n          // mock the votes for the last election\n          const votes =\n            getProjectedVotes(\n              STAT_TYPE_ALL_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            ) -\n            getProjectedVotes(\n              STAT_TYPE_NEW_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            )\n\n          if (onlyCandidate.camp !== camp) {\n            constituency.predecessors[0].predecessor.candidates.push({\n              camp,\n              votes,\n              mock: true,\n            })\n          } else {\n            onlyCandidate.votes = votes\n          }\n        })\n      }\n      let maxVote = 0\n      constituency.predecessors[0].predecessor.candidates.forEach(c => {\n        const projectedVotes =\n          c.votes +\n          getProjectedVotes(\n            STAT_TYPE_NEW_VOTERS,\n            c.camp,\n            settings,\n            constituency.vote_stats\n          )\n        if (\n          projectedVotes >= maxVote &&\n          (!c.mock || settings.config.auto_won_add_components)\n        ) {\n          camp = c.camp\n          maxVote = projectedVotes\n        }\n      })\n    } else {\n      // else we calculate from all voters\n      const establishCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '建制',\n        settings,\n        constituency.vote_stats\n      )\n      const democracyCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '民主',\n        settings,\n        constituency.vote_stats\n      )\n      if (democracyCount > establishCount) {\n        camp = '民主'\n      }\n    }\n\n    return {\n      cacode: constituency.code,\n      camp,\n    }\n  })\n  const byCodes = _.groupBy(expectedResult, c => c.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nconst CampCompareChartContainer = props => {\n  const { className } = props\n  const [predictEnabled, setPredictEnabled] = React.useState(false)\n  const [settings, setSettings] = React.useState({\n    config: {\n      auto_won_add_components: true,\n      reference_last_election: true,\n    },\n    camp_rate: [60, 50, 40],\n    vote_rate: [40, 40, 40],\n  })\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const dataFroGraph = groupDataByRegionAndCamp(data.dcd_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n\n        return (\n          <Query\n            query={QUERY_GET_CONSTITUENCY_CAMP_DATA}\n            variables={{ year: 2019 }}\n          >\n            {({ loading, error, data }) => {\n              let d3Data = dataForD3\n\n              if (!loading && predictEnabled) {\n                const expectedDataForGraph = groupExpectDataByRegionAndCamp(\n                  data.dcd_constituencies,\n                  settings\n                )\n                d3Data = convertToD3Compatible(\n                  expectedDataForGraph,\n                  sortByDefaultChartOrderFunc(dataForD3)\n                )\n              }\n\n              return (\n                <Container className={className}>\n                  <PredictionChartHeader>\n                    <Text variant=\"h5\">\n                      {predictEnabled\n                        ? '2019選舉結果預測'\n                        : '現屆區議會勢力分布'}\n                    </Text>\n                    <br />\n                    {!predictEnabled && (\n                      <StyledLoadingButton\n                        isLoading={loading}\n                        onClick={() => setPredictEnabled(true)}\n                        label=\"預測結果\"\n                      />\n                    )}\n                  </PredictionChartHeader>\n                  <br />\n                  {!loading && predictEnabled && (\n                    <PredictionChartPanel\n                      settings={settings}\n                      setSettings={setSettings}\n                    />\n                  )}\n                  <StackedNormalizedHorizontalBarChart\n                    data={d3Data}\n                  ></StackedNormalizedHorizontalBarChart>\n                </Container>\n              )\n            }}\n          </Query>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport { Typography, Grid } from '@material-ui/core'\n\nconst TimeGrid = styled(Grid)`\n  && {\n    text-align: center;\n  }\n`\n\nconst Time = styled(Typography)`\n  && {\n    font-weight: 700;\n  }\n`\n\nconst Unit = styled(Typography)`\n  && {\n  }\n`\n\nclass Countdown extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n    }\n  }\n\n  componentDidMount() {\n    // update every second\n    this.interval = setInterval(() => {\n      const date = this.calculateCountdown(this.props.date)\n      date ? this.setState(date) : this.stop()\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.stop()\n  }\n\n  calculateCountdown(endDate) {\n    let diff = (Date.parse(new Date(endDate)) - Date.parse(new Date())) / 1000\n\n    // clear countdown when date is reached\n    if (diff <= 0) return false\n\n    const timeLeft = {\n      years: 0,\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n      millisec: 0,\n    }\n\n    // calculate time difference between now and expected date\n    if (diff >= 365.25 * 86400) {\n      // 365.25 * 24 * 60 * 60\n      timeLeft.years = Math.floor(diff / (365.25 * 86400))\n      diff -= timeLeft.years * 365.25 * 86400\n    }\n    if (diff >= 86400) {\n      // 24 * 60 * 60\n      timeLeft.days = Math.floor(diff / 86400)\n      diff -= timeLeft.days * 86400\n    }\n    if (diff >= 3600) {\n      // 60 * 60\n      timeLeft.hours = Math.floor(diff / 3600)\n      diff -= timeLeft.hours * 3600\n    }\n    if (diff >= 60) {\n      timeLeft.min = Math.floor(diff / 60)\n      diff -= timeLeft.min * 60\n    }\n    timeLeft.sec = diff\n\n    return timeLeft\n  }\n\n  stop() {\n    clearInterval(this.interval)\n  }\n\n  addLeadingZeros(value) {\n    value = String(value)\n    while (value.length < 2) {\n      value = '0' + value\n    }\n    return value\n  }\n\n  render() {\n    const countDown = this.state\n\n    return (\n      <>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.days)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.hours)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.min)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.sec)}</Time>\n          </TimeGrid>\n        </Grid>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">天</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">小時</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">分鐘</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">秒</Unit>\n          </TimeGrid>\n        </Grid>\n      </>\n    )\n  }\n}\n\nCountdown.defaultProps = {\n  date: new Date(),\n}\n\nexport default Countdown\n","import * as turf from '@turf/turf'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getSingleFeatureFromPoint = ({ lng, lat }) => {\n  const pt = turf.point([lng, lat])\n  // TODO: consider using different year in future\n  // but need to take care of app size\n  const result = {\n    code: null,\n    year: 2019,\n  }\n  for (let i = 0; i < dc2019.features.length; i++) {\n    const feature = dc2019.features[i]\n    const poly = turf.polygon(feature.geometry.coordinates)\n    if (turf.booleanPointInPolygon(pt, poly)) {\n      result.code = feature.properties.CACODE\n      break\n    }\n  }\n  return result\n}\n\nexport const getAllFeaturesFromPoint = (\n  point,\n  featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n) => {\n  const pt = turf.point([point.lng, point.lat])\n  const result = featuresArray.map(feature => {\n    let polygonProps = {}\n    for (let i = 0, n = feature.features.length; i < n; i++) {\n      const poly = turf.polygon(feature.features[i].geometry.coordinates)\n      if (turf.booleanPointInPolygon(pt, poly)) {\n        polygonProps = { ...feature.features[i].properties }\n        break\n      }\n    }\n    return {\n      year: feature.name.split('_')[1],\n      ...polygonProps,\n    }\n  })\n\n  return result\n}\n\nexport const getCentroidFromYearAndCode = (year, code) => {\n  const featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n  const selectedIndex = [2003, 2007, 2011, 2015, 2019].findIndex(\n    y => y === year\n  )\n\n  if (selectedIndex > -1) {\n    const selectedFeature = featuresArray[selectedIndex]\n    const polygon = selectedFeature.features.find(\n      feature => feature.properties.CACODE === code\n    )\n    const centroid = turf.centroid(polygon)\n    return centroid.geometry.coordinates\n  }\n  return\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport match from 'autosuggest-highlight/match'\nimport parse from 'autosuggest-highlight/parse'\nimport TextField from '@material-ui/core/TextField'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport { getSingleFeatureFromPoint } from 'utils/features'\nimport _ from 'lodash'\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          classes: {\n            input: classes.input,\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton color=\"primary\" aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.label, query)\n  const parts = parse(suggestion.label, matches)\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      {parts.map((part, index) =>\n        part.highlight ? (\n          <span key={String(index)} style={{ fontWeight: 500 }}>\n            {part.text}\n          </span>\n        ) : (\n          <strong key={String(index)} style={{ fontWeight: 300 }}>\n            {part.text}\n          </strong>\n        )\n      )}\n    </MenuItem>\n  )\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#7B68EE',\n  },\n})\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    value: '',\n    suggestions: [],\n  }\n\n  debounced = null\n\n  async getSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    const inputLength = inputValue.length\n\n    if (inputLength > 0) {\n      const records = await AddressParser.parse(inputValue)\n      const result = records\n        .filter((_, index) => index < 10)\n        .map(record => ({\n          coordinate: record.coordinate(),\n          label: record.fullAddress(AddressParser.Address.LANG_ZH),\n        }))\n\n      return result\n    }\n\n    return []\n  }\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    if (this.debounced) {\n      this.debounced.cancel()\n    }\n    this.debounced = _.debounce(() => {\n      this.getSuggestions(value).then(result => {\n        this.setState({\n          suggestions: result,\n        })\n      })\n    }, 300)\n    this.debounced()\n  }\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    })\n  }\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    })\n  }\n\n  handleSuggestionSelected = (\n    event,\n    { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }\n  ) => {\n    const constituency = getSingleFeatureFromPoint(suggestion.coordinate)\n    // TODO: better to use action to dispatch this event\n    this.props.handleAddressSelected(constituency)\n\n    this.setState({\n      value: '',\n    })\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      onSuggestionSelected: this.handleSuggestionSelected,\n      getSuggestionValue,\n      renderSuggestion,\n    }\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: '輸入屋苑自動搜尋 !',\n            value: this.state.value,\n            onChange: this.handleChange('value'),\n            InputLabelProps: {\n              shrink: true,\n            },\n          }}\n          theme={{\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n            input: classes.suggestInput,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper\n              square\n              {...options.containerProps}\n              style={{\n                width: '100%',\n              }}\n            >\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    )\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(IntegrationAutosuggest)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport { Box, TextField } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Avatar from '@material-ui/core/Avatar'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport { withApollo } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport _ from 'lodash'\nimport styled from 'styled-components'\n\nconst GET_PEOPLE = gql`\n  query($nameRegex: String) {\n    dcd_people(\n      where: {\n        _or: [\n          { name_zh: { _like: $nameRegex } }\n          { name_en: { _like: $nameRegex } }\n        ]\n      }\n      limit: 50\n    ) {\n      id\n      uuid\n      name_zh\n      name_en\n    }\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton color=\"primary\" aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nconst styles = theme => ({\n  root: {\n    height: 100,\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#ffd731',\n  },\n})\n\nconst PeopleSearcher = props => {\n  const { classes, handlePeopleSelected } = props\n  const [value, setValue] = useState('')\n  const [suggestions, setSuggestions] = useState([])\n  let debounced = null\n\n  const onChange = (event, { newValue }) => {\n    setValue(newValue)\n  }\n\n  const fetchUsers = async keyword => {\n    const { data } = await props.client.query({\n      query: GET_PEOPLE,\n      variables: {\n        nameRegex: `%${keyword}%`,\n      },\n    })\n    return data.dcd_people\n  }\n\n  const onSuggestionsFetchRequested = ({ value }) => {\n    if (debounced) {\n      debounced.cancel()\n    }\n    debounced = _.debounce(() => {\n      fetchUsers(value).then(result => {\n        setSuggestions(result)\n      })\n    }, 500)\n    debounced()\n  }\n\n  const onSuggestionsClearRequested = () => {\n    setSuggestions([])\n  }\n\n  const getSuggestionValue = suggestion => {\n    return suggestion.name_zh ? suggestion.name_zh : suggestion.name_en\n  }\n\n  const renderSuggestion = (suggestion, { query, isHighlighted }) => {\n    const homeUrl = process.env.REACT_APP_HOST_URI\n    const { uuid, name_zh, name_en } = suggestion\n    const avatarPath = uuid\n      ? `${homeUrl}/static/images/avatar/${uuid}.jpg`\n      : `${homeUrl}/static/images/avatar/default.png`\n\n    // keyword this is not accessible here. so define the style here\n    const suggestionNameStyle = {\n      marginLeft: '20px',\n      lineHeight: '45px',\n    }\n    const boldStyle = {\n      fontWeight: '800',\n    }\n    const selectedSuggestionNameStyle = {\n      ...suggestionNameStyle,\n      ...boldStyle,\n    }\n\n    return (\n      <MenuItem selected={isHighlighted} component=\"div\">\n        <Avatar\n          src={avatarPath}\n          imgProps={{\n            onError: e => {\n              e.target.src = `${homeUrl}/static/images/avatar/default.png`\n            },\n          }}\n          style={{\n            width: '48px',\n            height: '48px',\n            borderRadius: 0,\n          }}\n        />\n        <span\n          style={\n            isHighlighted ? suggestionNameStyle : selectedSuggestionNameStyle\n          }\n        >\n          {name_zh ? name_zh : name_en}\n        </span>\n      </MenuItem>\n    )\n  }\n\n  const renderSuggestionsContainer = options => (\n    <Paper\n      square\n      {...options.containerProps}\n      style={{\n        width: '100%',\n      }}\n    >\n      {options.children}\n    </Paper>\n  )\n\n  const onSuggestionSelected = (evt, { suggestion }) => {\n    handlePeopleSelected(suggestion)\n  }\n\n  // Autosuggest will pass through all these props to the input.\n  const inputProps = {\n    classes,\n    placeholder: '輸入候選人姓名...',\n    value,\n    onChange,\n    InputLabelProps: {\n      shrink: true,\n    },\n  }\n\n  // Finally, render it!\n  return (\n    <Container>\n      <Autosuggest\n        suggestions={suggestions}\n        onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={onSuggestionsClearRequested}\n        onSuggestionSelected={onSuggestionSelected}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        renderSuggestionsContainer={renderSuggestionsContainer}\n        inputProps={inputProps}\n        renderInputComponent={renderInputComponent}\n        theme={{\n          suggestionsList: classes.suggestionsList,\n          suggestion: classes.suggestion,\n          input: classes.suggestInput,\n        }}\n      />\n    </Container>\n  )\n}\n\nPeopleSearcher.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withApollo(withStyles(styles)(PeopleSearcher))\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nconst AreasTabs = styled(Tabs)`\n  && {\n  }\n`\n// Updated 2019-10-19 Hackathon - make the AreasTab look like a button\nconst AreasTab = styled(Tab)`\n  && {\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    margin: 3px 5px;\n    :hover {\n      color: ${COLORS.main.primary};\n      background-color: ${COLORS.main.background};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`district-tabpanel-${index}`}\n      aria-labelledby={`district-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n}\n\nexport default function AreaTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.expanded ? 0 : false\n  )\n  const [expanded, setExpanded] = React.useState(props.expanded)\n  const { titles, children } = props\n\n  function handleChange(event, newValue) {\n    if (selectedTab === newValue) {\n      setExpanded(!expanded)\n      setSelectedTab(false)\n    } else {\n      setExpanded(true)\n      setSelectedTab(newValue)\n    }\n  }\n\n  return (\n    <>\n      <AreasTabs value={selectedTab} onChange={handleChange} centered>\n        {titles.map((title, index) => (\n          <AreasTab\n            label={title}\n            id={`district-tab-${index}`}\n            key={index}\n            aria-controls={`district-tabpanel-${index}`}\n          />\n        ))}\n      </AreasTabs>\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={!expanded || selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import React from 'react'\nimport { Typography, Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n} from '@material-ui/core'\nimport _ from 'lodash'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_AREA } from 'queries/gql'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport AreaTabs from 'components/organisms/AreaTabs'\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n} from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n    text-align: left;\n  }\n`\n\nconst DistrictExpansionPanel = styled(ExpansionPanel)`\n  && {\n    margin: 5px 0;\n    box-shadow: none;\n  }\n`\n\nconst DistrictExpansionPanelSummary = styled(ExpansionPanelSummary)`\n  && {\n  }\n`\n\nconst DistrictExpansionPanelDetails = styled(ExpansionPanelDetails)`\n  && {\n    padding: 16px;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  const renderDCCA = district => {\n    return (\n      <div>\n        <DistrictContainer\n          key={district.dc_code}\n          onClick={() => {\n            dispatch({ type: DRAWER_CLOSE })\n            props.history.push(getDistrictOverviewUriFromTag(district.dc_code))\n          }}\n          color=\"secondary\"\n        >\n          <Typography variant=\"h5\">總覽</Typography>\n        </DistrictContainer>\n        {district.constituencies.map(c => {\n          return (\n            <DistrictContainer\n              key={c.code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(getConstituencyUriFromTag(c.code))\n              }}\n              color=\"secondary\"\n            >\n              <Typography variant=\"h5\">{c.name_zh}</Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const renderArea = area => {\n    return (\n      <>\n        {area.districts.map((d, index) => (\n          <DistrictExpansionPanel\n            key={`district-panel-${d.dc_code}`}\n            TransitionProps={{ unmountOnExit: true }}\n          >\n            <DistrictExpansionPanelSummary\n              aria-controls=\"panel1a-content\"\n              id=\"panel1a-header\"\n              expandIcon={<ExpandMoreIcon />}\n            >\n              <Typography variant=\"h5\">{d.dc_name_zh}</Typography>\n            </DistrictExpansionPanelSummary>\n            <DistrictExpansionPanelDetails>\n              {renderDCCA(d)}\n            </DistrictExpansionPanelDetails>\n          </DistrictExpansionPanel>\n        ))}\n      </>\n    )\n  }\n\n  return (\n    <Container>\n      <Query query={QUERY_GET_AREA}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const areas = _.uniqBy(\n            data.dcd_districts.map(d => ({\n              area_code: d.area_code,\n              area_name_zh: d.area_name_zh,\n            })),\n            'area_code'\n          )\n\n          const areasWithDistricts = areas.map(a => ({\n            ...a,\n            districts: data.dcd_districts.filter(\n              d => d.area_name_zh === a.area_name_zh\n            ),\n          }))\n\n          const areaNames = areas.map(a => a.area_name_zh)\n\n          return (\n            <AreaTabs titles={areaNames} expanded={props.expanded}>\n              {areasWithDistricts.map(a => {\n                return renderArea(a)\n              })}\n            </AreaTabs>\n          )\n        }}\n      </Query>\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport AddressSearcher from 'components/molecules/AddressSearcher'\nimport PeopleSearcher from 'components/molecules/PeopleSearcher'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport { COLORS } from 'ui/theme'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport { getProfilePath } from 'utils/helper'\nimport DistrictSelector from 'components/molecules/DistrictSelector'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    position: relative;\n    left: 0;\n    right: 0;\n    padding: 21px 16px 21px 16px;\n  }\n`\n\nconst TabContainer = styled(Box)`\n  && {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    margin: 10px 10px 15px 10px;\n    padding-bottom: 15px;\n    color: ${props =>\n      props.active === 'active' ? COLORS.main.primary : COLORS.main.text};\n    border-bottom: ${props =>\n      props.active === 'active' ? `1px solid ${COLORS.main.primary}` : 'none'};\n    border-radius: 0px;\n  }\n`\n\nfunction SearchTab(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.selectedTab || 'district'\n  )\n  function handleAddressSelected(result) {\n    /* TODO:\n      Use context (?) to store the Global district result array\n      When user select click previous button in district page,\n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${result.year}/${result.code}`)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function handlePeopleSelected(person) {\n    const path = getProfilePath(person)\n    props.history.push(path)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function onTabSelected(tab) {\n    return () => {\n      setSelectedTab(tab)\n    }\n  }\n\n  function renderSearchDistrict() {\n    return (\n      <ContentRowContainer>\n        <DistrictSelector expanded={false} />\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  function renderSearchPeople() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <PeopleSearcher handlePeopleSelected={handlePeopleSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  return (\n    <Container>\n      <TabContainer>\n        <TabButton\n          active={selectedTab === 'district' ? 'active' : 'inactive'}\n          onClick={onTabSelected('district')}\n        >\n          <Typography variant=\"h3\">找選區</Typography>\n        </TabButton>\n        <TabButton\n          active={selectedTab === 'people' ? 'active' : 'inactive'}\n          onClick={onTabSelected('people')}\n        >\n          <Typography variant=\"h3\">找候選人</Typography>\n        </TabButton>\n      </TabContainer>\n      {selectedTab === 'district'\n        ? renderSearchDistrict()\n        : renderSearchPeople()}\n    </Container>\n  )\n}\n\nexport default withRouter(SearchTab)\n","import React, { Component } from 'react'\nimport { Query } from 'react-apollo'\nimport Summary from 'components/templates/Summary'\nimport CampCompareChartContainer from 'components/templates/CampCompareChartContainer'\nimport Countdown from 'components/atoms/Countdown'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport { Alert } from 'components/atoms/Alert'\nimport SearchTab from 'components/organisms/SearchTab'\nimport { QUERY_GET_LANDING_ALERT } from 'queries/gql'\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 16px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst StyledCampCompareChartContainer = styled(CampCompareChartContainer)`\n  && {\n    margin-top: 16px;\n  }\n`\nconst CountdownContainer = styled.div`\n  && {\n    width: 100%;\n    margin: 0 auto 16px;\n  }\n`\n\nconst StyledSearchTab = styled(SearchTab)`\n  && {\n    padding: 100px;\n  }\n`\n\nconst electionDate = 'Nov 24, 2019 07:30:00'\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n  onTabSelected(type) {}\n\n  render() {\n    return (\n      <>\n        <Query query={QUERY_GET_LANDING_ALERT}>\n          {({ loading, error, data }) => {\n            if (loading || error) return null\n            return data.dcd_config[0] ? (\n              <Alert>\n                <Typography variant=\"h6\" gutterBottom>\n                  {data.dcd_config[0].value.text}\n                </Typography>\n              </Alert>\n            ) : (\n              <></>\n            )\n          }}\n        </Query>\n        <TopSection>\n          {Date.parse(new Date(electionDate)) > Date.parse(new Date()) && (\n            <CountdownContainer>\n              <Typography\n                variant=\"h5\"\n                style={{ textAlign: 'center' }}\n                gutterBottom\n              >\n                距離投票日\n              </Typography>\n              <Countdown date={electionDate} />\n            </CountdownContainer>\n          )}\n          {/* <LandingIcon /> */}\n        </TopSection>\n        <Container>\n          <StyledSearchTab />\n          <StyledCampCompareChartContainer />\n        </Container>\n        <Summary />\n      </>\n    )\n  }\n}\n\nexport default IndexPage\n","import styled from 'styled-components'\nimport Avatar from '@material-ui/core/Avatar'\nimport { COLORS } from 'ui/theme'\n\nexport const PeopleAvatar = styled(Avatar)`\n  && {\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    border: ${props => props.borderwidth}px\n      ${props => props.camp && COLORS.camp[props.camp].background} solid;\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    box-shadow: none;\n    background: white;\n    .MuiTabs-indicator {\n      background: ${props => props.indicatorcolor || 'black'};\n    }\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n  buttonLayout: PropTypes.oneOf(['left', 'centered']),\n}\n\nScrollableTabs.defaultProps = {\n  buttonLayout: 'left',\n}\n\nexport default function ScrollableTabs(props) {\n  const {\n    titles,\n    children,\n    buttonLayout,\n    indicatorcolor,\n    tabnumber = 0,\n    variant,\n  } = props\n  const [selectedTab, setSelectedTab] = React.useState(tabnumber)\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n\n  const shouldCenter = buttonLayout === 'centered' ? true : false\n\n  return (\n    <>\n      <StyledAppBar position=\"static\" indicatorcolor={indicatorcolor}>\n        <Tabs\n          value={selectedTab}\n          onChange={handleChange}\n          centered={shouldCenter}\n          variant={variant || 'scrollable'} // 'centered', 'scrollable', 'fullWidth'\n          scrollButtons=\"auto\"\n        >\n          {titles.map((title, index) => (\n            <Tab\n              label={title}\n              id={`scrollable-auto-tab-${index}`}\n              key={index}\n              aria-controls={`scrollable-auto-tabpanel-${index}`}\n            />\n          ))}\n        </Tabs>\n      </StyledAppBar>\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children\n          .filter(child => child)\n          .map((child, index) => (\n            <TabPanel key={index} hidden={selectedTab !== index}>\n              {child}\n            </TabPanel>\n          ))}\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport styled from 'styled-components'\n\nconst MobileTableCell = styled(TableCell)`\n  && {\n    padding: 8px 10px;\n  }\n`\n\nconst CouncillorMeetingAttendace = props => {\n  const { meetings } = props\n\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <MobileTableCell align=\"left\">會議</MobileTableCell>\n          <MobileTableCell align=\"left\">性質</MobileTableCell>\n          <MobileTableCell align=\"left\">年份</MobileTableCell>\n          <MobileTableCell align=\"left\">與席</MobileTableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {meetings.map((m, index) => (\n          <TableRow key={index}>\n            <MobileTableCell component=\"th\" scope=\"row\">\n              {m.meeting.meet_name}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_type}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_year}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.attended}/{m.total}\n            </MobileTableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  )\n}\n\nCouncillorMeetingAttendace.propsType = {\n  meetings: PropTypes.array,\n}\n\nexport default CouncillorMeetingAttendace\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_MEETING_ATTENDANCES } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport CouncillorMeetingAttendace from 'components/templates/CouncillorMeetingAttendance'\nimport _ from 'lodash'\n\nconst CouncillorMeetingAttendaceContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_MEETING_ATTENDANCES}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const meetings = _.flatten(\n          data.dcd_councillors.map(c => c.meeting_attendances)\n        )\n        return (\n          <>\n            <CouncillorMeetingAttendace meetings={meetings} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorMeetingAttendaceContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default CouncillorMeetingAttendaceContainer\n","import styled from 'styled-components'\nimport Card from '@material-ui/core/Card'\nimport React from 'react'\n\nconst StyledCard = styled(Card)`\n  && {\n    padding: 16px;\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nexport const PlainCard = props => {\n  return <StyledCard {...props}>{props.children}</StyledCard>\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { PlainCard } from 'components/molecules/Card'\nimport Typography from '@material-ui/core/Typography'\nimport { Box, Grid } from '@material-ui/core'\nimport { SuccessText, FailureText } from '../atoms/Text'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { formatNumber } from 'utils/helper'\nimport {\n  getCentroidFromYearAndCode,\n  getAllFeaturesFromPoint,\n} from 'utils/features'\n\nconst PersonElectionHistoriesTitle = styled.div`\n  && {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst createQueryStringToBattlegroundPage = election => {\n  let targetPath = `/district/2019/${election.constituency.code}`\n  switch (election.year) {\n    case 2019:\n      return targetPath\n    case 2015:\n    case 2011:\n    case 2007:\n    case 2003:\n      const coordinates = getCentroidFromYearAndCode(\n        election.year,\n        election.constituency.code\n      )\n      const point = {\n        lng: coordinates[0],\n        lat: coordinates[1],\n      }\n      const dccaHistories = getAllFeaturesFromPoint(point)\n      targetPath = `/district/2019/${\n        dccaHistories.find(history => history.year === '2019').CACODE\n      }`\n      return targetPath + `?year=${election.year}`\n    default:\n      return '#'\n  }\n}\n\nconst PersonElectionHistories = props => {\n  const { histories } = props\n\n  histories.sort((a, b) => {\n    if (b.year > a.year) return 1\n    else if (b.year < a.year) return -1\n    else {\n      if (b.election_type === 'ordinary' && a.election_type === 'by-election')\n        return 1\n      else return -1\n    }\n  })\n\n  return (\n    <>\n      {histories.map((m, index) => (\n        <UnstyledNavLink\n          key={index}\n          to={createQueryStringToBattlegroundPage(m)}\n        >\n          <PlainCard color=\"#fafafa\">\n            <PersonElectionHistoriesTitle>\n              <Box>\n                <Typography variant=\"h6\" gutterBottom>\n                  {m.year}\n                </Typography>\n              </Box>\n              <Box>\n                {createQueryStringToBattlegroundPage(m) !== '#' && (\n                  <NavigateNextIcon />\n                )}\n              </Box>\n            </PersonElectionHistoriesTitle>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h5\">{m.constituency.name_zh}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h5\">{`${m.political_affiliation || '-'}（${\n                  m.camp\n                }）`}</Typography>\n              </Grid>\n              <Grid item xs={3}>\n                {m.is_won ? (\n                  <SuccessText>\n                    {m.votes > 0 ? `${formatNumber(m.votes)}票` : '自動當選'}\n                  </SuccessText>\n                ) : (\n                  <FailureText>\n                    {m.votes > 0 && `${formatNumber(m.votes)}票`}\n                  </FailureText>\n                )}\n              </Grid>\n            </Grid>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h6\">{m.constituency.code}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h6\">報稱政治聯繫</Typography>\n              </Grid>\n              {m.votes > 0 ? (\n                <Grid item xs={3}>\n                  {m.is_won ? (\n                    <SuccessText>當選</SuccessText>\n                  ) : (\n                    <FailureText>落敗</FailureText>\n                  )}\n                </Grid>\n              ) : (\n                <Grid item xs={3}></Grid>\n              )}\n            </Grid>\n          </PlainCard>\n        </UnstyledNavLink>\n      ))}\n    </>\n  )\n}\n\nPersonElectionHistories.propsType = {\n  histories: PropTypes.array,\n}\n\nexport default PersonElectionHistories\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_ELECTIONS } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport PersonElectionHistories from 'components/templates/PersonElectionHistories'\n\nconst PersonElectionHistoriesContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_ELECTIONS}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <PersonElectionHistories\n              histories={data.dcd_people_by_pk.candidates}\n            />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nPersonElectionHistoriesContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default PersonElectionHistoriesContainer\n","import styled from 'styled-components'\nimport { Card, CardContent } from '@material-ui/core'\nimport Text from '../atoms/Text'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Microlink from '@microlink/react'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nconst StyledMicrolink = styled(Microlink)`\n  && {\n    width: 100%;\n    max-width: calc(100vw - 64px);\n  }\n`\n\nconst getEventTypeText = type => {\n  switch (type) {\n    case 'VOTE':\n      return '[投票]'\n    case 'SPEECH':\n      return '[言論]'\n    default:\n      return ''\n  }\n}\n\nconst trimDescription = description => {\n  if (!description) return ''\n  return description.length > 100\n    ? description.substring(0, 100) + '...'\n    : description\n}\n\nconst validateUrl = url => {\n  const patt = /(http|https):\\/\\/.*/\n  const match = patt.exec(url)\n  return match ? match[0] : null\n}\n\nconst PersonEvent = props => {\n  const { title, eventType, date, description, url } = props\n  const validatedUrl = validateUrl(url)\n\n  return (\n    <StyledCard>\n      <CardContent>\n        <Text gutterBottom>{date}</Text>\n        {eventType === 'MEDIA' && validatedUrl ? (\n          <StyledMicrolink url={validatedUrl} size=\"large\" />\n        ) : (\n          <>\n            <Text variant=\"h5\" gutterBottom>\n              {`${getEventTypeText(eventType)} ${title}`}\n            </Text>\n            <Text color=\"textSecondary\">{trimDescription(description)}</Text>\n          </>\n        )}\n      </CardContent>\n    </StyledCard>\n  )\n}\n\nPersonEvent.propTypes = {\n  children: PropTypes.node,\n  title: PropTypes.string.isRequired,\n  eventType: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n}\n\nexport default PersonEvent\n","//\n\nimport React, { useEffect, useState } from 'react'\nimport Rows from 'components/atoms/Rows'\nimport PropTypes from 'prop-types'\nimport { Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport axios from 'axios'\nimport PersonEvent from 'components/molecules/PersonEvent'\nimport Typography from '@material-ui/core/Typography'\nimport { DefaultLink } from 'components/atoms/Link'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    margin-top: 32px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    border: 1px black solid;\n    height: 48px;\n    padding: 0 32px;\n  }\n`\n\nconst FCPersonData = props => {\n  const { fcUuid, name, filterFunc } = props\n  const [events, setEvents] = useState([])\n  useEffect(() => {\n    async function fetchData() {\n      const result = await axios(\n        `https://api.hkfactcheck.io/persons/${fcUuid}/events`\n      )\n\n      setEvents(result.data.filter(filterFunc).filter((_, i) => i < 5))\n    }\n    fetchData()\n  }, [])\n  const fcUri = `https://hkfactcheck.io/person/${fcUuid}/${name}`\n\n  return (\n    <>\n      <Container>\n        {events.length > 0 ? (\n          <Typography variant=\"body\">\n            以下資料取自\n            <DefaultLink target=\"_blank\" href={fcUri}>\n              選區事實處\n            </DefaultLink>\n            ，如有補充或錯漏，請即\n            <DefaultLink target=\"_blank\" href={fcUri}>\n              報料\n            </DefaultLink>\n            ！\n          </Typography>\n        ) : (\n          <Typography variant=\"body\">\n            此人未有事件記錄，請即到\n            <DefaultLink target=\"_blank\" href={fcUri}>\n              選區事實處\n            </DefaultLink>\n            報料！\n          </Typography>\n        )}\n      </Container>\n      <Rows>\n        {events.map(event => (\n          <PersonEvent key={event.eventId} {...event}></PersonEvent>\n        ))}\n        {events.length > 0 && (\n          <Container>\n            <StyledButton\n              onClick={() => {\n                const win = window.open(fcUri, '_blank')\n                win.focus()\n              }}\n            >\n              更多資料及往績\n            </StyledButton>\n          </Container>\n        )}\n      </Rows>\n    </>\n  )\n}\n\nFCPersonData.propsType = {\n  uuid: PropTypes.string,\n  fcUuid: PropTypes.string,\n  filterFunc: PropTypes.func.isRequired,\n}\n\nexport default FCPersonData\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\n\nconst StyledChip = styled(Chip)`\n  && {\n    font-size: ${props => props.fontsize || 12}px;\n    background: ${props => props.backgroundcolor || COLORS.main.primary};\n    color: ${props => props.color || COLORS.main.background};\n    border: ${props => props.borderwidth || 0}px\n      ${props => props.bordercolor || 'rgba(0, 0, 0, 0.5)'} solid;\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      fontSize={props.fontsize}\n      backgroundcolor={props.backgroundcolor}\n      bordercolor={props.bordercolor}\n      borderwidth={props.borderwidth}\n      label={props.value}\n      size=\"small\"\n      onClick={props.handleClick}\n    />\n  )\n}\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs'\nimport Avatar from '@material-ui/core/Avatar'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { getColorFromCamp } from 'utils/helper'\nimport CouncillorMeetingAttendanceContainer from 'components/containers/CouncillorMeetingAttendanceContainer'\nimport PersonElectionHistoriesContainer from 'components/containers/PersonElectionHistoriesContainer'\nimport FCPersonData from 'components/templates/FCPersonData'\nimport { COLORS } from 'ui/theme'\nimport { Tag } from 'components/atoms/Tag'\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n} from 'utils/helper'\n\n// TODO: add age, camp & related_organization\nconst GET_PEOPLE_PROFILE = gql`\n  query($uuid: uuid!) {\n    dcd_people(where: { uuid: { _eq: $uuid } }) {\n      id\n      uuid\n      fc_uuid\n      name_zh\n      name_en\n      gender\n      related_organization\n      estimated_yob\n      councillors {\n        meeting_attendances {\n          id\n        }\n        year\n        cacode\n        term_from\n        term_to\n        career\n        district {\n          dc_name_zh\n          dc_code\n        }\n        political_affiliation\n        post\n        constituency {\n          id\n          year\n          name_zh\n        }\n      }\n      candidates {\n        constituency {\n          name_zh\n          code\n          district {\n            dc_name_zh\n            dc_code\n          }\n        }\n        candidate_number\n        is_won\n        fb_id\n        occupation\n        political_affiliation\n        age\n        cacode\n        camp\n        election_type\n        year\n        votes\n      }\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    height: 116px;\n    position: relative;\n    display: flex;\n    background: linear-gradient(\n      ${props => COLORS.camp[props.camp].background} 84px,\n      rgba(255, 255, 255, 0) 32px\n    );\n  }\n`\n\nconst CandidateAvatorContainer = styled(Box)`\n  && {\n    position: absolute;\n    left: 16px;\n    bottom: 8px;\n  }\n`\n\nconst PersonName = styled.div`\n  && {\n    position: absolute;\n    left: 116px;\n    top: 32px;\n    color: ${props => COLORS.camp[props.camp].text};\n  }\n`\n\nconst ElectionStatus = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row-reverse;\n    width: 100%;\n    div {\n      margin: 8px 8px 0 0;\n    }\n  }\n`\n\nconst FacebookPageButton = styled(UnstyledLink)`\n  && {\n    display: block;\n    position: relative;\n    width: 0px;\n    height: 0px;\n    right: 40px;\n    bottom: -50px;\n    img {\n      height: 16px;\n      width: 16px;\n    }\n  }\n`\n\nconst PersonHighlightContainer = styled(FlexRowContainer)`\n  && {\n    padding: 16px;\n  }\n`\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\n\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderFacebook = person => {\n    let url = 'https://fb.me/'\n    let fb_id = person.candidates[0].fb_id\n    if (fb_id && fb_id !== 'n/a') {\n      url += fb_id\n      return (\n        <FacebookPageButton target=\"_blank\" href={url} aria-label=\"Facebook\">\n          <Avatar\n            width={'8px'}\n            height={'8px'}\n            borderwidth={'0'}\n            src={`/static/images/facebook.svg`}\n          />\n        </FacebookPageButton>\n      )\n    }\n    return\n  }\n\n  renderIntroText = (person, currentTerm) => {\n    let text\n    if (\n      currentTerm &&\n      currentTerm.term_to &&\n      Date.parse(new Date()) < Date.parse(currentTerm.term_to)\n    ) {\n      text = `現任${currentTerm.district.dc_name_zh}區議員（${currentTerm.constituency.name_zh}）`\n    } else {\n      const electionResult = person.candidates[0].is_won ? '當選' : '參選'\n      text = `${electionResult}${person.candidates[0].year}年${person.candidates[0].constituency.district.dc_name_zh}區議員（${person.candidates[0].constituency.name_zh}）`\n    }\n\n    return <Typography variant=\"h6\">{text}</Typography>\n  }\n\n  renderElectionStatusText = (person, currentTerm) => {\n    let tags = []\n    let primaryText\n\n    if (\n      person.candidates[0].year === 2019 &&\n      person.candidates[0].election_type === 'ordinary'\n    ) {\n      if (currentTerm) {\n        primaryText = '競逐連任'\n      } else if (person.candidates.length === 1) {\n        primaryText = '首度參選'\n      } else if (person.candidates.length > 1) {\n        if (\n          !person.candidates.find(p => p.is_won) &&\n          person.candidates.length > 2\n        ) {\n          primaryText = '屢敗屢戰'\n        } else if (!person.candidates[1].is_won) {\n          primaryText = '捲土重來'\n        }\n      }\n    }\n\n    if (primaryText) tags.push(primaryText)\n\n    if (person.candidates.length > 1) {\n      if (person.candidates[1].is_won && person.candidates[1].votes === 0) {\n        tags.push('上屆自動當選')\n      }\n\n      if (person.candidates[0].cacode[0] !== person.candidates[1].cacode[0]) {\n        tags.push('跨區參選')\n      }\n    }\n\n    if (tags.length > 0) {\n      return (\n        <ElectionStatus>\n          {tags.map(tag => (\n            <Tag value={tag} borderwidth={1} backgroundcolor={'transparent'} />\n          ))}\n        </ElectionStatus>\n      )\n    }\n\n    return null\n  }\n\n  render() {\n    const {\n      match: {\n        params: { uuid },\n      },\n    } = this.props\n\n    const homeUrl = process.env.REACT_APP_HOST_URI\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ uuid }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const person = data.dcd_people[0]\n\n          const currentTerm =\n            person.councillors &&\n            person.councillors[person.councillors.length - 1]\n          const lastElection =\n            person.candidates &&\n            person.candidates.sort((a, b) => {\n              if (b.year > a.year) return 1\n              else if (b.year < a.year) return -1\n              else {\n                if (\n                  b.election_type === 'ordinary' &&\n                  a.election_type === 'by-election'\n                )\n                  return 1\n                else return -1\n              }\n            })[0]\n          const hasMeetings =\n            person.councillors &&\n            person.councillors.length > 0 &&\n            person.councillors\n              .map(c => c.meeting_attendances && c.meeting_attendances.length)\n              .reduce((c, v) => Math.max(c, v), 0) > 0\n\n          const personHighlight = []\n\n          if (person.estimated_yob) {\n            personHighlight.push({\n              xs: 2,\n              title: '年齡',\n              text: `${2019 - person.estimated_yob}歲`,\n            })\n          }\n\n          personHighlight.push({\n            xs: 5,\n            title: '相關組織',\n            text: person.related_organization || '-',\n          })\n\n          personHighlight.push({\n            xs: 5,\n            title: '職業',\n            text:\n              (currentTerm && currentTerm.career) || lastElection.occupation,\n          })\n\n          const titles = []\n\n          if (person.fc_uuid) {\n            titles.push('個人立場')\n            titles.push('媒體報導')\n          }\n\n          titles.push('參選紀錄')\n\n          if (hasMeetings) titles.push('會議出席率')\n\n          return (\n            <>\n              {lastElection.year === 2019 &&\n                lastElection.election_type === 'ordinary' && (\n                  <BreadcrumbsContainer>\n                    <Breadcrumbs\n                      separator={<NavigateNextIcon fontSize=\"small\" />}\n                      aria-label=\"breadcrumb\"\n                    >\n                      <Typography color=\"textPrimary\">\n                        {lastElection.year}\n                      </Typography>\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(\n                            getDistrictOverviewUriFromTag(\n                              lastElection.constituency.district.dc_code\n                            )\n                          )\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {lastElection.constituency.district.dc_name_zh}\n                        </Typography>\n                      </UnstyledLink>\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(\n                            getConstituencyUriFromTag(\n                              lastElection.constituency.code\n                            )\n                          )\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {lastElection.constituency.name_zh}（\n                          {lastElection.constituency.code}）\n                        </Typography>\n                      </UnstyledLink>\n                      <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                        {person.name_zh}\n                      </Typography>\n                    </Breadcrumbs>\n                  </BreadcrumbsContainer>\n                )}\n\n              <CandidateHeaderContainer\n                camp={getColorFromCamp(lastElection && lastElection.camp)}\n              >\n                {this.renderElectionStatusText(person, currentTerm)}\n                <CandidateAvatorContainer>\n                  <PeopleAvatar\n                    dimension={'84px'}\n                    borderwidth={'0'}\n                    src={`${homeUrl}/static/images/avatar/${person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                      },\n                    }}\n                  />\n                </CandidateAvatorContainer>\n                <Box>\n                  <PersonName\n                    camp={getColorFromCamp(lastElection && lastElection.camp)}\n                  >\n                    {person.name_en ? (\n                      <>\n                        <Typography\n                          variant=\"h3\"\n                          style={{ marginBottom: '5px' }}\n                        >\n                          {person.name_zh || person.name_en}\n                        </Typography>\n                        <Typography\n                          variant=\"h5\"\n                          style={{ marginBottom: '5px' }}\n                        >\n                          {person.name_en || ''}\n                        </Typography>\n                      </>\n                    ) : (\n                      <Typography variant=\"h3\" style={{ marginBottom: '3px' }}>\n                        {person.name_zh || person.name_en}\n                      </Typography>\n                    )}\n\n                    {this.renderIntroText(person, currentTerm)}\n                  </PersonName>\n                  {this.renderFacebook(person)}\n                </Box>\n              </CandidateHeaderContainer>\n\n              <PersonHighlightContainer>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h5\">{highlight.text}</Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h6\">{highlight.title}</Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n              </PersonHighlightContainer>\n              <ScrollableTabs\n                titles={titles}\n                indicatorcolor={\n                  COLORS.camp[\n                    getColorFromCamp(lastElection && lastElection.camp)\n                  ].background\n                }\n                variant=\"scrollable\"\n              >\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                    filterFunc={record =>\n                      record.eventType !== 'MEDIA' &&\n                      record.eventType !== 'OTHER'\n                    }\n                  />\n                )}\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                    filterFunc={record => record.eventType === 'MEDIA'}\n                  />\n                )}\n                <PersonElectionHistoriesContainer personId={person.id} />\n                {hasMeetings && (\n                  <CouncillorMeetingAttendanceContainer personId={person.id} />\n                )}\n              </ScrollableTabs>\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default ProfilePage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'ui/responsive'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nconst SeperatedRow = styled(Box)`\n  && {\n    margin-top: 20px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    councillors: PropTypes.array.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, councillors, district, stations } = this.props\n    const councillor = councillors.length > 0 ? councillors[0] : {}\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedRow>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedRow>\n          <RegionText>{district.dc_name_zh}</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedRow>\n            <Typography variant=\"h6\">區議員</Typography>\n            <Typography>\n              {councillor.person ? councillor.person.name_zh : '-'}\n            </Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">政治聯繫</Typography>\n            <Typography>{councillor.political_affiliation || '-'}</Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">投票站</Typography>\n            {stations.map((station, index) => (\n              <Typography key={index} variant=\"subtitle2\">\n                {station.name_zh}\n              </Typography>\n            ))}\n          </SeperatedRow>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas } = this.props\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          主要屋邨 / 地區\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              <Typography variant=\"body1\">\n                {`${Object.keys(area)[0]} ${area[Object.keys(area)[0]]}`}\n              </Typography>\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\n// import VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from 'components/atoms/charts/WaffleChart'\n\n// TODO: change this to dcd data\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      name: '不能投票',\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      name: '沒有投票',\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      name: '投票失效',\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      name: `投給${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">人口資料</Typography>\n              {/* <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              /> */}\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../OLMap'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'ui/responsive'\n\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = person => {\n    this.props.history.push(\n      `/profile/${person.name_zh || person.name_en}/${person.uuid}`\n    )\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dcd_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox></FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CANDIDATES } from 'queries/gql'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { UnstyledNavLink } from 'components/atoms/Link'\nimport Rows from 'components/atoms/Rows'\nimport Columns from 'components/atoms/Columns'\nimport { Box, Typography, Grid } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { getColorFromCamp } from 'utils/helper'\nimport { COLORS } from 'ui/theme'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 0px 16px;\n  }\n`\n\nconst CandidateList = styled(Grid)`\n  && {\n  }\n`\n\nconst Candidate = styled(Box)`\n  && {\n    position: relative;\n    width: auto;\n    text-align: center;\n    & > div {\n      margin: 0 auto;\n    }\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: absolute;\n    top: 64px;\n    left: 3px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst CandidateName = styled(Typography)`\n  && {\n    margin-top: 5px;\n    font-weight: 700;\n  }\n`\n\nconst CandidatesContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CANDIDATES}\n      variables={{ code, year }} // variables={{ code, year }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const candidates =\n          data.dcd_candidates &&\n          data.dcd_candidates.filter(c => c.election_type === 'ordinary')\n        return (\n          <Container>\n            {candidates.length > 0 && (\n              <>\n                <Rows>\n                  <Columns>\n                    <Typography variant=\"h6\" gutterBottom>\n                      已接獲提名\n                    </Typography>\n                  </Columns>\n                </Rows>\n                <Rows>\n                  <Columns>\n                    <CandidateList container direction=\"row\">\n                      {/* Max 3 columns and always centered */}\n                      {candidates.map(candidate => (\n                        <Grid\n                          key={candidate.person.id}\n                          item\n                          xs={\n                            candidates.length < 3 ? 12 / candidates.length : 4\n                          }\n                          sm={\n                            candidates.length < 4 ? 12 / candidates.length : 3\n                          }\n                          md={\n                            candidates.length < 6 ? 12 / candidates.length : 2\n                          }\n                        >\n                          <UnstyledNavLink\n                            to={`/profile/${candidate.person.name_zh ||\n                              candidate.person.name_en}/${\n                              candidate.person.uuid\n                            }`}\n                          >\n                            <Candidate>\n                              <PeopleAvatar\n                                dimension=\"84px\"\n                                borderwidth={'4'}\n                                camp={getColorFromCamp(candidate.camp)}\n                                src={`${IMAGE_HOST_URI}/static/images/avatar/${candidate.person.uuid}.jpg`}\n                                imgProps={{\n                                  onError: e => {\n                                    e.target.src =\n                                      IMAGE_HOST_URI +\n                                      '/static/images/avatar/default.png'\n                                  },\n                                }}\n                              />\n                              {candidate.candidate_number > 0 && (\n                                <CandidateNumber\n                                  dimension=\"18px\"\n                                  camp={getColorFromCamp(candidate.camp)}\n                                >\n                                  {candidate.candidate_number}\n                                </CandidateNumber>\n                              )}\n                              <CandidateName variant=\"h5\">\n                                {candidate.person.name_zh ||\n                                  candidate.person.name_en}\n                              </CandidateName>\n\n                              <Typography variant=\"body2\">\n                                {candidate.political_affiliation}\n                              </Typography>\n                            </Candidate>\n                          </UnstyledNavLink>\n                        </Grid>\n                      ))}\n                    </CandidateList>\n                  </Columns>\n                </Rows>\n              </>\n            )}\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\n\nCandidatesContainer.propsType = {\n  // cacode: PropTypes.string,\n  // year: PropTypes.number,\n}\nexport default CandidatesContainer\n","import React from 'react'\nimport { Card, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { Tag } from 'components/atoms/Tag'\nimport Box from '@material-ui/core/Box'\nimport Columns from 'components/atoms/Columns'\nimport { getDistrictListUriFromTag } from 'utils/helper'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 0 0 16px;\n    padding: 16px;\n    height: auto;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nconst ConstituencyCard = props => {\n  const { year, constituency } = props\n  const { tags } = constituency\n  const sortedTags = tags.sort((a, b) =>\n    a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n  )\n\n  return (\n    <StyledCard\n      onClick={() => {\n        props.history.push(`/district/2019/${constituency.code}`)\n      }}\n    >\n      <Typography variant=\"h6\" gutterBottom>\n        {constituency.name_zh}（{constituency.code}）\n      </Typography>\n      <Columns>\n        {sortedTags.map((tag, index) => (\n          <TagContainer>\n            <Tag\n              key={index}\n              value={tag.tag}\n              handleClick={evt => {\n                evt.stopPropagation()\n                props.history.push(getDistrictListUriFromTag(tag.tag))\n              }}\n            />\n          </TagContainer>\n        ))}\n      </Columns>\n      <CandidatesContainer year={year} code={constituency.code} />\n    </StyledCard>\n  )\n}\n\nexport default withRouter(ConstituencyCard)\n","import React from 'react'\nimport styled from 'styled-components'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nconst Placeholder = styled.div`\n  && {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst CentredCircularProgress = styled(CircularProgress)`\n  && {\n    max-width: 50%;\n  }\n`\n\nexport const Loading = props => {\n  return (\n    <Placeholder>\n      <CentredCircularProgress thickness={3} size={64} color=\"secondary\" />\n    </Placeholder>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CONSTITUENCIES_BY_TAG } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictListPage = props => {\n  const {\n    match: {\n      params: { year, tag },\n    },\n  } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CONSTITUENCIES_BY_TAG}\n      variables={{ tag, year: 2019 }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${tag}：${data.dcd_constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {data.dcd_constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictListPage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport { pointerMove } from 'ol/events/condition.js'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.1)',\n  }),\n  stroke: new Stroke({\n    color: '#356272',\n    width: 1,\n  }),\n  text: new Text({\n    font: '14px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: '#356272',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 3,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,255,0.5)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nconst hoverStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,0,0.2)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nclass DCCACompareMap extends Component {\n  featureOverlay\n  featureHover\n  highlightedFeature\n  hoveredFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code, handleMapLoaded } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n      controls: [],\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    this.featureHover = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        hoverStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return hoverStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n\n          const loadedResult = {\n            centroid: features[i]\n              .getGeometry()\n              .getInteriorPoint()\n              .getCoordinates(),\n          }\n\n          handleMapLoaded(loadedResult)\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const selectBySingleClick = new Select()\n    map.addInteraction(selectBySingleClick)\n    selectBySingleClick.on('select', this.mapClick)\n\n    const selectByHover = new Select({\n      condition: pointerMove,\n    })\n    map.addInteraction(selectByHover)\n    selectByHover.on('select', this.mapHover)\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  highlightHoveredFeature(feature) {\n    if (this.hoveredFeature) {\n      this.featureHover.getSource().removeFeature(this.hoveredFeature)\n    }\n\n    this.featureHover.getSource().addFeature(feature)\n    this.hoveredFeature = feature\n  }\n\n  mapClick = e => {\n    const { year, changeDistrict, handleMapClick } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    handleMapClick(e.mapBrowserEvent.coordinate)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  mapHover = e => {\n    //const { year, changeDistrict, handleMapClick } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightHoveredFeature(selectedFeature)\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default DCCACompareMap\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport { Tag } from '../atoms/Tag'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport {\n  getColorFromPoliticalAffiliation,\n  getCouncillorMeta,\n  formatNumber,\n} from 'utils/helper'\n\nconst Councillor = props => {\n  const { councillors } = props\n  if (councillors.length === 0) {\n    return <> </>\n  }\n  // we just get the latest councillor from the dc\n  const councillor = councillors[0]\n  const tags = [] //['競逐連任']\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n  const meta = getCouncillorMeta(councillor)\n\n  return (\n    <UnstyledNavLink\n      key={councillor.code}\n      to={`/profile/${councillor.person.name_zh || councillor.person.name_en}/${\n        councillor.person.uuid\n      }`}\n    >\n      <Box>\n        <Box display=\"flex\">\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\" gutterBottom>\n              {`${councillor.term_from.substring(0, 4)} `}\n              {`${councillor.constituency.name_zh} （${councillor.constituency.code}）`}\n            </Typography>\n          </Box>\n          <Box>\n            {tags.length > 0 &&\n              tags.map((tag, index) => <Tag value={tag} key={index} />)}\n          </Box>\n        </Box>\n\n        <Grid container wrap=\"nowrap\" spacing={1}>\n          <Grid item>\n            <PeopleAvatar\n              dimension=\"60px\"\n              borderwidth={'3'}\n              camp={getColorFromPoliticalAffiliation(\n                councillor.political_affiliation\n              )}\n              src={`${IMAGE_HOST_URI}/static/images/avatar/${councillor.person.uuid}.jpg`}\n              imgProps={{\n                onError: e => {\n                  e.target.src =\n                    IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                },\n              }}\n            />\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"h4\" gutterBottom>\n              {councillor.person.name_zh}\n            </Typography>\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">報稱政治聯繫</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {councillor.political_affiliation}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">\n                  {meta.lastParticipated.year}\n                  選舉結果\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {meta.lastParticipated.votesDiff === 0 && '自動當選'}\n                  {meta.lastParticipated.votesDiff > 0 &&\n                    `${\n                      meta.lastParticipated.votesDiff /\n                        meta.lastParticipated.votes >\n                      0.2\n                        ? '大'\n                        : meta.lastParticipated.votesDiff /\n                            meta.lastParticipated.votes <\n                          0.05\n                        ? '險'\n                        : ''\n                    }勝${formatNumber(meta.lastParticipated.votesDiff)}票`}\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    </UnstyledNavLink>\n  )\n}\n\nexport default Councillor\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_COUNCILLOR } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport Councillor from 'components/templates/Councillor'\n\nconst CouncillorContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query query={QUERY_GET_COUNCILLOR} variables={{ code, year }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Councillor councillors={data.dcd_councillors} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorContainer.propsType = {\n  cacode: PropTypes.string,\n  year: PropTypes.number,\n}\nexport default CouncillorContainer\n","import styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\n\nexport const UnstyledButton = styled(Button)`\n  && {\n    margin: 0;\n    padding: 0;\n  }\n`\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const color = d3\n      .scaleOrdinal()\n      .range([\n        props.firstColor ? props.firstColor : '#ca0020',\n        props.secondColor ? props.secondColor : '#f4a582',\n      ])\n\n    const margin = { top: 50, right: 20, bottom: 30, left: 40 }\n\n    const width = dimensions.width - margin.left - margin.right\n    const height = dimensions.width - margin.top - margin.bottom\n\n    const max = _.max(_.maxBy(data, r => _.max(r.values)).values)\n\n    const svg = d3\n      .select(d3Container.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    svg.selectAll('g').remove()\n    const chart = svg\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n\n    const yScale = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, max]) // space for showing legend\n\n    const x0 = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(data.map(s => s.label))\n      .padding(0.1)\n\n    const x1 = d3\n      .scaleBand()\n      .domain(d3.range(2))\n      .range([0, x0.bandwidth() - 10])\n    // y axis\n    chart.append('g').call(d3.axisLeft(yScale))\n\n    // draw the lines\n    chart\n      .append('g')\n      .style('color', 'lightgrey')\n      .style('stroke-opacity', '0.7')\n      .call(\n        d3\n          .axisLeft(yScale)\n          .tickSizeOuter(0)\n          .tickSizeInner(-width)\n          .tickFormat('')\n      )\n\n    // x axis\n    chart\n      .append('g')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(x0))\n      .selectAll('text')\n      .attr('transform', 'translate(0,0)rotate(-45)')\n      .style('text-anchor', 'end')\n      .style('fill', '#69a3b2')\n\n    const slice = svg\n      .selectAll('.slice')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'g')\n      .attr(\n        'transform',\n        d => `translate(${x0(d.label) + margin.left + 5},${margin.top})`\n      )\n\n    slice\n      .selectAll('rect')\n      .data(d => d.values)\n      .enter()\n      .append('rect')\n      .attr('width', x1.bandwidth())\n      .attr('x', (d, i) => x1(i))\n      .attr('y', d => yScale(0))\n      .attr('height', d => height - yScale(0))\n      .style('fill', (d, i) => color(i))\n\n    slice\n      .selectAll('rect')\n      .transition()\n      .delay(function(d) {\n        return Math.random() * 1000\n      })\n      .duration(1000)\n      .attr('y', d => yScale(d))\n      .attr('height', d => height - yScale(d))\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(data[0].labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${i * 20})`)\n\n    legend\n      .append('rect')\n      .attr('x', width - 20)\n      .attr('width', 14)\n      .attr('height', 14)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width)\n      .attr('y', 7)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <svg\n        ref={d3Container}\n        style={{ height: dimensions.width, width: '100%' }}\n      ></svg>\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport GroupedBarChart from 'components/atoms/charts/GroupedBarChart'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCY_STATS } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { COLORS } from 'ui/theme'\n\nexport default props => {\n  const [filterIndex] = useState(0)\n\n  const getDataForChat = voteStats => {\n    /**\n     * voteStats = [{\n     *  type: \"BY_GENDER_AGE\",\n     *  subtype: \"VOTERS/NEW_VOTERS\",\n     *  category_1: \"FEMALE/MALE\",\n     *  category_2: \"21-25\"\n     *  count: 10\n     * }]\n     */\n\n    const isFiltered = gender => {\n      if (gender === 'MALE' && filterIndex === 1) {\n        return false\n      } else if (gender === 'FEMALE' && filterIndex === 2) {\n        return false\n      }\n      return true\n    }\n    const data = _.values(_.groupBy(voteStats, stat => stat.category_2))\n    data.forEach(row => {\n      row.label = row[0].category_2\n      row.values = _.values(_.groupBy(row, r => r.subtype)).map(r =>\n        r\n          .filter(v => isFiltered(v.category_1))\n          .map(v => v.count)\n          .reduce((c, v) => c + v, 0)\n      )\n      row.values = [row.values[0] - row.values[1], row.values[0]]\n      row.labels = ['2018', '2019']\n    })\n\n    /**\n     * [{\n     *  label: \"21-22\",\n     *  values: [200, 159] // -> 2019 vs 2018\n     * }]\n     */\n\n    return data\n  }\n\n  const getTransformedData = data => {\n    const newData = []\n    const valueDict = {}\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].category_2 === '18-20' || data[i].category_2 === '71+') {\n        newData.push(data[i])\n      } else {\n        const ageGroupPrefix = data[i].category_2[0] // e.g. 21-25 and 26-30 will have the same first digit\n        const dictKey =\n          ageGroupPrefix +\n          data[i].category_1 /* gender */ +\n          data[i].subtype /* VOTERS, NEW_VOTERS */\n        if (typeof valueDict[dictKey] === 'undefined') {\n          // no existing count for this key\n          valueDict[dictKey] = data[i].count\n        } else {\n          data[i].count += valueDict[dictKey]\n          data[i].category_2 =\n            ageGroupPrefix + '1-' + (parseInt(ageGroupPrefix) + 1) + '0'\n          newData.push(data[i])\n        }\n      }\n    }\n    return newData\n  }\n\n  const getMeta = voteStats => {\n    const meta = {\n      increased: 0,\n      mostIncreasedGroup: null,\n    }\n    const total = voteStats\n      .filter(v => v.subtype === 'VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    const newVotes = voteStats\n      .filter(v => v.subtype === 'NEW_VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    let max = 0\n    const groupedByAge = _.groupBy(voteStats, v => v.category_2)\n    Object.keys(groupedByAge).forEach(age => {\n      const genders = groupedByAge[age]\n      const groupedByGender = _.groupBy(genders, v => v.category_1)\n      Object.keys(groupedByGender).forEach(gender => {\n        const types = groupedByGender[gender]\n        const groupedByType = _.groupBy(types, v => v.subtype)\n        const newVoters = groupedByType['NEW_VOTERS'][0].count\n        const totalVoters = groupedByType['VOTERS'][0].count\n        if (newVoters / totalVoters > max) {\n          max = _.round(newVoters / totalVoters, 4)\n          meta.mostIncreasedGroup = {\n            gender,\n            age,\n            max,\n          }\n        }\n      })\n    })\n    // .filter(v => v.subtype === 'NEW_VOTERS')\n    // .forEach(v => {\n    //   if (v.count > max) {\n    //     meta.mostIncreasedGroup = {\n    //       gender: v.category_1,\n    //       age: v.category_2\n    //     }\n    //   }\n    // })\n    meta.increased = _.round(newVotes / (total - newVotes), 4)\n\n    return meta\n  }\n\n  return (\n    // TODO: support page other than battleground page\n    <>\n      <Query\n        query={QUERY_CONSTITUENCY_STATS}\n        variables={{ year: 2019, code: props.code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          if (data.dcd_constituencies.length === 0) {\n            console.error(`cannot find constituency. code: ${props.code}`)\n            return `Error!`\n          }\n\n          // 2019-10-19 Hackathon - Reduce grouping for voters bar chart\n          const transformedData = getTransformedData(\n            data.dcd_constituencies[0].vote_stats\n          )\n          // transform the data to desire format\n          const chartData = getDataForChat(transformedData)\n          const meta = getMeta(transformedData)\n          return (\n            <>\n              <Typography variant=\"h2\">\n                選民人數增加{_.round(meta.increased * 100, 2)}%\n              </Typography>\n              <Typography variant=\"h4\">\n                最大增幅組別：{meta.mostIncreasedGroup.age}歲的\n                {meta.mostIncreasedGroup.gender === 'MALE' ? '男' : '女'}\n                性選民增加了\n                {_.round(meta.mostIncreasedGroup.max * 100, 2)}%\n              </Typography>\n              <GroupedBarChart\n                data={chartData}\n                firstColor={COLORS.main.secondary}\n                secondColor={COLORS.main.primary}\n              />\n            </>\n          )\n        }}\n      </Query>\n    </>\n  )\n}\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport { Tag } from 'components/atoms/Tag'\nimport DistrictNewVoterChartContainer from 'components/containers/DistrictNewVoterChartContainer'\nimport Columns from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport Box from '@material-ui/core/Box'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport KeyboardArrowUp from '@material-ui/icons/KeyboardArrowUp'\nimport { getDistrictListUriFromTag, formatNumber } from 'utils/helper'\nimport { withRouter } from 'react-router-dom'\nimport { SuccessText, FailureText } from 'components/atoms/Text'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 0 16px;\n    box-shadow: none;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nclass DCCAOverview extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGraph: false,\n    }\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  toggleGraph() {\n    this.setState({\n      showGraph: !this.state.showGraph,\n    })\n  }\n\n  render() {\n    const { code, tags, voterData } = this.props\n    const sortedTags = tags.sort((a, b) =>\n      a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n    )\n    const new_voters_percentage = (\n      (100 * voterData.aggregations.new_voters) /\n      (voterData.aggregations.all_voters - voterData.aggregations.new_voters)\n    ).toFixed(2)\n    return (\n      <>\n        <Container>\n          <Rows>\n            <UnstyledButton onClick={this.toggleGraph.bind(this)}>\n              <Typography variant=\"h6\">\n                選民人數 {formatNumber(voterData.aggregations.all_voters)}{' '}\n                {' ('}\n                {new_voters_percentage > 0 ? (\n                  <SuccessText display=\"inline\">\n                    +{new_voters_percentage}%\n                  </SuccessText>\n                ) : (\n                  <FailureText display=\"inline\">\n                    -{new_voters_percentage}%\n                  </FailureText>\n                )}\n                )\n              </Typography>\n              {this.state.showGraph ? (\n                <KeyboardArrowUp fontSize=\"small\" />\n              ) : (\n                <ExpandMoreIcon fontSize=\"small\" />\n              )}\n            </UnstyledButton>\n            {this.state.showGraph && (\n              <DistrictNewVoterChartContainer code={code} />\n            )}\n          </Rows>\n          <Columns>\n            {sortedTags.map((tag, index) => (\n              <TagContainer key={index}>\n                <Tag\n                  value={tag.tag}\n                  handleClick={() => {\n                    this.props.history.push(getDistrictListUriFromTag(tag.tag))\n                  }}\n                />\n              </TagContainer>\n            ))}\n          </Columns>\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withRouter(DCCAOverview)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport Columns from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport { COLORS } from 'ui/theme'\nimport { UnstyledNavLink } from 'components/atoms/Link'\n\nimport { formatNumber, getColorFromCamp } from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    padding-top: 16px;\n  }\n`\nconst CandiateBox = styled(Box)`\n  && {\n    display: flex;\n    margin: 8px 0 8px;\n  }\n`\n\nconst CandidateAvatar = styled(Columns)`\n  && {\n    position: relative;\n    width: auto;\n    margin-right: 16px;\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: absolute;\n    top: 40px;\n    left: 3px;\n    border-radius: 50%;\n    font-size: 10px;\n    font-weight: 600;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst CandidateName = styled(Columns)`\n  && {\n    width: auto;\n    min-width: 120px;\n    .person-name {\n      font-weight: 600;\n    }\n  }\n`\n\nconst VotePercentageBar = styled(LinearProgress)`\n  && {\n    background: transparent;\n    width: 100%;\n    height: 16px;\n    .MuiLinearProgress-barColorPrimary {\n      background-color: ${props => COLORS.camp[props.camp].background};\n    }\n  }\n`\n\nconst VoteText = styled(Typography)`\n  && {\n    font-size: 14px;\n    font-weight: 600;\n    .vote-percentage {\n      font-size: 12px;\n    }\n  }\n`\n\nconst DCCAElectionResult = props => {\n  const { electionResult } = props\n\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.io'\n\n  const sortedCandidates = electionResult.candidates.sort(\n    (a, b) => b.votes - a.votes\n  )\n  return (\n    <Container>\n      <Typography variant=\"h6\">\n        {electionResult.year}年 - {electionResult.name_zh}（\n        {electionResult.code}）\n      </Typography>\n      {sortedCandidates.map((candidate, index) => {\n        candidate.vote_percentage = (\n          (candidate.votes / electionResult.vote_sum) *\n          100\n        ).toFixed(1)\n        return (\n          <UnstyledNavLink\n            to={`/profile/${candidate.person.name_zh ||\n              candidate.person.name_en}/${candidate.person.uuid}`}\n          >\n            <CandiateBox key={index}>\n              <CandidateAvatar>\n                <PeopleAvatar\n                  dimension=\"60px\"\n                  borderwidth={'3'}\n                  camp={getColorFromCamp(candidate.camp)}\n                  src={`${IMAGE_HOST_URI}/static/images/avatar/${candidate.person.uuid}.jpg`}\n                  imgProps={{\n                    onError: e => {\n                      e.target.src =\n                        IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                    },\n                  }}\n                />\n                {candidate.candidate_number > 0 && (\n                  <CandidateNumber\n                    dimension=\"16px\"\n                    camp={getColorFromCamp(candidate.camp)}\n                  >\n                    {candidate.candidate_number}\n                  </CandidateNumber>\n                )}\n                {/* {candidate.is_won && 'win'} */}\n              </CandidateAvatar>\n              <CandidateName>\n                <Rows>\n                  <Typography variant=\"h5\" className=\"person-name\">\n                    {candidate.person.name_zh}\n                  </Typography>\n                </Rows>\n                <Rows>\n                  <Typography variant=\"body2\">\n                    {candidate.political_affiliation} （{candidate.camp}）\n                  </Typography>\n                </Rows>\n              </CandidateName>\n              <Columns>\n                {candidate.votes > 0 ? (\n                  <>\n                    <Rows>\n                      <VoteText>\n                        {formatNumber(candidate.votes)}票{' '}\n                        <span className=\"vote-percentage\">\n                          （{candidate.vote_percentage}%）\n                        </span>\n                      </VoteText>\n                    </Rows>\n                    <Rows>\n                      <VotePercentageBar\n                        variant=\"determinate\"\n                        camp={getColorFromCamp(candidate.camp)}\n                        value={\n                          (candidate.vote_percentage /\n                            sortedCandidates[0].vote_percentage) *\n                          100\n                        }\n                      />\n                    </Rows>\n                  </>\n                ) : (\n                  <Typography variant=\"h5\">自動當選</Typography>\n                )}\n              </Columns>\n            </CandiateBox>\n          </UnstyledNavLink>\n        )\n      })}\n    </Container>\n  )\n}\n\nexport default DCCAElectionResult\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { Typography } from '@material-ui/core'\nimport DCCAElectionResult from 'components/templates/DCCAElectionResult'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\n\nimport { getColorFromCamp } from 'utils/helper'\n\nconst GET_DCCA_ELECTION_HISTORIES = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      code\n      year\n      name_zh\n      candidates(where: { year: { _eq: $year }, cacode: { _eq: $code } }) {\n        person {\n          name_zh\n          uuid\n        }\n        candidate_number\n        camp\n        votes\n        vote_percentage\n        is_won\n        political_affiliation\n      }\n    }\n    dcd_candidates_aggregate(\n      where: { year: { _eq: $year }, cacode: { _eq: $code } }\n    ) {\n      aggregate {\n        sum {\n          votes\n        }\n      }\n    }\n  }\n`\nconst DCCAElectionResultContainer = styled(Box)`\n  && {\n    padding: 0 16px;\n  }\n`\nconst CampText = styled.div`\n  && {\n    border-bottom: 2px ${props => COLORS.camp[props.camp].background} solid;\n    margin-bottom: 2px;\n  }\n`\n\nclass DCCAElectionHistories extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    const { histories, presetTabIndex } = this.props\n\n    const filteredHistories = histories.filter(\n      history => history.year !== '2019'\n    )\n\n    return (\n      <ScrollableTabs\n        tabnumber={\n          presetTabIndex < 0\n            ? filteredHistories.length > 0\n              ? filteredHistories.length - 1\n              : 0\n            : presetTabIndex\n        }\n        indicatorcolor={COLORS.main.primary}\n        titles={filteredHistories.map(history => (\n          <Query\n            query={GET_DCCA_ELECTION_HISTORIES}\n            variables={{ year: history.year, code: history.CACODE }}\n          >\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n\n              const electionResult = data.dcd_constituencies[0]\n\n              return (\n                <>\n                  <CampText\n                    camp={getColorFromCamp(\n                      electionResult.candidates.find(candi => candi.is_won).camp\n                    )}\n                  >\n                    {electionResult.candidates.find(candi => candi.is_won).camp}\n                  </CampText>\n                  <Typography variant=\"body2\">{history.year}</Typography>\n                </>\n              )\n            }}\n          </Query>\n        ))}\n        variant=\"fullWidth\"\n      >\n        {filteredHistories.map((history, index) => (\n          <Query\n            key={index}\n            query={GET_DCCA_ELECTION_HISTORIES}\n            variables={{ year: history.year, code: history.CACODE }}\n          >\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n\n              const electionResult = data.dcd_constituencies[0]\n              electionResult.vote_sum =\n                data.dcd_candidates_aggregate.aggregate.sum.votes\n\n              return (\n                <DCCAElectionResultContainer>\n                  <DCCAElectionResult electionResult={electionResult} />\n                </DCCAElectionResultContainer>\n              )\n            }}\n          </Query>\n        ))}\n      </ScrollableTabs>\n    )\n  }\n}\n\nexport default DCCAElectionHistories\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport DCCACompareMap from '../../DCCACompareMap'\nimport { Query } from 'react-apollo'\nimport MainAreas from 'components/district/MainAreas'\nimport CouncillorContainer from 'components/containers/CouncillorContainer'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\nimport DCCAOverview from 'components/district/DCCAOverview'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\nimport Collapse from '@material-ui/core/Collapse'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { PlainCard } from '../../molecules/Card'\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { Alert } from 'components/atoms/Alert'\nimport { getDistrictOverviewUriFromTag, getParameterByName } from 'utils/helper'\nimport { getAllFeaturesFromPoint } from 'utils/features'\nimport DCCAElectionHistories from 'components/templates/DCCAElectionHistories'\n\nconst groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 16px 0;\n  }\n`\n\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\nconst ToggleMapButton = styled(UnstyledButton)`\n  && {\n    border-radius: 0;\n    width: 100%;\n    font-size: 14px;\n    text-align: center;\n  }\n`\n\nclass BattleGroundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showMap: true,\n      currentPoint: {\n        lng: 114.17056164035003,\n        lat: 22.312613750860297,\n      },\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  handleMapClick = coordinate => {\n    const point = {\n      lng: coordinate[0],\n      lat: coordinate[1],\n    }\n\n    this.setState({ currentPoint: point })\n  }\n\n  handleMapLoaded = props => {\n    const { centroid } = props\n    const point = {\n      lng: centroid[0],\n      lat: centroid[1],\n    }\n\n    this.setState({ currentPoint: point })\n  }\n  onPrevElection() {\n    const {\n      match: {\n        params: { code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const { showMap } = this.state\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n      location: { search },\n    } = this.props\n\n    // Preset Tab for election history by matching query ?year=<year>\n    const queryYear = getParameterByName('year', search)\n    const presetTabIndex = ['2003', '2007', '2011', '2015'].findIndex(\n      year => year === queryYear\n    )\n\n    return (\n      <>\n        <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n          {({ loading, error, data }) => {\n            if (loading) return null\n            if (error) return `Error! ${error}`\n            const district = data.dcd_constituencies[0]\n            const previousDistricts = district.predecessors.filter(\n              district =>\n                district.intersect_area === null ||\n                district.intersect_area > 1000\n            )\n\n            const pointHistory = getAllFeaturesFromPoint(\n              this.state.currentPoint\n            )\n\n            const DCCAStatus =\n              district.tags &&\n              district.tags.find(tag => tag.type === 'boundary')\n\n            return (\n              <>\n                <BreadcrumbsContainer>\n                  <Breadcrumbs\n                    separator={<NavigateNextIcon fontSize=\"small\" />}\n                    aria-label=\"breadcrumb\"\n                  >\n                    <Typography color=\"textPrimary\"> {year}</Typography>\n                    <UnstyledLink\n                      onClick={() => {\n                        this.props.history.push(\n                          getDistrictOverviewUriFromTag(\n                            district.district.dc_code\n                          )\n                        )\n                      }}\n                    >\n                      <Typography color=\"textPrimary\">\n                        {district.district.dc_name_zh}\n                      </Typography>\n                    </UnstyledLink>\n                    <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                      {district.name_zh}（{code}）\n                    </Typography>\n                  </Breadcrumbs>\n                </BreadcrumbsContainer>\n                {DCCAStatus && (\n                  <Alert>\n                    <Typography variant=\"h6\" gutterBottom>\n                      {DCCAStatus.tag === '改劃界'\n                        ? `此選區於2019年更改劃界`\n                        : `此選區為2019年${DCCAStatus.tag}`}\n                    </Typography>\n                  </Alert>\n                )}\n                <Container>\n                  <CandidatesContainer year={year} code={district.code} />\n                </Container>\n                <DCCAOverview\n                  year={year}\n                  name_zh={district.name_zh}\n                  dc_code={district.district.dc_code}\n                  dc_name_zh={district.district.dc_name_zh}\n                  code={district.code}\n                  tags={district.tags}\n                  voterData={groupVoteStat(district.vote_stats)}\n                />\n                {/* TODO Refactor style for ToggleMap Button */}\n                <ToggleMapButton\n                  onClick={() => this.setState({ showMap: !showMap })}\n                >\n                  {showMap ? '隱藏地圖' : '顯示地圖'}\n                  {showMap ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </ToggleMapButton>\n                <Collapse in={showMap}>\n                  <Box width={'100%'} height={{ sm: '300px', md: '400px' }}>\n                    <DCCACompareMap\n                      year={year}\n                      code={code}\n                      changeDistrict={this.handleChangeDistrict}\n                      handleMapClick={this.handleMapClick}\n                      handleMapLoaded={this.handleMapLoaded}\n                    />\n                  </Box>\n                </Collapse>\n                <MainAreas areas={district.main_areas || []} />\n\n                {DCCAStatus && (\n                  <Container>\n                    <Typography variant=\"h6\">\n                      {DCCAStatus.tag === '改劃界'\n                        ? `此選區於2019年更改劃界`\n                        : `此選區為2019年${DCCAStatus.tag}`}\n                    </Typography>\n                  </Container>\n                )}\n                <DCCAElectionHistories\n                  histories={pointHistory}\n                  presetTabIndex={presetTabIndex}\n                />\n                <PlainCard>\n                  <Typography variant=\"h6\">現任區議員</Typography>\n                  {previousDistricts.length > 1 && (\n                    <Typography variant=\"h6\">{`此區與上屆${previousDistricts.length}個選區重疊`}</Typography>\n                  )}\n                  {previousDistricts.map((d, index) => (\n                    <CouncillorContainer\n                      key={index}\n                      year={2015}\n                      code={d.predecessor.code}\n                    />\n                  ))}\n                </PlainCard>\n              </>\n            )\n          }}\n        </Query>\n      </>\n    )\n  }\n}\n\nexport default BattleGroundPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { DefaultLink } from 'components/atoms/Link'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h5\">關於候選人陣營</Typography>\n        <p>\n          候選人的政治陣營，反映他們對政治議題的看法。一般而言，每人對各項議題可持不同立場，難以用一兩個詞語概括候選人背景。\n        </p>\n\n        <Typography variant=\"h5\">陣營分類（2019區議會選舉）</Typography>\n\n        <p>\n          本屆區議會選舉的候選人政治陣營取自\n          <DefaultLink target=\"_blank\" href=\"https://hkfactcheck.io\">\n            選區事實處\n          </DefaultLink>\n          \b，該網站收集大眾意見，並跟據以下資料綜合判斷：\n        </p>\n        <ol>\n          <li>最近申報之政治聯繫；</li>\n          <li>過往申報之政治聯繫；</li>\n          <li>該政治聯系於重大政治議題上的取態；</li>\n          <li>相關人士及其於重大政治議題上的取態；</li>\n          <li>本人於重大政治議題上的取態；</li>\n          <li>各媒體提及該人士時所使用的介紹文字；</li>\n          <li>與其他組織的關聯。 遇有爭議個案，一律以「其他/未清楚」取代。</li>\n        </ol>\n\n        <p>\n          如任何人分類有任何意見，歡迎反映或電郵至\n          <DefaultLink target=\"_blank\" href=\"mailto:hkfactcheck@gmail.com\">\n            mailto:hkfactcheck@gmail.com\n          </DefaultLink>\n          \b。\n        </p>\n\n        <Typography variant=\"h5\">2019之前的陣營分類</Typography>\n\n        <p>\n          至於2019年以前之候選人陣營分類，則取自\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://github.com/initiummedia/hk_district_council_election\"\n          >\n            端傳媒於2017年整理之檔案\n          </DefaultLink>\n          ，本網站刊載前已盡力確保資料真確性，如有建議或錯漏，歡迎\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://forms.gle/irD6tEznWPNda6w59\"\n          >\n            反映\n          </DefaultLink>\n          或電郵至\n          <DefaultLink target=\"_blank\" href=\"mailto:chiangsumlui@gmail.com\">\n            chiangsumlui@gmail.com\n          </DefaultLink>\n          ，我們會盡快跟進。\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h5\">關於區議會選舉</Typography>\n        <p>\n          2019年區議會選舉將於2019年11月24日舉行，屆時將會選出香港十八區區議會共452個民選議席及27個當然議員，任期為四年，由2020年1月1日至2023年12月31日。\n        </p>\n\n        <Typography variant=\"h5\">區議會的社區重要性</Typography>\n        <p>\n          香港區議會是香港政府重要的地區諮詢媒介，區議員透過平日接觸居民和聽取民意，能夠向政府反映現有或未來政策、公共設施及服務對居民的影響和反饋，甚至能夠申請撥款，承擔有關區內的環境、康樂及文化活動的改善事務。\n        </p>\n\n        <Typography variant=\"h5\">區議會的政治重要性</Typography>\n        <p>\n          全港共有117名港九新界各區議會的議員將會成為1,200人的行政長官選委會的一份子，此外，在立法會選舉（或未來的行政長官普選中），區議員作為該區的聯繫人，在宣傳、組織票源、動員群眾的力量都是無可代替的。\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </>\n    )\n  }\n}\n\nexport default withStyles(NotFoundPage)\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { UnstyledNavLink } from '../atoms/Link'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    background: white;\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst AppBarTitle = styled(UnstyledNavLink)`\n  && {\n    left: auto;\n    right: auto;\n    width: 100%;\n    position: absolute;\n  }\n`\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\">\n        <Toolbar disableGutters>\n          <AppBarTitle to={'/'}>\n            <Typography variant=\"h1\" align=\"center\">\n              <span role=\"img\" aria-label=\"區議會 2019\">\n                區議會 2019 ✋🏻💜⚡\n              </span>\n            </Typography>\n          </AppBarTitle>\n\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Search\"\n            onClick={() => dispatch({ type: DRAWER_OPEN })}\n          >\n            <MenuIcon />\n          </IconButton>\n        </Toolbar>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Divider from '@material-ui/core/Divider'\nimport { UnstyledLink, DefaultLink } from 'components/atoms/Link'\nimport { Typography } from '@material-ui/core'\nimport Columns from 'components/atoms/Columns'\nimport { withRouter } from 'react-router-dom'\n\nconst StyledFooter = styled(Box)`\n  && {\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n    padding: 16px;\n  }\n`\n\nconst StyledDivider = styled(Divider)`\n  && {\n    margin: 16px 0;\n  }\n`\n\nconst StyledFooterLink = styled(UnstyledLink)`\n  && {\n    color: rgba(0, 0, 0, 0.87);\n  }\n`\n\nconst LinkBox = styled(Box)`\n  && {\n    margin: 8px 16px 8px 0;\n    word-break: keep-all;\n    overflow: hidden;\n  }\n`\n\nfunction Footer(props) {\n  return (\n    <>\n      <StyledFooter>\n        <StyledDivider />\n        <Typography variant=\"body2\" gutterBottom>\n          本網站所刊載資訊全為公開資料，歸納自選舉管理委員會丶選舉事務處丶政府統計處丶各區區議會網站及\n          <DefaultLink href=\"https://github.com/initiummedia/hk_district_council_election\">\n            端傳媒\n          </DefaultLink>\n          ，刊載前已盡力確保資料真確性，如有建議或錯漏，請按下方連結回報。\n        </Typography>\n        <Typography variant=\"body2\">\n          本網站與任何2019年區議會選舉候選人或其助選成員無關，刊載資料目的非為促使或阻礙任何候選人在選舉中當選。\n        </Typography>\n        <StyledDivider />\n        <Columns>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://www.facebook.com/g0vhk.io\"\n            >\n              g0vhk.io\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              onClick={\n                () => props.history.push(`/disclaimer`)\n                // console.log(props)\n              }\n            >\n              關於候選人陣營\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://forms.gle/irD6tEznWPNda6w59\"\n            >\n              反映意見\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://github.com/cswbrian/district-councils-dashboard\"\n            >\n              GitHub\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink target=\"_blank\" href=\"https://hkfactcheck.io/\">\n              選區事實處\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <div\n              className=\"fb-like\"\n              data-href=\"https://dc2019.g0vhk.io\"\n              data-width=\"\"\n              data-layout=\"standard\"\n              data-action=\"like\"\n              data-size=\"small\"\n              data-show-faces=\"true\"\n              data-share=\"true\"\n            ></div>\n          </LinkBox>\n        </Columns>\n      </StyledFooter>\n    </>\n  )\n}\n\nexport default withRouter(Footer)\n","import React from 'react'\nimport GoogleAnalytics from 'react-ga'\n\nconst trackingId = process.env.REACT_APP_GA_TRACKING_ID\nif (!trackingId) {\n  throw new Error(\n    'Invalid google tracking ID. or set to UA-000000-01 if you dont have any'\n  )\n}\nGoogleAnalytics.initialize(trackingId)\n\nconst withTracker = (WrappedComponent, options = {}) => {\n  const trackPage = page => {\n    GoogleAnalytics.set({\n      page,\n      ...options,\n    })\n    GoogleAnalytics.pageview(page)\n  }\n\n  const HOC = class extends React.Component {\n    componentDidMount() {\n      const page = this.props.location.pathname\n      trackPage(page)\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const currentPage = this.props.location.pathname\n      const nextPage = nextProps.location.pathname\n\n      if (currentPage !== nextPage) {\n        trackPage(nextPage)\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />\n    }\n  }\n\n  return HOC\n}\n\nexport default withTracker\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport SearchTab from 'components/organisms/SearchTab'\nimport Typography from '@material-ui/core/Typography'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst LeftMargin = styled(ExpandedRow)`\n  && {\n    min-height: 48px;\n    align-items: center;\n    padding: 0 16px 0 16px;\n    cursor: pointer;\n  }\n`\nconst SearchMenu = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  function goToPage(route) {\n    props.history.push(route)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  return (\n    <>\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/')}\n        >\n          返回首頁\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/about-dc')}\n        >\n          關於區議會選舉\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() =>\n            (window.location.href =\n              'https://docs.google.com/forms/u/1/d/e/1FAIpQLSdXtbdry3w8hkmZuN0MJaj2CP2X3RUUnCTWLnOujsfx1pHDrw/viewform?usp=send_form')\n          }\n        >\n          反映意見\n        </Typography>\n      </LeftMargin>\n      <SearchTab />\n    </>\n  )\n}\n\nexport default withRouter(SearchMenu)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport SearchMenu from 'components/organisms/SearchMenu'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst MenuContainer = styled(Box)`\n  && {\n    margin-top: 48px;\n    display: flex;\n    width: 100%;\n    flex-flow: column;\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    padding: 12px;\n  }\n`\n\nfunction AppDrawer(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <Container>\n      <NavBarButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Menu\"\n        onClick={() => {\n          dispatch({ type: DRAWER_CLOSE })\n        }}\n      >\n        <CloseIcon fontSize=\"small\" />\n      </NavBarButton>\n      <MenuContainer>\n        <SearchMenu />\n      </MenuContainer>\n    </Container>\n  )\n}\n\nexport default withRouter(AppDrawer)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_DISTRICT } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictOverviewPage = props => {\n  const {\n    match: {\n      params: { year, code },\n    },\n  } = props\n\n  return (\n    <Query query={QUERY_GET_DISTRICT} variables={{ code, year: 2019 }}>\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        const district = data.dcd_districts[0]\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${district.dc_name_zh}：${district.constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {district.constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictOverviewPage\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport { makeStyles } from '@material-ui/core/styles'\nimport IndexPage from 'components/pages/landing'\nimport ProfilePage from 'components/pages/profile'\nimport DistrictPage from 'components/pages/district'\nimport DistrictListPage from 'components/pages/district/list'\nimport BattleGroundPage from 'components/pages/battleground'\nimport DisclaimerPage from 'components/pages/disclaimer'\nimport AboutDCPage from 'components/pages/about/dc'\nimport NotfoundPage from 'components/pages/notfound'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme from 'ui/theme'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Drawer from '@material-ui/core/Drawer'\nimport MobileAppBar from 'components/organisms/MobileAppBar'\nimport Footer from 'components/organisms/Footer'\nimport drawerReducer from 'reducers/drawer'\nimport ContextStore, { drawerInitialState } from 'ContextStore'\nimport withTracker from './WithTracker'\nimport SearchDrawer from 'components/pages/SearchDrawer'\nimport DistrictOverviewPage from 'components/pages/district/overview'\n\nconst client = new ApolloClient({\n  uri: process.env.REACT_APP_GRAPHQL_URI,\n})\n\nconst useStyles = makeStyles(theme => ({\n  drawerPaper: {\n    width: '500px',\n    maxWidth: '100%',\n  },\n}))\n\nconst Root = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    margin: auto;\n    overflow: hidden;\n    background-color: white;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    overflow: auto;\n  }\n`\n\nconst Wrapper = styled(Box)`\n  && {\n    flex: 1;\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n  }\n`\n\nconst App = props => {\n  if (!process.env.REACT_APP_GRAPHQL_URI) {\n    throw new Error('Graphql host not yet set')\n  }\n  const classes = useStyles()\n\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ApolloProvider client={client}>\n      <MuiThemeProvider theme={theme}>\n        <ContextStore.Provider\n          value={{\n            drawer: {\n              state: drawerState,\n              dispatch: drawerDispatch,\n            },\n          }}\n        >\n          <Root>\n            <ContentContainer>\n              <CssBaseline />\n              <Wrapper>\n                <MobileAppBar />\n                <main>\n                  <Switch>\n                    <Route exact path=\"/\" component={withTracker(IndexPage)} />\n                    <Route\n                      path=\"/profile/:name/:uuid\"\n                      component={withTracker(ProfilePage)}\n                    />\n                    <Route\n                      path=\"/district/:year/tags/:tag\"\n                      component={withTracker(DistrictListPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code(\\w{1})\"\n                      component={withTracker(DistrictOverviewPage)}\n                    />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={withTracker(BattleGroundPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={withTracker(DistrictPage)}\n                    />\n                    <Route\n                      path=\"/disclaimer\"\n                      component={withTracker(DisclaimerPage)}\n                    />\n                    <Route\n                      path=\"/about-dc\"\n                      component={withTracker(AboutDCPage)}\n                    />\n                    <Route component={withTracker(NotfoundPage)} />\n                  </Switch>\n                </main>\n              </Wrapper>\n              <Footer />\n            </ContentContainer>\n            <Drawer\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n              anchor=\"left\"\n              open={drawerState.open}\n              variant=\"persistent\"\n            >\n              <SearchDrawer />\n            </Drawer>\n          </Root>\n        </ContextStore.Provider>\n      </MuiThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}