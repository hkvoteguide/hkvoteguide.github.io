{"version":3,"sources":["queries/gql.js","ui/theme.js","components/atoms/Link.js","components/atoms/Columns.js","constants/dcregion.js","utils/helper.js","components/templates/Summary.js","components/atoms/charts/StackedNormalizedHorizontalBarChart.js","components/atoms/Slider/index.js","components/atoms/Text.js","components/molecules/ValueSlider.js","components/molecules/TabBar.js","components/organisms/Tabs.js","components/atoms/Rows.js","components/atoms/Button.js","components/organisms/PredictionChartPanel.js","components/molecules/CheckBox.js","components/molecules/LoadingButton.js","utils/ga_fireevent.js","components/templates/CampCompareChartContainer.js","components/atoms/Countdown.js","components/atoms/Alert.js","components/atoms/Avatar.js","reducers/drawer.js","ContextStore.js","components/molecules/SearchBoxOption.js","utils/features.js","components/organisms/SearchAllBox.js","components/organisms/AreaTabs.js","components/molecules/DistrictSelector.js","components/organisms/SearchTab.js","components/pages/landing/index.js","components/organisms/ScrollableTabs.js","components/templates/CouncillorMeetingAttendance.js","components/containers/CouncillorMeetingAttendanceContainer.js","components/molecules/Card.js","components/templates/PersonElectionHistories.js","components/containers/PersonElectionHistoriesContainer.js","components/molecules/PersonEvent.js","components/templates/FCPersonData.js","components/atoms/Tag.js","components/atoms/Tooltip.js","components/pages/profile/index.js","components/OLMap.js","ui/responsive.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/atoms/charts/WaffleChart.js","components/district/Metrics.js","components/pages/district/index.js","components/containers/CandidatesContainer.js","components/organisms/ConstituencyCard.js","components/atoms/Loading.js","components/pages/district/list.js","components/DCCACompareMap.js","components/templates/Councillor.js","components/containers/CouncillorContainer.js","components/atoms/charts/GroupedBarChart.js","components/containers/DistrictNewVoterChartContainer.js","components/district/DCCAOverview.js","components/templates/DCCAElectionResult.js","components/templates/DCCAElectionHistories.js","components/pages/battleground/index.js","components/pages/disclaimer/index.js","components/pages/about/dc.js","components/pages/notfound/index.js","components/pages/support-us/index.js","components/organisms/ShareButton.js","components/organisms/MobileAppBar.js","components/templates/Disclaimer.js","components/organisms/Footer.js","WithTracker.js","components/organisms/SearchMenu.js","components/pages/SearchDrawer.js","components/molecules/candidate/CandidatesTableContent.js","components/molecules/constituency/ConstituencyTableContent.js","components/molecules/district/DistrictTableContent.js","components/atoms/CampSelector.js","components/molecules/district/DistrictsTable.js","components/templates/DistrictCampCompareChartContainer.js","components/pages/district/overview.js","components/pages/district/all.js","components/molecules/Dialog.js","components/organisms/GlobalDisclaimer.js","i18n.js","App.js","index.js"],"names":["CONSTITUENCIES_DATA","DISTRICT_DATA","QUERY_CONSTITUENCIES","gql","_templateObject","QUERY_GET_CONSTITUENCIES_BY_TAG","_templateObject2","QUERY_CONSTITUENCY_STATS","_templateObject3","QUERY_GET_DISTRICT","_templateObject4","QUERY_GET_ALL_DISTRICTS","_templateObject5","QUERY_GET_AREA","_templateObject6","QUERY_GET_PERSON_ELECTIONS","_templateObject7","QUERY_GET_PERSON_MEETING_ATTENDANCES","_templateObject8","QUERY_GET_COUNCILLOR","_templateObject9","QUERY_GET_CANDIDATES","_templateObject10","QUERY_GET_NOMINATION_SUMMARY","_templateObject11","_templateObject12","QUERY_GET_CONFIG","_templateObject13","headingFontFamily","FONT_FAMILY","typography","useNextVariants","fontSize","fontFamily","join","h1","fontWeight","h2","h3","h4","h5","h6","body1","lineHeight","body2","COLORS","main","text","primary","secondary","background","mainText","dark","backgroundColor","color","camp","democracy","establishment","localist","other","uncertain","common","success","green","failure","red","secondaryBackgroundColor","createMuiTheme","palette","contrastText","UnstyledLink","styled","Link","Link_templateObject","UnstyledNavLink","NavLink","Link_templateObject2","DefaultLink","Link_templateObject3","Box","Columns_templateObject","SeperatedColumns","Columns_templateObject2","DCREGION","A","zh_hk","en_us","unelected_dc_seat","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","getDistrictListUriFromTag","tag","concat","getDistrictOverviewUriFromTag","code","getConstituencyUriFromTag","getColorFromCamp","泛民","民主","建制","本土","傘兵","自決","其他","不明","getColorFromPoliticalAffiliation","pa","mapping","_arr","Object","keys","_i","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","party","value","includes","err","return","getProfilePath","person","name_en","name_zh","uuid","formatNumber","num","toString","replace","getCurrentUrl","window","location","href","getConstituencyTagsByCandidateCamps","candidates","tags","filteredCandidates","filter","c","election_type","nominate_status","findIndex","type","push","groupedCamps","_","groupBy","withLanguage","lang","match","Container","Summary_templateObject","FlexLink","Summary_templateObject2","SummaryExpansionPanel","ExpansionPanel","Summary_templateObject3","SummaryExpansionPanelSummary","ExpansionPanelSummary","Summary_templateObject4","SummaryExpansionPanelDetails","ExpansionPanelDetails","Summary_templateObject5","ControlledExpansionPanels","props","_React$useState","React","useState","_React$useState2","slicedToArray","expanded","setExpanded","t","useTranslation","handleChange","panel","event","isExpanded","_props$tagsData","tagsData","demo_clash","estab_clash","highlight","react_default","a","createElement","onChange","expandIcon","ExpandMore_default","aria-controls","id","Typography","variant","gutterBottom","n","Columns","map","district","index","key","onClick","history","style","flexDirection","withRouter","react_apollo_esm","query","_ref","loading","error","data","result","c2019","forEach","dcca","objectSpread","r","auto_win","c2015","dcca2015","dcca2019","find","filteredCandidates2019","votes","sort","b","allVotes","reduce","Fragment","Styled","StackedNormalizedHorizontalBarChart_templateObject","StackedNormalizedHorizontalBarChart","_useState","width","height","_useState2","dimensions","setDimensions","hideLegend","CAMP_COLORS","d3Container","useRef","updateLegend","res","svg","label","count","d","v","overhalf_count","total","selectAll","remove","legend","enter","append","attr","i","drawChart","columns","margin","top","right","bottom","left","rowHeight","ROW_HEIGHT","labels","series","d3","slice","offset","s","y","domain","range","unknown","name","padding","x","current","select","empty","bar","bandwidth","transition","delay","Math","random","duration","groups","f","call","g","tickSizeOuter","on","k","getCodeFromDistrictName","ticks","middle","updateWindowSize","clientWidth","useEffect","addEventListener","useLayoutEffect","ref","atoms_Slider","Slider","Text_templateObject","SuccessText","Text_templateObject2","FailureText","Text_templateObject3","Text","SliderContainer","ValueSlider_templateObject","Label","ValueSlider_templateObject2","ValueSlider","setValue","className","newValue","TabBar","titles","selectedTab","setSelectedTab","Tabs","centered","title","Tab","TabPanel","children","objectWithoutProperties","assign","component","role","aria-labelledby","ScrollableTabs","child","hidden","Rows_templateObject","UnstyledButton","Button","Button_templateObject","StyledValueSlider","PredictionChartPanel_templateObject","TabSection","PredictionChartPanel_templateObject2","StyledCheckBox","checked","setChecked","FormControlLabel","control","Checkbox","target","PredictionChartPanel_templateObject3","ToggleButton","PredictionChartPanel_templateObject4","PredictionChartPanel","settings","setSettings","showSettings","setShowSettings","handleClose","reason","setSettingConfigFunc","field","flag","config","defineProperty","camp_rate","toConsumableArray","vote_rate","setSettingFunc","renderSettings","ExpandLess_default","Collapse","in","Rows","reference_last_election","auto_won_add_components","buttonLayout","StyledCircularProgress","CircularProgress","LoadingButton_templateObject","WhiteText","LoadingButton_templateObject2","LoadingButton","isLoading","size","disabled","fireEvent","ca","ac","lb","_ref$val","val","_ref$nonInteraction","nonInteraction","GoogleAnalytics","category","action","console","log","initialize","process","div","CampCompareChartContainer_templateObject","PredictionChartHeader","CampCompareChartContainer_templateObject2","StyledLoadingButton","CampCompareChartContainer_templateObject3","FETCH_CAMP_DATA","CampCompareChartContainer_templateObject4","convertToD3Compatible","sortFunc","values","acc","AGE_GROUP_MIDDLE","AGE_GROUP_OLD","groupExpectDataByRegionAndCamp","constituencies","getProjectedVotes","voteStats","subtype","stat","settingIndex","indexOf","category_2","votePercentage","yellowPercentage","getVoteCountBySetting","expectedResult","constituency","predecessors","predecessor","onlyCandidate","vote_stats","mock","maxVote","projectedVotes","establishCount","cacode","byCodes","p","CampCompareChartContainer","predictEnabled","setPredictEnabled","_React$useState3","_React$useState4","isLoadingPrediction","setIsLoadingPrediction","_React$useState5","_React$useState6","predictoinData","setPredictionData","_React$useState7","_React$useState8","_fetchData","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","axios","sent","status","stop","apply","this","arguments","fetchData","variables","year","_ref3","defaultChartData","dataForD3","candidate","groupDataByRegionAndCamp","dcd_candidates","d3Data","dcd_constituencies","indexFromOriginalChartData","record","CampCompareChartContainer_Container","organisms_PredictionChartPanel","TimeGrid","Grid","Countdown_templateObject","Time","Countdown_templateObject2","Unit","Countdown_templateObject3","Countdown","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","days","hours","min","sec","_this2","interval","setInterval","date","calculateCountdown","setState","endDate","diff","Date","parse","timeLeft","years","millisec","floor","clearInterval","String","countDown","container","item","xs","addLeadingZeros","Component","defaultProps","withTranslation","Alert","Alert_templateObject","PeopleAvatar","Avatar","Avatar_templateObject","opacity","dimension","borderwidth","DRAWER_OPEN","DRAWER_CLOSE","drawer","open","drawerInitialState","ContextStore","createContext","ContextStoreProvider","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","Provider","dispatch","StyledTypography","SearchBoxOption_templateObject","StyledAddressOption","dc_name_zh","SearchBoxOption_templateObject2","StyledPeopleOption","homeUrl","_props$data","avatarPath","alignItems","src","imgProps","onError","e","borderRadius","SearchBoxOption_templateObject3","useContext","path","getSingleFeatureFromPoint","lng","lat","pt","turf","dc2019","features","feature","poly","geometry","coordinates","properties","CACODE","CNAME","ENAME","getAllFeaturesFromPoint","point","featuresArray","dc2003","dc2007","dc2011","dc2015","polygonProps","split","adjustConcavePolygonCentroid","2003","D14","L12","P03","P16","2007","D01","2011","2015","2019","L13","P02","R09","getCentroidFromYearAndCode","selectedIndex","polygon","centroid","GET_PEOPLE","SearchAllBox_templateObject","Group","chunk_ca26b926_browser_esm","DropdownIndicator","index_es","withApollo","client","_useQuery","useQuery","searchAddress","records","AddressParser","abrupt","coordinate","dname_zh","dname_en","dcd_districts","dc_code","charAt","fullAddress","LANG_EN","LANG_ZH","ele","self","_x","searchPeople","_ref2","_callee2","_context2","nameRegex","_x2","search","_ref4","_callee3","results","_context3","Promise","all","options","_x3","react_select_browser_esm","components","Option","SearchBoxOption","placeholder","noOptionsMessage","loadingMessage","cacheOptions","loadOptions","defaultOptions","AreasTabs","AreaTabs_templateObject","AreasTab","AreaTabs_templateObject2","AreaTabs","AreaTabs_TabPanel","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","fontsize","DistrictExpansionPanel","DistrictSelector_templateObject3","DistrictExpansionPanelSummary","DistrictSelector_templateObject4","DistrictExpansionPanelDetails","DistrictSelector_templateObject5","renderArea","area","districts","TransitionProps","unmountOnExit","dc_name_en","DistrictSelector_Container","areas","uniqBy","area_code","area_name_zh","area_name_en","areasWithDistricts","areaNames","Paper","SearchTab_templateObject","ExpandedRow","SearchTab_templateObject2","ContentRowContainer","SearchTab_templateObject3","AddressSearchContainer","SearchTab_templateObject4","SearchTab_Container","molecules_DistrictSelector","organisms_SearchAllBox","handleAddressSelected","landing_templateObject","TopSection","landing_templateObject2","StyledCampCompareChartContainer","landing_templateObject3","CountdownContainer","landing_templateObject4","StyledSearchTab","SearchTab","landing_templateObject5","ConfigCenterText","landing_templateObject6","IndexPage","renderAlert","dcd_config","renderCenterText","dangerouslySetInnerHTML","__html","html_text","autoCompleteList","textAlign","atoms_Countdown","landing_Container","templates_Summary","StyledAppBar","AppBar","ScrollableTabs_templateObject","indicatorcolor","_props$tabnumber","tabnumber","shouldCenter","position","scrollButtons","lib_default","onChangeIndex","ScrollableTabs_TabPanel","MobileTableCell","TableCell","CouncillorMeetingAttendance_templateObject","CouncillorMeetingAttendace","meetings","Table","TableHead","TableRow","align","TableBody","m","scope","meeting","meet_name","meet_type","meet_year","attended","propsType","PropTypes","array","CouncillorMeetingAttendaceContainer","personId","person_id","flatten","dcd_councillors","meeting_attendances","CouncillorMeetingAttendance","int","StyledCard","Card","Card_templateObject","PlainCard","PersonElectionHistoriesTitle","PersonElectionHistories_templateObject","createQueryStringToBattlegroundPage","election","targetPath","dccaHistories","PersonElectionHistories","histories","to","Card_PlainCard","NavigateNext_default","political_affiliation","is_won","PersonElectionHistoriesContainer","templates_PersonElectionHistories","dcd_people_by_pk","PersonEvent_templateObject","StyledMicrolink","Microlink","PersonEvent_templateObject2","getEventTypeText","personVote","getPersonVoteText","PersonEvent","eventType","description","url","validatedUrl","exec","validateUrl","PersonEvent_StyledCard","CardContent","substring","trimDescription","FCPersonData_templateObject","StyledRows","FCPersonData_templateObject2","StyledButton","FCPersonData_templateObject3","FCPersonData","fcUuid","filterFunc","events","setEvents","fcUri","FCPersonData_Container","fc_url","molecules_PersonEvent","eventId","focus","string","func","isRequired","StyledChip","Chip","Tag_templateObject","backgroundcolor","textcolor","bordercolor","SecondaryStyledChip","Tag_templateObject2","Tag","handleClick","SecondaryTag","InfoIconSvg","InfoIcon","Tooltip_templateObject","ErrorIconSvg","ErrorIcon","Tooltip_templateObject2","HtmlTooltip","Tooltip","classes","popper","tooltip","evt","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","Tooltip_templateObject3","GET_PEOPLE_PROFILE","profile_templateObject","FlexRowContainer","profile_templateObject2","CandidateHeaderContainer","profile_templateObject3","CandidateAvatorContainer","profile_templateObject4","PersonName","profile_templateObject5","ImgTag","img","profile_templateObject6","CandidateNumber","profile_templateObject7","ElectionStatus","profile_templateObject8","FacebookPageButton","profile_templateObject9","PersonHighlightContainer","profile_templateObject10","PlatformContainer","profile_templateObject11","PlatformHeader","profile_templateObject12","PlatformImage","profile_templateObject13","BreadcrumbsContainer","_templateObject14","ProfilePage","handleElectionDetailButton","renderFacebook","fb_id","aria-label","renderIntroText","currentTerm","term_to","electionResult","renderElectionStatusText","primaryText","Tag_Tag","imageLoadError","_this$props","params","dcd_people","councillors","lastElection","hasMeetings","max","personHighlight","tips","estimated_yob","yod","related_organization","occupation_en","occupation_zh","career","fc_uuid","Breadcrumbs","separator","candidate_number","marginBottom","pr","disableFocusListener","disableTouchListener","placement","alt","ScrollableTabs_ScrollableTabs","templates_FCPersonData","containers_PersonElectionHistoriesContainer","CouncillorMeetingAttendanceContainer","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","font","highlightStyle","OLMap","handleMapClick","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","featuresLayer","_this$props2","dc","isDCDataExist","featureSource","VectorSource","GeoJSON","readFeatures","VectorLayer","source","getText","setText","getProperties","layers","TileLayer","XYZ","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","getSize","Select","addInteraction","highlightedFeature","getSource","removeFeature","addFeature","bps","createBreakpoints","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","StyledDivier","Divider","DistrictCard_templateObject6","DistrictCard","IconButton","onPrevElection","ArrowBack_default","getFullYear","onNextElection","ArrowForward_default","stations","councillor","DistrictCard_Container","border","renderPrevElectionButton","renderNextElectionButton","station","MainAreas_templateObject","MainAreas","MainAreas_Container","display","flexWrap","alignContent","mr","WaffleChart","squareValue","theData","population","units","round","percentage","Array","groupIndex","squareSize","row","col","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","parseInt","_data$dc_constituenci","dc_constituencies","vote_stat","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","gender","Metrics_Container","charts_WaffleChart","FullWidthBox","district_templateObject","LowerBackgroundContainer","district_templateObject2","district_templateObject3","up","DistrictCardContainer","district_templateObject4","DistrictPage","handleCandidateSelected","handleChangeDistrict","nextProps","nextState","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","district_FlexRowContainer","sm","md","components_OLMap","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","CandidateList","CandidatesContainer_templateObject","CandidateGrid","CandidatesContainer_templateObject2","DCCAStatusTagsContainer","CandidatesContainer_templateObject3","StyledSecondaryTag","CandidatesContainer_templateObject4","Candidate","CandidatesContainer_templateObject5","CandidatesContainer_templateObject6","ControversialAlert","CandidatesContainer_templateObject7","CandidateName","CandidatesContainer_templateObject8","CandidatesContainer","setImageLoadError","direction","CandidatesContainer_CandidateGrid","IMAGE_HOST_URI","CandidatesContainer_CandidateNumber","ConstituencyCard_templateObject","TagContainer","ConstituencyCard_templateObject2","sortedTags","ConstituencyCard_StyledCard","Tag_SecondaryTag","containers_CandidatesContainer","Placeholder","Loading_templateObject","CentredCircularProgress","Loading_templateObject2","Loading","thickness","list_templateObject","DistrictListPage","_props$match$params","Loading_Loading","list_Container","organisms_ConstituencyCard","DCCACompareMap_templateObject","hoverStyle","DCCACompareMap","mapClick","geoMarker","Feature","Point","mapBrowserEvent","setProperties","getLayers","layer","clear","mapHover","highlightHoveredFeature","vectorLayer","handleMapLoaded","controls","markerCoordinates","currentPoint","image","Icon","anchor","scale","addLayer","featureHover","getInteriorPoint","getCoordinates","selectBySingleClick","hoveredFeature","DCCACompareMap_MapContainer","Councillor","meta","participatedOrdinary","participatedByElection","lastParticipated","votesDiff","isWon","participatedElections","electionYear","myVotes","highestVotes","getCouncillorMeta","flexGrow","term_from","spacing","alignSelf","CouncillorContainer","templates_Councillor","number","GroupedBarChart","firstColor","secondColor","maxBy","chart","yScale","x0","x1","tickSizeInner","tickFormat","DistrictNewVoterChartContainer","filterIndex","getDataForChat","category_1","transformedData","newData","valueDict","ageGroupPrefix","dictKey","getTransformedData","chartData","increased","mostIncreasedGroup","newVotes","groupedByAge","genders","groupedByGender","types","groupedByType","newVoters","totalVoters","getMeta","DCCAOverview_templateObject","DCCAOverview_templateObject2","DCCAOverview","showGraph","voterData","new_voters_percentage","aggregations","new_voters","all_voters","toFixed","DCCAOverview_Container","toggleGraph","KeyboardArrowUp_default","DCCAOverview_TagContainer","DCCAElectionResult_templateObject","CandiateBox","DCCAElectionResult_templateObject2","CandidateAvatar","DCCAElectionResult_templateObject3","DCCAElectionResult_templateObject4","DCCAElectionResult_templateObject5","VotePercentageBar","LinearProgress","DCCAElectionResult_templateObject6","VoteText","DCCAElectionResult_templateObject7","DCCAElectionResult","sortedCandidates","DCCAElectionResult_Container","vote_percentage","vote_sum","DCCAElectionResult_CandidateNumber","DCCAElectionResult_CandidateName","DCCAElectionResultContainer","DCCAElectionHistories_templateObject","CampText","DCCAElectionHistories_templateObject2","DCCAElectionHistories","queries","obj","variableLine","startsWith","DCCAElectionHistories_templateObject3","presetTabIndex","filteredHistories","_this$createQuery","createQuery","year_vote_sum","aggregate","sum","candi","templates_DCCAElectionResult","groupVoteStat","VOTERS","NEW_VOTERS","battleground_templateObject","battleground_templateObject2","ToggleMapButton","battleground_templateObject3","BattleGroundPage","_this$state","selectedYear","selectedCode","_this$state2","showMap","_this$props$match$par4","_this$props$match$par5","queryYear","RegExp","decodeURIComponent","getParameterByName","previousDistricts","intersect_area","pointHistory","DCCAStatus","battleground_BreadcrumbsContainer","battleground_Container","district_DCCAOverview","components_DCCACompareMap","templates_DCCAElectionHistories","containers_CouncillorContainer","disclaimer_templateObject","DisclaimerPage","disclaimer_Container","dc_templateObject","dc_Container","NotFoundPage","withStyles","support_us_templateObject","SupportUsPage","support_us_Container","RightIconButton","ShareButton_templateObject","StyledCopyIcon","CopyIcon","ShareButton_templateObject2","getShareUrl","platform","updateUrlParameter","uri","hash","substr","re","ShareButton","anchorEl","setAnchorEl","handleShareButtonClose","aria-haspopup","currentTarget","Share_default","Menu_Menu","keepMounted","Boolean","onClose","MenuItem","FacebookShareButton","FacebookIcon","TelegramShareButton","TelegramIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","navigator","clipboard","writeText","MobileAppBar_templateObject","AppBarTitle","MobileAppBar_templateObject2","MobileAppBar","MobileAppBar_StyledAppBar","Toolbar","disableGutters","Menu_default","organisms_ShareButton","DisclaimerContainer","Disclaimer_templateObject","Disclaimer","StyledFooter","Footer_templateObject","StyledDivider","Footer_templateObject2","StyledFooterLink","Footer_templateObject3","LinkBox","Footer_templateObject4","Disclaimer_Disclaimer","data-href","data-width","data-layout","data-action","data-size","data-show-faces","data-share","rel","ReactPixel","init","autoConfig","debug","withTracker","WrappedComponent","trackPage","page","set","pageview","pageView","_React$Component","HOC","inherits","createClass","pathname","currentPage","nextPage","SearchMenu_templateObject","LeftMargin","SearchMenu_templateObject2","goToPage","route","organisms_SearchTab","SearchDrawer_templateObject","MenuContainer","SearchDrawer_templateObject2","NavBarButton","SearchDrawer_templateObject3","useStyles","makeStyles","theme","drawerPaper","maxWidth","_React$useContext$dra","Drawer","paper","SearchDrawer_Container","Close_default","organisms_SearchMenu","CandidatesTableContent_templateObject","StyledTableCell","CandidatesTableContent_templateObject2","StyledTableRow","CandidatesTableContent_templateObject3","justify","minWidth","flexFlow","CandidatesTableContent_CandidateNumber","CandidatesTableContent","showDemocracy","showEstablishment","showOthers","matchCamp","CandidatesTableContent_CandidateGrid","ConstituencyNameTableRow","ConstituencyTableContent_templateObject","ConstituencyTableContent_templateObject2","ConstituencyTableContent_templateObject3","showBlank","colSpan","ConstituencyTableContent_TagContainer","ConstituencyTableContent_StyledSecondaryTag","candidate_CandidatesTableContent","DistrictNameTableRow","DistrictTableContent_templateObject","dc_description_zh","constituency_ConstituencyTableContent","styles","& svg","others","CampSelector","camps","FormGroup","DistrictsTable_templateObject","StyledLoading","DistrictsTable_templateObject2","DistrictsTable","blank","toIndex","addDistrict","scrollHandler","debounce","innerHeight","scrollTop","firstChild","clientHeight","document","querySelector","_this$state$checked","district_DistrictTableContent","atoms_CampSelector","onScroll","handleScroll","DistrictsTable_StyledTableCell","loadDistricts","DistrictCampCompareChartContainer_templateObject","DistrictCampCompareChartContainer_templateObject2","DistrictCampCompareChartContainer_templateObject3","DistrictCampCompareChartContainer_templateObject4","DistrictCampCompareChartContainer","dcode","DistrictCampCompareChartContainer_Container","DistrictCampCompareChartContainer_PredictionChartHeader","DistrictCampCompareChartContainer_StyledLoadingButton","DistrictOverviewPage","templates_DistrictCampCompareChartContainer","district_DistrictsTable","DistrictAllPage","StyledDialogTitle","MuiDialogTitle","Dialog_templateObject","StyledDialogContent","MuiDialogContent","Dialog_templateObject2","DialogTitle","DialogContent","PlainDialog","content","actions","Dialog","Dialog_DialogTitle","Dialog_DialogContent","DialogActions","GlobalDisclaimer","setOpen","localforage","setItem","instructionRead","getItem","t0","Dialog_PlainDialog","i18n","use","initReactI18next","fallbackLng","interpolation","escapeValue","resources","en","translation","translationEN","zh","translationZH","react","wait","keySeparator","ApolloClient","Root","App_templateObject","ContentContainer","App_templateObject2","Wrapper","App_templateObject3","LangSwitch","_useRouteMatch","useRouteMatch","changeLanguage","react_router","exact","AboutDCPage","NotfoundPage","App","ThemeProvider","ContextStore_ContextStoreProvider","CssBaseline","organisms_MobileAppBar","App_LangSwitch","organisms_Footer","SearchDrawer","ReactDOM","render","react_router_dom","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.f0429880.chunk.js","sourcesContent":["// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nid\nname_zh\nname_en\ndistrict {\n  dc_code\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\ndescription\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n  type\n}\n`\n\nconst DISTRICT_DATA = `\narea_code\narea_name_zh\narea_name_en\ndc_code\ndc_name_zh\ndc_name_en\ndc_description_zh\nconstituencies( where: { year: { _eq: $year } }, order_by: {code: asc} ) {\n  id\n  name_zh\n  name_en\n  code\n  candidates( where: { year: { _eq: $year } }, order_by: {candidate_number: asc} ) {\n    candidate_number\n    is_won\n    political_affiliation\n    election_type\n    camp\n    person {\n      id\n      uuid\n      name_zh\n      name_en\n      related_organization\n    }\n    nominate_status\n    tags {\n      tag\n      type\n    }\n  }\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      intersect_area\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }  \n}\n`\n\nexport const QUERY_GET_CONSTITUENCIES_BY_TAG = gql`\nquery($year: Int!, $tag: String!) {\n  dcd_constituencies(\n    where: { year: { _eq: $year }, tags: { tag: {_eq: $tag} } }\n    order_by: {code: asc }\n  ) {\n    ${CONSTITUENCIES_DATA}\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_DISTRICT = gql`\n  query($year: Int!, $code: String!) {\n    dcd_districts( where: { dc_code: { _eq: $code} } ) {\n      ${DISTRICT_DATA}\n    }\n  }\n`\n\nexport const QUERY_GET_ALL_DISTRICTS = gql`\n  query($year: Int!) {\n    dcd_districts(order_by: {dc_code: asc}) {\n      ${DISTRICT_DATA}\n    }\n  }\n`\n\nexport const QUERY_GET_AREA = gql`\n  query {\n    dcd_districts {\n      area_code\n      area_name_en\n      area_name_zh\n      dc_code\n      dc_name_en\n      dc_name_zh\n      constituencies(where: { year: { _eq: 2019 } }) {\n        code\n        name_zh\n        name_en\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_ELECTIONS = gql`\n  query get_person_elections($person_id: Int!) {\n    dcd_people_by_pk(id: $person_id) {\n      candidates(order_by: { year: desc }) {\n        year\n        constituency {\n          name_zh\n          code\n        }\n        election_type\n        camp\n        political_affiliation\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_MEETING_ATTENDANCES = gql`\n  query get_meeting_attendance($person_id: Int!) {\n    dcd_councillors(where: { person: { id: { _eq: $person_id } } }) {\n      year\n      cacode\n      term_from\n      term_to\n      career\n      district {\n        dc_name_zh\n      }\n      political_affiliation\n      post\n      constituency {\n        id\n        name_zh\n      }\n      meeting_attendances(\n        order_by: { meeting: { meet_year: desc }, total: desc }\n      ) {\n        meeting {\n          meet_name\n          meet_type\n          meet_year\n        }\n        attended\n        total\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_COUNCILLOR = gql`\n  query fetch_councillors($year: Int!, $code: String!) {\n    dcd_councillors(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { term_to: desc }\n    ) {\n      year\n      term_to\n      term_from\n      political_affiliation\n      constituency {\n        name_zh\n        name_en\n        code\n      }\n      person {\n        id\n        name_en\n        name_zh\n        uuid\n        candidates(order_by: { year: desc }) {\n          votes\n          is_won\n          year\n          cacode\n          election_type\n          constituency {\n            year\n            name_en\n            name_zh\n            candidates {\n              person {\n                id\n                name_en\n                name_zh\n              }\n              year\n              election_type\n              votes\n              political_affiliation\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CANDIDATES = gql`\n  query fetch_candidates($year: Int!, $code: String!) {\n    dcd_candidates(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { candidate_number: asc }\n    ) {\n      candidate_number\n      is_won\n      political_affiliation\n      political_affiliation_en\n      political_affiliation_zh\n      election_type\n      camp\n      nominate_status\n      tags {\n        tag\n        type\n      }\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n        related_organization\n        description\n      }\n    }\n  }\n`\n\n// This is a dangerous query.. the data size is huge (for 2019 it is 19MB)\nexport const QUERY_GET_CONSTITUENCY_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_constituencies(where: { year: { _eq: $year } }) {\n      code\n      predecessors(limit: 1, order_by: { intersect_area: desc }) {\n        predecessor {\n          code\n          candidates {\n            camp\n            votes\n            is_won\n          }\n          vote_stats(where: { subtype: { _eq: \"NEW_VOTERS\" } }) {\n            type\n            subtype\n            category_1\n            category_2\n            count\n          }\n        }\n      }\n      vote_stats {\n        type\n        subtype\n        category_1\n        category_2\n        count\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_NOMINATION_SUMMARY = gql`\n  query {\n    c2019: dcd_constituencies(where: { year: { _eq: 2019 } }) {\n      code\n      name_en\n      name_zh\n      district {\n        dc_code\n        dc_name_en\n        dc_name_zh\n      }\n      candidates {\n        camp\n        nominated_at\n        nominate_status\n        election_type\n        tags {\n          tag\n          type\n        }\n      }\n      tags {\n        tag\n      }\n    }\n\n    c2015: dcd_constituencies(where: { year: { _eq: 2015 } }) {\n      code\n      name_en\n      name_zh\n      candidates {\n        votes\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONFIG = gql`\n  query fetch_config($key: String!) {\n    dcd_config(where: { key: { _eq: $key } }) {\n      value\n    }\n  }\n`\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red, green } from '@material-ui/core/colors'\nexport const headingFontFamily =\n  'Noto Sans TC, 微軟正黑體, 新細明體, sans-serif'\nexport const bodyFontFamily = 'Noto Sans TC, 微軟正黑體, 新細明體, sans-serif'\n\nexport const FONT_FAMILY = [\n  'Noto Sans TC',\n  '微軟正黑體',\n  '新細明體',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: FONT_FAMILY.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n    fontSize: 20,\n    fontWeight: 500,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 22,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: FONT_FAMILY,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n    fontSize: 14,\n    lineHeight: 1.4,\n  },\n  body2: {\n    fontFamily: bodyFontFamily,\n    fontSize: 12,\n  },\n}\n\nexport const COLORS = {\n  main: {\n    text: '#000',\n    primary: '#7B68EE', // mediumslateblue\n    secondary: '#CCC4F8', // 2019-10-19 Hackathon - secondary color to voter bar chart\n    background: '#fff',\n  },\n  mainText: 'black',\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  camp: {\n    democracy: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    establishment: {\n      background: '#45b6ff',\n      text: 'black',\n    },\n    localist: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    other: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n    uncertain: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n  },\n  common: {\n    success: green[800],\n    failure: red[800],\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: COLORS.main.primary,\n      contrastText: COLORS.main.text,\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n  },\n})\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\nimport { COLORS } from 'ui/theme'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: black;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\nexport const DefaultLink = styled(UnstyledLink)`\n  color: ${COLORS.main.primary};\n  font-weight: 500;\n`\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n\nexport const SeperatedColumns = styled(Box)`\n  && {\n    margin-top: 8px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n","// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n    unelected_dc_seat: 0,\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n    unelected_dc_seat: 0,\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n    unelected_dc_seat: 0,\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n    unelected_dc_seat: 0,\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n    unelected_dc_seat: 0,\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n    unelected_dc_seat: 0,\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n    unelected_dc_seat: 0,\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n    unelected_dc_seat: 0,\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n    unelected_dc_seat: 0,\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n    unelected_dc_seat: 2,\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n    unelected_dc_seat: 1,\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n    unelected_dc_seat: 6,\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n    unelected_dc_seat: 4,\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n    unelected_dc_seat: 2,\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n    unelected_dc_seat: 2,\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n    unelected_dc_seat: 1,\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n    unelected_dc_seat: 1,\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n    unelected_dc_seat: 8,\n  },\n}\n","import { DCREGION } from 'constants/dcregion'\nimport _ from 'lodash'\n\nexport const getDistrictListUriFromTag = tag => `/district/2019/tags/${tag}`\n\nexport const getDistrictOverviewUriFromTag = code => `/district/2019/${code}`\n\nexport const getConstituencyUriFromTag = code => `/district/2019/${code}`\n\nexport const getCodeFromDistrictName = name => {\n  let code = 'A'\n  Object.keys(DCREGION).forEach(k => {\n    if (DCREGION[k].zh_hk === name) {\n      code = k\n    }\n  })\n  return code\n}\n\n/**\n * Passing a councillor object and get the meta data for it\n * (By QUERY_GET_COUNCILLOR_AND_CANDIDATES query)\n */\nexport const getCouncillorMeta = councillor => {\n  const result = {\n    participatedOrdinary: 0,\n    participatedByElection: 0,\n    lastParticipated: {\n      year: 2019,\n      type: 'ordinary',\n      votesDiff: 0,\n      votes: 0,\n      isWon: false,\n    },\n  }\n\n  // should already sorted from query\n  const participatedElections = councillor.person.candidates || []\n  result.participatedByElection = participatedElections.filter(\n    c => c.election_type === 'by-election'\n  ).length\n  result.participatedOrdinary = participatedElections.filter(\n    c => c.election_type === 'ordinary'\n  ).length\n\n  if (participatedElections.length > 0) {\n    // Filter out 2019 result\n    const e = participatedElections.filter(\n      e => !(e.year === 2019 && e.election_type === 'ordinary')\n    )[0]\n    const electionYear = e.year\n\n    const myVotes = e.constituency.candidates.find(\n      c => c.person.id === councillor.person.id && c.year === electionYear\n    ).votes\n    const highestVotes = e.constituency.candidates\n      .filter(\n        c => c.person.id !== councillor.person.id && c.year === electionYear\n      )\n      .map(c => c.votes)\n      .reduce((c, v) => Math.max(c, v), 0)\n    result.lastParticipated = {\n      year: e.year,\n      isWon: e.is_won,\n      votesDiff: myVotes - highestVotes,\n      votes: myVotes,\n      type: e.election_type,\n    }\n  }\n  return result\n}\n\nexport const getColorFromCamp = camp => {\n  if (!camp) return 'uncertain'\n  const mapping = {\n    泛民: 'democracy',\n    民主: 'democracy',\n    建制: 'establishment',\n    本土: 'localist',\n    傘兵: 'localist',\n    自決: 'localist',\n    其他: 'other',\n    不明: 'uncertain',\n  }\n\n  return mapping[camp] || 'uncertain'\n}\n\nexport const getColorFromPoliticalAffiliation = pa => {\n  if (!pa) return 'uncertain'\n\n  const mapping = {\n    democracy: [\n      '民主黨',\n      '公民黨',\n      '香港民主民生協進會',\n      '民協',\n      '社會民主連線',\n      '支聯會',\n      '民主動力',\n      '街坊工友服務處',\n      '街工',\n      '工黨',\n      '職工盟',\n      '新民主同盟',\n      '香港本土',\n      '獨立民主派',\n    ],\n    establishment: [\n      '民主建港協進聯盟',\n      '民建聯',\n      '新界社團聯會',\n      '新社聯',\n      '香港工會聯合會',\n      '工聯會',\n      '港九勞工社團聯會',\n      '香港經濟民生聯盟',\n      '西九新動力',\n      '自由黨',\n      '新民黨',\n      '新世紀論壇',\n    ],\n    localist: [\n      '香港眾志',\n      '青年新政',\n      '本土民主前線',\n      '東九龍社區關注組',\n      '天水圍民生關注平台',\n      '慈雲山建設力量',\n      '屯門社區關注組',\n      '長沙灣社區發展力量',\n      '社區網絡聯盟',\n      '沙田社區網絡',\n      '荃灣社區網絡',\n      '天水圍社區發展網絡',\n      '屯門社區網絡',\n      '葵青連結動力',\n      '藍田社區網絡',\n      '埔向晴天',\n      '荃灣民生動力',\n      '北區動源',\n      '維多利亞社區協會',\n    ],\n    other: ['民主思路', '新思維'],\n  }\n\n  for (let camp of Object.keys(mapping)) {\n    for (let party of mapping[camp]) {\n      if (pa.includes(party)) {\n        return camp\n      }\n    }\n  }\n\n  return 'uncertain'\n}\n\nexport const getProfilePath = person => {\n  const { name_en, name_zh, uuid } = person\n  return `/profile/${name_zh || name_en}/${uuid}`\n}\n\nexport const formatNumber = num =>\n  num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')\n\nexport const getParameterByName = (name, url) => {\n  if (!url) url = window.location.href\n  name = name.replace(/[[\\]]/g, '\\\\$&')\n  const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url)\n  if (!results) return null\n  if (!results[2]) return ''\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\nexport const getCurrentUrl = () => {\n  return window.location.href\n}\n\nexport const getConstituencyTagsByCandidateCamps = candidates => {\n  const tags = []\n  const filteredCandidates = candidates.filter(\n    c =>\n      c.election_type === 'ordinary' &&\n      c.nominate_status === 'confirmed' &&\n      c.tags.findIndex(\n        tag => tag.type === 'demo_status' && tag.tag === 'planb'\n      ) === -1\n  )\n\n  if (filteredCandidates.length >= 3) {\n    tags.push('多人混戰')\n  }\n\n  const groupedCamps = _.groupBy(filteredCandidates, c => c.camp)\n  if (groupedCamps['民主'] && groupedCamps['民主'].length > 1) {\n    tags.push('民主撞區')\n  }\n\n  if (groupedCamps['建制'] && groupedCamps['建制'].length > 1) {\n    tags.push('建制撞區')\n  }\n\n  return tags\n}\n\nexport const withLanguage = (name_en, name_zh) => {\n  var lang = window.location.href.match(/(en|zh)$/)\n  lang = lang ? lang[0] : 'zh'\n  return lang === 'en' && name_en ? name_en : name_zh\n}\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_NOMINATION_SUMMARY } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport { DefaultLink } from 'components/atoms/Link'\nimport Columns, { SeperatedColumns } from 'components/atoms/Columns'\nimport { getConstituencyTagsByCandidateCamps, withLanguage } from 'utils/helper'\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { useTranslation } from 'react-i18next'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 0px;\n    box-shadow: none;\n  }\n`\n\nconst FlexLink = styled(DefaultLink)`\n  && {\n    font-size: 14px;\n    margin-right: 8px;\n  }\n`\nconst SummaryExpansionPanel = styled(ExpansionPanel)`\n  && {\n    box-shadow: none;\n  }\n`\n\nconst SummaryExpansionPanelSummary = styled(ExpansionPanelSummary)`\n  && {\n  }\n`\n\nconst SummaryExpansionPanelDetails = styled(ExpansionPanelDetails)`\n  && {\n    padding: 0 24px;\n  }\n`\n\nfunction ControlledExpansionPanels(props) {\n  const [expanded, setExpanded] = React.useState(false)\n  const { t } = useTranslation()\n\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  const { demo_clash, estab_clash, highlight } = props.tagsData // auto_win, highlight\n\n  return (\n    <div>\n      <SummaryExpansionPanel\n        expanded={expanded === 'panel1'}\n        onChange={handleChange('panel1')}\n      >\n        <SummaryExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel1bh-content\"\n          id=\"panel1bh-header\"\n        >\n          <Typography variant=\"h5\" gutterBottom>\n            {/* 撞區 - {demo_clash.length + estab_clash.length}區 */}\n            {t('summary.tag.highlight', { n: highlight.length })}\n          </Typography>\n        </SummaryExpansionPanelSummary>\n        <SummaryExpansionPanelDetails>\n          <Columns>\n            <Typography variant=\"h6\" gutterBottom>\n              {t('summary.tag.highlight_text')}\n            </Typography>\n            {highlight.map((district, index) => (\n              <FlexLink\n                key={index}\n                onClick={() =>\n                  props.history.push(`district/2019/${district.code}`)\n                }\n              >\n                {withLanguage(district.name_en, district.name_zh)}\n              </FlexLink>\n            ))}\n          </Columns>\n        </SummaryExpansionPanelDetails>\n      </SummaryExpansionPanel>\n      <SummaryExpansionPanel\n        expanded={expanded === 'panel2'}\n        onChange={handleChange('panel2')}\n      >\n        <SummaryExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel2bh-content\"\n          id=\"panel2bh-header\"\n        >\n          <Typography variant=\"h5\" gutterBottom>\n            {t('summary.tag.clash', {\n              n: demo_clash.length + estab_clash.length,\n            })}\n          </Typography>\n        </SummaryExpansionPanelSummary>\n        <SummaryExpansionPanelDetails style={{ flexDirection: 'column' }}>\n          <SeperatedColumns>\n            <Typography variant=\"h6\" gutterBottom>\n              {/* 民主派撞區 - {demo_clash.length}區 */}\n              {t('summary.tag.demo_clash', { n: demo_clash.length })}\n            </Typography>\n          </SeperatedColumns>\n          <Columns>\n            {demo_clash.map((district, index) => (\n              <FlexLink\n                key={index}\n                onClick={() =>\n                  props.history.push(`district/2019/${district.code}`)\n                }\n              >\n                {withLanguage(district.name_en, district.name_zh)}\n              </FlexLink>\n            ))}\n          </Columns>\n\n          <SeperatedColumns>\n            <Typography variant=\"h6\" gutterBottom>\n              {/* 建制派撞區 - {estab_clash.length}區 */}\n              {t('summary.tag.estab_clash', { n: estab_clash.length })}\n            </Typography>\n          </SeperatedColumns>\n          <Columns>\n            {estab_clash.map((district, index) => (\n              <FlexLink\n                key={index}\n                onClick={() =>\n                  props.history.push(`district/2019/${district.code}`)\n                }\n              >\n                {withLanguage(district.name_en, district.name_zh)}\n              </FlexLink>\n            ))}\n          </Columns>\n        </SummaryExpansionPanelDetails>\n      </SummaryExpansionPanel>\n      {/* <SummaryExpansionPanel\n        expanded={expanded === 'panel3'}\n        onChange={handleChange('panel3')}\n      >\n        <SummaryExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel3bh-content\"\n          id=\"panel3bh-header\"\n        >\n          <Typography variant=\"h5\" gutterBottom>\n            {t('summary.tag.uncontested', { n: auto_win.length })}\n          </Typography>\n        </SummaryExpansionPanelSummary>\n        <SummaryExpansionPanelDetails>\n          <Columns>\n            {auto_win.map((district, index) => (\n              <FlexLink\n                key={index}\n                onClick={() =>\n                  props.history.push(`district/2019/${district.code}`)\n                }\n              >\n                {`${district.name_zh}`}\n              </FlexLink>\n            ))}\n          </Columns>\n        </SummaryExpansionPanelDetails>\n      </SummaryExpansionPanel> */}\n    </div>\n  )\n}\n\nconst Summary = props => {\n  return (\n    <Query query={QUERY_GET_NOMINATION_SUMMARY}>\n      {({ loading, error, data }) => {\n        if (error) return `Error! ${error}`\n\n        let result = []\n        if (data && data.c2019) {\n          data.c2019.forEach(dcca => {\n            const tags = getConstituencyTagsByCandidateCamps(dcca.candidates)\n\n            if (tags.length > 0) {\n              result.push({\n                ...dcca,\n                tags,\n              })\n            }\n          })\n        }\n\n        const demo_clash = result.filter(r => r.tags.includes('民主撞區'))\n        const estab_clash = result.filter(r => r.tags.includes('建制撞區'))\n\n        // const candi_5 = result.filter(r => r.tags.includes('多人混戰')).filter(district => district.candidates.length === 5)\n        // const candi_4 = result.filter(r => r.tags.includes('多人混戰')).filter(district => district.candidates.length === 4)\n\n        let auto_win = []\n        let highlight = []\n        if (data && data.c2015) {\n          data.c2015.forEach(dcca2015 => {\n            let dcca2019 = data.c2019.find(c => c.name_zh === dcca2015.name_zh)\n            if (dcca2019) {\n              const filteredCandidates2019 = dcca2019.candidates.filter(\n                c =>\n                  c.election_type === 'ordinary' &&\n                  c.nominate_status === 'confirmed' &&\n                  c.tags.findIndex(\n                    tag => tag.type === 'demo_status' && tag.tag === 'planb'\n                  ) === -1\n              )\n              if (dcca2015.candidates.length <= 1) {\n                auto_win.push(dcca2019)\n                if (filteredCandidates2019.length > 2) highlight.push(dcca2019)\n              } else {\n                var votes = dcca2015.candidates\n                  .map(c => c.votes)\n                  .sort((a, b) => b - a)\n                var allVotes = votes.reduce((a, b) => a + b, 0)\n                var votesDiffFrac = (votes[0] - votes[1]) / allVotes\n                if (votesDiffFrac < 0.1) {\n                  // Check if 2019 has 3 and more candidates\n                  if (filteredCandidates2019.length > 2)\n                    highlight.push(dcca2019)\n                }\n              }\n            }\n          })\n        }\n\n        const tagsData = {\n          demo_clash: demo_clash,\n          estab_clash: estab_clash,\n          auto_win: auto_win,\n          highlight: highlight,\n        }\n\n        return (\n          <>\n            {result && result.length > 0 && (\n              <Container>\n                <ControlledExpansionPanels\n                  history={props.history}\n                  tagsData={tagsData}\n                />\n                {/* <Typography variant=\"h6\" gutterBottom>\n                  2019年區議會選舉將於11月24日舉行，屆時將選出香港18區區議會共\n                  <b>{data.dcd_constituencies.length}</b>個民選議席。\n                </Typography> */}\n\n                {/* <Typography variant=\"h6\" gutterBottom>\n                  5人混戰 - {candi_5.length}區\n                </Typography>\n                <Columns>\n                  {candi_5.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(\n                          `district/2019/${district.code}`\n                        )\n                      }\n                    >\n                      { withLanguage(district.name_en, district.name_zh) }\n                    </FlexLink>\n                  ))}\n                </Columns> */}\n\n                {/* <Typography variant=\"h6\" gutterBottom>\n                  4人混戰 - {candi_4.length}區\n                </Typography>\n                <Columns>\n                  {candi_4.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(\n                          `district/2019/${district.code}`\n                        )\n                      }\n                    >\n                      { withLanguage(district.name_en, district.name_zh) }\n                    </FlexLink>\n                  ))}\n                </Columns> */}\n              </Container>\n            )}\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default withRouter(Summary)\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\nimport * as d3 from 'd3'\nimport { FONT_FAMILY, COLORS } from 'ui/theme'\nimport {\n  getConstituencyUriFromTag,\n  getCodeFromDistrictName,\n} from 'utils/helper'\n\nconst ROW_HEIGHT = 20\n\nconst Styled = styled(Box)`\n  && {\n    .link {\n      text {\n        cursor: pointer;\n        color: ${COLORS.main.primary};\n        font-weight: 500;\n      }\n    }\n  }\n`\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n  const hideLegend = !!props.hideLegend\n\n  const CAMP_COLORS = [\n    COLORS.camp.establishment.background,\n    COLORS.camp.other.background,\n    COLORS.camp.democracy.background,\n  ]\n\n  const d3Container = useRef(null)\n\n  const updateLegend = (res, svg) => {\n    if (hideLegend) {\n      return\n    }\n    const data = [\n      {\n        camp: 'establishment',\n        label: '建制',\n        color: CAMP_COLORS[0],\n        count: res.data.map(d => d['建制']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['建制'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n      // {\n      //   camp: 'other',\n      //   label: '其他',\n      //   color: CAMP_COLOR_OTH,\n      //   count: res.data.map(d => d['其他']).reduce((c, v) => c + v, 0),\n      // },\n      {\n        camp: 'democracy',\n        label: '民主',\n        color: CAMP_COLORS[2],\n        count: res.data.map(d => d['民主']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['民主'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n    ]\n\n    svg.selectAll('.legend').remove()\n\n    const legend = svg\n      .selectAll('legend')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr(\n        'transform',\n        (d, i) => `translate(${i * (dimensions.width - 90)}, 8)`\n      )\n\n    legend\n      .append('text')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dy', '.5em')\n      .style('text-anchor', 'start')\n      .attr('font-size', '14px')\n      .text(function(d) {\n        return d.overhalf_count > 9\n          ? `${d.label}${d.overhalf_count}區過半數`\n          : ''\n      })\n\n    legend\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', 16)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return d.color\n      })\n\n    legend\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 29)\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return `${d.label} ${d.count}席`\n      })\n  }\n\n  const drawChart = res => {\n    const { columns, data } = res\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const margin = { top: 65, right: 15, bottom: 0, left: 50 }\n    let rowHeight = ROW_HEIGHT\n    if (hideLegend) {\n      margin.top = 0\n      margin.left = 15\n      rowHeight = ROW_HEIGHT * 1.5\n    }\n    const width = dimensions.width\n    const height = data.length * rowHeight + margin.top + margin.bottom\n\n    const labels = ['建制', '其他', '民主']\n    const series = d3\n      .stack()\n      .keys(columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    series.forEach((s, index) => {\n      s.forEach((d, y) => {\n        d.count = data[y][labels[index]]\n        d.index = index\n      })\n    })\n\n    const yAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(${margin.left},0)`)\n        .attr('class', 'link')\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(CAMP_COLORS)\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const isCreate = d3\n      .select(d3Container.current)\n      .select('svg')\n      .empty()\n\n    if (isCreate) {\n      const svg = d3\n        .select(d3Container.current)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height)\n\n      const bar = svg\n        .append('g')\n        .selectAll('g')\n        .data(series)\n        .enter()\n        .append('g')\n\n      bar\n        .attr('fill', d => color(d.key))\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .attr('x', d => (d.index === 0 ? x(d[0]) : x(d[1])))\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', 0)\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => x(d[0]))\n        .attr('width', d => x(d[1]) - x(d[0]))\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', '12px')\n        .attr('fill', d => {\n          switch (d.index) {\n            case 0:\n            case 2:\n              return 'black'\n            default:\n              return 'white'\n          }\n        })\n\n      if (!hideLegend) {\n        // Add the y axis and add on click function to it\n        svg.append('g').call(yAxis)\n        svg.selectAll('.tick').on('click', function(d, i) {\n          const code = getCodeFromDistrictName(d)\n          window.location = getConstituencyUriFromTag(code)\n        })\n\n        svg.append('g').call(xAxis)\n      }\n\n      // middle line\n      const middle = (width + margin.left - margin.right) / 2\n      svg\n        .append('line')\n        .attr('x1', middle + 1)\n        .attr('y1', margin.top)\n        .attr('x2', middle + 1)\n        .attr('y2', height - margin.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#3a3a3a')\n        .attr('opacity', '0.6')\n        .style('stroke-dasharray', '10, 4')\n\n      //Legend\n      updateLegend(res, svg)\n    } else {\n      // Update chart\n      const svg = d3.select(d3Container.current).select('svg')\n\n      const bar = svg\n        .select('g')\n        .selectAll('g')\n        .data(series)\n\n      bar\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => {\n          return x(d[0])\n        })\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', d => x(d[1]) - x(d[0]))\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('opacity', 0)\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n      bar\n        .selectAll('text')\n        .transition()\n        .delay(function(d) {\n          return 800 + Math.random() * 500\n        })\n        .attr('opacity', 1)\n\n      updateLegend(res, svg)\n    }\n  }\n\n  const updateWindowSize = () => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', updateWindowSize)\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    updateWindowSize()\n  }, [])\n\n  return (\n    <Styled>\n      <div ref={d3Container} style={{ height: 'auto', width: '100%' }}></div>\n    </Styled>\n  )\n}\n","import React from 'react'\nimport Slider from '@material-ui/core/Slider'\n\nexport default props => {\n  return <Slider {...props} />\n}\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${COLORS.primary};\n  }\n`\n\nexport const SuccessText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.success};\n    }\n  }\n`\n\nexport const FailureText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.failure};\n    }\n  }\n`\n\nexport default props => {\n  return <Typography {...props} />\n}\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Slider from 'components/atoms/Slider'\nimport Text from 'components/atoms/Text'\n\nimport Columns from 'components/atoms/Columns'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\n\nconst SliderContainer = styled(Box)`\n  && {\n    padding-left: 16px;\n    flex-grow: 1;\n    padding-right: 16px;\n  }\n`\n\nconst Label = styled(Text)`\n  && {\n    min-width: 80px;\n  }\n`\n\nexport const ValueSlider = props => {\n  const { value, setValue } = props\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue)\n  }\n\n  const { label, className, color } = props\n  return (\n    <div className={className}>\n      <Columns>\n        <Label>{label}</Label>\n        <SliderContainer>\n          <Slider value={value} onChange={handleSliderChange} color={color} />\n        </SliderContainer>\n        <Text>{value}%</Text>\n      </Columns>\n    </div>\n  )\n}\n\nValueSlider.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.number.isRequired,\n  setValue: PropTypes.func.isRequired,\n}\n\nexport default ValueSlider\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\n\nTabBar.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n  selectedTab: PropTypes.number.isRequired,\n  setSelectedTab: PropTypes.func.isRequired,\n}\n\nexport default function TabBar(props) {\n  const { titles, selectedTab, setSelectedTab } = props\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n\n  return (\n    <>\n      <Tabs value={selectedTab} onChange={handleChange} centered={true}>\n        {titles.map((title, index) => (\n          <Tab\n            label={title}\n            id={`scrollable-auto-tab-${index}`}\n            key={index}\n            aria-controls={`scrollable-auto-tabpanel-${index}`}\n          />\n        ))}\n      </Tabs>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Typography from '@material-ui/core/Typography'\nimport TabBar from 'components/molecules/TabBar'\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n}\n\nexport default function ScrollableTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(0)\n  const { titles, children } = props\n\n  return (\n    <>\n      <TabBar\n        titles={titles}\n        setSelectedTab={setSelectedTab}\n        selectedTab={selectedTab}\n      />\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\n\nexport const UnstyledButton = styled(Button)`\n  && {\n    margin: 0;\n    padding: 0;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport ValueSlider from 'components/molecules/ValueSlider'\nimport CheckBox from 'components/molecules/CheckBox'\nimport PropTypes from 'prop-types'\nimport Tabs from 'components/organisms/Tabs'\nimport { COLORS } from 'ui/theme'\nimport Text from 'components/atoms/Text'\nimport Rows from 'components/atoms/Rows'\nimport { Box } from '@material-ui/core'\nimport Collapse from '@material-ui/core/Collapse'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport { useTranslation } from 'react-i18next'\n\nconst StyledValueSlider = styled(ValueSlider)`\n  && {\n    margin-top: 8px;\n    .MuiSlider-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst TabSection = styled(Box)`\n  && {\n    padding: 8px 0 0;\n  }\n`\n\nconst StyledCheckBox = styled(CheckBox)`\n  && {\n    .MuiSvgIcon-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst ToggleButton = styled(UnstyledButton)`\n  && {\n    border-radius: 0;\n    width: 100%;\n    font-size: 14px;\n    text-align: center;\n    padding: 5px 0px;\n    color: color: ${COLORS.main.text};\n    :hover {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nPredictionChartPanel.propTypes = {\n  settings: PropTypes.object.isRequired,\n  setSettings: PropTypes.func.isRequired,\n}\n\nfunction PredictionChartPanel(props) {\n  const { settings, setSettings } = props\n\n  const [showSettings, setShowSettings] = React.useState(false)\n\n  const handleClose = reason => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setShowSettings(!showSettings)\n  }\n\n  const setSettingConfigFunc = field => flag => {\n    setSettings({\n      config: Object.assign(settings.config, { [field]: flag }),\n      camp_rate: [...settings.camp_rate],\n      vote_rate: [...settings.vote_rate],\n    })\n  }\n\n  const setSettingFunc = (x, y) => value =>\n    setSettings({\n      config: {\n        ...settings.config,\n      },\n      camp_rate: settings.camp_rate.map((v, i) =>\n        x === 0 && y === i ? value : v\n      ),\n      vote_rate: settings.vote_rate.map((v, i) =>\n        x === 1 && y === i ? value : v\n      ),\n    })\n\n  const { t } = useTranslation()\n  /* \n     20191026 @wingkwong: \n        <Tabs> iterates each children so that we cannot just place the compnent between <Tabs> and <TabSection>\n    */\n  const renderSettings = () => {\n    return (\n      <>\n        <ToggleButton onClick={handleClose}>\n          {/* {showSettings ? '隱藏設定' : '顯示設定'} */}\n          {showSettings\n            ? t('predictionChartPanel.button.hide')\n            : t('predictionChartPanel.button.show')}\n          {showSettings ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        </ToggleButton>\n        <Collapse in={showSettings}>\n          <Rows>\n            <StyledCheckBox\n              // label=\"只計算新增選民，同時假設上屆投票選民維持相冋政治取向\"\n              label={t('predictionChartPanel.checkbox.label1')}\n              checked={settings.config.reference_last_election}\n              setChecked={setSettingConfigFunc('reference_last_election')}\n            ></StyledCheckBox>\n            <StyledCheckBox\n              // label=\"為上屆自動當選議員加入對立陣營對手\"\n              label={t('predictionChartPanel.checkbox.label2')}\n              checked={settings.config.auto_won_add_components}\n              setChecked={setSettingConfigFunc('auto_won_add_components')}\n            ></StyledCheckBox>\n          </Rows>\n        </Collapse>\n      </>\n    )\n  }\n\n  return (\n    <div>\n      <Tabs titles={['投票取向', '投票率']} buttonLayout=\"centered\">\n        <TabSection>\n          {renderSettings()}\n          <Text variant=\"h5\">\n            {/* 民主支持率 */}\n            {t('predictionChartPanel.tabSection.title1')}\n          </Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.camp_rate[0]}\n            setValue={setSettingFunc(0, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.camp_rate[1]}\n            setValue={setSettingFunc(0, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.camp_rate[2]}\n            setValue={setSettingFunc(0, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n        <TabSection>\n          {renderSettings()}\n          <Text variant=\"h5\">\n            {/* 已登記選民投票率 */}\n            {t('predictionChartPanel.tabSection.title2')}\n          </Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.vote_rate[0]}\n            setValue={setSettingFunc(1, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.vote_rate[1]}\n            setValue={setSettingFunc(1, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.vote_rate[2]}\n            setValue={setSettingFunc(1, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default PredictionChartPanel\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FormControlLabel, Checkbox } from '@material-ui/core/'\n\nCheckBox.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  setChecked: PropTypes.func.isRequired,\n}\n\nexport default function CheckBox(props) {\n  const { label, checked, setChecked, className } = props\n\n  function handleChange(event) {\n    setChecked(event.target.checked)\n  }\n\n  return (\n    <>\n      <FormControlLabel\n        className={className}\n        control={<Checkbox checked={checked} onChange={handleChange} />}\n        label={label}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, CircularProgress } from '@material-ui/core'\nimport Text from 'components/atoms/Text'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nLoadingButton.propTypes = {\n  onClick: PropTypes.func,\n  isLoading: PropTypes.bool.isRequired,\n  label: PropTypes.string.isRequired,\n}\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  && {\n    margin: 4px;\n    color: ${COLORS.main.background};\n  }\n`\n\nconst WhiteText = styled(Text)`\n  && {\n    color: ${COLORS.main.background};\n  }\n`\n\nexport default function LoadingButton(props) {\n  const { label, isLoading, onClick, className, size } = props\n\n  return (\n    <>\n      <Button\n        size={size}\n        variant=\"outlined\"\n        className={className}\n        disabled={isLoading}\n        onClick={onClick}\n      >\n        {isLoading && (\n          <>\n            <StyledCircularProgress size={14} color=\"secondary\" />\n            <WhiteText>{label}</WhiteText>\n          </>\n        )}\n        {!isLoading && <>{label}</>}\n      </Button>\n    </>\n  )\n}\n","import GoogleAnalytics from 'react-ga'\n\nconst trackingId = process.env.REACT_APP_GA_TRACKING_ID\nif (!trackingId) {\n  throw new Error(\n    'Invalid google tracking ID. or set to UA-000000-01 if you dont have any'\n  )\n}\nGoogleAnalytics.initialize(trackingId)\n\nexport function fireEvent({ ca, ac, lb, val = 1, nonInteraction = true }) {\n  GoogleAnalytics.event({\n    category: `${ca}`,\n    action: `${ac}_${lb}`,\n    label: lb,\n    value: val,\n    nonInteraction: nonInteraction,\n  })\n  console.log(`fire Event!`)\n}\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from 'constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/atoms/charts/StackedNormalizedHorizontalBarChart'\nimport PredictionChartPanel from 'components/organisms/PredictionChartPanel'\nimport LoadingButton from 'components/molecules/LoadingButton'\nimport Text from 'components/atoms/Text'\nimport axios from 'axios'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\nimport { DefaultLink } from 'components/atoms/Link'\nimport { fireEvent } from 'utils/ga_fireevent'\nimport { useTranslation } from 'react-i18next'\nimport { withLanguage } from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst PredictionChartHeader = styled(Box)`\n  && {\n    display: block;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst StyledLoadingButton = styled(LoadingButton)`\n  && {\n    width: 100%;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    padding: 5px 16px;\n    :hover {\n      color: ${COLORS.main.primary};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_en\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data, sortFunc) {\n  const res = {\n    data: data\n      .map(d => {\n        return {\n          name: withLanguage(DCREGION[d.code].en_us, DCREGION[d.code].zh_hk),\n          建制: DCREGION[d.code].unelected_dc_seat + (d.count['建制'] || 0), // 當然議員\n          民主: d.count['民主'] || 0,\n          其他: d.count['其他'] || 0,\n          total: Object.values(d.count).reduce((acc, c) => {\n            acc += c\n            return acc\n          }, 0),\n        }\n      })\n      .sort(\n        sortFunc\n          ? sortFunc\n          : (a, b) => b['建制'] / b.total - a['建制'] / a.total\n      ), // default sort by established count\n    columns: ['name', '建制', '其他', '民主'],\n  }\n  return res\n}\n\nconst sortByDefaultChartOrderFunc = defaultChartData => (a, b) => {\n  const indexFromOriginalChartData = record => {\n    let index = defaultChartData.length\n    defaultChartData.data.forEach((v, i) => {\n      if (v.name === record.name) {\n        index = i\n        return i\n      }\n    })\n    return index\n  }\n  return indexFromOriginalChartData(a) - indexFromOriginalChartData(b)\n}\n\n// const AGE_GROUP_YOUNG = ['18-20', '21-25', '26-30']\nconst AGE_GROUP_MIDDLE = ['31-35', '36-40', '41-45', '46-50', '51-55', '56-60']\nconst AGE_GROUP_OLD = ['61-65', '66-70', '71+']\n\nconst STAT_TYPE_NEW_VOTERS = 'NEW_VOTERS'\nconst STAT_TYPE_ALL_VOTERS = 'VOTERS'\n\nconst groupExpectDataByRegionAndCamp = (constituencies, settings) => {\n  const getVoteCountBySetting = (stat, camp, settings) => {\n    let settingIndex = 0\n    if (AGE_GROUP_MIDDLE.indexOf(stat.category_2) >= 0) {\n      settingIndex = 1\n    } else if (AGE_GROUP_OLD.indexOf(stat.category_2) >= 0) {\n      settingIndex = 2\n    }\n\n    const votePercentage = settings.vote_rate[settingIndex] / 100.0\n    let yellowPercentage = settings.camp_rate[settingIndex] / 100.0\n    if (camp === '建制') {\n      yellowPercentage = 1 - yellowPercentage\n    } else if (camp === '其他') {\n      yellowPercentage = 0 // TODO: how to calculate this?\n    }\n\n    return stat.count * yellowPercentage * votePercentage\n  }\n  const getProjectedVotes = (type, camp, settings, voteStats) => {\n    return voteStats\n      .filter(s => s.subtype === type)\n      .map(s => getVoteCountBySetting(s, camp, settings))\n      .reduce((c, v) => c + v, 0)\n  }\n  // First calculate the winner\n  const expectedResult = constituencies.map(constituency => {\n    let camp = '建制' // default camp = 建制 is this good?\n\n    if (\n      constituency.predecessors &&\n      constituency.predecessors.length > 0 &&\n      settings.config.reference_last_election\n    ) {\n      // if there is predecessor, we use only the new voters\n      const predecessor = constituency.predecessors[0].predecessor\n\n      if (\n        predecessor.candidates.length === 1 &&\n        settings.config.auto_won_add_components\n      ) {\n        const camps = ['民主', '建制', '其他']\n        const onlyCandidate = predecessor.candidates[0]\n        camps.forEach(camp => {\n          // mock the votes for the last election (because no records for 自動當選)\n          // by 2019 all voters - (2018 - 2019 new voters) - (2015 - 2018 new voters for predecessor)\n          const votes =\n            getProjectedVotes(\n              STAT_TYPE_ALL_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            ) -\n            getProjectedVotes(\n              STAT_TYPE_NEW_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            ) -\n            getProjectedVotes(\n              STAT_TYPE_NEW_VOTERS,\n              camp,\n              settings,\n              predecessor.vote_stats\n            )\n\n          if (onlyCandidate.camp !== camp) {\n            predecessor.candidates.push({\n              camp,\n              votes,\n              mock: true,\n            })\n          } else {\n            onlyCandidate.votes = votes\n          }\n        })\n      }\n      let maxVote = 0\n      predecessor.candidates.forEach(c => {\n        // calculation here is:\n        // 2015 election result + (2015-2018 new voters projected from settings[predecessor constituency]) + (2018-2019 new voters projected from settings[new constituency])\n        const projectedVotes =\n          c.votes +\n          getProjectedVotes(\n            STAT_TYPE_NEW_VOTERS,\n            c.camp,\n            settings,\n            constituency.vote_stats\n          ) +\n          getProjectedVotes(\n            STAT_TYPE_NEW_VOTERS,\n            c.camp,\n            settings,\n            predecessor.vote_stats\n          )\n        if (\n          projectedVotes >= maxVote &&\n          (!c.mock || settings.config.auto_won_add_components)\n        ) {\n          camp = c.camp\n          maxVote = projectedVotes\n        }\n      })\n    } else {\n      // else we calculate from all voters\n      const establishCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '建制',\n        settings,\n        constituency.vote_stats\n      )\n      const democracyCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '民主',\n        settings,\n        constituency.vote_stats\n      )\n      if (democracyCount > establishCount) {\n        camp = '民主'\n      }\n    }\n\n    return {\n      cacode: constituency.code,\n      camp,\n    }\n  })\n  const byCodes = _.groupBy(expectedResult, c => c.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nconst CampCompareChartContainer = props => {\n  const { className } = props\n  const [predictEnabled, setPredictEnabled] = React.useState(false)\n  const [isLoadingPrediction, setIsLoadingPrediction] = React.useState(true)\n  const [predictoinData, setPredictionData] = React.useState({})\n  const [settings, setSettings] = React.useState({\n    config: {\n      auto_won_add_components: true,\n      reference_last_election: true,\n    },\n    camp_rate: [60, 50, 40],\n    vote_rate: [40, 40, 40],\n  })\n  useEffect(() => {\n    async function fetchData() {\n      const result = await axios(`/static/data/prediction.json`)\n      if (result.status === 200) {\n        setPredictionData(result.data.data)\n        setIsLoadingPrediction(false)\n      }\n    }\n    fetchData()\n  }, [])\n  const { t } = useTranslation()\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const dataFroGraph = groupDataByRegionAndCamp(data.dcd_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n\n        let d3Data = dataForD3\n\n        if (!isLoadingPrediction && predictEnabled) {\n          const expectedDataForGraph = groupExpectDataByRegionAndCamp(\n            predictoinData.dcd_constituencies,\n            settings\n          )\n          d3Data = convertToD3Compatible(\n            expectedDataForGraph,\n            sortByDefaultChartOrderFunc(dataForD3)\n          )\n        }\n\n        return (\n          <Container className={className}>\n            <PredictionChartHeader>\n              <Text variant=\"h5\">\n                {/* {predictEnabled ? '2019選舉結果模擬' : '現屆區議會勢力分布'} */}\n                {predictEnabled\n                  ? t('predictionChartHeader.text1')\n                  : t('predictionChartHeader.text2')}\n              </Text>\n              <br />\n              <Text variant=\"body2\">\n                {predictEnabled && (\n                  <>\n                    <p>\n                      {/* 本模擬綜合2019年選民登記數字，18及19年間新增選民數字，以及2015區議會選舉實際投票結果。 */}\n                      {t('predictionChartHeader.paragraph1')}\n                    </p>\n                    <p>\n                      {/* 首先將15年區選各選區投票結果歸納為分為「建制」、「民主」及「其他」三陣營，並假設選民維持投票取向，並按其比例將各陣營得票分配至2018的選民登記數字。 */}\n                      {t('predictionChartHeader.paragraph2')}\n                    </p>\n                    <p>\n                      {/* 滑桿只調較2018及19年間新增選民的投票取向及投票率，如欲直接調較19年選民的取態，請到「設定\n                      」取消「只計算新增選民，同時假設上屆投票選民維持相冋政治取向」一項。 */}\n                      {t('predictionChartHeader.paragraph3')}\n                    </p>\n                    <p>\n                      {/* 是次選舉將選出452個民選議席，連同新界區27名當然議員共479席。當然議員即各區鄉事委員會主席，故這些議席全歸類為建制派。 */}\n                      {t('predictionChartHeader.paragraph4')}\n                    </p>\n                    <p>\n                      選舉結果由眾多因素影響，故模擬結果僅供參考，亦因數據來源限制而簡化，如有建議歡迎\n                      <DefaultLink\n                        target=\"_blank\"\n                        href=\"https://forms.gle/irD6tEznWPNda6w59\"\n                      >\n                        匯報\n                      </DefaultLink>\n                      。\n                    </p>\n                  </>\n                )}\n              </Text>\n              {!predictEnabled && (\n                <StyledLoadingButton\n                  isLoading={loading}\n                  onClick={() => {\n                    setPredictEnabled(true)\n                    fireEvent({\n                      ca: 'simulation',\n                      ac: 'click',\n                      lb: 'start_simulate',\n                    })\n                  }}\n                  // label=\"模擬結果\"\n                  label={t('predictionChartHeader.button.label1')}\n                />\n              )}\n            </PredictionChartHeader>\n            <br />\n            {!loading && predictEnabled && (\n              <PredictionChartPanel\n                settings={settings}\n                setSettings={setSettings}\n              />\n            )}\n            <StackedNormalizedHorizontalBarChart\n              data={d3Data}\n            ></StackedNormalizedHorizontalBarChart>\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport { Typography, Grid } from '@material-ui/core'\nimport { withTranslation } from 'react-i18next'\n\nconst TimeGrid = styled(Grid)`\n  && {\n    text-align: center;\n  }\n`\n\nconst Time = styled(Typography)`\n  && {\n    font-weight: 700;\n  }\n`\n\nconst Unit = styled(Typography)`\n  && {\n  }\n`\n\nclass Countdown extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n    }\n  }\n\n  componentDidMount() {\n    // update every second\n    this.interval = setInterval(() => {\n      const date = this.calculateCountdown(this.props.date)\n      date ? this.setState(date) : this.stop()\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.stop()\n  }\n\n  calculateCountdown(endDate) {\n    let diff = (Date.parse(new Date(endDate)) - Date.parse(new Date())) / 1000\n\n    // clear countdown when date is reached\n    if (diff <= 0) return false\n\n    const timeLeft = {\n      years: 0,\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n      millisec: 0,\n    }\n\n    // calculate time difference between now and expected date\n    if (diff >= 365.25 * 86400) {\n      // 365.25 * 24 * 60 * 60\n      timeLeft.years = Math.floor(diff / (365.25 * 86400))\n      diff -= timeLeft.years * 365.25 * 86400\n    }\n    if (diff >= 86400) {\n      // 24 * 60 * 60\n      timeLeft.days = Math.floor(diff / 86400)\n      diff -= timeLeft.days * 86400\n    }\n    if (diff >= 3600) {\n      // 60 * 60\n      timeLeft.hours = Math.floor(diff / 3600)\n      diff -= timeLeft.hours * 3600\n    }\n    if (diff >= 60) {\n      timeLeft.min = Math.floor(diff / 60)\n      diff -= timeLeft.min * 60\n    }\n    timeLeft.sec = diff\n\n    return timeLeft\n  }\n\n  stop() {\n    clearInterval(this.interval)\n  }\n\n  addLeadingZeros(value) {\n    value = String(value)\n    while (value.length < 2) {\n      value = '0' + value\n    }\n    return value\n  }\n\n  render() {\n    const countDown = this.state\n    const { t } = this.props\n    return (\n      <>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.days)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.hours)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.min)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.sec)}</Time>\n          </TimeGrid>\n        </Grid>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">\n              {/* 天 */}\n              {t('countdown.day')}\n            </Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">\n              {/* 小時 */}\n              {t('countdown.hour')}\n            </Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">\n              {/* 分鐘 */}\n              {t('countdown.minute')}\n            </Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">\n              {/* 秒 */}\n              {t('countdown.second')}\n            </Unit>\n          </TimeGrid>\n        </Grid>\n      </>\n    )\n  }\n}\n\nCountdown.defaultProps = {\n  date: new Date(),\n}\n\nexport default withTranslation()(Countdown)\n","import styled from 'styled-components'\nimport Columns from 'components/atoms/Columns'\nimport { COLORS } from 'ui/theme'\n\nexport const Alert = styled(Columns)`\n  && {\n    width: 100%;\n    padding: 4px 16px 1px;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n  }\n`\n","import styled from 'styled-components'\nimport Avatar from '@material-ui/core/Avatar'\nimport { COLORS } from 'ui/theme'\n\nexport const PeopleAvatar = styled(Avatar)`\n  && {\n    opacity: ${props => props.opacity};\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    border: ${props => props.borderwidth}px\n      ${props => props.camp && COLORS.camp[props.camp].background} solid;\n  }\n`\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","import React from 'react'\nimport { Box, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { getColorFromCamp } from 'utils/helper'\nimport Columns from 'components/atoms/Columns'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport { getProfilePath } from 'utils/helper'\n// import { fireEvent } from 'utils/ga_fireevent'\n\nconst AddressOption = props => {\n  const { className, onClick } = props\n  return (\n    <Box\n      className={className}\n      onClick={() =>\n        onClick({ year: 2019, code: props.data.constituency.code })\n      }\n    >\n      <Typography variant=\"h5\">{props.label}</Typography>\n      {props.data.constituency && (\n        <Typography variant=\"caption\" color=\"textSecondary\">{`${props.data\n          .constituency.dc_name_zh || ''} | ${props.data.constituency.code} - ${\n          props.data.constituency.name_zh\n        }`}</Typography>\n      )}\n    </Box>\n  )\n}\n\nconst StyledTypography = styled(Typography)`\n  && {\n    margin-left: 8px;\n  }\n`\n\nexport const PeopleOption = props => {\n  const homeUrl = process.env.REACT_APP_HOST_URI\n  const { className, onClick } = props\n  const { uuid, name_zh, name_en, camp, constituency } = props.data\n  const avatarPath = uuid\n    ? `${homeUrl}/static/images/avatar/100x100/${uuid}.jpg`\n    : `${homeUrl}/static/images/avatar/default.png`\n  return (\n    <Box\n      className={className}\n      onClick={() => onClick({ uuid, name_zh, name_en })}\n    >\n      <Columns alignItems=\"center\">\n        <PeopleAvatar\n          borderwidth={2}\n          camp={getColorFromCamp(camp)}\n          src={avatarPath}\n          imgProps={{\n            onError: e => {\n              e.target.src = `${homeUrl}/static/images/avatar/default.png`\n            },\n          }}\n          style={{\n            width: '48px',\n            height: '48px',\n            borderRadius: '24px',\n          }}\n        />\n        <StyledTypography variant=\"h4\">{name_zh || name_en}</StyledTypography>\n        {constituency && (\n          <StyledTypography variant=\"h6\" color=\"textSecondary\">\n            {`${constituency.district.dc_name_zh || ''} | ${\n              constituency.code\n            } - ${constituency.name_zh}`}\n          </StyledTypography>\n        )}\n      </Columns>\n    </Box>\n  )\n}\n\nconst StyledAddressOption = styled(AddressOption)`\n  && {\n    padding-left: 8px;\n    padding-top: 8px;\n  }\n`\nconst StyledPeopleOption = styled(PeopleOption)`\n  && {\n    padding-left: 8px;\n    padding-top: 8px;\n  }\n`\n\nexport default withRouter(props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  function handleAddressSelected({ year, code }) {\n    props.history.push(`/district/${year}/${code}`)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function handlePeopleSelected(person) {\n    const path = getProfilePath(person)\n    props.history.push(path)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  const { type } = props.data\n  return (\n    <>\n      {type === 'address' ? (\n        <StyledAddressOption {...props} onClick={handleAddressSelected} />\n      ) : (\n        <StyledPeopleOption {...props} onClick={handlePeopleSelected} />\n      )}\n    </>\n  )\n})\n","import * as turf from '@turf/turf'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getSingleFeatureFromPoint = ({ lng, lat }) => {\n  const pt = turf.point([lng, lat])\n  // TODO: consider using different year in future\n  // but need to take care of app size\n  const result = {\n    code: null,\n    year: 2019,\n    name_zh: null,\n    name_en: null,\n  }\n  for (let i = 0; i < dc2019.features.length; i++) {\n    const feature = dc2019.features[i]\n    const poly = turf.polygon(feature.geometry.coordinates)\n    if (turf.booleanPointInPolygon(pt, poly)) {\n      result.code = feature.properties.CACODE\n      result.name_zh = feature.properties.CNAME\n      result.name_en = feature.properties.ENAME\n      break\n    }\n  }\n  return result\n}\n\nexport const getAllFeaturesFromPoint = (\n  point,\n  featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n) => {\n  const pt = turf.point([point.lng, point.lat])\n  const result = featuresArray.map(feature => {\n    let polygonProps = {}\n    for (let i = 0, n = feature.features.length; i < n; i++) {\n      const poly = turf.polygon(feature.features[i].geometry.coordinates)\n      if (turf.booleanPointInPolygon(pt, poly)) {\n        polygonProps = { ...feature.features[i].properties }\n        break\n      }\n    }\n    return {\n      year: feature.name.split('_')[1],\n      ...polygonProps,\n    }\n  })\n\n  return result\n}\n\nexport const adjustConcavePolygonCentroid = (year, code) => {\n  const mapping = {\n    2003: {\n      D14: [114.154877, 22.248274],\n      L12: [113.989521, 22.365375],\n      P03: [114.165739, 22.455871],\n      P16: [114.1620147228241, 22.45361940935254],\n    },\n\n    2007: {\n      D01: [114.154877, 22.248274],\n      L12: [113.989521, 22.365375],\n      P03: [114.165739, 22.455871],\n      P16: [114.1620147228241, 22.45361940935254],\n    },\n\n    2011: {\n      D01: [114.154877, 22.248274],\n      L12: [113.989521, 22.365375],\n      P03: [114.165739, 22.455871],\n      P16: [114.1620147228241, 22.45361940935254],\n    },\n    2015: {\n      D01: [114.154877, 22.248274],\n      L12: [113.989521, 22.365375],\n      P03: [114.165739, 22.455871],\n      P16: [114.1620147228241, 22.45361940935254],\n    },\n\n    2019: {\n      D01: [114.154877, 22.248274],\n      L12: [114.006628, 22.377846],\n      L13: [113.989521, 22.365375],\n      P02: [114.165739, 22.455871],\n      P16: [114.1620147228241, 22.45361940935254],\n      R09: [114.198862, 22.370661],\n    },\n  }\n\n  if (!mapping[year][code]) return\n  return mapping[year][code]\n}\n\nexport const getCentroidFromYearAndCode = (year, code) => {\n  const featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n  const selectedIndex = [2003, 2007, 2011, 2015, 2019].findIndex(\n    y => y === year\n  )\n\n  if (selectedIndex > -1) {\n    const selectedFeature = featuresArray[selectedIndex]\n    const polygon = selectedFeature.features.find(\n      feature => feature.properties.CACODE === code\n    )\n    const centroid = turf.centroid(polygon)\n    // finetune for concave polygon for 2019 districts\n    return (\n      adjustConcavePolygonCentroid(year, code) || centroid.geometry.coordinates\n    )\n  }\n  return\n}\n","import React from 'react'\nimport AsyncSelect from 'react-select/async'\nimport { components } from 'react-select'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport SearchBoxOption from 'components/molecules/SearchBoxOption'\nimport gql from 'graphql-tag'\nimport { withApollo } from 'react-apollo'\nimport { getSingleFeatureFromPoint } from 'utils/features'\nimport { useQuery } from '@apollo/react-hooks'\nimport { QUERY_GET_ALL_DISTRICTS } from 'queries/gql'\nimport { Search } from '@material-ui/icons'\nimport { useTranslation } from 'react-i18next'\nimport { withLanguage } from 'utils/helper'\n\nconst GET_PEOPLE = gql`\n  query($nameRegex: String) {\n    dcd_candidates(\n      where: {\n        person: {\n          _or: [\n            { name_zh: { _like: $nameRegex } }\n            { name_en: { _ilike: $nameRegex } }\n          ]\n        }\n      }\n      limit: 50\n      order_by: { person_id: asc, year: desc }\n      distinct_on: person_id\n    ) {\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n      }\n      camp\n      year\n      constituency {\n        code\n        name_zh\n        name_en\n        district {\n          dc_name_zh\n          dc_name_en\n        }\n      }\n    }\n  }\n`\n\n//TODO: move to atoms?\nconst Group = props => (\n  <div>\n    <components.Group {...props} />\n  </div>\n)\n\nconst DropdownIndicator = props => {\n  return (\n    <components.DropdownIndicator {...props}>\n      <Search />\n    </components.DropdownIndicator>\n  )\n}\n\nconst SearchAllBox = props => {\n  const { t } = useTranslation()\n  const { client } = props\n  const { loading, data, error } = useQuery(QUERY_GET_ALL_DISTRICTS, {\n    variables: {\n      year: 2019,\n    },\n    client,\n  })\n\n  const getDisctrictNameByCode = code => {\n    if (loading || error) {\n      return {\n        dname_zh: null,\n        dname_en: null,\n      }\n    } else {\n      return data.dcd_districts.find(d => d.dc_code === code.charAt(0))\n    }\n  }\n\n  const searchAddress = async query => {\n    const records = await AddressParser.parse(query)\n    return records\n      .filter((_, index) => index < 10)\n      .map(record => {\n        let constituency = getSingleFeatureFromPoint(record.coordinate())\n        constituency = {\n          ...constituency,\n          ...getDisctrictNameByCode(constituency.code),\n        }\n        return {\n          coordinate: record.coordinate(),\n          constituency,\n          label: withLanguage(\n            record.fullAddress(AddressParser.Address.LANG_EN),\n            record.fullAddress(AddressParser.Address.LANG_ZH)\n          ),\n          type: 'address',\n        }\n      })\n      .filter(\n        (ele, index, self) =>\n          index === self.findIndex(record => record.label === ele.label)\n      )\n      .filter((_, i) => i <= 3)\n  }\n\n  const searchPeople = async query => {\n    const { data } = await client.query({\n      query: GET_PEOPLE,\n      variables: {\n        nameRegex: `%${query}%`,\n      },\n    })\n    data.dcd_candidates.sort((a, b) => b.year - a.year)\n    return data.dcd_candidates\n      .map(c => ({\n        label: withLanguage(c.person.name_en, c.person.name_zh), //c.person.name_zh || c.person.name_en,\n        uuid: c.person.uuid,\n        name_zh: withLanguage(c.person.name_en, c.person.name_zh), // c.person.name_zh,\n        name_en: withLanguage(c.person.name_en, c.person.name_zh), // c.person.name_en,\n        constituency: c.constituency,\n        camp: c.camp,\n        type: 'people',\n      }))\n      .filter((_, i) => i <= 3)\n  }\n\n  const search = async query => {\n    const results = await Promise.all([\n      searchAddress(query),\n      searchPeople(query),\n    ])\n    return [\n      {\n        label: t('candidates'),\n        options: results[1],\n      },\n      {\n        label: t('constituency'),\n        options: results[0],\n      },\n    ]\n  }\n\n  return (\n    <>\n      <AsyncSelect\n        components={{\n          Option: SearchBoxOption,\n          DropdownIndicator,\n          Group,\n        }}\n        placeholder={t('searcher.placeholder')}\n        noOptionsMessage={() => t('searcher.noResultPlaceholder') || ''}\n        loadingMessage={() => t('searcher.loadingText') || ''}\n        cacheOptions\n        loadOptions={search}\n        defaultOptions\n      />\n    </>\n  )\n}\nexport default withApollo(SearchAllBox)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nconst AreasTabs = styled(Tabs)`\n  && {\n    .MuiTabs-indicator {\n      background-color: ${COLORS.main.primary};\n    }\n  }\n`\n// Updated 2019-10-19 Hackathon - make the AreasTab look like a button\nconst AreasTab = styled(Tab)`\n  && {\n    color: ${COLORS.main.primary};\n    margin: 3px 5px;\n    font-weight: 600;\n    opacity: 1;\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`district-tabpanel-${index}`}\n      aria-labelledby={`district-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n}\n\nexport default function AreaTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.expanded ? 0 : false\n  )\n  const [expanded, setExpanded] = React.useState(props.expanded)\n  const { titles, children } = props\n\n  function handleChange(event, newValue) {\n    if (selectedTab === newValue) {\n      setExpanded(!expanded)\n      setSelectedTab(false)\n    } else {\n      setExpanded(true)\n      setSelectedTab(newValue)\n    }\n  }\n\n  return (\n    <>\n      <AreasTabs value={selectedTab} onChange={handleChange} centered>\n        {titles.map((title, index) => (\n          <AreasTab\n            label={title}\n            id={`district-tab-${index}`}\n            key={index}\n            aria-controls={`district-tabpanel-${index}`}\n          />\n        ))}\n      </AreasTabs>\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={!expanded || selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import React from 'react'\nimport { Typography, Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n} from '@material-ui/core'\nimport _ from 'lodash'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_AREA } from 'queries/gql'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport AreaTabs from 'components/organisms/AreaTabs'\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n  withLanguage,\n} from 'utils/helper'\nimport { useTranslation } from 'react-i18next'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    vertical-align: top;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 50%;\n    justify-content: left;\n    text-align: left;\n    text-transform: capitalize;\n    font-size: ${props => props.fontsize}px;\n  }\n`\n\nconst DistrictExpansionPanel = styled(ExpansionPanel)`\n  && {\n    box-shadow: none;\n  }\n`\n\nconst DistrictExpansionPanelSummary = styled(ExpansionPanelSummary)`\n  && {\n    font-weightL 600px;\n    .Mui-expanded {\n    }\n  }\n`\n\nconst DistrictExpansionPanelDetails = styled(ExpansionPanelDetails)`\n  && {\n    padding: 0 16px 0;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  const { t } = useTranslation()\n\n  const renderDCCA = district => {\n    return (\n      <div key={district.dc_code}>\n        <DistrictContainer\n          key={district.dc_code}\n          onClick={() => {\n            dispatch({ type: DRAWER_CLOSE })\n            props.history.push(getDistrictOverviewUriFromTag(district.dc_code))\n          }}\n          color=\"secondary\"\n        >\n          <Typography variant=\"h5\">{t('districtSelector.overview')}</Typography>\n        </DistrictContainer>\n        {district.constituencies.map(c => {\n          return (\n            <DistrictContainer\n              key={c.code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(getConstituencyUriFromTag(c.code))\n              }}\n            >\n              <Typography variant=\"h5\">\n                {withLanguage(c.name_en, c.name_zh)}\n              </Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const renderArea = (area, i) => (\n    <div key={`area-${i}`}>\n      {area.districts.map((d, index) => (\n        <DistrictExpansionPanel\n          key={`district-panel-${d.dc_code}`}\n          TransitionProps={{ unmountOnExit: true }}\n        >\n          <DistrictExpansionPanelSummary\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n            expandIcon={<ExpandMoreIcon />}\n          >\n            <Typography variant=\"h5\">\n              {withLanguage(d.dc_name_en, d.dc_name_zh)}\n            </Typography>\n          </DistrictExpansionPanelSummary>\n          <DistrictExpansionPanelDetails>\n            {renderDCCA(d)}\n          </DistrictExpansionPanelDetails>\n        </DistrictExpansionPanel>\n      ))}\n    </div>\n  )\n\n  return (\n    <Container>\n      <Query query={QUERY_GET_AREA}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const areas = _.uniqBy(\n            data.dcd_districts.map(d => ({\n              area_code: d.area_code,\n              area_name_zh: withLanguage(d.area_name_en, d.area_name_zh),\n            })),\n            'area_code'\n          )\n\n          const areasWithDistricts = areas.map(a => ({\n            ...a,\n            districts: data.dcd_districts.filter(\n              d =>\n                withLanguage(d.area_name_en, d.area_name_zh) ===\n                withLanguage(a.area_name_en, a.area_name_zh)\n            ),\n          }))\n\n          const areaNames = areas.map(a =>\n            withLanguage(a.area_name_en, a.area_name_zh)\n          )\n\n          return (\n            <AreaTabs titles={areaNames} expanded={props.expanded}>\n              {areasWithDistricts.map((a, index) => {\n                return renderArea(a, index)\n              })}\n            </AreaTabs>\n          )\n        }}\n      </Query>\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport SearchAllBox from 'components/organisms/SearchAllBox'\nimport Paper from '@material-ui/core/Paper'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport DistrictSelector from 'components/molecules/DistrictSelector'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    position: relative;\n    left: 0;\n    right: 0;\n    padding: 8px 0px 8px;\n  }\n`\n\nfunction SearchTab(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  function handleAddressSelected(result) {\n    /* TODO:\n      Use context (?) to store the Global district result array\n      When user select click previous button in district page,\n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${result.year}/${result.code}`)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  return (\n    <Container>\n      <ContentRowContainer>\n        <DistrictSelector expanded={false} />\n        <AddressSearchContainer>\n          <SearchAllBox handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    </Container>\n  )\n}\n\nexport default withRouter(SearchTab)\n","import React, { Component } from 'react'\nimport { Query } from 'react-apollo'\nimport Summary from 'components/templates/Summary'\nimport CampCompareChartContainer from 'components/templates/CampCompareChartContainer'\nimport Countdown from 'components/atoms/Countdown'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport { Alert } from 'components/atoms/Alert'\nimport SearchTab from 'components/organisms/SearchTab'\nimport { QUERY_GET_CONFIG } from 'queries/gql'\nimport { COLORS } from 'ui/theme'\nimport { withTranslation } from 'react-i18next'\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 16px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst StyledCampCompareChartContainer = styled(CampCompareChartContainer)`\n  && {\n    margin-top: 16px;\n  }\n`\nconst CountdownContainer = styled.div`\n  && {\n    width: 100%;\n  }\n`\n\nconst StyledSearchTab = styled(SearchTab)`\n  && {\n    padding: 100px;\n  }\n`\nconst ConfigCenterText = styled.div`\n  && {\n    width: 100%;\n    text-align: center;\n    a {\n      text-decoration: none;\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst electionDate = 'Nov 24, 2019 07:30:00'\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n  onTabSelected(type) {}\n\n  renderAlert = () => {\n    return (\n      <Query query={QUERY_GET_CONFIG} variables={{ key: 'landing_alert' }}>\n        {({ loading, error, data }) => {\n          if (loading || error) return null\n          return data.dcd_config[0] ? (\n            <Alert>\n              <Typography variant=\"h6\" gutterBottom>\n                {data.dcd_config[0].value.text}\n              </Typography>\n            </Alert>\n          ) : (\n            <></>\n          )\n        }}\n      </Query>\n    )\n  }\n\n  renderCenterText = () => {\n    return (\n      <Query\n        query={QUERY_GET_CONFIG}\n        variables={{ key: 'landing_center_text' }}\n      >\n        {({ loading, error, data }) => {\n          if (loading || error) return null\n          return data.dcd_config[0] ? (\n            <ConfigCenterText variant=\"h6\" gutterBottom>\n              <div\n                dangerouslySetInnerHTML={{\n                  __html: data.dcd_config[0].value.html_text,\n                }}\n              />\n            </ConfigCenterText>\n          ) : (\n            <></>\n          )\n        }}\n      </Query>\n    )\n  }\n\n  render() {\n    const { t } = this.props\n    return (\n      <>\n        {this.renderAlert()}\n        <TopSection>\n          {Date.parse(new Date(electionDate)) > Date.parse(new Date()) && (\n            <CountdownContainer>\n              <Typography\n                variant=\"h5\"\n                style={{ textAlign: 'center' }}\n                gutterBottom\n              >\n                {/* 距離投票日 */}\n                {t('index.title1')}\n              </Typography>\n              <Countdown date={electionDate} />\n            </CountdownContainer>\n          )}\n          {/* <LandingIcon /> */}\n        </TopSection>\n        <Container>\n          <Summary />\n          {this.renderCenterText()}\n          <StyledSearchTab />\n          <StyledCampCompareChartContainer />\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withTranslation()(IndexPage)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport SwipeableViews from 'react-swipeable-views'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    box-shadow: none;\n    background: white;\n    .MuiTabs-indicator {\n      background: ${props => props.indicatorcolor || 'black'};\n    }\n    .MuiTab-wrapper {\n      text-transform: capitalize;\n    }\n    border-bottom: 1px solid #e8e8e8;\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n  buttonLayout: PropTypes.oneOf(['left', 'centered']),\n}\n\nScrollableTabs.defaultProps = {\n  buttonLayout: 'left',\n}\n\nexport default function ScrollableTabs(props) {\n  const {\n    titles,\n    children,\n    buttonLayout,\n    indicatorcolor,\n    tabnumber = 0,\n    variant,\n  } = props\n  const [selectedTab, setSelectedTab] = React.useState(tabnumber)\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n  function handleChangeIndex(newValue) {\n    setSelectedTab(newValue)\n  }\n\n  const shouldCenter = buttonLayout === 'centered' ? true : false\n\n  return (\n    <>\n      <StyledAppBar position=\"static\" indicatorcolor={indicatorcolor}>\n        <Tabs\n          value={selectedTab}\n          onChange={handleChange}\n          centered={shouldCenter}\n          variant={variant || 'scrollable'} // 'centered', 'scrollable', 'fullWidth'\n          scrollButtons=\"auto\"\n        >\n          {titles.map((title, index) => (\n            <Tab\n              label={title}\n              id={`scrollable-auto-tab-${index}`}\n              key={index}\n              aria-controls={`scrollable-auto-tabpanel-${index}`}\n            />\n          ))}\n        </Tabs>\n      </StyledAppBar>\n      <SwipeableViews index={selectedTab} onChangeIndex={handleChangeIndex}>\n        {// TODO: support single tab\n        children &&\n          children.length > 0 &&\n          children\n            .filter(child => child)\n            .map((child, index) => <TabPanel key={index}>{child}</TabPanel>)}\n      </SwipeableViews>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport styled from 'styled-components'\nimport { useTranslation } from 'react-i18next'\n\nconst MobileTableCell = styled(TableCell)`\n  && {\n    padding: 8px 10px;\n  }\n`\n\nconst CouncillorMeetingAttendace = props => {\n  const { meetings } = props\n  const { t } = useTranslation()\n\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <MobileTableCell align=\"left\">\n            {/* 會議 */}\n            {t('councillorMeetingAttendace.table.text1')}\n          </MobileTableCell>\n          <MobileTableCell align=\"left\">\n            {/* 性質 */}\n            {t('councillorMeetingAttendace.table.text2')}\n          </MobileTableCell>\n          <MobileTableCell align=\"left\">\n            {/* 年份 */}\n            {t('councillorMeetingAttendace.table.text3')}\n          </MobileTableCell>\n          <MobileTableCell align=\"left\">\n            {/* 與席 */}\n            {t('councillorMeetingAttendace.table.text4')}\n          </MobileTableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {meetings.map((m, index) => (\n          <TableRow key={index}>\n            <MobileTableCell component=\"th\" scope=\"row\">\n              {m.meeting.meet_name}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_type}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_year}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.attended}/{m.total}\n            </MobileTableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  )\n}\n\nCouncillorMeetingAttendace.propsType = {\n  meetings: PropTypes.array,\n}\n\nexport default CouncillorMeetingAttendace\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_MEETING_ATTENDANCES } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport CouncillorMeetingAttendace from 'components/templates/CouncillorMeetingAttendance'\nimport _ from 'lodash'\n\nconst CouncillorMeetingAttendaceContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_MEETING_ATTENDANCES}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const meetings = _.flatten(\n          data.dcd_councillors.map(c => c.meeting_attendances)\n        )\n        return (\n          <>\n            <CouncillorMeetingAttendace meetings={meetings} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorMeetingAttendaceContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default CouncillorMeetingAttendaceContainer\n","import styled from 'styled-components'\nimport Card from '@material-ui/core/Card'\nimport React from 'react'\n\nconst StyledCard = styled(Card)`\n  && {\n    padding: 16px;\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nexport const PlainCard = props => {\n  return <StyledCard {...props}>{props.children}</StyledCard>\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { PlainCard } from 'components/molecules/Card'\nimport Typography from '@material-ui/core/Typography'\nimport { Box, Grid } from '@material-ui/core'\nimport { SuccessText, FailureText } from '../atoms/Text'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { formatNumber } from 'utils/helper'\nimport { useTranslation } from 'react-i18next'\nimport {\n  getCentroidFromYearAndCode,\n  getAllFeaturesFromPoint,\n} from 'utils/features'\n\nconst PersonElectionHistoriesTitle = styled.div`\n  && {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst createQueryStringToBattlegroundPage = election => {\n  let targetPath = `/district/2019/${election.constituency.code}`\n  switch (election.year) {\n    case 2019:\n      return targetPath\n    case 2015:\n    case 2011:\n    case 2007:\n    case 2003:\n      const coordinates = getCentroidFromYearAndCode(\n        election.year,\n        election.constituency.code\n      )\n      const point = {\n        lng: coordinates[0],\n        lat: coordinates[1],\n      }\n      const dccaHistories = getAllFeaturesFromPoint(point)\n      targetPath = `/district/2019/${\n        dccaHistories.find(history => history.year === '2019').CACODE\n      }`\n      return targetPath + `?year=${election.year}`\n    default:\n      return '#'\n  }\n}\n\nconst PersonElectionHistories = props => {\n  const { histories } = props\n  const { t } = useTranslation()\n  histories.sort((a, b) => {\n    if (b.year > a.year) return 1\n    else if (b.year < a.year) return -1\n    else {\n      if (b.election_type === 'ordinary' && a.election_type === 'by-election')\n        return 1\n      else return -1\n    }\n  })\n\n  return (\n    <>\n      {histories.map((m, index) => (\n        <UnstyledNavLink\n          key={index}\n          to={createQueryStringToBattlegroundPage(m)}\n        >\n          <PlainCard color=\"#fafafa\">\n            <PersonElectionHistoriesTitle>\n              <Box>\n                <Typography variant=\"h6\" gutterBottom>\n                  {m.year}\n                </Typography>\n              </Box>\n              <Box>\n                {createQueryStringToBattlegroundPage(m) !== '#' && (\n                  <NavigateNextIcon />\n                )}\n              </Box>\n            </PersonElectionHistoriesTitle>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h5\">{m.constituency.name_zh}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h5\">{`${m.political_affiliation || '-'}（${\n                  m.camp\n                }）`}</Typography>\n              </Grid>\n              <Grid item xs={3}>\n                {m.is_won ? (\n                  <SuccessText>\n                    {m.votes > 0 ? `${formatNumber(m.votes)}票` : '自動當選'}\n                  </SuccessText>\n                ) : (\n                  <FailureText>\n                    {m.votes > 0 && `${formatNumber(m.votes)}票`}\n                  </FailureText>\n                )}\n              </Grid>\n            </Grid>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h6\">{m.constituency.code}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h6\">\n                  {/* 報稱政治聯繫 */}\n                  {t('reportedPoliticalAffiliation')}\n                </Typography>\n              </Grid>\n              {m.votes > 0 ? (\n                <Grid item xs={3}>\n                  {m.is_won ? (\n                    <SuccessText>\n                      {/* 當選 */}\n                      {t('election.tag1')}\n                    </SuccessText>\n                  ) : (\n                    <FailureText>\n                      {/* 落敗 */}\n                      {t('election.tag3')}\n                    </FailureText>\n                  )}\n                </Grid>\n              ) : (\n                <Grid item xs={3}></Grid>\n              )}\n            </Grid>\n          </PlainCard>\n        </UnstyledNavLink>\n      ))}\n    </>\n  )\n}\n\nPersonElectionHistories.propsType = {\n  histories: PropTypes.array,\n}\n\nexport default PersonElectionHistories\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_ELECTIONS } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport PersonElectionHistories from 'components/templates/PersonElectionHistories'\n\nconst PersonElectionHistoriesContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_ELECTIONS}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <PersonElectionHistories\n              histories={data.dcd_people_by_pk.candidates}\n            />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nPersonElectionHistoriesContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default PersonElectionHistoriesContainer\n","import styled from 'styled-components'\nimport { Card, CardContent } from '@material-ui/core'\nimport Text from '../atoms/Text'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Microlink from '@microlink/react'\nimport { useTranslation } from 'react-i18next'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nconst StyledMicrolink = styled(Microlink)`\n  && {\n    width: 100%;\n    max-width: calc(100vw - 64px);\n  }\n`\n\nconst getPersonVoteText = personVote => {\n  const { t } = useTranslation()\n  switch (personVote) {\n    case 'MOVE':\n      // return '動議'\n      return t('personVote.move')\n    case 'SECOND':\n      // return '和議'\n      return t('personVote.second')\n    case 'YES':\n      // return '贊成'\n      return t('personVote.yes')\n    case 'NO':\n      // return '否決'\n      return t('personVote.no')\n    case 'ABSTAIN':\n      // return '棄權'\n      return t('personVote.abstain')\n    case 'ABSENT':\n      // return '缺席'\n      return t('personVote.absent')\n    case 'NORECORD':\n      // return '無紀錄'\n      return t('personVote.noRecord')\n    case 'PRESENT':\n      // return '與席'\n      return t('personVote.present')\n    default:\n      return ''\n  }\n}\n\nconst getEventTypeText = (type, personVote) => {\n  const { t } = useTranslation()\n  switch (type) {\n    case 'VOTE':\n      // return `[投票 - ${getPersonVoteText(personVote)}]`\n      return `${t('personVote.vote')} ${getPersonVoteText(personVote)}`\n    case 'SPEECH':\n      // return '[言論]'\n      return t('personVote.speech')\n    default:\n      return ''\n  }\n}\n\nconst trimDescription = description => {\n  if (!description) return ''\n  return description.length > 100\n    ? description.substring(0, 100) + '...'\n    : description\n}\n\nconst validateUrl = url => {\n  const patt = /(http|https):\\/\\/.*/\n  const match = patt.exec(url)\n  return match ? match[0] : null\n}\n\nconst PersonEvent = props => {\n  const { title, eventType, date, description, url, personVote } = props\n  const validatedUrl = validateUrl(url)\n\n  return (\n    <StyledCard>\n      <CardContent>\n        <Text gutterBottom>{date}</Text>\n        {eventType === 'MEDIA' && validatedUrl ? (\n          <StyledMicrolink url={validatedUrl} size=\"large\" />\n        ) : (\n          <>\n            <Text variant=\"h5\" gutterBottom>\n              {`${getEventTypeText(eventType, personVote)} ${title}`}\n            </Text>\n            <Text color=\"textSecondary\">{trimDescription(description)}</Text>\n          </>\n        )}\n      </CardContent>\n    </StyledCard>\n  )\n}\n\nPersonEvent.propTypes = {\n  children: PropTypes.node,\n  title: PropTypes.string.isRequired,\n  eventType: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n}\n\nexport default PersonEvent\n","//\n\nimport React, { useEffect, useState } from 'react'\nimport Rows from 'components/atoms/Rows'\nimport PropTypes from 'prop-types'\nimport { Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport axios from 'axios'\nimport PersonEvent from 'components/molecules/PersonEvent'\nimport Typography from '@material-ui/core/Typography'\nimport { COLORS } from 'ui/theme'\nimport { useTranslation } from 'react-i18next'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    margin-top: 32px;\n    padding: 0 16px 0;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    a {\n      text-decoration: unset;\n      color: ${COLORS.main.primary};\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n  }\n`\n\nconst StyledRows = styled(Rows)`\n  && {\n    align-items: normal;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    text-transform: lowercase;\n    border: 1px black solid;\n    height: 48px;\n    padding: 0 32px;\n  }\n`\n\nconst FCPersonData = props => {\n  const { fcUuid, name, filterFunc } = props\n  const [events, setEvents] = useState([])\n  useEffect(() => {\n    async function fetchData() {\n      const result = await axios(\n        `https://api.hkfactcheck.io/persons/${fcUuid}/events`\n      )\n\n      setEvents(result.data.filter(filterFunc).filter((_, i) => i < 5))\n    }\n    fetchData()\n  }, [])\n  const fcUri = `https://hkfactcheck.io/person/${fcUuid}/${name}`\n  const { t } = useTranslation()\n\n  return (\n    <>\n      <Container>\n        {events.length > 0 ? (\n          <Typography variant=\"body\">\n            <span\n              dangerouslySetInnerHTML={{\n                __html: t('fcPersonData.report', { fc_url: fcUri }),\n              }}\n            />\n          </Typography>\n        ) : (\n          <Typography variant=\"body\">\n            <span\n              dangerouslySetInnerHTML={{\n                __html: t('fcPersonData.no_record', { fc_url: fcUri }),\n              }}\n            />\n          </Typography>\n        )}\n      </Container>\n      <StyledRows>\n        {events.map(event => (\n          <PersonEvent key={event.eventId} {...event}></PersonEvent>\n        ))}\n        {events.length > 0 && (\n          <Container>\n            <StyledButton\n              onClick={() => {\n                const win = window.open(fcUri, '_blank')\n                win.focus()\n              }}\n            >\n              {/* 更多資料及往績 */}\n              {t('fcPersonData.go_to_fc', { name })}\n            </StyledButton>\n          </Container>\n        )}\n      </StyledRows>\n    </>\n  )\n}\n\nFCPersonData.propsType = {\n  uuid: PropTypes.string,\n  fcUuid: PropTypes.string,\n  filterFunc: PropTypes.func.isRequired,\n}\n\nexport default FCPersonData\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\n\nconst StyledChip = styled(Chip)`\n  && {\n    font-size: ${props => props.fontsize || 12}px;\n    background: ${props => props.backgroundcolor || COLORS.main.primary};\n    color: ${props => props.textcolor || COLORS.main.background};\n    border: ${props => props.borderwidth || 0}px\n      ${props => props.bordercolor || 'rgba(0, 0, 0, 0.5)'} solid;\n  }\n`\nconst SecondaryStyledChip = styled(Chip)`\n  && {\n    font-size: ${props => props.fontsize || 12}px;\n    background: ${props => props.textcolor || COLORS.main.background};\n    color: ${props => props.backgroundcolor || COLORS.main.primary};\n    border: ${props => props.borderwidth || 1}px\n      ${props => props.backgroundcolor || COLORS.main.primary} solid;\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      fontSize={props.fontsize}\n      textcolor={props.textcolor}\n      backgroundcolor={props.backgroundcolor}\n      bordercolor={props.bordercolor}\n      borderwidth={props.borderwidth}\n      label={props.value}\n      size=\"small\"\n      onClick={props.handleClick}\n      className={props.className}\n    />\n  )\n}\n\nexport const SecondaryTag = props => {\n  return (\n    <SecondaryStyledChip\n      fontSize={props.fontsize}\n      textcolor={props.textcolor}\n      backgroundcolor={props.backgroundcolor}\n      bordercolor={props.bordercolor}\n      borderwidth={props.borderwidth}\n      label={props.value}\n      size=\"small\"\n      onClick={props.handleClick}\n      className={props.className}\n    />\n  )\n}\n","import styled from 'styled-components'\nimport React from 'react'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport InfoIcon from '@material-ui/icons/InfoOutlined'\nimport ErrorIcon from '@material-ui/icons/ErrorOutline'\nconst InfoIconSvg = styled(InfoIcon)`\n  && {\n    font-size: ${props => props.size || 16}px;\n    vertical-align: bottom;\n  }\n`\n\nconst ErrorIconSvg = styled(ErrorIcon)`\n  && {\n    font-size: ${props => props.size || 16}px;\n    vertical-align: bottom;\n  }\n`\n\nexport const HtmlTooltip = styled(props => (\n  <Tooltip\n    className={props.className}\n    classes={{ popper: props.className, tooltip: 'tooltip' }}\n    title={\n      <>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: props.text,\n          }}\n        />\n      </>\n    }\n    {...props}\n    onClick={evt => {\n      evt.preventDefault()\n      evt.stopPropagation()\n      evt.nativeEvent.stopPropagation()\n      evt.nativeEvent.stopImmediatePropagation()\n    }}\n  >\n    {props.type === 'error' ? (\n      <ErrorIconSvg size={props.size || 16} />\n    ) : (\n      <InfoIconSvg size={props.size || 16} />\n    )}\n  </Tooltip>\n))`\n  & .tooltip {\n    border: 1px solid #000;\n    background-color: #fff;\n    color: #000;\n  }\n  & .MuiTooltip-tooltipPlacementBottom {\n    margin: 5px 0px 0px;\n  }\n`\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport { Typography, Grid, Breadcrumbs, Avatar } from '@material-ui/core'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\n// import HtmlParagraph from 'components/atoms/HtmlParagraph'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { getColorFromCamp, withLanguage } from 'utils/helper'\nimport CouncillorMeetingAttendanceContainer from 'components/containers/CouncillorMeetingAttendanceContainer'\nimport PersonElectionHistoriesContainer from 'components/containers/PersonElectionHistoriesContainer'\nimport FCPersonData from 'components/templates/FCPersonData'\nimport { COLORS } from 'ui/theme'\nimport { Tag } from 'components/atoms/Tag'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n} from 'utils/helper'\n\n// TODO: add age, camp & related_organization\nconst GET_PEOPLE_PROFILE = gql`\n  query($uuid: uuid!) {\n    dcd_people(where: { uuid: { _eq: $uuid } }) {\n      id\n      uuid\n      fc_uuid\n      name_zh\n      name_en\n      gender\n      related_organization\n      estimated_yob\n      yod\n      description\n      councillors {\n        meeting_attendances {\n          id\n        }\n        year\n        cacode\n        term_from\n        term_to\n        career\n        district {\n          dc_name_zh\n          dc_name_en\n          dc_code\n        }\n        political_affiliation\n        post\n        constituency {\n          id\n          year\n          name_zh\n          name_en\n        }\n      }\n      candidates {\n        constituency {\n          name_zh\n          name_en\n          code\n          district {\n            dc_name_zh\n            dc_name_en\n            dc_code\n          }\n        }\n        candidate_number\n        is_won\n        fb_id\n        occupation_zh\n        occupation_en\n        political_affiliation_zh\n        political_affiliation_en\n        age\n        cacode\n        camp\n        election_type\n        year\n        votes\n      }\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    height: 120px;\n    position: relative;\n    display: flex;\n    background: linear-gradient(\n      ${props => COLORS.camp[props.camp].background} 84px,\n      rgba(255, 255, 255, 0) 32px\n    );\n  }\n`\n\nconst CandidateAvatorContainer = styled(Box)`\n  && {\n    position: absolute;\n    left: 16px;\n    bottom: 8px;\n  }\n`\n\nconst PersonName = styled.div`\n  && {\n    position: absolute;\n    left: 116px;\n    top: 36px;\n    color: ${props => COLORS.camp[props.camp].text};\n  }\n`\n\nconst ImgTag = styled.img`\n  && {\n    display: block;\n    width: 100%;\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: relative;\n    margin-bottom: -18px !important;\n    top: -22px;\n    left: 2px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst ElectionStatus = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row-reverse;\n    width: 100%;\n    div {\n      margin: 8px 8px 0 0;\n    }\n  }\n`\n\nconst FacebookPageButton = styled(UnstyledLink)`\n  && {\n    display: block;\n    position: relative;\n    width: 0px;\n    height: 0px;\n    right: 40px;\n    bottom: -50px;\n    img {\n      height: 16px;\n      width: 16px;\n    }\n  }\n`\n\nconst PersonHighlightContainer = styled(FlexRowContainer)`\n  && {\n    padding: 16px;\n    text-align: left;\n  }\n`\n\nconst PlatformContainer = styled(Box)`\n  && {\n    background: ${props => COLORS.camp[props.camp].background};\n    margin: 0 auto;\n    padding: 8px 16px 16px;\n  }\n`\nconst PlatformHeader = styled(Box)`\n  && {\n    color: ${props => COLORS.camp[props.camp].text};\n    margin-bottom: 8px;\n  }\n`\n\nconst PlatformImage = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    max-width: 600px;\n  }\n`\n\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\n// const PersonDescriptionParagraph = styled(HtmlParagraph)`\n//   && {\n//     margin-top: 0px;\n//     padding-left: 16px;\n//     padding-right: 16px;\n//     margin-bottom: 8px;\n//   }\n// `\n\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      imageLoadError: true,\n    }\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderFacebook = person => {\n    let url = 'https://facebook.com/'\n    let fb_id = person.candidates[0].fb_id\n    if (fb_id && fb_id !== 'n/a') {\n      url += fb_id\n      return (\n        <FacebookPageButton target=\"_blank\" href={url} aria-label=\"Facebook\">\n          <Avatar\n            width={'8px'}\n            height={'8px'}\n            borderwidth={'0'}\n            src={`/static/images/facebook.svg`}\n          />\n        </FacebookPageButton>\n      )\n    }\n    return\n  }\n\n  renderIntroText = (person, currentTerm) => {\n    const { t } = this.props\n    let text\n    if (\n      currentTerm &&\n      currentTerm.term_to &&\n      Date.parse(new Date()) < Date.parse(currentTerm.term_to)\n    ) {\n      text = `現任${currentTerm.district.dc_name_zh}區議員（${currentTerm.constituency.name_zh}）`\n    } else {\n      const electionResult = person.candidates[0].is_won\n        ? // '當選' :\n          t('election.tag1')\n        : // '參選'\n          t('election.tag2')\n\n      text = `${electionResult}${person.candidates[0].year}年${person.candidates[0].constituency.district.dc_name_zh}區議員（${person.candidates[0].constituency.name_zh}）`\n    }\n\n    return <Typography variant=\"h6\">{text}</Typography>\n  }\n\n  renderElectionStatusText = (person, currentTerm) => {\n    const { t } = this.props\n\n    let tags = []\n    let primaryText\n\n    if (\n      person.candidates[0].year === 2019 &&\n      person.candidates[0].election_type === 'ordinary'\n    ) {\n      if (currentTerm) {\n        // primaryText = '競逐連任'\n        primaryText = t('candidate.tag1')\n      } else if (person.candidates.length === 1) {\n        // primaryText = '首度參選'\n        primaryText = t('candidate.tag2')\n      } else if (person.candidates.length > 1) {\n        if (\n          !person.candidates.find(p => p.is_won) &&\n          person.candidates.length > 2\n        ) {\n          // primaryText = '屢敗屢戰'\n          primaryText = t('candidate.tag3')\n        } else if (!person.candidates[1].is_won) {\n          // primaryText = '捲土重來'\n          primaryText = t('candidate.tag4')\n        }\n      }\n    }\n\n    if (primaryText) tags.push(primaryText)\n\n    if (person.candidates.length > 1) {\n      if (person.candidates[1].is_won && person.candidates[1].votes === 0) {\n        // tags.push('上屆自動當選')\n        tags.push(t('candidate.tag5'))\n      }\n\n      if (person.candidates[0].cacode[0] !== person.candidates[1].cacode[0]) {\n        // tags.push('跨區參選')\n        tags.push(t('candidate.tag6'))\n      }\n    }\n\n    if (tags.length > 0) {\n      return (\n        <ElectionStatus>\n          {tags.map(tag => (\n            <Tag\n              textcolor=\"black\"\n              value={tag}\n              borderwidth={1}\n              backgroundcolor={'transparent'}\n            />\n          ))}\n        </ElectionStatus>\n      )\n    }\n\n    return null\n  }\n\n  render() {\n    const {\n      match: {\n        params: { uuid },\n      },\n      t,\n    } = this.props\n    const { imageLoadError } = this.state\n\n    const homeUrl = process.env.REACT_APP_HOST_URI\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ uuid }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const person = data.dcd_people[0]\n\n          const currentTerm =\n            person.councillors &&\n            person.councillors[person.councillors.length - 1]\n          const lastElection =\n            person.candidates &&\n            person.candidates.sort((a, b) => {\n              if (b.year > a.year) return 1\n              else if (b.year < a.year) return -1\n              else {\n                if (\n                  b.election_type === 'ordinary' &&\n                  a.election_type === 'by-election'\n                )\n                  return 1\n                else return -1\n              }\n            })[0]\n          const hasMeetings =\n            person.councillors &&\n            person.councillors.length > 0 &&\n            person.councillors\n              .map(c => c.meeting_attendances && c.meeting_attendances.length)\n              .reduce((c, v) => Math.max(c, v), 0) > 0\n\n          const personHighlight = []\n\n          personHighlight.push({\n            xs: 2,\n            // title: '年齡',\n            title: t('personHighlight.age.title'),\n            // tips: '根據候選人簡介的年齡推算',\n            tips: t('personHighlight.age.tips'),\n            text: person.estimated_yob\n              ? t('personHighlight.age.value', {\n                  n: (person.yod || 2019) - person.estimated_yob,\n                })\n              : '-',\n          })\n\n          personHighlight.push({\n            xs: 6,\n            // title: '相關組織 ',\n            title: t('relatedOrganizations'),\n            // tips: '候選人或議員的所屬政黨或社區組織，來源綜合媒體報道',\n            tips: t('relatedOrganizations.tips'),\n            text: person.related_organization || '-', // withLanguage(person.related_organization_en, person.related_organization_zh) || '-'\n          })\n\n          personHighlight.push({\n            xs: 4,\n            // title: '職業 ',\n            title: t('personHighlight.occupation.title'),\n            // tips: '候選人：取自最近選舉的候選人簡介<br />議員：取自區議會網頁<br />來源綜合媒體報道',\n            tips: t('personHighlight.occupation.tips'),\n            text:\n              withLanguage(\n                lastElection.occupation_en,\n                lastElection.occupation_zh\n              ) ||\n              (currentTerm && currentTerm.career) ||\n              '-',\n          })\n\n          const titles = []\n\n          if (person.fc_uuid) {\n            titles.push(\n              // '個人立場'\n              t('fc.title1')\n            )\n            titles.push(\n              // '媒體報導'\n              t('fc.title2')\n            )\n          }\n\n          titles.push(\n            // '參選紀錄'\n            t('fc.title3')\n          )\n\n          if (hasMeetings)\n            titles.push(\n              // '會議出席率'\n              t('fc.title4')\n            )\n\n          return (\n            <>\n              {lastElection.year === 2019 &&\n                lastElection.election_type === 'ordinary' && (\n                  <BreadcrumbsContainer>\n                    <Breadcrumbs\n                      separator={<NavigateNextIcon fontSize=\"small\" />}\n                      aria-label=\"breadcrumb\"\n                    >\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(`/district/2019`)\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {lastElection.year}\n                        </Typography>\n                      </UnstyledLink>\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(\n                            getDistrictOverviewUriFromTag(\n                              lastElection.constituency.district.dc_code\n                            )\n                          )\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {withLanguage(\n                            lastElection.constituency.district.dc_name_en,\n                            lastElection.constituency.district.dc_name_zh\n                          )}\n                        </Typography>\n                      </UnstyledLink>\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(\n                            getConstituencyUriFromTag(\n                              lastElection.constituency.code\n                            )\n                          )\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {withLanguage(\n                            lastElection.constituency.name_en,\n                            lastElection.constituency.name_zh\n                          )}\n                          （{lastElection.constituency.code}）\n                        </Typography>\n                      </UnstyledLink>\n                      <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                        {withLanguage(person.name_en, person.name_zh)}\n                      </Typography>\n                    </Breadcrumbs>\n                  </BreadcrumbsContainer>\n                )}\n\n              <CandidateHeaderContainer\n                camp={getColorFromCamp(lastElection && lastElection.camp)}\n              >\n                {this.renderElectionStatusText(person, currentTerm)}\n                <CandidateAvatorContainer>\n                  <PeopleAvatar\n                    dimension={'84px'}\n                    borderwidth={'0'}\n                    src={`${homeUrl}/static/images/avatar/100x100/${person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        // wingkwong: avoid infinite callbacks if fallback image fails\n                        if (imageLoadError) {\n                          this.setState({\n                            imageLoadError: false,\n                          })\n                          e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                        }\n                      },\n                    }}\n                  />\n                  {person.candidates[0].candidate_number && (\n                    <CandidateNumber\n                      dimension=\"18px\"\n                      camp={getColorFromCamp(person.candidates[0].camp)}\n                    >\n                      {person.candidates[0].candidate_number}\n                    </CandidateNumber>\n                  )}\n                </CandidateAvatorContainer>\n                <Box>\n                  <PersonName\n                    camp={getColorFromCamp(lastElection && lastElection.camp)}\n                  >\n                    {person.name_en ? (\n                      <>\n                        <Typography\n                          variant=\"h3\"\n                          style={{ marginBottom: '5px' }}\n                        >\n                          {person.name_zh || person.name_en}\n                        </Typography>\n                        <Typography\n                          variant=\"h5\"\n                          style={{ marginBottom: '5px' }}\n                        >\n                          {person.name_en || ''}\n                        </Typography>\n                      </>\n                    ) : (\n                      <Typography variant=\"h3\" style={{ marginBottom: '3px' }}>\n                        {person.name_zh || person.name_en}\n                      </Typography>\n                    )}\n\n                    {this.renderIntroText(person, currentTerm)}\n                  </PersonName>\n                  {this.renderFacebook(person)}\n                </Box>\n              </CandidateHeaderContainer>\n\n              <PersonHighlightContainer>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h5\">{highlight.text}</Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h6\">\n                        {highlight.title}\n                        <HtmlTooltip\n                          disableFocusListener\n                          disableTouchListener\n                          text={highlight.tips}\n                          placement=\"bottom\"\n                          size={21}\n                        />\n                      </Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n              </PersonHighlightContainer>\n              {/* {person.description && (\n                <PersonDescriptionParagraph text={person.description} />\n              )} */}\n              {lastElection.year === 2019 &&\n                lastElection.election_type === 'ordinary' && (\n                  <PlatformContainer\n                    camp={getColorFromCamp(lastElection && lastElection.camp)}\n                  >\n                    <PlatformHeader\n                      camp={getColorFromCamp(lastElection && lastElection.camp)}\n                    >\n                      <Typography variant=\"h6\">\n                        {t('electoral_messages')}\n                        <HtmlTooltip\n                          disableFocusListener\n                          disableTouchListener\n                          text={t('electoral_messages.tips')}\n                          placement=\"bottom\"\n                          size={21}\n                        />\n                      </Typography>\n                    </PlatformHeader>\n                    <PlatformImage>\n                      <ImgTag\n                        src={`${homeUrl}/static/images/platform/${person.uuid}.jpg`}\n                        alt={''} // TODO: use candidate.candi_intro for SEO\n                      />\n                    </PlatformImage>\n                  </PlatformContainer>\n                )}\n              <ScrollableTabs\n                titles={titles}\n                indicatorcolor={COLORS.main.primary}\n                variant=\"scrollable\"\n              >\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                    filterFunc={record => record.eventType !== 'MEDIA'}\n                  />\n                )}\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                    filterFunc={record => record.eventType === 'MEDIA'}\n                  />\n                )}\n                <PersonElectionHistoriesContainer personId={person.id} />\n                {hasMeetings && (\n                  <CouncillorMeetingAttendanceContainer personId={person.id} />\n                )}\n              </ScrollableTabs>\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default withTranslation()(ProfilePage)\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'ui/responsive'\nimport { SeperatedColumns } from 'components/atoms/Columns'\nimport { useTranslation } from 'react-i18next'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    councillors: PropTypes.array.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, councillors, district, stations } = this.props\n    const councillor = councillors.length > 0 ? councillors[0] : {}\n    const { t } = useTranslation()\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedColumns>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedColumns>\n          <RegionText>{district.dc_name_zh}</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedColumns>\n            <Typography variant=\"h6\">\n              {/* 區議員 */}\n              {/* TODO: i18n - check councilors or councilor */}\n              {t('councilor')}\n            </Typography>\n            <Typography>\n              {councillor.person ? councillor.person.name_zh : '-'}\n            </Typography>\n          </SeperatedColumns>\n          <SeperatedColumns>\n            <Typography variant=\"h6\">\n              {/* 政治聯繫 */}\n              {t('politicalAffiliation')}\n            </Typography>\n            <Typography>{councillor.political_affiliation || '-'}</Typography>\n          </SeperatedColumns>\n          <SeperatedColumns>\n            <Typography variant=\"h6\">\n              {/* 投票站 */}\n              {t('districtCard.text2')}\n            </Typography>\n            {stations.map((station, index) => (\n              <Typography key={index} variant=\"subtitle2\">\n                {station.name_zh}\n              </Typography>\n            ))}\n          </SeperatedColumns>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { withTranslation } from 'react-i18next'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas, t } = this.props\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          {/* 主要屋邨 / 地區 */}\n          {t('mainAreas.text1')}\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              <Typography variant=\"body1\">\n                {`${Object.keys(area)[0]} ${area[Object.keys(area)[0]]}`}\n              </Typography>\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default withTranslation()(MainAreas)\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\n// import VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from 'components/atoms/charts/WaffleChart'\nimport { useTranslation } from 'react-i18next'\n\n// TODO: change this to dcd data\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const { t } = useTranslation()\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      // name: '不能投票',\n      name: t('voteStats.text1'),\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      // name: '沒有投票',\n      name: t('voteStats.text2'),\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      // name: '投票失效',\n      name: t('voteStats.text3'),\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      // name: `投給 ${name_zh || name_en}`,\n      name: `${t('voteStats.text4')} ${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    const { t } = useTranslation()\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">\n                {/* 人口資料 */}\n                {t('metrics.text1')}\n              </Typography>\n              {/* <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              /> */}\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../OLMap'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'ui/responsive'\n\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = person => {\n    this.props.history.push(\n      `/profile/${person.name_zh || person.name_en}/${person.uuid}`\n    )\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dcd_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox></FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import React, { useState } from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CANDIDATES } from 'queries/gql'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { UnstyledNavLink } from 'components/atoms/Link'\nimport { SecondaryTag } from 'components/atoms/Tag'\nimport Rows from 'components/atoms/Rows'\nimport { SeperatedColumns } from 'components/atoms/Columns'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport { Box, Typography, Grid } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { useTranslation } from 'react-i18next'\nimport {\n  getColorFromCamp,\n  getConstituencyTagsByCandidateCamps,\n  withLanguage,\n} from 'utils/helper'\nimport { COLORS } from 'ui/theme'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst CandidateList = styled(Grid)`\n  && {\n  }\n`\n\nconst CandidateGrid = styled(Grid)`\n  && {\n    margin-bottom: 8px;\n  }\n`\n\nconst DCCAStatusTagsContainer = styled(SeperatedColumns)`\n  && {\n    justify-content: flex-end;\n  }\n`\n\nconst StyledSecondaryTag = styled(SecondaryTag)`\n  && {\n    margin-left: 8px;\n  }\n`\n\nconst Candidate = styled(Box)`\n  && {\n    position: relative;\n    width: auto;\n    text-align: center;\n    & > div {\n      margin: 0 auto;\n    }\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: relative;\n    margin-bottom: -18px !important;\n    top: -19px;\n    left: -28px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst ControversialAlert = styled.div`\n  && {\n    position: relative;\n    margin-bottom: -21px !important;\n    top: -21px;import { Tag } from 'components/atoms/Tag';\n\n    left: 30px;\n  }\n`\nconst CandidateName = styled(Typography)`\n  && {\n    margin-top: 5px;\n    font-weight: 700;\n  }\n`\n\nconst CandidatesContainer = props => {\n  const { code, year } = props\n  const { t } = useTranslation()\n  const [imageLoadError, setImageLoadError] = useState(true)\n\n  return (\n    <Query\n      query={QUERY_GET_CANDIDATES}\n      variables={{ code, year }} // variables={{ code, year }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const candidates =\n          data.dcd_candidates &&\n          data.dcd_candidates.filter(c => c.election_type === 'ordinary')\n\n        const tags = getConstituencyTagsByCandidateCamps(candidates)\n        return (\n          <>\n            {candidates.length > 0 && (\n              <>\n                <Rows>\n                  <DCCAStatusTagsContainer>\n                    {tags.length > 0 &&\n                      tags.map((tag, index) => (\n                        <StyledSecondaryTag value={tag} key={index} />\n                      ))}\n                  </DCCAStatusTagsContainer>\n                </Rows>\n                <Rows>\n                  <SeperatedColumns>\n                    <CandidateList container direction=\"row\">\n                      {/* Max 3 columns and always centered */}\n                      {candidates.map(candidate => (\n                        <CandidateGrid\n                          key={candidate.person.id}\n                          item\n                          xs={\n                            candidates.length < 3 ? 12 / candidates.length : 4\n                          }\n                          sm={\n                            candidates.length < 4 ? 12 / candidates.length : 3\n                          }\n                          md={\n                            candidates.length < 6 ? 12 / candidates.length : 2\n                          }\n                        >\n                          <UnstyledNavLink\n                            to={`/profile/${candidate.person.name_zh ||\n                              candidate.person.name_en}/${\n                              candidate.person.uuid\n                            }`}\n                          >\n                            <Candidate>\n                              <PeopleAvatar\n                                dimension=\"84px\"\n                                borderwidth={'4'}\n                                camp={getColorFromCamp(candidate.camp)}\n                                src={`${IMAGE_HOST_URI}/static/images/avatar/100x100/${candidate.person.uuid}.jpg`}\n                                imgProps={{\n                                  onError: e => {\n                                    // wingkwong: avoid infinite callbacks if fallback image fails\n                                    if (imageLoadError) {\n                                      setImageLoadError(false)\n                                      e.target.src =\n                                        IMAGE_HOST_URI +\n                                        '/static/images/avatar/default.png'\n                                    }\n                                  },\n                                }}\n                                opacity={\n                                  candidate.nominate_status === 'disqualified'\n                                }\n                              />\n                              {candidate.candidate_number > 0 && (\n                                <CandidateNumber\n                                  dimension=\"18px\"\n                                  camp={getColorFromCamp(candidate.camp)}\n                                >\n                                  {candidate.candidate_number}\n                                </CandidateNumber>\n                              )}\n                              {candidate.tags.findIndex(\n                                tag =>\n                                  tag.type === 'camp' && tag.tag === '有爭議'\n                              ) > -1 && (\n                                <ControversialAlert>\n                                  <HtmlTooltip\n                                    disableFocusListener\n                                    disableTouchListener\n                                    // text=\"侯選人政治立場未明\"\n                                    text={t('candidate.noPoliticalAffiliation')}\n                                    placement=\"bottom\"\n                                    size={21}\n                                  />\n                                </ControversialAlert>\n                              )}\n                              <CandidateName variant=\"h5\">\n                                {withLanguage(\n                                  candidate.person.name_en,\n                                  candidate.person.name_zh ||\n                                    candidate.person.name_en\n                                )}\n                              </CandidateName>\n\n                              <Typography variant=\"body2\">\n                                {candidate.political_affiliation ||\n                                  // '未報稱政治聯繫'}{' '}\n                                  t('candidate.noPoliticalAffiliation')}\n                              </Typography>\n\n                              {candidate.nominate_status === 'disqualified' && (\n                                <Typography variant=\"body2\">\n                                  {/* 取消資格 */}\n                                  {t(\n                                    'candidate.nominateStatus.disqualified_bracket'\n                                  )}\n                                </Typography>\n                              )}\n                              {candidate.nominate_status === 'suspended' && (\n                                <Typography variant=\"body2\">\n                                  {t(\n                                    'candidate.nominateStatus.suspended_bracket'\n                                  )}\n                                </Typography>\n                              )}\n                              {candidate.tags.findIndex(\n                                tag =>\n                                  tag.type === 'demo_status' &&\n                                  tag.tag === 'planb'\n                              ) > -1 && (\n                                <Typography variant=\"body2\">\n                                  {t(\n                                    'candidate.nominateStatus.demo_planb_bracket'\n                                  )}\n                                </Typography>\n                              )}\n                            </Candidate>\n                          </UnstyledNavLink>\n                        </CandidateGrid>\n                      ))}\n                    </CandidateList>\n                  </SeperatedColumns>\n                </Rows>\n              </>\n            )}\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCandidatesContainer.propsType = {\n  // cacode: PropTypes.string,\n  // year: PropTypes.number,\n}\nexport default CandidatesContainer\n","import React from 'react'\nimport { Card, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { SecondaryTag } from 'components/atoms/Tag'\nimport Box from '@material-ui/core/Box'\nimport Columns from 'components/atoms/Columns'\nimport { getDistrictListUriFromTag } from 'utils/helper'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 0 0 16px;\n    padding: 16px;\n    height: auto;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nconst ConstituencyCard = props => {\n  const { year, constituency } = props\n  const { tags } = constituency\n  const sortedTags = tags.sort((a, b) =>\n    a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n  )\n\n  return (\n    <StyledCard\n      onClick={() => {\n        props.history.push(`/district/2019/${constituency.code}`)\n      }}\n    >\n      <Typography variant=\"h6\" gutterBottom>\n        {constituency.name_zh}（{constituency.code}）\n      </Typography>\n      <Columns>\n        {sortedTags.map((tag, index) => (\n          <TagContainer>\n            <SecondaryTag\n              key={index}\n              value={tag.tag}\n              handleClick={evt => {\n                evt.stopPropagation()\n                props.history.push(getDistrictListUriFromTag(tag.tag))\n              }}\n            />\n          </TagContainer>\n        ))}\n      </Columns>\n      <CandidatesContainer year={year} code={constituency.code} />\n    </StyledCard>\n  )\n}\n\nexport default withRouter(ConstituencyCard)\n","import React from 'react'\nimport styled from 'styled-components'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nconst Placeholder = styled.div`\n  && {\n    width: 100%;\n    height: calc(100vh - 56px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst CentredCircularProgress = styled(CircularProgress)`\n  && {\n    max-width: 50%;\n  }\n`\n\nexport const Loading = props => {\n  return (\n    <Placeholder className={props.className}>\n      <CentredCircularProgress thickness={3} size={64} color=\"secondary\" />\n    </Placeholder>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CONSTITUENCIES_BY_TAG } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictListPage = props => {\n  const {\n    match: {\n      params: { year, tag },\n    },\n  } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CONSTITUENCIES_BY_TAG}\n      variables={{ tag, year: 2019 }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${tag}：${data.dcd_constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {data.dcd_constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictListPage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text, Icon } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport Feature from 'ol/Feature'\nimport Point from 'ol/geom/Point'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nimport { adjustConcavePolygonCentroid } from 'utils/features'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.1)',\n  }),\n  stroke: new Stroke({\n    color: '#356272',\n    width: 1,\n  }),\n  text: new Text({\n    font: '14px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: '#356272',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 3,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,255,0.5)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nconst hoverStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,0,0.2)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nclass DCCACompareMap extends Component {\n  featureOverlay\n  featureHover\n  highlightedFeature\n  hoveredFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code, handleMapLoaded } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n    let vectorLayer\n    let geoMarker\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n      controls: [],\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    // Add layer for placing marker, set marker's style\n    let markerCoordinates = this.props.currentPoint\n    vectorLayer = new VectorLayer({\n      name: 'marker',\n      source: new VectorSource(),\n      style: function(feature) {\n        return new Style({\n          image: new Icon({\n            anchor: [0.5, 1],\n            scale: 0.25,\n            src: '/static/images/marker.png',\n          }),\n        })\n      },\n    })\n    map.addLayer(vectorLayer)\n\n    this.featureHover = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        hoverStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return hoverStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n\n          const loadedResult = {\n            centroid:\n              adjustConcavePolygonCentroid(2019, code) ||\n              features[i] // hardcode as 2019\n                .getGeometry()\n                .getInteriorPoint()\n                .getCoordinates(),\n          }\n\n          handleMapLoaded(loadedResult)\n          break\n        }\n      }\n    }\n\n    // Add marker to the place user clicked\n    geoMarker = new Feature({\n      type: 'geoMarker',\n      geometry: new Point([markerCoordinates['lng'], markerCoordinates['lat']]),\n    })\n    geoMarker.setProperties({ ENAME: '', CNAME: '' })\n\n    vectorLayer.getSource().addFeature(geoMarker)\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const selectBySingleClick = new Select()\n    map.addInteraction(selectBySingleClick)\n    selectBySingleClick.on('select', this.mapClick)\n\n    // const selectByHover = new Select({\n    //   condition: pointerMove,\n    // })\n    // map.addInteraction(selectByHover)\n    // selectByHover.on('select', this.mapHover)\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  highlightHoveredFeature(feature) {\n    if (this.hoveredFeature) {\n      this.featureHover.getSource().removeFeature(this.hoveredFeature)\n    }\n\n    this.featureHover.getSource().addFeature(feature)\n    this.hoveredFeature = feature\n  }\n\n  mapClick = e => {\n    const { year, changeDistrict, handleMapClick } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    let geoMarker = new Feature({\n      type: 'geoMarker',\n      geometry: new Point(e.mapBrowserEvent.coordinate),\n    })\n    geoMarker.setProperties({ ENAME: '', CNAME: '' })\n\n    this.state.map.getLayers().forEach(layer => {\n      if (layer.get('name') !== undefined && layer.get('name') === 'marker') {\n        layer.getSource().clear()\n        layer.getSource().addFeature(geoMarker)\n      }\n    })\n    handleMapClick(e.mapBrowserEvent.coordinate)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n\n    // No more select polygon\n    e.target.getFeatures().clear()\n  }\n\n  mapHover = e => {\n    //const { year, changeDistrict, handleMapClick } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightHoveredFeature(selectedFeature)\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default DCCACompareMap\n","import React, { useState } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport { Tag } from '../atoms/Tag'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport { useTranslation } from 'react-i18next'\nimport {\n  getColorFromPoliticalAffiliation,\n  getCouncillorMeta,\n  formatNumber,\n} from 'utils/helper'\n\nconst Councillor = props => {\n  const { councillors } = props\n  if (councillors.length === 0) {\n    return <> </>\n  }\n  // we just get the latest councillor from the dc\n  const councillor = councillors[0]\n  const tags = [] //['競逐連任']\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n  const meta = getCouncillorMeta(councillor)\n  const { t } = useTranslation()\n  const [imageLoadError, setImageLoadError] = useState(true)\n\n  return (\n    <UnstyledNavLink\n      key={councillor.code}\n      to={`/profile/${councillor.person.name_zh || councillor.person.name_en}/${\n        councillor.person.uuid\n      }`}\n    >\n      <Box>\n        <Box display=\"flex\">\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\" gutterBottom>\n              {`${councillor.term_from.substring(0, 4)} `}\n              {`${councillor.constituency.name_zh} （${councillor.constituency.code}）`}\n            </Typography>\n          </Box>\n          <Box>\n            {tags.length > 0 &&\n              tags.map((tag, index) => <Tag value={tag} key={index} />)}\n          </Box>\n        </Box>\n\n        <Grid container wrap=\"nowrap\" spacing={1}>\n          <Grid item>\n            <PeopleAvatar\n              dimension=\"60px\"\n              borderwidth={'3'}\n              camp={getColorFromPoliticalAffiliation(\n                councillor.political_affiliation\n              )}\n              src={`${IMAGE_HOST_URI}/static/images/avatar/100x100/${councillor.person.uuid}.jpg`}\n              imgProps={{\n                onError: e => {\n                  // wingkwong: avoid infinite callbacks if fallback image fails\n                  if (imageLoadError) {\n                    setImageLoadError(false)\n                    e.target.src =\n                      IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                  }\n                },\n              }}\n            />\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"h4\" gutterBottom>\n              {councillor.person.name_zh}\n            </Typography>\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">\n                  {/* 報稱政治聯繫 */}\n                  {t('reportedPoliticalAffiliation')}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {councillor.political_affiliation}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">\n                  {meta.lastParticipated.year}\n                  {/* 選舉結果 */}\n                  {t('electionResults')}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {meta.lastParticipated.votesDiff === 0 && '自動當選'}\n                  {meta.lastParticipated.votesDiff > 0 &&\n                    `${\n                      meta.lastParticipated.votesDiff /\n                        meta.lastParticipated.votes >\n                      0.2\n                        ? '大'\n                        : meta.lastParticipated.votesDiff /\n                            meta.lastParticipated.votes <\n                          0.05\n                        ? '險'\n                        : ''\n                    }勝${formatNumber(meta.lastParticipated.votesDiff)}票`}\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    </UnstyledNavLink>\n  )\n}\n\nexport default Councillor\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_COUNCILLOR } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport Councillor from 'components/templates/Councillor'\n\nconst CouncillorContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query query={QUERY_GET_COUNCILLOR} variables={{ code, year }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Councillor councillors={data.dcd_councillors} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorContainer.propsType = {\n  cacode: PropTypes.string,\n  year: PropTypes.number,\n}\nexport default CouncillorContainer\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const color = d3\n      .scaleOrdinal()\n      .range([\n        props.firstColor ? props.firstColor : '#ca0020',\n        props.secondColor ? props.secondColor : '#f4a582',\n      ])\n\n    const margin = { top: 50, right: 20, bottom: 30, left: 40 }\n\n    const width = dimensions.width - margin.left - margin.right\n    const height = dimensions.width - margin.top - margin.bottom\n\n    const max = _.max(_.maxBy(data, r => _.max(r.values)).values)\n\n    const svg = d3\n      .select(d3Container.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    svg.selectAll('g').remove()\n    const chart = svg\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n\n    const yScale = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, max]) // space for showing legend\n\n    const x0 = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(data.map(s => s.label))\n      .padding(0.1)\n\n    const x1 = d3\n      .scaleBand()\n      .domain(d3.range(2))\n      .range([0, x0.bandwidth() - 10])\n    // y axis\n    chart.append('g').call(d3.axisLeft(yScale))\n\n    // draw the lines\n    chart\n      .append('g')\n      .style('color', 'lightgrey')\n      .style('stroke-opacity', '0.7')\n      .call(\n        d3\n          .axisLeft(yScale)\n          .tickSizeOuter(0)\n          .tickSizeInner(-width)\n          .tickFormat('')\n      )\n\n    // x axis\n    chart\n      .append('g')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(x0))\n      .selectAll('text')\n      .attr('transform', 'translate(0,0)rotate(-45)')\n      .style('text-anchor', 'end')\n      .style('fill', '#69a3b2')\n\n    const slice = svg\n      .selectAll('.slice')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'g')\n      .attr(\n        'transform',\n        d => `translate(${x0(d.label) + margin.left + 5},${margin.top})`\n      )\n\n    slice\n      .selectAll('rect')\n      .data(d => d.values)\n      .enter()\n      .append('rect')\n      .attr('width', x1.bandwidth())\n      .attr('x', (d, i) => x1(i))\n      .attr('y', d => yScale(0))\n      .attr('height', d => height - yScale(0))\n      .style('fill', (d, i) => color(i))\n\n    slice\n      .selectAll('rect')\n      .transition()\n      .delay(function(d) {\n        return Math.random() * 1000\n      })\n      .duration(1000)\n      .attr('y', d => yScale(d))\n      .attr('height', d => height - yScale(d))\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(data[0].labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${i * 20})`)\n\n    legend\n      .append('rect')\n      .attr('x', width - 20)\n      .attr('width', 14)\n      .attr('height', 14)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width)\n      .attr('y', 7)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <svg\n        ref={d3Container}\n        style={{ height: dimensions.width, width: '100%' }}\n      ></svg>\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport GroupedBarChart from 'components/atoms/charts/GroupedBarChart'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCY_STATS } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { COLORS } from 'ui/theme'\nimport { useTranslation } from 'react-i18next'\n\nexport default props => {\n  const { t } = useTranslation()\n\n  const [filterIndex] = useState(0)\n\n  const getDataForChat = voteStats => {\n    /**\n     * voteStats = [{\n     *  type: \"BY_GENDER_AGE\",\n     *  subtype: \"VOTERS/NEW_VOTERS\",\n     *  category_1: \"FEMALE/MALE\",\n     *  category_2: \"21-25\"\n     *  count: 10\n     * }]\n     */\n\n    const isFiltered = gender => {\n      if (gender === 'MALE' && filterIndex === 1) {\n        return false\n      } else if (gender === 'FEMALE' && filterIndex === 2) {\n        return false\n      }\n      return true\n    }\n    const data = _.values(_.groupBy(voteStats, stat => stat.category_2))\n    data.forEach(row => {\n      row.label = row[0].category_2\n      row.values = _.values(_.groupBy(row, r => r.subtype)).map(r =>\n        r\n          .filter(v => isFiltered(v.category_1))\n          .map(v => v.count)\n          .reduce((c, v) => c + v, 0)\n      )\n      row.values = [row.values[0] - row.values[1], row.values[0]]\n      row.labels = ['2018', '2019']\n    })\n\n    /**\n     * [{\n     *  label: \"21-22\",\n     *  values: [200, 159] // -> 2019 vs 2018\n     * }]\n     */\n\n    return data\n  }\n\n  const getTransformedData = data => {\n    const newData = []\n    const valueDict = {}\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].category_2 === '18-20' || data[i].category_2 === '71+') {\n        newData.push(data[i])\n      } else {\n        const ageGroupPrefix = data[i].category_2[0] // e.g. 21-25 and 26-30 will have the same first digit\n        const dictKey =\n          ageGroupPrefix +\n          data[i].category_1 /* gender */ +\n          data[i].subtype /* VOTERS, NEW_VOTERS */\n        if (typeof valueDict[dictKey] === 'undefined') {\n          // no existing count for this key\n          valueDict[dictKey] = data[i].count\n        } else {\n          data[i].count += valueDict[dictKey]\n          data[i].category_2 =\n            ageGroupPrefix + '1-' + (parseInt(ageGroupPrefix) + 1) + '0'\n          newData.push(data[i])\n        }\n      }\n    }\n    return newData\n  }\n\n  const getMeta = voteStats => {\n    const meta = {\n      increased: 0,\n      mostIncreasedGroup: null,\n    }\n    const total = voteStats\n      .filter(v => v.subtype === 'VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    const newVotes = voteStats\n      .filter(v => v.subtype === 'NEW_VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    let max = 0\n    const groupedByAge = _.groupBy(voteStats, v => v.category_2)\n    Object.keys(groupedByAge).forEach(age => {\n      const genders = groupedByAge[age]\n      const groupedByGender = _.groupBy(genders, v => v.category_1)\n      Object.keys(groupedByGender).forEach(gender => {\n        const types = groupedByGender[gender]\n        const groupedByType = _.groupBy(types, v => v.subtype)\n        const newVoters = groupedByType['NEW_VOTERS'][0].count\n        const totalVoters = groupedByType['VOTERS'][0].count\n        if (newVoters / totalVoters > max) {\n          max = _.round(newVoters / totalVoters, 4)\n          meta.mostIncreasedGroup = {\n            gender,\n            age,\n            max,\n          }\n        }\n      })\n    })\n    // .filter(v => v.subtype === 'NEW_VOTERS')\n    // .forEach(v => {\n    //   if (v.count > max) {\n    //     meta.mostIncreasedGroup = {\n    //       gender: v.category_1,\n    //       age: v.category_2\n    //     }\n    //   }\n    // })\n    meta.increased = _.round(newVotes / (total - newVotes), 4)\n\n    return meta\n  }\n\n  return (\n    // TODO: support page other than battleground page\n    <>\n      <Query\n        query={QUERY_CONSTITUENCY_STATS}\n        variables={{ year: 2019, code: props.code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          if (data.dcd_constituencies.length === 0) {\n            console.error(`cannot find constituency. code: ${props.code}`)\n            return `Error!`\n          }\n\n          // 2019-10-19 Hackathon - Reduce grouping for voters bar chart\n          const transformedData = getTransformedData(\n            data.dcd_constituencies[0].vote_stats\n          )\n          // transform the data to desire format\n          const chartData = getDataForChat(transformedData)\n          const meta = getMeta(transformedData)\n          //TODO: i18n\n          return (\n            <>\n              <Typography variant=\"h2\">\n                {/* 選民人數增加 */}\n                {t('districtNewVoterchartContainer.text1', {\n                  n: _.round(meta.increased * 100, 2),\n                })}\n              </Typography>\n              <Typography variant=\"h4\">\n                最大增幅組別：{meta.mostIncreasedGroup.age}歲的\n                {meta.mostIncreasedGroup.gender === 'MALE' ? '男' : '女'}\n                性選民增加了\n                {_.round(meta.mostIncreasedGroup.max * 100, 2)}%\n              </Typography>\n              <GroupedBarChart\n                data={chartData}\n                firstColor={COLORS.main.secondary}\n                secondColor={COLORS.main.primary}\n              />\n            </>\n          )\n        }}\n      </Query>\n    </>\n  )\n}\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport { Tag } from 'components/atoms/Tag'\nimport DistrictNewVoterChartContainer from 'components/containers/DistrictNewVoterChartContainer'\nimport Columns, { SeperatedColumns } from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport Box from '@material-ui/core/Box'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport KeyboardArrowUp from '@material-ui/icons/KeyboardArrowUp'\nimport { getDistrictListUriFromTag, formatNumber } from 'utils/helper'\nimport { withRouter } from 'react-router-dom'\nimport { SuccessText, FailureText } from 'components/atoms/Text'\nimport { withTranslation } from 'react-i18next'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 0 16px;\n    box-shadow: none;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nclass DCCAOverview extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGraph: false,\n    }\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  toggleGraph() {\n    this.setState({\n      showGraph: !this.state.showGraph,\n    })\n  }\n\n  render() {\n    const { code, tags, voterData, description, t } = this.props\n    const sortedTags = tags.sort((a, b) =>\n      a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n    )\n    const new_voters_percentage = (\n      (100 * voterData.aggregations.new_voters) /\n      (voterData.aggregations.all_voters - voterData.aggregations.new_voters)\n    ).toFixed(2)\n\n    return (\n      <>\n        <Container>\n          {description && (\n            <SeperatedColumns>\n              <Typography variant=\"h6\">{description}</Typography>\n            </SeperatedColumns>\n          )}\n          <SeperatedColumns>\n            <Rows>\n              <UnstyledButton onClick={this.toggleGraph.bind(this)}>\n                <Typography variant=\"h6\">\n                  {/* 選民人數 */}\n                  {t('numberOfElectors')}{' '}\n                  {formatNumber(voterData.aggregations.all_voters)} {' ('}\n                  {new_voters_percentage > 0 ? (\n                    <SuccessText display=\"inline\">\n                      +{new_voters_percentage}%\n                    </SuccessText>\n                  ) : (\n                    <FailureText display=\"inline\">\n                      -{new_voters_percentage}%\n                    </FailureText>\n                  )}\n                  )\n                </Typography>\n                {this.state.showGraph ? (\n                  <KeyboardArrowUp fontSize=\"small\" />\n                ) : (\n                  <ExpandMoreIcon fontSize=\"small\" />\n                )}\n              </UnstyledButton>\n              {this.state.showGraph && (\n                <DistrictNewVoterChartContainer code={code} />\n              )}\n            </Rows>\n          </SeperatedColumns>\n          <Columns>\n            {sortedTags.map((tag, index) => (\n              <TagContainer key={index}>\n                <Tag\n                  value={tag.tag}\n                  handleClick={() => {\n                    this.props.history.push(getDistrictListUriFromTag(tag.tag))\n                  }}\n                />\n              </TagContainer>\n            ))}\n          </Columns>\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withRouter(withTranslation()(DCCAOverview))\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport Columns from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport { COLORS } from 'ui/theme'\nimport { UnstyledNavLink } from 'components/atoms/Link'\n\nimport { formatNumber, getColorFromCamp } from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    padding-top: 16px;\n  }\n`\nconst CandiateBox = styled(Box)`\n  && {\n    display: flex;\n    margin: 8px 0 8px;\n  }\n`\n\nconst CandidateAvatar = styled(Columns)`\n  && {\n    position: relative;\n    width: auto;\n    margin-right: 16px;\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: absolute;\n    top: 40px;\n    left: 3px;\n    border-radius: 50%;\n    font-size: 10px;\n    font-weight: 600;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst CandidateName = styled(Columns)`\n  && {\n    width: auto;\n    min-width: 120px;\n    .person-name {\n      font-weight: 600;\n    }\n  }\n`\n\nconst VotePercentageBar = styled(LinearProgress)`\n  && {\n    background: transparent;\n    width: 100%;\n    height: 16px;\n    .MuiLinearProgress-barColorPrimary {\n      background-color: ${props => COLORS.camp[props.camp].background};\n    }\n  }\n`\n\nconst VoteText = styled(Typography)`\n  && {\n    font-size: 14px;\n    font-weight: 600;\n    .vote-percentage {\n      font-size: 12px;\n    }\n  }\n`\n\nconst DCCAElectionResult = props => {\n  const { electionResult } = props\n\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.io'\n\n  const sortedCandidates = electionResult.candidates.sort(\n    (a, b) => b.votes - a.votes\n  )\n\n  const [imageLoadError, setImageLoadError] = useState(true)\n\n  return (\n    <Container>\n      <Typography variant=\"h6\">\n        {electionResult.year}年 - {electionResult.name_zh}（\n        {electionResult.code}）\n      </Typography>\n      {sortedCandidates.map((candidate, index) => {\n        candidate.vote_percentage = (\n          (candidate.votes / electionResult.vote_sum) *\n          100\n        ).toFixed(1)\n        return (\n          <UnstyledNavLink\n            key={index}\n            to={`/profile/${candidate.person.name_zh ||\n              candidate.person.name_en}/${candidate.person.uuid}`}\n          >\n            <CandiateBox>\n              <CandidateAvatar>\n                <PeopleAvatar\n                  dimension=\"60px\"\n                  borderwidth={'3'}\n                  camp={getColorFromCamp(candidate.camp)}\n                  src={`${IMAGE_HOST_URI}/static/images/avatar/100x100/${candidate.person.uuid}.jpg`}\n                  imgProps={{\n                    onError: e => {\n                      // wingkwong: avoid infinite callbacks if fallback image fails\n                      if (imageLoadError) {\n                        setImageLoadError(false)\n                        e.target.src =\n                          IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                      }\n                    },\n                  }}\n                />\n                {candidate.candidate_number > 0 && (\n                  <CandidateNumber\n                    dimension=\"16px\"\n                    camp={getColorFromCamp(candidate.camp)}\n                  >\n                    {candidate.candidate_number}\n                  </CandidateNumber>\n                )}\n                {/* {candidate.is_won && 'win'} */}\n              </CandidateAvatar>\n              <CandidateName>\n                <Rows>\n                  <Typography variant=\"h5\" className=\"person-name\">\n                    {candidate.person.name_zh}\n                  </Typography>\n                </Rows>\n                <Rows>\n                  <Typography variant=\"body2\">\n                    {candidate.political_affiliation} （{candidate.camp}）\n                  </Typography>\n                </Rows>\n              </CandidateName>\n              <Columns>\n                {candidate.votes > 0 ? (\n                  <>\n                    <Rows>\n                      <VoteText>\n                        {formatNumber(candidate.votes)}票{' '}\n                        <span className=\"vote-percentage\">\n                          （{candidate.vote_percentage}%）\n                        </span>\n                      </VoteText>\n                    </Rows>\n                    <Rows>\n                      <VotePercentageBar\n                        variant=\"determinate\"\n                        camp={getColorFromCamp(candidate.camp)}\n                        value={\n                          (candidate.vote_percentage /\n                            sortedCandidates[0].vote_percentage) *\n                          100\n                        }\n                      />\n                    </Rows>\n                  </>\n                ) : (\n                  <Typography variant=\"h5\">自動當選</Typography>\n                )}\n              </Columns>\n            </CandiateBox>\n          </UnstyledNavLink>\n        )\n      })}\n    </Container>\n  )\n}\n\nexport default DCCAElectionResult\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { Typography } from '@material-ui/core'\nimport DCCAElectionResult from 'components/templates/DCCAElectionResult'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\nimport { getColorFromCamp } from 'utils/helper'\n\nconst DCCAElectionResultContainer = styled(Box)`\n  && {\n    padding: 0 16px;\n  }\n`\nconst CampText = styled.div`\n  && {\n    border-bottom: 2px ${props => COLORS.camp[props.camp].background} solid;\n    margin-bottom: 2px;\n  }\n`\n\nclass DCCAElectionHistories extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  createQuery(history) {\n    const queries = history.map(\n      ({ CACODE: code, year }) => `\n    dcd_constituencies_${year}_${code}: dcd_constituencies(where: { year: { _eq: $year${year} }, code: { _eq: $code${code} } }) {\n      code\n      year\n      name_zh\n      candidates(where: { year: { _eq: $year${year} }, cacode: { _eq: $code${code} } }) {\n        person {\n          name_zh\n          uuid\n        }\n        candidate_number\n        camp\n        votes\n        vote_percentage\n        is_won\n        political_affiliation\n      }\n    }\n    dcd_candidates_aggregate_${year}_${code}: dcd_candidates_aggregate(\n      where: { year: { _eq: $year${year} }, cacode: { _eq: $code${code} } }\n    ) {\n      aggregate {\n        sum {\n          votes\n        }\n      }\n    }\n`\n    )\n\n    const variables = history.reduce((obj, { CACODE: code, year }) => {\n      obj[`code${code}`] = code\n      obj[`year${year}`] = year\n      return obj\n    }, {})\n\n    const variableLine = Object.keys(variables).map(\n      key => `$${key}: ${key.startsWith('year') ? 'Int' : 'String'}!`\n    )\n\n    const query = gql`\n  query(${variableLine.join(', ')}) {\n    ${queries.join('\\n')}\n  }`\n    return {\n      query,\n      variables,\n    }\n  }\n\n  render() {\n    const { histories, presetTabIndex } = this.props\n    const filteredHistories = histories.filter(\n      history => history.year !== '2019'\n    )\n\n    const { query, variables } = this.createQuery(filteredHistories)\n\n    return (\n      <Query query={query} variables={variables}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const constituencies = []\n          const year_vote_sum = {}\n\n          const keys = Object.keys(data)\n          for (const key of keys) {\n            if (key.includes('dcd_constituencies')) {\n              constituencies.push(data[key][0])\n            }\n\n            if (key.includes('dcd_candidates_aggregate')) {\n              const year = key.split('_')[3]\n              year_vote_sum[year] = data[key].aggregate.sum\n            }\n          }\n\n          return (\n            <ScrollableTabs\n              tabnumber={\n                presetTabIndex < 0\n                  ? filteredHistories.length > 0\n                    ? filteredHistories.length - 1\n                    : 0\n                  : presetTabIndex\n              }\n              indicatorcolor={COLORS.main.primary}\n              variant=\"fullWidth\"\n              titles={constituencies.map(electionResult => {\n                return (\n                  <React.Fragment key={electionResult.year}>\n                    <CampText\n                      camp={getColorFromCamp(\n                        electionResult.candidates.find(candi => candi.is_won)\n                          .camp\n                      )}\n                    >\n                      {\n                        electionResult.candidates.find(candi => candi.is_won)\n                          .camp\n                      }\n                    </CampText>\n                    <Typography variant=\"body2\">\n                      {electionResult.year}\n                    </Typography>\n                  </React.Fragment>\n                )\n              })}\n            >\n              {constituencies.map(electionResult => {\n                electionResult.vote_sum =\n                  year_vote_sum[electionResult.year].votes\n                return (\n                  <DCCAElectionResultContainer key={electionResult.year}>\n                    <DCCAElectionResult electionResult={electionResult} />\n                  </DCCAElectionResultContainer>\n                )\n              })}\n            </ScrollableTabs>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default DCCAElectionHistories\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport DCCACompareMap from '../../DCCACompareMap'\nimport { Query } from 'react-apollo'\nimport MainAreas from 'components/district/MainAreas'\nimport CouncillorContainer from 'components/containers/CouncillorContainer'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\nimport DCCAOverview from 'components/district/DCCAOverview'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\nimport Collapse from '@material-ui/core/Collapse'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { PlainCard } from '../../molecules/Card'\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { Alert } from 'components/atoms/Alert'\nimport {\n  getDistrictOverviewUriFromTag,\n  getParameterByName,\n  withLanguage,\n} from 'utils/helper'\nimport {\n  getCentroidFromYearAndCode,\n  getAllFeaturesFromPoint,\n} from 'utils/features'\nimport DCCAElectionHistories from 'components/templates/DCCAElectionHistories'\nimport { withTranslation } from 'react-i18next'\n\nconst groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 16px 0;\n  }\n`\n\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\nconst ToggleMapButton = styled(UnstyledButton)`\n  && {\n    border-radius: 0;\n    width: 100%;\n    font-size: 14px;\n    text-align: center;\n  }\n`\n\nclass BattleGroundPage extends Component {\n  constructor(props) {\n    super(props)\n    const centroid = getCentroidFromYearAndCode(2019, props.match.params.code)\n    this.state = {\n      showMap: true,\n      currentPoint: {\n        lng: centroid[0],\n        lat: centroid[1],\n      },\n      selectedYear: null,\n      selectedCode: null,\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n\n    const { selectedYear, selectedCode } = this.state\n    if (\n      (selectedYear == null && selectedCode == null) ||\n      (year !== selectedYear || code !== selectedCode)\n    ) {\n      this.props.history.push(`/district/${year}/${code}`)\n    }\n  }\n\n  handleMapClick = coordinate => {\n    const point = {\n      lng: coordinate[0],\n      lat: coordinate[1],\n    }\n\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n    } = this.props\n    const { selectedYear, selectedCode } = this.state\n\n    var state = {\n      currentPoint: point,\n    }\n\n    if ((selectedYear == null) & (selectedCode == null)) {\n      state = {\n        ...state,\n        selectedYear: year,\n        selectedCode: code,\n      }\n    }\n\n    this.setState(state)\n  }\n\n  handleMapLoaded = props => {\n    const { centroid } = props\n    const point = {\n      lng: centroid[0],\n      lat: centroid[1],\n    }\n\n    this.setState({ currentPoint: point })\n  }\n  onPrevElection() {\n    const {\n      match: {\n        params: { code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const { showMap } = this.state\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n      location: { search },\n      t,\n    } = this.props\n\n    // Preset Tab for election history by matching query ?year=<year>\n    const queryYear = getParameterByName('year', search)\n    const presetTabIndex = ['2003', '2007', '2011', '2015'].findIndex(\n      year => year === queryYear\n    )\n\n    return (\n      <>\n        <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n          {({ loading, error, data }) => {\n            if (loading) return null\n            if (error) return `Error! ${error}`\n            const district = data.dcd_constituencies[0]\n            const previousDistricts = district.predecessors.filter(\n              district =>\n                district.intersect_area === null ||\n                district.intersect_area > 1000\n            )\n\n            const pointHistory = getAllFeaturesFromPoint(\n              this.state.currentPoint\n            )\n\n            const DCCAStatus =\n              district.tags &&\n              district.tags.find(tag => tag.type === 'boundary')\n\n            return (\n              <>\n                <BreadcrumbsContainer>\n                  <Breadcrumbs\n                    separator={<NavigateNextIcon fontSize=\"small\" />}\n                    aria-label=\"breadcrumb\"\n                  >\n                    <UnstyledLink\n                      onClick={() => {\n                        this.props.history.push(`/district/2019`)\n                      }}\n                    >\n                      <Typography color=\"textPrimary\"> {year}</Typography>\n                    </UnstyledLink>\n                    <UnstyledLink\n                      onClick={() => {\n                        this.props.history.push(\n                          getDistrictOverviewUriFromTag(\n                            district.district.dc_code\n                          )\n                        )\n                      }}\n                    >\n                      <Typography color=\"textPrimary\">\n                        {withLanguage(\n                          district.district.dc_name_en,\n                          district.district.dc_name_zh\n                        )}\n                      </Typography>\n                    </UnstyledLink>\n                    <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                      {withLanguage(district.name_en, district.name_zh)}（{code}\n                      ）\n                    </Typography>\n                  </Breadcrumbs>\n                </BreadcrumbsContainer>\n                {DCCAStatus && (\n                  <Alert>\n                    <Typography variant=\"h6\" gutterBottom>\n                      {DCCAStatus.tag === '改劃界'\n                        ? `此選區於2019年更改劃界`\n                        : `此選區為2019年${DCCAStatus.tag}`}\n                    </Typography>\n                  </Alert>\n                )}\n                <Container>\n                  <CandidatesContainer year={year} code={district.code} />\n                </Container>\n                <DCCAOverview\n                  year={year}\n                  dc_code={district.district.dc_code}\n                  code={district.code}\n                  tags={district.tags}\n                  voterData={groupVoteStat(district.vote_stats)}\n                  description={district.description}\n                />\n                {/* TODO Refactor style for ToggleMap Button */}\n                <ToggleMapButton\n                  onClick={() => this.setState({ showMap: !showMap })}\n                >\n                  {/* {showMap ? '隱藏地圖' : '顯示地圖'} */}\n                  {showMap\n                    ? t('battleground.button.hide')\n                    : t('battleground.button.show')}\n                  {showMap ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </ToggleMapButton>\n                <Collapse in={showMap}>\n                  <Box width={'100%'} height={{ sm: '300px', md: '400px' }}>\n                    <DCCACompareMap\n                      year={year}\n                      code={code}\n                      currentPoint={this.state.currentPoint}\n                      changeDistrict={this.handleChangeDistrict}\n                      handleMapClick={this.handleMapClick}\n                      handleMapLoaded={this.handleMapLoaded}\n                    />\n                  </Box>\n                </Collapse>\n                <MainAreas areas={district.main_areas || []} />\n\n                {DCCAStatus && (\n                  <Container>\n                    <Typography variant=\"h6\">\n                      {DCCAStatus.tag ===\n                      // '改劃界'\n                      t('battleground.alert.text1')\n                        ? // ? `此選區於2019年更改劃界`\n                          t('battleground.alert.text2')\n                        : // : `此選區為2019年${DCCAStatus.tag}`}\n                          `${t('battleground.alert.text3')} ${DCCAStatus.tag}`}\n                    </Typography>\n                  </Container>\n                )}\n                <DCCAElectionHistories\n                  histories={pointHistory}\n                  presetTabIndex={presetTabIndex}\n                />\n                <PlainCard>\n                  <Typography variant=\"h6\">\n                    {/* 現任區議員 */}\n                    {t('currentTerm.councilor')}\n                  </Typography>\n                  {previousDistricts.length > 1 && (\n                    <Typography variant=\"h6\">{`此區與上屆${previousDistricts.length}個選區重疊`}</Typography>\n                  )}\n                  {previousDistricts.map((d, index) => (\n                    <CouncillorContainer\n                      key={index}\n                      year={2015}\n                      code={d.predecessor.code}\n                    />\n                  ))}\n                </PlainCard>\n              </>\n            )\n          }}\n        </Query>\n      </>\n    )\n  }\n}\n\nexport default withTranslation()(BattleGroundPage)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { DefaultLink } from 'components/atoms/Link'\nimport { useTranslation } from 'react-i18next'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  const { t } = useTranslation()\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h5\">\n          {/* 關於候選人陣營 */}\n          {t('about.camp')}\n        </Typography>\n        <p>\n          {/* 候選人的政治陣營，反映他們對政治議題的看法。一般而言，每人對各項議題可持不同立場，難以用一兩個詞語概括候選人背景。 */}\n          {t('disclaimer.paragraph1')}\n        </p>\n\n        <Typography variant=\"h5\">\n          {/* 陣營分類（2019區議會選舉） */}\n          {t('disclaimer.header.text1')}\n        </Typography>\n\n        <p>\n          {/* 本屆區議會選舉的候選人政治陣營取自 */}\n          {t('disclaimer.paragraph2.segment1')}\n          <DefaultLink target=\"_blank\" href=\"https://hkfactcheck.io\">\n            {/* 選區事實處 */}\n            {t('thirdParty.dfo')}\n          </DefaultLink>\n          {/* \b，該網站收集大眾意見，並跟據以下資料綜合判斷： */}\n          {t('disclaimer.paragraph2.segment2')}\n        </p>\n        <ol>\n          <li>\n            {/* 最近申報之政治聯繫； */}\n            {t('disclaimer.list.item1')}\n          </li>\n          <li>\n            {/* 過往申報之政治聯繫； */}\n            {t('disclaimer.list.item2')}\n          </li>\n          <li>\n            {/* 該政治聯系於重大政治議題上的取態； */}\n            {t('disclaimer.list.item3')}\n          </li>\n          <li>\n            {/* 相關人士及其於重大政治議題上的取態； */}\n            {t('disclaimer.list.item4')}\n          </li>\n          <li>\n            {/* 本人於重大政治議題上的取態； */}\n            {t('disclaimer.list.item5')}\n          </li>\n          <li>\n            {/* 各媒體提及該人士時所使用的介紹文字； */}\n            {t('disclaimer.list.item6')}\n          </li>\n          <li>\n            {/* 與其他組織的關聯。 遇有爭議個案，一律以「其他/未清楚」取代。 */}\n            {t('disclaimer.list.item7')}\n          </li>\n        </ol>\n\n        <p>\n          {/* 如任何人分類有任何意見，歡迎反映或電郵至 */}\n          {t('disclaimer.paragraph3.segment1')}\n          <DefaultLink target=\"_blank\" href=\"mailto:hkfactcheck@gmail.com\">\n            mailto:hkfactcheck@gmail.com\n          </DefaultLink>\n          \b。\n        </p>\n\n        <Typography variant=\"h5\">\n          {/* 2019之前的陣營分類 */}\n          {t('disclaimer.header.text2')}\n        </Typography>\n\n        <p>\n          至於2019年以前之候選人陣營分類，則取自\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://github.com/initiummedia/hk_district_council_election\"\n          >\n            端傳媒於2017年整理之檔案\n          </DefaultLink>\n          ，本網站刊載前已盡力確保資料真確性，如有建議或錯漏，歡迎\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://forms.gle/irD6tEznWPNda6w59\"\n          >\n            反映\n          </DefaultLink>\n          或電郵至\n          <DefaultLink target=\"_blank\" href=\"mailto:chiangsumlui@gmail.com\">\n            chiangsumlui@gmail.com\n          </DefaultLink>\n          ，我們會盡快跟進。\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { useTranslation } from 'react-i18next'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    h4,\n    h5 {\n      font-weight: 600;\n    }\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  const { t } = useTranslation()\n\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h4\" gutterBottom>\n          {/* 區議會代表甚麼？ */}\n          {t('about.header1')}\n        </Typography>\n        <br />\n\n        <Typography variant=\"h5\">\n          {/* 參與地區事務討論 */}\n          {t('about.title1')}\n        </Typography>\n        <p>\n          {/* 政府會就地區政策諮詢區議會。以往曾有不成文規定，區議會反對的政策，政府不會呈上立法會，惟這個做法已非必然。雖然如此，在一些地區民生議題，如巴士路線和道路規劃等，區議會的意見仍能左右決策。 */}\n          {t('about.paragraph1')}\n        </p>\n\n        <Typography variant=\"h5\">\n          {/* 掌握每年千萬撥款 */}\n          {t('about.title2')}\n        </Typography>\n        <p>\n          {/* 未計算其他津貼，一般區議員的每月酬金為34,000元。在香港或不算高薪，但區議會可因應各項社區事務撥款，例如區內的小型工程，每區區議會每年便有大約2,000萬撥款可供調配。 */}\n          {t('about.paragraph2')}\n        </p>\n\n        <Typography variant=\"h5\">\n          {/* 123張選委入場券 */}\n          {t('about.title3')}\n        </Typography>\n        <p>\n          {/* 立法會選舉與特首選舉一直被質疑並非民主選舉。相較之下，撇除27個當然議席，452區議員全由市民選出，而區議會選舉的結果，亦會直接影響另外兩個選舉。 */}\n          {t('about.paragraph3')}\n        </p>\n\n        <p>\n          {/* 現時，立法會功能組別內有6名議員由區議會產生，分別是由全港區議員互選的「區議會（第一）」，以及5名由區議員參與及提名，再由不屬其他功能組別的市民選出的「區議會（第二）」，俗稱「超級區議會」。 */}\n          {t('about.paragraph4')}\n        </p>\n\n        <p>\n          {/* 另外，特首選委1,200人中，有117人屬「港九各區議會」(57人)及「新界各區議會」(60人)，由相應選區的區議會互選產生。值得注意的是，由於香港的政治陣營大致分為建制派及泛民主派，按以往情況，這些選委席位，均會由區議會佔半數以上的陣營全取。 */}\n          {t('about.paragraph5')}\n        </p>\n\n        <p>\n          {/* 加上6名立法會議員是當然選委，區議會選舉的結果，亦將左右10分1特首選委之爭。 */}\n          {t('about.paragraph6')}\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </>\n    )\n  }\n}\n\nexport default withStyles(NotFoundPage)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { DefaultLink } from 'components/atoms/Link'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst SupportUsPage = props => {\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h5\">我們是誰？</Typography>\n        <p>我們是一群香港人，相信開放數據及公民科技能推動社會進步。</p>\n        <p>\n          2019年4月，眾人於一次\n          <DefaultLink target=\"_blank\" href=\"https://g0vhk.io/\">\n            g0vhk\n          </DefaultLink>\n          舉辦的hackathon認識。為讓市民於選舉期間更掌握自己選區及未來代議士的資訊，我們於工餘抽空籌備此項目。\n        </p>\n        <br />\n        <Typography variant=\"h5\">關於 g0vhk</Typography>\n        <p>\n          <DefaultLink target=\"_blank\" href=\"https://g0vhk.io/\">\n            g0vhk\n          </DefaultLink>{' '}\n          受台灣「零時政府」（g0v.tw）的理念啟發，目標是以技術解決社會問題，以項目形式推動社會進步。以開放數據為例，編寫開放源碼程式\n          (Open Source Program) 或群眾外包 (Crowd Sourcing)\n          ，令不同範疇的數據更透明，解決資訊不流通問題，提升公民的知情權。\n        </p>\n        <br />\n        <Typography variant=\"h5\">支持g0vhk</Typography>\n        <p>\n          你的捐款，有助g0vhk\n          舉辦更多活動，推廣公民科技，同時為未來的項目提供起動資金。本網站亦於g0vhk贊助的服務器運行，收到的捐款有一部份將用補貼雲端服務的支出。\n        </p>\n        <p>\n          如你認同g0vhk的理念，請到\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://www.collaction.hk/s/g0vhk/fund\"\n          >\n            collaction\n          </DefaultLink>\n          小額捐款\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default SupportUsPage\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport ShareIcon from '@material-ui/icons/Share'\nimport CopyIcon from '@material-ui/icons/Link'\nimport styled from 'styled-components'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { getCurrentUrl } from 'utils/helper'\nimport {\n  FacebookShareButton,\n  TelegramShareButton,\n  WhatsappShareButton,\n  TwitterShareButton,\n  FacebookIcon,\n  TelegramIcon,\n  WhatsappIcon,\n  TwitterIcon,\n} from 'react-share'\n\nconst RightIconButton = styled(IconButton)`\n  && {\n    position: absolute;\n    right: 0;\n  }\n`\n\nconst StyledCopyIcon = styled(CopyIcon)`\n  && {\n    width: 32px;\n    height: 32px;\n  }\n`\n\nfunction getShareUrl(url, platform) {\n  return updateUrlParameter(\n    updateUrlParameter(url, 'utm_source', platform),\n    'utm_medium',\n    'social_share'\n  )\n}\n\n// https://gist.github.com/niyazpk/f8ac616f181f6042d1e0\nfunction updateUrlParameter(uri, key, value) {\n  // remove the hash part before operating on the uri\n  var i = uri.indexOf('#')\n  var hash = i === -1 ? '' : uri.substr(i)\n  uri = i === -1 ? uri : uri.substr(0, i)\n\n  var re = new RegExp('([?&])' + key + '=.*?(&|$)', 'i')\n  var separator = uri.indexOf('?') !== -1 ? '&' : '?'\n\n  if (!value) {\n    // remove key-value pair if value is empty\n    uri = uri.replace(new RegExp('([?&]?)' + key + '=[^&]*', 'i'), '')\n    if (uri.slice(-1) === '?') {\n      uri = uri.slice(0, -1)\n    }\n    // replace first occurrence of & by ? if no ? is present\n    if (uri.indexOf('?') === -1) uri = uri.replace(/&/, '?')\n  } else if (uri.match(re)) {\n    uri = uri.replace(re, '$1' + key + '=' + value + '$2')\n  } else {\n    uri = uri + separator + key + '=' + value\n  }\n  return uri + hash\n}\n\nfunction ShareButton(props) {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n\n  const handleShareButtonClick = event => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleShareButtonClose = () => {\n    setAnchorEl(null)\n  }\n\n  const url = getCurrentUrl()\n\n  return (\n    <>\n      <RightIconButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Share\"\n        aria-controls=\"share-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleShareButtonClick}\n      >\n        <ShareIcon />\n      </RightIconButton>\n      <Menu\n        id=\"share-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleShareButtonClose}\n      >\n        <MenuItem>\n          <FacebookShareButton\n            url={getShareUrl(url, 'facebook')}\n            children={<FacebookIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <TelegramShareButton\n            url={getShareUrl(url, 'telegram')}\n            children={<TelegramIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <WhatsappShareButton\n            url={getShareUrl(url, 'whatsapp')}\n            children={<WhatsappIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <TwitterShareButton\n            url={getShareUrl(url, 'twitter')}\n            children={<TwitterIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <StyledCopyIcon\n            onClick={() => {\n              navigator.clipboard.writeText(url)\n            }}\n          />\n        </MenuItem>\n      </Menu>\n    </>\n  )\n}\n\nexport default ShareButton\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport ShareButton from './ShareButton'\nimport { fireEvent } from 'utils/ga_fireevent'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    background: white;\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst AppBarTitle = styled(UnstyledNavLink)`\n  && {\n    left: auto;\n    right: auto;\n    width: 100%;\n    position: absolute;\n  }\n`\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\">\n        <Toolbar disableGutters>\n          <AppBarTitle to={'/'}>\n            <Typography variant=\"h1\" align=\"center\">\n              <span role=\"img\" aria-label=\"Vote4.hk ✋🏻💜⚡\">\n                Vote4.hk ✋🏻💜⚡\n              </span>\n            </Typography>\n          </AppBarTitle>\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Search\"\n            onClick={() => {\n              dispatch({ type: DRAWER_OPEN })\n              fireEvent({\n                ca: 'general',\n                ac: 'click',\n                lb: 'menu_drawer',\n              })\n            }}\n          >\n            <MenuIcon />\n          </IconButton>\n          <ShareButton\n            onClick={() =>\n              fireEvent({\n                ca: 'general',\n                ac: 'click',\n                lb: 'share_button',\n              })\n            }\n          />\n        </Toolbar>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React from 'react'\nimport { Typography } from '@material-ui/core'\nimport { useTranslation } from 'react-i18next'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nconst DisclaimerContainer = styled.div`\n  && {\n    a {\n      text-decoration: unset;\n      color: ${COLORS.main.primary};\n      font-weight: 500;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n  }\n`\n\nexport const Disclaimer = props => {\n  const { t } = useTranslation()\n  return (\n    <DisclaimerContainer>\n      <Typography variant=\"body2\" gutterBottom>\n        {/* 本網站與任何2019年區議會選舉候選人或其助選成員無關，刊載資料目的非為促使或阻礙任何候選人在選舉中當選。 */}\n        {t('disclaimer.segment.text1')}\n      </Typography>\n      <Typography variant=\"body2\">\n        <span\n          dangerouslySetInnerHTML={{ __html: t('disclaimer.segment.source') }}\n        />\n        <span\n          dangerouslySetInnerHTML={{ __html: t('disclaimer.segment.report') }}\n        />\n      </Typography>\n    </DisclaimerContainer>\n  )\n}\n","import React from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Divider from '@material-ui/core/Divider'\nimport { UnstyledLink, DefaultLink } from 'components/atoms/Link'\nimport Columns from 'components/atoms/Columns'\nimport { withRouter } from 'react-router-dom'\nimport { Disclaimer } from 'components/templates/Disclaimer'\nimport { useTranslation } from 'react-i18next'\n\nconst StyledFooter = styled(Box)`\n  && {\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n    padding: 16px;\n  }\n`\n\nconst StyledDivider = styled(Divider)`\n  && {\n    margin: 16px 0;\n  }\n`\n\nconst StyledFooterLink = styled(UnstyledLink)`\n  && {\n    color: rgba(0, 0, 0, 0.87);\n  }\n`\n\nconst LinkBox = styled(Box)`\n  && {\n    margin: 8px 16px 8px 0;\n    word-break: keep-all;\n    overflow: hidden;\n  }\n`\n\nfunction Footer(props) {\n  const { t } = useTranslation()\n  return (\n    <>\n      <StyledFooter>\n        <StyledDivider />\n        <Disclaimer />\n        <StyledDivider />\n        <Columns>\n          <LinkBox>\n            <DefaultLink\n              onClick={\n                () => props.history.push(`/about-us`)\n                // console.log(props)\n              }\n            >\n              {t('about.support_us')}\n            </DefaultLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://www.facebook.com/g0vhk.io\"\n            >\n              g0vhk.io\n            </StyledFooterLink>\n          </LinkBox>\n\n          <LinkBox>\n            <StyledFooterLink\n              onClick={\n                () => props.history.push(`/disclaimer`)\n                // console.log(props)\n              }\n            >\n              {/* 關於候選人陣營 */}\n              {t('about.camp')}\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://forms.gle/irD6tEznWPNda6w59\"\n            >\n              {/* 反映意見 */}\n              {t('about.feedback')}\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://github.com/cswbrian/district-councils-dashboard\"\n            >\n              GitHub\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink target=\"_blank\" href=\"https://hkfactcheck.io/\">\n              {/* 選區事實處 */}\n              {t('thirdParty.dfo')}\n            </StyledFooterLink>\n          </LinkBox>\n\n          <LinkBox>\n            <div\n              className=\"fb-like\"\n              data-href=\"https://g0vhk.io\"\n              data-width=\"\"\n              data-layout=\"button\"\n              data-action=\"like\"\n              data-size=\"small\"\n              data-show-faces=\"false\"\n              data-share=\"false\"\n            ></div>\n            &nbsp;&nbsp;&nbsp;\n            <div\n              className=\"fb-share-button\"\n              data-href=\"https://dc2019.g0vhk.io\"\n              data-layout=\"button_count\"\n              data-size=\"small\"\n            >\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fvote4.hk%2F&amp;src=sdkpreparse\"\n                className=\"fb-xfbml-parse-ignore\"\n              >\n                Share\n              </a>\n            </div>\n          </LinkBox>\n        </Columns>\n      </StyledFooter>\n    </>\n  )\n}\n\nexport default withRouter(Footer)\n","import React from 'react'\nimport GoogleAnalytics from 'react-ga'\nimport ReactPixel from 'react-facebook-pixel'\n\nconst trackingId = process.env.REACT_APP_GA_TRACKING_ID\nif (!trackingId) {\n  throw new Error(\n    'Invalid google tracking ID. or set to UA-000000-01 if you dont have any'\n  )\n}\nconst fbPixelTrackingID = process.env.REACT_APP_FACEBOOK_TRACKING_ID\nif (!fbPixelTrackingID) {\n  throw new Error('Invalid facebook pixel tracking ID.')\n}\nGoogleAnalytics.initialize(trackingId)\n\nconst fbPixelAdvancedMatching = {}\nconst fbPixelOptions = {\n  autoConfig: true,\n  debug: false,\n}\nReactPixel.init(fbPixelTrackingID, fbPixelAdvancedMatching, fbPixelOptions)\n\nconst withTracker = (WrappedComponent, options = {}) => {\n  const trackPage = page => {\n    GoogleAnalytics.set({\n      page,\n      ...options,\n    })\n    GoogleAnalytics.pageview(page)\n\n    ReactPixel.pageView()\n  }\n\n  const HOC = class extends React.Component {\n    componentDidMount() {\n      const page = this.props.location.pathname\n      trackPage(page)\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const currentPage = this.props.location.pathname\n      const nextPage = nextProps.location.pathname\n\n      if (currentPage !== nextPage) {\n        trackPage(nextPage)\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />\n    }\n  }\n\n  return HOC\n}\n\nexport default withTracker\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport SearchTab from 'components/organisms/SearchTab'\nimport Typography from '@material-ui/core/Typography'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport { useTranslation } from 'react-i18next'\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst LeftMargin = styled(ExpandedRow)`\n  && {\n    min-height: 48px;\n    align-items: center;\n    padding: 0 16px 0 16px;\n    cursor: pointer;\n  }\n`\nconst SearchMenu = props => {\n  const { t } = useTranslation()\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  function goToPage(route) {\n    props.history.push(route)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  return (\n    <>\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/')}\n        >\n          {/* 返回首頁 */}\n          {t('searchMenu.text1')}\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/district/2019')}\n        >\n          {/* 全港選區一覽 */}\n          {t('searchMenu.text2')}\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/about-dc')}\n        >\n          {/* 關於區議會選舉 */}\n          {t('searchMenu.text3')}\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() =>\n            (window.location.href =\n              'https://docs.google.com/forms/u/1/d/e/1FAIpQLSdXtbdry3w8hkmZuN0MJaj2CP2X3RUUnCTWLnOujsfx1pHDrw/viewform?usp=send_form')\n          }\n        >\n          {/* TODO: i18n */}\n          {/* 反映意見 */}\n          {t('searchMenu.feedback')}\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"primary\"\n          onClick={() => goToPage('/about-us')}\n        >\n          {/* 我們是誰？ */}\n          {t('about.support_us')}\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <SearchTab />\n      </LeftMargin>\n    </>\n  )\n}\n\nexport default withRouter(SearchMenu)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Drawer from '@material-ui/core/Drawer'\n\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport SearchMenu from 'components/organisms/SearchMenu'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst MenuContainer = styled(Box)`\n  && {\n    margin-top: 48px;\n    display: flex;\n    width: 100%;\n    flex-flow: column;\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    padding: 12px;\n  }\n`\n\nconst useStyles = makeStyles(theme => ({\n  drawerPaper: {\n    width: '500px',\n    maxWidth: '100%',\n  },\n}))\n\nfunction AppDrawer(props) {\n  const {\n    drawer: { dispatch, state },\n  } = React.useContext(ContextStore)\n  const classes = useStyles()\n\n  return (\n    <Drawer\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n      anchor=\"left\"\n      open={state.open}\n      variant=\"persistent\"\n    >\n      <Container>\n        <NavBarButton\n          color=\"inherit\"\n          component=\"span\"\n          aria-label=\"Menu\"\n          onClick={() => {\n            dispatch({ type: DRAWER_CLOSE })\n          }}\n        >\n          <CloseIcon fontSize=\"small\" />\n        </NavBarButton>\n        <MenuContainer>\n          <SearchMenu />\n        </MenuContainer>\n      </Container>\n    </Drawer>\n  )\n}\n\nexport default withRouter(AppDrawer)\n","import React, { Component, useState } from 'react'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { withRouter } from 'react-router-dom'\nimport { Box, Grid } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { getColorFromCamp } from 'utils/helper'\nimport { COLORS } from 'ui/theme'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableCell from '@material-ui/core/TableCell'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport { useTranslation } from 'react-i18next'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst CandidateNumber = styled(Box)`\n  && {\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst StyledTableCell = styled(TableCell)`\n  && {\n    padding: 6px 6px 6px 12px;\n  }\n`\n\nconst StyledTableRow = styled(TableRow)`\n  && {\n    cursor: pointer;\n    padding: 0 10px;\n    td {\n      color: ${props => props.textcolor || 'black'};\n    }\n  }\n`\n// const StyledCandidateTags = styled(CandidateTags)`\n//   && {\n//     display: inline;\n//     margin-left: 2px;\n//   }\n// `\n\nconst CandidateGrid = props => {\n  const { candidate } = props\n  const { t } = useTranslation()\n  const [imageLoadError, setImageLoadError] = useState(true)\n\n  return (\n    <Grid\n      container\n      direction=\"row\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={1}\n      style={{ minWidth: '140px', flexFlow: 'nowrap' }}\n    >\n      {candidate.candidate_number > 0 && (\n        <Grid item>\n          <CandidateNumber\n            item\n            key={candidate.candidate_number}\n            dimension=\"18px\"\n            camp={getColorFromCamp(candidate.camp)}\n          >\n            {candidate.candidate_number}\n          </CandidateNumber>\n        </Grid>\n      )}\n      <Grid item>\n        <PeopleAvatar\n          dimension=\"40px\"\n          borderwidth={2}\n          camp={getColorFromCamp(candidate.camp)}\n          src={`${IMAGE_HOST_URI}/static/images/avatar/100x100/${candidate.person.uuid}.jpg`}\n          imgProps={{\n            onError: e => {\n              // wingkwong: avoid infinite callbacks if fallback image fails\n              if (imageLoadError) {\n                setImageLoadError(false)\n                e.target.src =\n                  IMAGE_HOST_URI + '/static/images/avatar/default.png'\n              }\n            },\n          }}\n          opacity={candidate.nominate_status === 'disqualified' ? 0.1 : 1}\n        />\n      </Grid>\n      <Grid item>\n        {candidate.person.name_zh || candidate.person.name_en}\n        {candidate.tags.findIndex(\n          tag => tag.type === 'camp' && tag.tag === '有爭議'\n        ) > -1 && (\n          <HtmlTooltip\n            disableFocusListener\n            disableTouchListener\n            // text=\"侯選人政治立場未明\"\n            text={t('candidate.noPoliticalAffiliation')}\n            placement=\"bottom\"\n            size={16}\n          />\n        )}\n        {candidate.nominate_status === 'disqualified' && (\n          <>\n            <br />\n            <span>\n              {/* (取消資格) */}\n              {t('candidate.nominateStatus.disqualified_bracket')}\n            </span>\n          </>\n        )}\n        {candidate.nominate_status === 'suspended' && (\n          <>\n            <br />\n            <span>\n              {/* (棄選) */}\n              {t('candidate.nominateStatus.suspended_bracket')}\n            </span>\n          </>\n        )}\n        {candidate.tags.findIndex(\n          tag => tag.type === 'demo_status' && tag.tag === 'planb'\n        ) > -1 && (\n          <>\n            <br />\n            <span>{t('candidate.nominateStatus.demo_planb_bracket')}</span>\n          </>\n        )}\n      </Grid>\n    </Grid>\n  )\n}\n\nclass CandidatesTableContent extends Component {\n  matchCamp(candidate, showDemocracy, showEstablishment, showOthers) {\n    if (showDemocracy && candidate.camp === '民主') return true\n    if (showEstablishment && candidate.camp === '建制') return true\n    if (showOthers && candidate.camp === '其他') return true\n    return false\n  }\n\n  render() {\n    const { props, matchCamp } = this\n    const { candidates, showEstablishment, showDemocracy, showOthers } = props\n    return (\n      <>\n        {candidates\n          .filter(candidate =>\n            matchCamp(candidate, showDemocracy, showEstablishment, showOthers)\n          )\n          .map(candidate => (\n            <StyledTableRow\n              key={candidate.person.id}\n              onClick={() => {\n                props.history.push(\n                  `/profile/${candidate.person.name_zh ||\n                    candidate.person.name_en}/${candidate.person.uuid}`\n                )\n              }}\n              textcolor={\n                candidate.nominate_status === 'disqualified' ||\n                candidate.nominate_status === 'suspended'\n                  ? 'grey'\n                  : 'black'\n              }\n            >\n              <StyledTableCell>\n                <CandidateGrid\n                  key={candidate.person.id}\n                  candidate={candidate}\n                />\n              </StyledTableCell>\n              <StyledTableCell>\n                {candidate.person.related_organization || '-'}\n              </StyledTableCell>\n              <StyledTableCell>\n                {candidate.political_affiliation || '-'}\n              </StyledTableCell>\n            </StyledTableRow>\n          ))}\n      </>\n    )\n  }\n}\n\nexport default withRouter(CandidatesTableContent)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport CandidatesTableContent from 'components/molecules/candidate/CandidatesTableContent'\nimport { TableRow, TableCell, Box, Typography } from '@material-ui/core'\nimport { getConstituencyTagsByCandidateCamps, withLanguage } from 'utils/helper'\nimport { SecondaryTag } from 'components/atoms/Tag'\nimport { SeperatedColumns } from 'components/atoms/Columns'\n\nconst ConstituencyNameTableRow = styled(TableRow)`\n  && {\n    cursor: pointer;\n  }\n`\n\nconst StyledSecondaryTag = styled(SecondaryTag)`\n  && {\n    margin-left: 8px;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n  }\n`\n\nconst ConstituencyTableContent = props => {\n  const {\n    year,\n    constituency,\n    showEstablishment,\n    showDemocracy,\n    showBlank,\n    showOthers,\n  } = props\n  const tags = getConstituencyTagsByCandidateCamps(constituency.candidates)\n\n  return (\n    <>\n      <ConstituencyNameTableRow\n        onClick={() => {\n          props.history.push(`/district/${year}/${constituency.code}`)\n        }}\n      >\n        <TableCell colSpan={5}>\n          <SeperatedColumns>\n            <Typography variant=\"h6\">\n              {withLanguage(constituency.name_en, constituency.name_zh)}（\n              {constituency.code}）\n            </Typography>\n            <TagContainer>\n              {tags.length > 0 &&\n                tags.map((tag, index) => (\n                  <StyledSecondaryTag value={tag} key={index} />\n                ))}\n            </TagContainer>\n          </SeperatedColumns>\n        </TableCell>\n      </ConstituencyNameTableRow>\n      <CandidatesTableContent\n        candidates={constituency.candidates}\n        year={year}\n        showEstablishment={showEstablishment}\n        showDemocracy={showDemocracy}\n        showBlank={showBlank}\n        showOthers={showOthers}\n      />\n    </>\n  )\n}\n\nexport default withRouter(ConstituencyTableContent)\n","import React from 'react'\nimport ConstituencyTableContent from 'components/molecules/constituency/ConstituencyTableContent'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport TableCell from '@material-ui/core/TableCell'\nimport { Typography } from '@material-ui/core'\nimport TableRow from '@material-ui/core/TableRow'\nimport { useTranslation } from 'react-i18next'\nimport { withLanguage } from 'utils/helper'\n\nconst DistrictNameTableRow = styled(TableRow)`\n  && {\n    cursor: pointer;\n  }\n`\n\nconst DistrictTableContent = props => {\n  const {\n    district,\n    year,\n    showEstablishment,\n    showDemocracy,\n    showBlank,\n    showOthers,\n  } = props\n\n  const { t } = useTranslation()\n  return (\n    <>\n      <DistrictNameTableRow\n        onClick={() => {\n          props.history.push(`/district/${year}/${district.dc_code}`)\n        }}\n      >\n        <TableCell colSpan={5}>\n          <Typography variant=\"h4\">\n            {withLanguage(district.dc_name_en, district.dc_name_zh)}\n          </Typography>\n          <Typography variant=\"body2\" gutterBottom>\n            {t('no_of_districts', { n: district.constituencies.length })}\n          </Typography>\n          {district.dc_description_zh && (\n            <Typography variant=\"body1\">\n              {district.dc_description_zh}\n            </Typography>\n          )}\n        </TableCell>\n      </DistrictNameTableRow>\n      {district.constituencies.map(constituency => {\n        return (\n          <ConstituencyTableContent\n            key={constituency.id}\n            constituency={constituency}\n            year={year}\n            showEstablishment={showEstablishment}\n            showDemocracy={showDemocracy}\n            showBlank={showBlank}\n            showOthers={showOthers}\n          />\n        )\n      })}\n    </>\n  )\n}\n\nexport default withRouter(DistrictTableContent)\n","import Box from '@material-ui/core/Box'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport { withStyles } from '@material-ui/core/styles'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport { COLORS } from 'ui/theme'\nimport React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\n\nconst styles = {\n  establishment: {\n    '& svg': {\n      fill: COLORS.camp['establishment'].background,\n    },\n  },\n  democracy: {\n    '& svg': {\n      fill: COLORS.camp['democracy'].background,\n    },\n  },\n  others: {\n    '& svg': {\n      fill: COLORS.camp['other'].background,\n    },\n  },\n}\n\nclass CampSelector extends Component {\n  constructor(props) {\n    super(props)\n    const { classes } = props\n    this.camps = [\n      {\n        name: 'democracy',\n        text: '民主',\n        color: 'asdf',\n        className: classes.democracy,\n      },\n      { name: 'establishment', text: '建制', className: classes.establishment },\n      { name: 'others', text: '其他', className: classes.others },\n    ]\n    this.state = {\n      checked: {\n        democracy: true,\n        establishment: true,\n        others: true,\n      },\n    }\n  }\n\n  handleChange(evt) {\n    const checked = this.state.checked\n    const name = evt.target.value\n    checked[name] = evt.target.checked\n    this.setState({ ...this.state, checked: checked })\n    const { onChange } = this.props\n    if (onChange) {\n      onChange(\n        this.state.checked.democracy,\n        this.state.checked.establishment,\n        this.state.checked.others\n      )\n    }\n  }\n\n  render() {\n    const { state } = this\n    const { t } = this.props\n    return (\n      <div>\n        <FormGroup row>\n          <Box m={2} />\n          <FormControlLabel\n            control={<div></div>}\n            // label=\"顯示：\"\n            label={t('show')}\n          />\n          {this.camps.map(c => (\n            <FormControlLabel\n              control={\n                <Checkbox\n                  className={c.className}\n                  checked={state.checked[c.name]}\n                  value={c.name}\n                  onChange={this.handleChange.bind(this)}\n                />\n              }\n              label={c.text}\n            />\n          ))}\n        </FormGroup>\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(withTranslation()(CampSelector))\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport DistrictTableContent from 'components/molecules/district/DistrictTableContent'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableRow from '@material-ui/core/TableRow'\nimport { debounce } from 'lodash'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport CampSelector from 'components/atoms/CampSelector'\nimport { Loading } from 'components/atoms/Loading'\nimport styled from 'styled-components'\nimport { withTranslation } from 'react-i18next'\n\nconst StyledTableCell = styled(TableCell)`\n  && {\n    padding: 6px 0px 6px 16px;\n    :last-child {\n      padding: 6px 0px 6px 16px;\n    }\n    line-height: 1rem;\n  }\n`\n\nconst StyledLoading = styled(Loading)`\n  && {\n    height: auto;\n    margin: 20px auto;\n    transform: scale(0.5);\n  }\n`\n\nclass DistrictsTable extends Component {\n  static propTypes = {\n    districts: PropTypes.array.isRequired,\n    year: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      checked: {\n        democracy: true,\n        establishment: true,\n        others: true,\n        blank: true,\n      },\n      toIndex: 0,\n      isLoading: true,\n    }\n  }\n\n  componentDidMount() {\n    const { districts } = this.props\n\n    const addDistrict = index => {\n      this.setState({\n        toIndex: index,\n      })\n    }\n\n    const scrollHandler = debounce(event => {\n      if (\n        window.innerHeight + event.target.scrollTop >=\n        event.target.firstChild.clientHeight\n      ) {\n        let index = this.state.toIndex\n        if (index < districts.length) {\n          addDistrict(++index)\n        } else {\n          this.setState({\n            isLoading: false,\n          })\n        }\n      }\n    }, 200).bind(this)\n\n    addDistrict(1)\n    document\n      .querySelector('#contentContainer')\n      .addEventListener('scroll', scrollHandler)\n  }\n\n  handleChange(democracy, establishment, others, blank) {\n    const checked = { democracy, establishment, others, blank }\n    this.setState({ ...this.state, checked: checked })\n  }\n\n  loadDistricts(toIndex) {\n    const { districts, year } = this.props\n    const { democracy, establishment, others, blank } = this.state.checked\n    const districtsArray = districts.filter(\n      (district, index) => index <= toIndex\n    )\n    return districtsArray.map(district => (\n      <DistrictTableContent\n        showEstablishment={establishment}\n        showDemocracy={democracy}\n        showOthers={others}\n        showBlank={blank}\n        key={district.dc_code}\n        district={district}\n        year={year}\n      />\n    ))\n  }\n\n  render() {\n    const { t } = this.props\n\n    return (\n      <div>\n        <CampSelector onChange={this.handleChange.bind(this)} />\n        <Table id=\"districtsTable\" size=\"small\" onScroll={this.handleScroll}>\n          <TableHead>\n            <TableRow>\n              <StyledTableCell>\n                {/* 候選人 */}\n                {t('candidates')}\n              </StyledTableCell>\n              <StyledTableCell>\n                {/* 相關組織{' '} */}\n                {t('relatedOrganizations')}{' '}\n                <HtmlTooltip\n                  disableFocusListener\n                  disableTouchListener\n                  // text=\"候選人或議員的所屬政黨或社區組織，來源綜合媒體報道\"\n                  text={t('relatedOrganizations.tips')}\n                  placement=\"bottom\"\n                  size={20}\n                />\n              </StyledTableCell>\n              <StyledTableCell>\n                {/* 報稱政治聯繫{' '} */}\n                {t('reportedPoliticalAffiliation')}{' '}\n                <HtmlTooltip\n                  disableFocusListener\n                  disableTouchListener\n                  // text=\"根據候選人提名表格上所填報的政治聯繫\"\n                  text={t('reportedPoliticalAffiliation.tips')}\n                  placement=\"bottom\"\n                  size={20}\n                />\n              </StyledTableCell>\n              {/* <TableCell>得票</TableCell> */}\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.loadDistricts(this.state.toIndex)}</TableBody>\n        </Table>\n        {this.state.isLoading && <StyledLoading />}\n      </div>\n    )\n  }\n}\n\nexport default withTranslation()(DistrictsTable)\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from 'constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/atoms/charts/StackedNormalizedHorizontalBarChart'\nimport PredictionChartPanel from 'components/organisms/PredictionChartPanel'\nimport LoadingButton from 'components/molecules/LoadingButton'\nimport Text from 'components/atoms/Text'\nimport axios from 'axios'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\nimport { DefaultLink } from 'components/atoms/Link'\nimport { fireEvent } from 'utils/ga_fireevent'\n\nconst Container = styled.div`\n  && {\n    position: relative;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    padding: 0 16px 32px;\n  }\n`\n\nconst PredictionChartHeader = styled(Box)`\n  && {\n    display: block;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst StyledLoadingButton = styled(LoadingButton)`\n  && {\n    position: absolute;\n    width: 100px;\n    right: 16px;\n    bottom: 0px;\n    padding: 0px;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    :hover {\n      color: ${COLORS.main.primary};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!, $dcode: String!) {\n    dcd_candidates(\n      where: {\n        is_won: { _eq: true }\n        year: { _eq: $year }\n        cacode: { _like: $dcode }\n      }\n    ) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data, sortFunc) {\n  const res = {\n    data: data\n      .map(d => {\n        return {\n          name: DCREGION[d.code].zh_hk,\n          建制: DCREGION[d.code].unelected_dc_seat + (d.count['建制'] || 0), // 當然議員\n          民主: d.count['民主'] || 0,\n          其他: d.count['其他'] || 0,\n          total: Object.values(d.count).reduce((acc, c) => {\n            acc += c\n            return acc\n          }, 0),\n        }\n      })\n      .sort(\n        sortFunc\n          ? sortFunc\n          : (a, b) => b['建制'] / b.total - a['建制'] / a.total\n      ), // default sort by established count\n    columns: ['name', '建制', '其他', '民主'],\n  }\n  return res\n}\n\nconst sortByDefaultChartOrderFunc = defaultChartData => (a, b) => {\n  const indexFromOriginalChartData = record => {\n    let index = defaultChartData.length\n    defaultChartData.data.forEach((v, i) => {\n      if (v.name === record.name) {\n        index = i\n        return i\n      }\n    })\n    return index\n  }\n  return indexFromOriginalChartData(a) - indexFromOriginalChartData(b)\n}\n\n// const AGE_GROUP_YOUNG = ['18-20', '21-25', '26-30']\nconst AGE_GROUP_MIDDLE = ['31-35', '36-40', '41-45', '46-50', '51-55', '56-60']\nconst AGE_GROUP_OLD = ['61-65', '66-70', '71+']\n\nconst STAT_TYPE_NEW_VOTERS = 'NEW_VOTERS'\nconst STAT_TYPE_ALL_VOTERS = 'VOTERS'\n\nconst groupExpectDataByRegionAndCamp = (constituencies, settings) => {\n  const getVoteCountBySetting = (stat, camp, settings) => {\n    let settingIndex = 0\n    if (AGE_GROUP_MIDDLE.indexOf(stat.category_2) >= 0) {\n      settingIndex = 1\n    } else if (AGE_GROUP_OLD.indexOf(stat.category_2) >= 0) {\n      settingIndex = 2\n    }\n\n    const votePercentage = settings.vote_rate[settingIndex] / 100.0\n    let yellowPercentage = settings.camp_rate[settingIndex] / 100.0\n    if (camp === '建制') {\n      yellowPercentage = 1 - yellowPercentage\n    } else if (camp === '其他') {\n      yellowPercentage = 0 // TODO: how to calculate this?\n    }\n\n    return stat.count * yellowPercentage * votePercentage\n  }\n  const getProjectedVotes = (type, camp, settings, voteStats) => {\n    return voteStats\n      .filter(s => s.subtype === type)\n      .map(s => getVoteCountBySetting(s, camp, settings))\n      .reduce((c, v) => c + v, 0)\n  }\n  // First calculate the winner\n  const expectedResult = constituencies.map(constituency => {\n    let camp = '建制' // default camp = 建制 is this good?\n\n    if (\n      constituency.predecessors &&\n      constituency.predecessors.length > 0 &&\n      settings.config.reference_last_election\n    ) {\n      // if there is predecessor, we use only the new voters\n\n      if (\n        constituency.predecessors[0].predecessor.candidates.length === 1 &&\n        settings.config.auto_won_add_components\n      ) {\n        const camps = ['民主', '建制', '其他']\n        const onlyCandidate =\n          constituency.predecessors[0].predecessor.candidates[0]\n        camps.forEach(camp => {\n          // mock the votes for the last election\n          const votes =\n            getProjectedVotes(\n              STAT_TYPE_ALL_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            ) -\n            getProjectedVotes(\n              STAT_TYPE_NEW_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            )\n\n          if (onlyCandidate.camp !== camp) {\n            constituency.predecessors[0].predecessor.candidates.push({\n              camp,\n              votes,\n              mock: true,\n            })\n          } else {\n            onlyCandidate.votes = votes\n          }\n        })\n      }\n      let maxVote = 0\n      constituency.predecessors[0].predecessor.candidates.forEach(c => {\n        const projectedVotes =\n          c.votes +\n          getProjectedVotes(\n            STAT_TYPE_NEW_VOTERS,\n            c.camp,\n            settings,\n            constituency.vote_stats\n          )\n        if (\n          projectedVotes >= maxVote &&\n          (!c.mock || settings.config.auto_won_add_components)\n        ) {\n          camp = c.camp\n          maxVote = projectedVotes\n        }\n      })\n    } else {\n      // else we calculate from all voters\n      const establishCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '建制',\n        settings,\n        constituency.vote_stats\n      )\n      const democracyCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '民主',\n        settings,\n        constituency.vote_stats\n      )\n      if (democracyCount > establishCount) {\n        camp = '民主'\n      }\n    }\n\n    return {\n      cacode: constituency.code,\n      camp,\n    }\n  })\n  const byCodes = _.groupBy(expectedResult, c => c.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nconst DistrictCampCompareChartContainer = props => {\n  const { className, code } = props\n  const [predictEnabled, setPredictEnabled] = React.useState(false)\n  const [isLoadingPrediction, setIsLoadingPrediction] = React.useState(true)\n  const [predictoinData, setPredictionData] = React.useState({})\n  const [settings, setSettings] = React.useState({\n    config: {\n      auto_won_add_components: true,\n      reference_last_election: true,\n    },\n    camp_rate: [60, 50, 40],\n    vote_rate: [40, 40, 40],\n  })\n  useEffect(() => {\n    async function fetchData() {\n      const result = await axios(`/static/data/prediction.json`)\n      if (result.status === 200) {\n        setPredictionData(result.data.data)\n        setIsLoadingPrediction(false)\n      }\n    }\n    fetchData()\n  }, [])\n  return (\n    <Query\n      query={FETCH_CAMP_DATA}\n      variables={{ year: 2015, dcode: `${code}%` }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const dataFroGraph = groupDataByRegionAndCamp(data.dcd_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n\n        let d3Data = dataForD3\n\n        if (!isLoadingPrediction && predictEnabled) {\n          const expectedDataForGraph = groupExpectDataByRegionAndCamp(\n            predictoinData.dcd_constituencies,\n            settings\n          )\n          d3Data = convertToD3Compatible(\n            expectedDataForGraph,\n            sortByDefaultChartOrderFunc(dataForD3)\n          )\n        }\n\n        return (\n          <Container className={className}>\n            <br />\n            <PredictionChartHeader>\n              <Text variant=\"h5\">\n                {predictEnabled ? '模擬2019選舉結果' : '現時陣營分布'}\n              </Text>\n              <br />\n              <Text variant=\"body2\">\n                {predictEnabled && (\n                  <>\n                    <p>\n                      本模擬綜合2019年選民登記數字，18及19年間新增選民數字，以及2015區議會選舉實際投票結果。\n                    </p>\n                    <p>\n                      首先將15年區選各選區投票結果歸納為分為「建制」、「民主」及「其他」三陣營，並假設選民維持投票取向，並按其比例將各陣營得票分配至2018的選民登記數字。\n                    </p>\n                    <p>\n                      滑桿只調較2018及19年間新增選民的投票取向及投票率，如欲直接調較19年選民的取態，請到「設定\n                      」取消「只計算新增選民，同時假設上屆投票選民維持相冋政治取向」一項。\n                    </p>\n                    <p>\n                      是次選舉將選出452個民選議席，連同新界區27名當然議員共479席。當然議員即各區鄉事委員會主席，故這些議席全歸類為建制派。\n                    </p>\n                    <p>\n                      選舉結果由眾多因素影響，故模擬結果僅供參考，亦因數據來源限制而簡化，如有建議歡迎\n                      <DefaultLink\n                        target=\"_blank\"\n                        href=\"https://forms.gle/irD6tEznWPNda6w59\"\n                      >\n                        回報\n                      </DefaultLink>\n                      。\n                    </p>\n                  </>\n                )}\n              </Text>\n            </PredictionChartHeader>\n            {!loading && predictEnabled && (\n              <PredictionChartPanel\n                settings={settings}\n                setSettings={setSettings}\n              />\n            )}\n            <StackedNormalizedHorizontalBarChart\n              hideLegend\n              data={d3Data}\n            ></StackedNormalizedHorizontalBarChart>\n            {!predictEnabled && (\n              <StyledLoadingButton\n                isLoading={loading}\n                onClick={() => {\n                  setPredictEnabled(true)\n                  fireEvent({\n                    ca: 'simulation',\n                    ac: 'click',\n                    lb: 'start_simulate',\n                  })\n                }}\n                label=\"模擬結果\"\n              />\n            )}\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\nexport default DistrictCampCompareChartContainer\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_DISTRICT } from 'queries/gql'\nimport { Loading } from 'components/atoms/Loading'\nimport DistrictsTable from 'components/molecules/district/DistrictsTable'\nimport DistrictCampCompareChartContainer from 'components/templates/DistrictCampCompareChartContainer'\n\nconst DistrictOverviewPage = props => {\n  const {\n    match: {\n      params: { year, code },\n    },\n  } = props\n\n  return (\n    <Query query={QUERY_GET_DISTRICT} variables={{ code, year }}>\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        const districts = data.dcd_districts\n\n        return (\n          <>\n            <DistrictCampCompareChartContainer code={code} />\n            <DistrictsTable districts={districts} year={year} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictOverviewPage\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_ALL_DISTRICTS } from 'queries/gql'\nimport { Loading } from 'components/atoms/Loading'\nimport DistrictsTable from 'components/molecules/district/DistrictsTable'\n\nconst DistrictAllPage = props => {\n  const {\n    match: {\n      params: { year },\n    },\n  } = props\n\n  return (\n    <Query query={QUERY_GET_ALL_DISTRICTS} variables={{ year }}>\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        const districts = data.dcd_districts\n\n        return <DistrictsTable districts={districts} year={year} />\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictAllPage\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport Dialog from '@material-ui/core/Dialog'\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\nimport MuiDialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport React from 'react'\n\nconst StyledDialogTitle = styled(MuiDialogTitle)`\n  && {\n    padding: 16px 16px 8px;\n    min-width: 50%;\n  }\n`\nconst StyledDialogContent = styled(MuiDialogContent)`\n  && {\n    padding: 8px 16px 16px;\n    min-width: 50%;\n  }\n`\n\nconst DialogTitle = props => {\n  const { children, onClose } = props\n  return (\n    <StyledDialogTitle>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box flexGrow={1}>{children}</Box>\n        <Box>\n          {onClose ? (\n            <IconButton\n              aria-label=\"close\"\n              onClick={onClose}\n              style={{ padding: 0 }}\n            >\n              <CloseIcon />\n            </IconButton>\n          ) : null}\n        </Box>\n      </Box>\n    </StyledDialogTitle>\n  )\n}\n\nconst DialogContent = props => {\n  const { children } = props\n  return <StyledDialogContent>{children}</StyledDialogContent>\n}\n\nexport const PlainDialog = props => {\n  const { open, handleClose, title, content, actions } = props\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"customized-dialog-title\"\n      open={open}\n    >\n      <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n        {title}\n      </DialogTitle>\n      <DialogContent>{content}</DialogContent>\n      {actions && <DialogActions>{actions}</DialogActions>}\n    </Dialog>\n  )\n}\n","import React, { useEffect } from 'react'\nimport { PlainDialog } from 'components/molecules/Dialog'\nimport { Disclaimer } from 'components/templates/Disclaimer'\nimport localforage from 'localforage'\n\nexport default function GlobalDisclaimer() {\n  const [open, setOpen] = React.useState(false)\n\n  const handleClose = async () => {\n    setOpen(false)\n    await localforage.setItem('instructionRead', true)\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const instructionRead = await localforage.getItem('instructionRead')\n        await setOpen(!instructionRead)\n      } catch (e) {\n        await setOpen(true)\n      }\n    }\n\n    fetchData()\n  }, [])\n\n  return (\n    <PlainDialog\n      open={open}\n      handleClose={handleClose}\n      title=\"vote4.hk 區議會投票指南\"\n      content={<Disclaimer />}\n    ></PlainDialog>\n  )\n}\n","import i18n from 'i18next'\nimport { initReactI18next } from 'react-i18next'\nimport translationEN from 'locales/en/translation.json'\nimport translationZH from 'locales/zh/translation.json'\n\ni18n.use(initReactI18next).init({\n  fallbackLng: 'zh',\n  debug: true,\n  interpolation: {\n    escapeValue: false,\n  },\n  resources: {\n    en: {\n      translation: translationEN,\n    },\n    zh: {\n      translation: translationZH,\n    },\n  },\n  react: {\n    wait: true,\n  },\n  keySeparator: '-',\n})\n\nexport default i18n\n","import React from 'react'\nimport { Route, Switch, useRouteMatch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { ThemeProvider } from '@material-ui/core/styles/'\nimport IndexPage from 'components/pages/landing'\nimport ProfilePage from 'components/pages/profile'\nimport DistrictPage from 'components/pages/district'\nimport DistrictListPage from 'components/pages/district/list'\nimport BattleGroundPage from 'components/pages/battleground'\nimport DisclaimerPage from 'components/pages/disclaimer'\nimport AboutDCPage from 'components/pages/about/dc'\nimport NotfoundPage from 'components/pages/notfound'\nimport SupportUsPage from 'components/pages/support-us'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme from 'ui/theme'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport MobileAppBar from 'components/organisms/MobileAppBar'\nimport Footer from 'components/organisms/Footer'\nimport { ContextStoreProvider } from 'ContextStore'\nimport withTracker from './WithTracker'\nimport SearchDrawer from 'components/pages/SearchDrawer'\nimport DistrictOverviewPage from 'components/pages/district/overview'\nimport DistrictAllPage from 'components/pages/district/all'\nimport GlobalDisclaimer from 'components/organisms/GlobalDisclaimer'\nimport i18n from 'i18n'\n\nconst client = new ApolloClient({\n  uri: process.env.REACT_APP_GRAPHQL_URI,\n})\n\nconst Root = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    margin: auto;\n    overflow: hidden;\n    background-color: white;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    overflow: auto;\n  }\n`\n\nconst Wrapper = styled(Box)`\n  && {\n    flex: 1;\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n  }\n`\n\nconst LangSwitch = props => {\n  const { path, url } = useRouteMatch()\n  if (url !== '/') {\n    i18n.changeLanguage(url.replace('/', ''))\n  }\n\n  return (\n    <Switch>\n      <Route exact path={path} component={withTracker(IndexPage)} />\n      <Route\n        path={`${path}/profile/:name/:uuid`}\n        component={withTracker(ProfilePage)}\n      />\n      <Route\n        path={`${path}/district/:year/tags/:tag`}\n        component={withTracker(DistrictListPage)}\n      />\n      <Route\n        path={`${path}/district/:year/:code(\\\\w{1})`}\n        component={withTracker(DistrictOverviewPage)}\n      />\n      <Route\n        path={`${path}/district/2019/:code`}\n        component={withTracker(BattleGroundPage)}\n      />\n      <Route\n        path={`${path}/district/:year/:code`}\n        component={withTracker(DistrictPage)}\n      />\n      <Route\n        path={`${path}/district/:year`}\n        component={withTracker(DistrictAllPage)}\n      />\n      <Route\n        path={`${path}/disclaimer`}\n        component={withTracker(DisclaimerPage)}\n      />\n      <Route path={`${path}/about-dc`} component={withTracker(AboutDCPage)} />\n      <Route path=\"/about-us\" component={withTracker(SupportUsPage)} />\n      <Route component={withTracker(NotfoundPage)} />\n    </Switch>\n  )\n}\n\nconst App = props => {\n  if (!process.env.REACT_APP_GRAPHQL_URI) {\n    throw new Error('Graphql host not yet set')\n  }\n\n  return (\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={theme}>\n        <ContextStoreProvider>\n          <Root>\n            <ContentContainer id=\"contentContainer\">\n              <CssBaseline />\n              <Wrapper>\n                <MobileAppBar />\n                <GlobalDisclaimer />\n                <main>\n                  <Switch>\n                    <Route path=\"/(en|zh)?\">\n                      <LangSwitch />\n                    </Route>\n                    <Route exact path=\"/\" component={withTracker(IndexPage)} />\n                    <Route\n                      path=\"/profile/:name/:uuid\"\n                      component={withTracker(ProfilePage)}\n                    />\n                    <Route\n                      path=\"/district/:year/tags/:tag\"\n                      component={withTracker(DistrictListPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code(\\w{1})\"\n                      component={withTracker(DistrictOverviewPage)}\n                    />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={withTracker(BattleGroundPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={withTracker(DistrictPage)}\n                    />\n                    <Route\n                      path=\"/district/:year\"\n                      component={withTracker(DistrictAllPage)}\n                    />\n                    <Route\n                      path=\"/disclaimer\"\n                      component={withTracker(DisclaimerPage)}\n                    />\n                    <Route\n                      path=\"/about-dc\"\n                      component={withTracker(AboutDCPage)}\n                    />\n                    <Route\n                      path=\"/about-us\"\n                      component={withTracker(SupportUsPage)}\n                    />\n                    <Route component={withTracker(NotfoundPage)} />\n                  </Switch>\n                </main>\n              </Wrapper>\n              <Footer />\n            </ContentContainer>\n            <SearchDrawer />\n          </Root>\n        </ContextStoreProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport App from './App'\nimport './i18n'\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}