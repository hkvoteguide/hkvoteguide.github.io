{"version":3,"sources":["queries/gql.js","ui/theme.js","components/atoms/Link.js","components/atoms/Columns.js","constants/dcregion.js","utils/helper.js","components/templates/Summary.js","components/atoms/charts/StackedNormalizedHorizontalBarChart.js","components/atoms/Slider/index.js","components/atoms/Text.js","components/molecules/ValueSlider.js","components/molecules/TabBar.js","components/organisms/Tabs.js","components/atoms/Rows.js","components/atoms/Button.js","components/organisms/PredictionChartPanel.js","components/molecules/CheckBox.js","components/molecules/LoadingButton.js","utils/ga_fireevent.js","components/templates/CampCompareChartContainer.js","components/atoms/Countdown.js","components/atoms/Alert.js","utils/features.js","components/molecules/AddressSearcher.js","components/atoms/Avatar.js","components/molecules/PeopleSearcher.js","reducers/drawer.js","ContextStore.js","components/organisms/AreaTabs.js","components/molecules/DistrictSelector.js","components/organisms/SearchTab.js","components/pages/landing/index.js","components/organisms/ScrollableTabs.js","components/templates/CouncillorMeetingAttendance.js","components/containers/CouncillorMeetingAttendanceContainer.js","components/molecules/Card.js","components/templates/PersonElectionHistories.js","components/containers/PersonElectionHistoriesContainer.js","components/molecules/PersonEvent.js","components/templates/FCPersonData.js","components/atoms/Tag.js","components/atoms/Tooltip.js","components/pages/profile/index.js","components/atoms/HtmlParagraph.js","components/OLMap.js","ui/responsive.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/atoms/charts/WaffleChart.js","components/district/Metrics.js","components/pages/district/index.js","components/containers/CandidatesContainer.js","components/organisms/ConstituencyCard.js","components/atoms/Loading.js","components/pages/district/list.js","components/DCCACompareMap.js","components/templates/Councillor.js","components/containers/CouncillorContainer.js","components/atoms/charts/GroupedBarChart.js","components/containers/DistrictNewVoterChartContainer.js","components/district/DCCAOverview.js","components/templates/DCCAElectionResult.js","components/templates/DCCAElectionHistories.js","components/pages/battleground/index.js","components/pages/disclaimer/index.js","components/pages/about/dc.js","components/pages/notfound/index.js","components/organisms/ShareButton.js","components/organisms/MobileAppBar.js","components/organisms/Footer.js","WithTracker.js","components/organisms/SearchMenu.js","components/pages/SearchDrawer.js","components/molecules/candidate/CandidatesTableContent.js","components/molecules/constituency/ConstituencyTableContent.js","components/molecules/district/DistrictTableContent.js","components/atoms/CampSelector.js","components/molecules/district/DistrictsTable.js","components/pages/district/overview.js","components/pages/district/all.js","App.js","index.js"],"names":["CONSTITUENCIES_DATA","DISTRICT_DATA","QUERY_CONSTITUENCIES","gql","_templateObject","QUERY_GET_CONSTITUENCIES_BY_TAG","_templateObject2","QUERY_CONSTITUENCY_STATS","_templateObject3","QUERY_GET_DISTRICT","_templateObject4","QUERY_GET_ALL_DISTRICTS","_templateObject5","QUERY_GET_AREA","_templateObject6","QUERY_GET_PERSON_ELECTIONS","_templateObject7","QUERY_GET_PERSON_MEETING_ATTENDANCES","_templateObject8","QUERY_GET_COUNCILLOR","_templateObject9","QUERY_GET_CANDIDATES","_templateObject10","QUERY_GET_NOMINATION_SUMMARY","_templateObject11","_templateObject12","QUERY_GET_CONFIG","_templateObject13","FONT_FAMILY","typography","useNextVariants","fontSize","fontFamily","join","h1","fontWeight","h2","h3","h4","h5","h6","body1","lineHeight","body2","COLORS","main","text","primary","secondary","background","mainText","dark","backgroundColor","color","camp","democracy","establishment","localist","other","uncertain","common","success","green","failure","red","secondaryBackgroundColor","createMuiTheme","palette","contrastText","UnstyledLink","styled","Link","Link_templateObject","UnstyledNavLink","NavLink","Link_templateObject2","DefaultLink","Link_templateObject3","Box","Columns_templateObject","SeperatedColumns","Columns_templateObject2","DCREGION","A","zh_hk","en_us","unelected_dc_seat","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","getDistrictListUriFromTag","tag","concat","getDistrictOverviewUriFromTag","code","getConstituencyUriFromTag","getColorFromCamp","泛民","民主","建制","本土","傘兵","自決","其他","不明","getColorFromPoliticalAffiliation","pa","mapping","_arr","Object","keys","_i","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","party","value","includes","err","return","getProfilePath","person","name_en","name_zh","uuid","formatNumber","num","toString","replace","getCurrentUrl","window","location","href","getConstituencyTagsByCandidateCamps","candidates","tags","filteredCandidates","filter","c","election_type","nominate_status","push","groupedCamps","_","groupBy","Container","Summary_templateObject","FlexLink","Summary_templateObject2","withRouter","props","react_default","a","createElement","react_apollo_esm","query","_ref","loading","error","data","result","dcd_constituencies","forEach","dcca","objectSpread","demo_clash","r","estab_clash","Fragment","Typography","variant","gutterBottom","Columns","map","district","index","key","onClick","history","Styled","StackedNormalizedHorizontalBarChart_templateObject","StackedNormalizedHorizontalBarChart","_useState","useState","width","height","_useState2","slicedToArray","dimensions","setDimensions","CAMP_COLORS","d3Container","useRef","updateLegend","res","svg","label","count","d","reduce","v","overhalf_count","total","selectAll","remove","legend","enter","append","attr","i","style","drawChart","columns","margin","labels","series","d3","slice","offset","s","y","domain","range","unknown","name","padding","x","current","select","empty","bar","bandwidth","transition","delay","Math","random","duration","groups","f","call","g","tickSizeOuter","on","k","getCodeFromDistrictName","ticks","middle","updateWindowSize","clientWidth","useEffect","addEventListener","useLayoutEffect","ref","atoms_Slider","Slider","Text_templateObject","SuccessText","Text_templateObject2","FailureText","Text_templateObject3","Text","SliderContainer","ValueSlider_templateObject","Label","ValueSlider_templateObject2","ValueSlider","setValue","className","onChange","event","newValue","TabBar","titles","selectedTab","setSelectedTab","Tabs","centered","title","Tab","id","aria-controls","TabPanel","children","objectWithoutProperties","assign","component","role","aria-labelledby","ScrollableTabs","_React$useState","React","_React$useState2","child","hidden","Rows_templateObject","UnstyledButton","Button","Button_templateObject","StyledValueSlider","PredictionChartPanel_templateObject","TabSection","PredictionChartPanel_templateObject2","StyledCheckBox","checked","setChecked","FormControlLabel","control","Checkbox","target","PredictionChartPanel_templateObject3","ToggleButton","PredictionChartPanel_templateObject4","PredictionChartPanel","settings","setSettings","showSettings","setShowSettings","handleClose","reason","setSettingConfigFunc","field","flag","config","defineProperty","camp_rate","toConsumableArray","vote_rate","setSettingFunc","renderSettings","ExpandLess_default","ExpandMore_default","Collapse","in","Rows","reference_last_election","auto_won_add_components","buttonLayout","StyledCircularProgress","CircularProgress","LoadingButton_templateObject","WhiteText","LoadingButton_templateObject2","fireEvent","ca","ac","lb","_ref$val","val","_ref$nonInteraction","nonInteraction","GoogleAnalytics","category","action","console","log","initialize","process","div","CampCompareChartContainer_templateObject","PredictionChartHeader","CampCompareChartContainer_templateObject2","StyledLoadingButton","isLoading","disabled","size","CampCompareChartContainer_templateObject3","FETCH_CAMP_DATA","CampCompareChartContainer_templateObject4","convertToD3Compatible","sortFunc","values","acc","sort","b","AGE_GROUP_MIDDLE","AGE_GROUP_OLD","groupExpectDataByRegionAndCamp","constituencies","getProjectedVotes","type","voteStats","subtype","stat","settingIndex","indexOf","category_2","votePercentage","yellowPercentage","getVoteCountBySetting","expectedResult","constituency","predecessors","predecessor","onlyCandidate","votes","vote_stats","mock","maxVote","projectedVotes","establishCount","cacode","byCodes","p","CampCompareChartContainer","predictEnabled","setPredictEnabled","_React$useState3","_React$useState4","isLoadingPrediction","setIsLoadingPrediction","_React$useState5","_React$useState6","predictoinData","setPredictionData","_React$useState7","_React$useState8","_fetchData","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","axios","sent","status","stop","apply","this","arguments","fetchData","variables","year","_ref3","defaultChartData","dataForD3","candidate","groupDataByRegionAndCamp","dcd_candidates","d3Data","indexFromOriginalChartData","record","CampCompareChartContainer_Container","organisms_PredictionChartPanel","TimeGrid","Grid","Countdown_templateObject","Time","Countdown_templateObject2","Unit","Countdown_templateObject3","Countdown","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","days","hours","min","sec","_this2","interval","setInterval","date","calculateCountdown","setState","endDate","diff","Date","parse","timeLeft","years","millisec","floor","clearInterval","String","countDown","container","item","xs","addLeadingZeros","Component","defaultProps","Alert","Alert_templateObject","getSingleFeatureFromPoint","lng","lat","pt","turf","dc2019","features","feature","poly","geometry","coordinates","properties","CACODE","getAllFeaturesFromPoint","point","featuresArray","dc2003","dc2007","dc2011","dc2015","polygonProps","n","split","getCentroidFromYearAndCode","selectedIndex","findIndex","polygon","find","renderInputComponent","inputProps","classes","_inputProps$inputRef","inputRef","TextField","fullWidth","InputProps","node","input","disableUnderline","endAdornment","InputAdornment","position","IconButton","aria-label","Search_default","renderSuggestion","suggestion","isHighlighted","matches","match","parts","MenuItem","selected","part","highlight","getSuggestionValue","IntegrationAutosuggest","suggestions","debounced","handleSuggestionsFetchRequested","_ref2","cancel","debounce","getSuggestions","then","handleSuggestionsClearRequested","handleChange","handleSuggestionSelected","_ref4","suggestionValue","suggestionIndex","sectionIndex","method","coordinate","handleAddressSelected","inputValue","trim","toLowerCase","AddressParser","records","fullAddress","LANG_ZH","ele","self","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","root","dist_default","placeholder","InputLabelProps","shrink","theme","suggestionsList","suggestInput","renderSuggestionsContainer","options","Paper","square","containerProps","withStyles","flexGrow","suggestionsContainerOpen","zIndex","marginTop","spacing","display","listStyleType","borderRadius","boxShadow","textDecoration","searchButton","PeopleAvatar","Avatar","Avatar_templateObject","opacity","dimension","borderwidth","GET_PEOPLE","PeopleSearcher_templateObject","PeopleSearcher_templateObject2","withApollo","handlePeopleSelected","_useState3","_useState4","setSuggestions","fetchUsers","keyword","client","nameRegex","abrupt","_x","PeopleSearcher_Container","evt","_ref6","_ref5","homeUrl","avatarPath","suggestionNameStyle","float","marginLeft","boldStyle","selectedSuggestionNameStyle","suggestionDistrictStyle","textAlign","selectedSuggestionDistrictStyle","src","imgProps","onError","e","DRAWER_OPEN","DRAWER_CLOSE","drawer","open","drawerInitialState","ContextStore","createContext","ContextStoreProvider","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","Provider","dispatch","AreasTabs","AreaTabs_templateObject","AreasTab","AreaTabs_templateObject2","AreaTabs","expanded","setExpanded","AreaTabs_TabPanel","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","DistrictExpansionPanel","ExpansionPanel","DistrictSelector_templateObject3","DistrictExpansionPanelSummary","ExpansionPanelSummary","DistrictSelector_templateObject4","DistrictExpansionPanelDetails","ExpansionPanelDetails","DistrictSelector_templateObject5","useContext","renderArea","area","districts","dc_code","TransitionProps","unmountOnExit","expandIcon","dc_name_zh","DistrictSelector_Container","areas","uniqBy","dcd_districts","area_code","area_name_zh","areasWithDistricts","areaNames","SearchTab_templateObject","ExpandedRow","SearchTab_templateObject2","ContentRowContainer","SearchTab_templateObject3","AddressSearchContainer","SearchTab_templateObject4","TabContainer","SearchTab_templateObject5","TabButton","SearchTab_templateObject6","active","path","onTabSelected","tab","SearchTab_Container","molecules_DistrictSelector","AddressSearcher","molecules_PeopleSearcher","landing_templateObject","TopSection","landing_templateObject2","StyledCampCompareChartContainer","landing_templateObject3","CountdownContainer","landing_templateObject4","StyledSearchTab","SearchTab","landing_templateObject5","ConfigCenterText","landing_templateObject6","IndexPage","renderAlert","dcd_config","renderCenterText","dangerouslySetInnerHTML","__html","html_text","autoCompleteList","atoms_Countdown","landing_Container","templates_Summary","StyledAppBar","AppBar","ScrollableTabs_templateObject","indicatorcolor","_props$tabnumber","tabnumber","shouldCenter","scrollButtons","lib_default","onChangeIndex","ScrollableTabs_TabPanel","MobileTableCell","TableCell","CouncillorMeetingAttendance_templateObject","CouncillorMeetingAttendace","meetings","Table","TableHead","TableRow","align","TableBody","m","scope","meeting","meet_name","meet_type","meet_year","attended","propsType","PropTypes","array","CouncillorMeetingAttendaceContainer","personId","person_id","flatten","dcd_councillors","meeting_attendances","CouncillorMeetingAttendance","int","StyledCard","Card","Card_templateObject","PlainCard","PersonElectionHistoriesTitle","PersonElectionHistories_templateObject","createQueryStringToBattlegroundPage","election","targetPath","dccaHistories","PersonElectionHistories","histories","to","Card_PlainCard","NavigateNext_default","political_affiliation","is_won","PersonElectionHistoriesContainer","templates_PersonElectionHistories","dcd_people_by_pk","PersonEvent_templateObject","StyledMicrolink","Microlink","PersonEvent_templateObject2","PersonEvent","eventType","description","url","personVote","validatedUrl","exec","validateUrl","PersonEvent_StyledCard","CardContent","getPersonVoteText","getEventTypeText","substring","trimDescription","FCPersonData_templateObject","StyledButton","FCPersonData_templateObject2","FCPersonData","fcUuid","filterFunc","events","setEvents","fcUri","FCPersonData_Container","molecules_PersonEvent","eventId","focus","string","func","isRequired","StyledChip","Chip","Tag_templateObject","fontsize","backgroundcolor","textcolor","bordercolor","Tag","handleClick","InfoIconSvg","InfoIcon","Tooltip_templateObject","ErrorIconSvg","ErrorIcon","Tooltip_templateObject2","HtmlTooltip","Tooltip","popper","tooltip","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","Tooltip_templateObject3","GET_PEOPLE_PROFILE","profile_templateObject","FlexRowContainer","profile_templateObject2","CandidateHeaderContainer","profile_templateObject3","CandidateAvatorContainer","profile_templateObject4","PersonName","profile_templateObject5","ElectionStatus","profile_templateObject6","FacebookPageButton","profile_templateObject7","PersonHighlightContainer","profile_templateObject8","BreadcrumbsContainer","profile_templateObject9","PersonDescriptionParagraph","profile_templateObject10","ProfilePage","handleElectionDetailButton","renderFacebook","fb_id","renderIntroText","currentTerm","term_to","electionResult","renderElectionStatusText","primaryText","Tag_Tag","params","dcd_people","councillors","lastElection","hasMeetings","max","personHighlight","estimated_yob","tips","related_organization","career","occupation","fc_uuid","Breadcrumbs","separator","marginBottom","pr","disableFocusListener","disableTouchListener","placement","ScrollableTabs_ScrollableTabs","templates_FCPersonData","containers_PersonElectionHistoriesContainer","CouncillorMeetingAttendanceContainer","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","font","highlightStyle","OLMap","handleMapClick","_this$props","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","featuresLayer","_this$props2","dc","isDCDataExist","featureSource","VectorSource","GeoJSON","readFeatures","VectorLayer","source","getText","setText","getProperties","CNAME","layers","TileLayer","XYZ","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","getSize","Select","addInteraction","highlightedFeature","getSource","removeFeature","addFeature","bps","createBreakpoints","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","StyledDivier","Divider","DistrictCard_templateObject6","DistrictCard","onPrevElection","ArrowBack_default","getFullYear","onNextElection","ArrowForward_default","stations","councillor","DistrictCard_Container","border","renderPrevElectionButton","renderNextElectionButton","station","MainAreas_templateObject","MainAreas","MainAreas_Container","flexWrap","alignContent","mr","WaffleChart","squareValue","theData","population","units","round","percentage","Array","groupIndex","squareSize","row","col","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","parseInt","_data$dc_constituenci","dc_constituencies","vote_stat","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","gender","Metrics_Container","charts_WaffleChart","FullWidthBox","district_templateObject","LowerBackgroundContainer","district_templateObject2","district_templateObject3","up","DistrictCardContainer","district_templateObject4","DistrictPage","handleCandidateSelected","handleChangeDistrict","nextProps","nextState","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","district_FlexRowContainer","sm","md","components_OLMap","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","CandidateList","CandidatesContainer_templateObject","CandidateGrid","CandidatesContainer_templateObject2","TagContainer","CandidatesContainer_templateObject3","StyledTag","CandidatesContainer_templateObject4","Candidate","CandidatesContainer_templateObject5","CandidateNumber","CandidatesContainer_templateObject6","ControversialAlert","CandidatesContainer_templateObject7","CandidateName","CandidatesContainer_templateObject8","CandidatesContainer","direction","CandidatesContainer_CandidateGrid","IMAGE_HOST_URI","candidate_number","ConstituencyCard_templateObject","ConstituencyCard_templateObject2","sortedTags","ConstituencyCard_StyledCard","ConstituencyCard_TagContainer","containers_CandidatesContainer","Placeholder","Loading_templateObject","CentredCircularProgress","Loading_templateObject2","Loading","thickness","list_templateObject","DistrictListPage","_props$match$params","Loading_Loading","list_Container","organisms_ConstituencyCard","DCCACompareMap_templateObject","hoverStyle","DCCACompareMap","mapClick","geoMarker","Feature","Point","mapBrowserEvent","setProperties","ENAME","getLayers","layer","clear","mapHover","highlightHoveredFeature","vectorLayer","handleMapLoaded","controls","markerCoordinates","currentPoint","image","Icon","anchor","scale","addLayer","featureHover","centroid","getInteriorPoint","getCoordinates","selectBySingleClick","hoveredFeature","DCCACompareMap_MapContainer","Councillor","meta","participatedOrdinary","participatedByElection","lastParticipated","votesDiff","isWon","participatedElections","electionYear","myVotes","highestVotes","getCouncillorMeta","term_from","alignSelf","CouncillorContainer","templates_Councillor","number","GroupedBarChart","firstColor","secondColor","maxBy","chart","yScale","x0","x1","tickSizeInner","tickFormat","DistrictNewVoterChartContainer","filterIndex","getDataForChat","category_1","transformedData","newData","valueDict","ageGroupPrefix","dictKey","getTransformedData","chartData","increased","mostIncreasedGroup","newVotes","groupedByAge","genders","groupedByGender","types","groupedByType","newVoters","totalVoters","getMeta","DCCAOverview_templateObject","DCCAOverview_templateObject2","DCCAOverview","showGraph","voterData","new_voters_percentage","aggregations","new_voters","all_voters","toFixed","DCCAOverview_Container","toggleGraph","KeyboardArrowUp_default","DCCAOverview_TagContainer","DCCAElectionResult_templateObject","CandiateBox","DCCAElectionResult_templateObject2","CandidateAvatar","DCCAElectionResult_templateObject3","DCCAElectionResult_templateObject4","DCCAElectionResult_templateObject5","VotePercentageBar","LinearProgress","DCCAElectionResult_templateObject6","VoteText","DCCAElectionResult_templateObject7","DCCAElectionResult","sortedCandidates","DCCAElectionResult_Container","vote_percentage","vote_sum","DCCAElectionResult_CandidateNumber","DCCAElectionResult_CandidateName","DCCAElectionResultContainer","DCCAElectionHistories_templateObject","CampText","DCCAElectionHistories_templateObject2","DCCAElectionHistories","queries","obj","variableLine","startsWith","DCCAElectionHistories_templateObject3","presetTabIndex","filteredHistories","_this$createQuery","createQuery","year_vote_sum","aggregate","sum","candi","templates_DCCAElectionResult","groupVoteStat","VOTERS","NEW_VOTERS","battleground_templateObject","battleground_templateObject2","ToggleMapButton","battleground_templateObject3","BattleGroundPage","showMap","queryYear","results","RegExp","decodeURIComponent","getParameterByName","search","previousDistricts","intersect_area","pointHistory","DCCAStatus","battleground_BreadcrumbsContainer","battleground_Container","district_DCCAOverview","components_DCCACompareMap","templates_DCCAElectionHistories","containers_CouncillorContainer","disclaimer_templateObject","DisclaimerPage","disclaimer_Container","dc_templateObject","dc_Container","NotFoundPage","RightIconButton","ShareButton_templateObject","StyledCopyIcon","CopyIcon","ShareButton_templateObject2","getShareUrl","platform","updateUrlParameter","uri","hash","substr","re","ShareButton","anchorEl","setAnchorEl","handleShareButtonClose","aria-haspopup","currentTarget","Share_default","Menu_Menu","keepMounted","Boolean","onClose","FacebookShareButton","FacebookIcon","TelegramShareButton","TelegramIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","navigator","clipboard","writeText","MobileAppBar_templateObject","AppBarTitle","MobileAppBar_templateObject2","MobileAppBar","MobileAppBar_StyledAppBar","Toolbar","disableGutters","Menu_default","organisms_ShareButton","StyledFooter","Footer_templateObject","StyledDivider","Footer_templateObject2","StyledFooterLink","Footer_templateObject3","LinkBox","Footer_templateObject4","data-href","data-width","data-layout","data-action","data-size","data-show-faces","data-share","withTracker","WrappedComponent","trackPage","page","set","pageview","_React$Component","HOC","inherits","createClass","pathname","currentPage","nextPage","SearchMenu_templateObject","LeftMargin","SearchMenu_templateObject2","goToPage","route","organisms_SearchTab","SearchDrawer_templateObject","MenuContainer","SearchDrawer_templateObject2","NavBarButton","SearchDrawer_templateObject3","useStyles","makeStyles","drawerPaper","maxWidth","_React$useContext$dra","Drawer","paper","SearchDrawer_Container","Close_default","organisms_SearchMenu","CandidatesTableContent_templateObject","StyledTableCell","CandidatesTableContent_templateObject2","StyledTableRow","CandidatesTableContent_templateObject3","justify","alignItems","minWidth","CandidatesTableContent_CandidateNumber","CandidatesTableContent","showDemocracy","showEstablishment","showOthers","matchCamp","CandidatesTableContent_CandidateGrid","ConstituencyNameTableRow","ConstituencyTableContent_templateObject","ConstituencyTableContent_templateObject2","ConstituencyTableContent_templateObject3","showBlank","colSpan","ConstituencyTableContent_TagContainer","ConstituencyTableContent_StyledTag","candidate_CandidatesTableContent","DistrictNameTableRow","DistrictTableContent_templateObject","dc_description_zh","constituency_ConstituencyTableContent","styles","& svg","others","CampSelector","camps","FormGroup","DistrictsTable_templateObject","DistrictsTable","blank","_state$checked","atoms_CampSelector","DistrictsTable_StyledTableCell","district_DistrictTableContent","DistrictOverviewPage","district_DistrictsTable","DistrictAllPage","ApolloClient","Root","App_templateObject","ContentContainer","App_templateObject2","Wrapper","App_templateObject3","App","MuiThemeProvider_default","ContextStore_ContextStoreProvider","CssBaseline","organisms_MobileAppBar","react_router","exact","AboutDCPage","NotfoundPage","organisms_Footer","SearchDrawer","ReactDOM","render","react_router_dom","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.72521b36.chunk.js","sourcesContent":["// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nid\nname_zh\nname_en\ndistrict {\n  dc_code\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\ndescription\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n  type\n}\n`\n\nconst DISTRICT_DATA = `\narea_code\narea_name_zh\ndc_code\ndc_name_zh\ndc_description_zh\nconstituencies( where: { year: { _eq: $year } }, order_by: {code: asc} ) {\n  id\n  name_zh\n  code\n  candidates( where: { year: { _eq: $year } }, order_by: {candidate_number: asc} ) {\n    candidate_number\n    is_won\n    political_affiliation\n    election_type\n    camp\n    person {\n      id\n      uuid\n      name_zh\n      name_en\n      related_organization\n    }\n    nominate_status\n    tags {\n      tag\n      type\n    }\n  }\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      intersect_area\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }  \n}\n`\n\nexport const QUERY_GET_CONSTITUENCIES_BY_TAG = gql`\nquery($year: Int!, $tag: String!) {\n  dcd_constituencies(\n    where: { year: { _eq: $year }, tags: { tag: {_eq: $tag} } }\n    order_by: {code: asc }\n  ) {\n    ${CONSTITUENCIES_DATA}\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_DISTRICT = gql`\n  query($year: Int!, $code: String!) {\n    dcd_districts( where: { dc_code: { _eq: $code} } ) {\n      ${DISTRICT_DATA}\n    }\n  }\n`\n\nexport const QUERY_GET_ALL_DISTRICTS = gql`\n  query($year: Int!) {\n    dcd_districts(order_by: {dc_code: asc}) {\n      ${DISTRICT_DATA}\n    }\n  }\n`\n\nexport const QUERY_GET_AREA = gql`\n  query {\n    dcd_districts {\n      area_code\n      area_name_zh\n      dc_code\n      dc_name_zh\n      constituencies(where: { year: { _eq: 2019 } }) {\n        code\n        name_zh\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_ELECTIONS = gql`\n  query get_person_elections($person_id: Int!) {\n    dcd_people_by_pk(id: $person_id) {\n      candidates(order_by: { year: desc }) {\n        year\n        constituency {\n          name_zh\n          code\n        }\n        election_type\n        camp\n        political_affiliation\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_MEETING_ATTENDANCES = gql`\n  query get_meeting_attendance($person_id: Int!) {\n    dcd_councillors(where: { person: { id: { _eq: $person_id } } }) {\n      year\n      cacode\n      term_from\n      term_to\n      career\n      district {\n        dc_name_zh\n      }\n      political_affiliation\n      post\n      constituency {\n        id\n        name_zh\n      }\n      meeting_attendances(\n        order_by: { meeting: { meet_year: desc }, total: desc }\n      ) {\n        meeting {\n          meet_name\n          meet_type\n          meet_year\n        }\n        attended\n        total\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_COUNCILLOR = gql`\n  query fetch_councillors($year: Int!, $code: String!) {\n    dcd_councillors(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { term_to: desc }\n    ) {\n      year\n      term_to\n      term_from\n      political_affiliation\n      constituency {\n        name_zh\n        name_en\n        code\n      }\n      person {\n        id\n        name_en\n        name_zh\n        uuid\n        candidates(order_by: { year: desc }) {\n          votes\n          is_won\n          year\n          cacode\n          election_type\n          constituency {\n            year\n            name_en\n            name_zh\n            candidates {\n              person {\n                id\n                name_en\n                name_zh\n              }\n              year\n              election_type\n              votes\n              political_affiliation\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CANDIDATES = gql`\n  query fetch_candidates($year: Int!, $code: String!) {\n    dcd_candidates(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { candidate_number: asc }\n    ) {\n      candidate_number\n      is_won\n      political_affiliation\n      election_type\n      camp\n      nominate_status\n      tags {\n        tag\n        type\n      }\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n        related_organization\n        description\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONSTITUENCY_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_constituencies(where: { year: { _eq: $year } }) {\n      code\n      predecessors(limit: 1, order_by: { intersect_area: desc }) {\n        predecessor {\n          code\n          candidates {\n            camp\n            votes\n            is_won\n          }\n        }\n      }\n      vote_stats {\n        type\n        subtype\n        category_1\n        category_2\n        count\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_NOMINATION_SUMMARY = gql`\n  query {\n    dcd_constituencies(where: { year: { _eq: 2019 } }) {\n      code\n      name_zh\n      candidates {\n        camp\n        nominated_at\n        nominate_status\n        election_type\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONFIG = gql`\n  query fetch_config($key: String!) {\n    dcd_config(where: { key: { _eq: $key } }) {\n      value\n    }\n  }\n`\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red, green } from '@material-ui/core/colors'\nexport const headingFontFamily = 'Noto Sans TC, sans-serif'\nexport const bodyFontFamily = 'Noto Sans TC, sans-serif'\n\nexport const FONT_FAMILY = [\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: FONT_FAMILY.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n    fontSize: 20,\n    fontWeight: 500,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 22,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: FONT_FAMILY,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n    fontSize: 14,\n    lineHeight: 1.4,\n  },\n  body2: {\n    fontFamily: bodyFontFamily,\n    fontSize: 12,\n  },\n}\n\nexport const COLORS = {\n  main: {\n    text: '#000',\n    primary: '#7B68EE', // mediumslateblue\n    secondary: '#CCC4F8', // 2019-10-19 Hackathon - secondary color to voter bar chart\n    background: '#fff',\n  },\n  mainText: 'black',\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  camp: {\n    democracy: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    establishment: {\n      background: '#45b6ff',\n      text: 'black',\n    },\n    localist: {\n      background: '#ffcd00',\n      text: 'black',\n    },\n    other: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n    uncertain: {\n      background: '#a8a8ad',\n      text: 'black',\n    },\n  },\n  common: {\n    success: green[800],\n    failure: red[800],\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: COLORS.main.primary,\n      contrastText: COLORS.main.text,\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n  },\n})\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\nimport { COLORS } from 'ui/theme'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: black;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\nexport const DefaultLink = styled(UnstyledLink)`\n  color: ${COLORS.main.primary};\n  font-weight: 500;\n`\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n\nexport const SeperatedColumns = styled(Box)`\n  && {\n    margin-top: 8px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n","// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n    unelected_dc_seat: 0,\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n    unelected_dc_seat: 0,\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n    unelected_dc_seat: 0,\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n    unelected_dc_seat: 0,\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n    unelected_dc_seat: 0,\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n    unelected_dc_seat: 0,\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n    unelected_dc_seat: 0,\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n    unelected_dc_seat: 0,\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n    unelected_dc_seat: 0,\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n    unelected_dc_seat: 2,\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n    unelected_dc_seat: 1,\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n    unelected_dc_seat: 6,\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n    unelected_dc_seat: 4,\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n    unelected_dc_seat: 2,\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n    unelected_dc_seat: 2,\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n    unelected_dc_seat: 1,\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n    unelected_dc_seat: 1,\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n    unelected_dc_seat: 8,\n  },\n}\n","import { DCREGION } from 'constants/dcregion'\nimport _ from 'lodash'\n\nexport const getDistrictListUriFromTag = tag => `/district/2019/tags/${tag}`\n\nexport const getDistrictOverviewUriFromTag = code => `/district/2019/${code}`\n\nexport const getConstituencyUriFromTag = code => `/district/2019/${code}`\n\nexport const getCodeFromDistrictName = name => {\n  let code = 'A'\n  Object.keys(DCREGION).forEach(k => {\n    if (DCREGION[k].zh_hk === name) {\n      code = k\n    }\n  })\n  return code\n}\n\n/**\n * Passing a councillor object and get the meta data for it\n * (By QUERY_GET_COUNCILLOR_AND_CANDIDATES query)\n */\nexport const getCouncillorMeta = councillor => {\n  const result = {\n    participatedOrdinary: 0,\n    participatedByElection: 0,\n    lastParticipated: {\n      year: 2019,\n      type: 'ordinary',\n      votesDiff: 0,\n      votes: 0,\n      isWon: false,\n    },\n  }\n\n  // should already sorted from query\n  const participatedElections = councillor.person.candidates || []\n  result.participatedByElection = participatedElections.filter(\n    c => c.election_type === 'by-election'\n  ).length\n  result.participatedOrdinary = participatedElections.filter(\n    c => c.election_type === 'ordinary'\n  ).length\n\n  if (participatedElections.length > 0) {\n    // Filter out 2019 result\n    const e = participatedElections.filter(\n      e => !(e.year === 2019 && e.election_type === 'ordinary')\n    )[0]\n    const electionYear = e.year\n\n    const myVotes = e.constituency.candidates.find(\n      c => c.person.id === councillor.person.id && c.year === electionYear\n    ).votes\n    const highestVotes = e.constituency.candidates\n      .filter(\n        c => c.person.id !== councillor.person.id && c.year === electionYear\n      )\n      .map(c => c.votes)\n      .reduce((c, v) => Math.max(c, v), 0)\n    result.lastParticipated = {\n      year: e.year,\n      isWon: e.is_won,\n      votesDiff: myVotes - highestVotes,\n      votes: myVotes,\n      type: e.election_type,\n    }\n  }\n  return result\n}\n\nexport const getColorFromCamp = camp => {\n  if (!camp) return 'uncertain'\n  const mapping = {\n    泛民: 'democracy',\n    民主: 'democracy',\n    建制: 'establishment',\n    本土: 'localist',\n    傘兵: 'localist',\n    自決: 'localist',\n    其他: 'other',\n    不明: 'uncertain',\n  }\n\n  return mapping[camp] || 'uncertain'\n}\n\nexport const getColorFromPoliticalAffiliation = pa => {\n  if (!pa) return 'uncertain'\n\n  const mapping = {\n    democracy: [\n      '民主黨',\n      '公民黨',\n      '香港民主民生協進會',\n      '民協',\n      '社會民主連線',\n      '支聯會',\n      '民主動力',\n      '街坊工友服務處',\n      '街工',\n      '工黨',\n      '職工盟',\n      '新民主同盟',\n      '香港本土',\n      '獨立民主派',\n    ],\n    establishment: [\n      '民主建港協進聯盟',\n      '民建聯',\n      '新界社團聯會',\n      '新社聯',\n      '香港工會聯合會',\n      '工聯會',\n      '港九勞工社團聯會',\n      '香港經濟民生聯盟',\n      '西九新動力',\n      '自由黨',\n      '新民黨',\n      '新世紀論壇',\n    ],\n    localist: [\n      '香港眾志',\n      '青年新政',\n      '本土民主前線',\n      '東九龍社區關注組',\n      '天水圍民生關注平台',\n      '慈雲山建設力量',\n      '屯門社區關注組',\n      '長沙灣社區發展力量',\n      '社區網絡聯盟',\n      '沙田社區網絡',\n      '荃灣社區網絡',\n      '天水圍社區發展網絡',\n      '屯門社區網絡',\n      '葵青連結動力',\n      '藍田社區網絡',\n      '埔向晴天',\n      '荃灣民生動力',\n      '北區動源',\n      '維多利亞社區協會',\n    ],\n    other: ['民主思路', '新思維'],\n  }\n\n  for (let camp of Object.keys(mapping)) {\n    for (let party of mapping[camp]) {\n      if (pa.includes(party)) {\n        return camp\n      }\n    }\n  }\n\n  return 'uncertain'\n}\n\nexport const getProfilePath = person => {\n  const { name_en, name_zh, uuid } = person\n  return `/profile/${name_zh || name_en}/${uuid}`\n}\n\nexport const formatNumber = num =>\n  num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')\n\nexport const getParameterByName = (name, url) => {\n  if (!url) url = window.location.href\n  name = name.replace(/[[\\]]/g, '\\\\$&')\n  const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url)\n  if (!results) return null\n  if (!results[2]) return ''\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\nexport const getCurrentUrl = () => {\n  return window.location.href\n}\n\nexport const getConstituencyTagsByCandidateCamps = candidates => {\n  const tags = []\n  const filteredCandidates = candidates.filter(\n    c => c.election_type === 'ordinary' && c.nominate_status === 'confirmed'\n  )\n\n  if (filteredCandidates.length >= 3) {\n    tags.push('多人混戰')\n  }\n\n  const groupedCamps = _.groupBy(filteredCandidates, c => c.camp)\n  if (groupedCamps['民主'] && groupedCamps['民主'].length > 1) {\n    tags.push('民主撞區')\n  }\n\n  if (groupedCamps['建制'] && groupedCamps['建制'].length > 1) {\n    tags.push('建制撞區')\n  }\n\n  return tags\n}\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_NOMINATION_SUMMARY } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport { DefaultLink } from 'components/atoms/Link'\nimport Columns, { SeperatedColumns } from 'components/atoms/Columns'\nimport { getConstituencyTagsByCandidateCamps } from 'utils/helper'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 16px;\n    box-shadow: none;\n  }\n`\n\nconst FlexLink = styled(DefaultLink)`\n  && {\n    font-size: 14px;\n    margin-right: 8px;\n  }\n`\nconst Summary = props => {\n  return (\n    <Query query={QUERY_GET_NOMINATION_SUMMARY}>\n      {({ loading, error, data }) => {\n        if (error) return `Error! ${error}`\n\n        let result = []\n        if (data && data.dcd_constituencies) {\n          data.dcd_constituencies.forEach(dcca => {\n            const tags = getConstituencyTagsByCandidateCamps(dcca.candidates)\n\n            if (tags.length > 0) {\n              result.push({\n                ...dcca,\n                tags,\n              })\n            }\n          })\n        }\n\n        const demo_clash = result.filter(r => r.tags.includes('民主撞區'))\n        const estab_clash = result.filter(r => r.tags.includes('建制撞區'))\n\n        // const candi_5 = result.filter(r => r.tags.includes('多人混戰')).filter(district => district.candidates.length === 5)\n        // const candi_4 = result.filter(r => r.tags.includes('多人混戰')).filter(district => district.candidates.length === 4)\n\n        return (\n          <>\n            {result && result.length > 0 && (\n              <Container>\n                {/* <Typography variant=\"h6\" gutterBottom>\n                  2019年區議會選舉將於11月24日舉行，屆時將選出香港18區區議會共\n                  <b>{data.dcd_constituencies.length}</b>個民選議席。\n                </Typography> */}\n\n                <SeperatedColumns>\n                  <Typography variant=\"h6\" gutterBottom>\n                    民主派撞區 - {demo_clash.length}區\n                  </Typography>\n                </SeperatedColumns>\n                <Columns>\n                  {demo_clash.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(`district/2019/${district.code}`)\n                      }\n                    >\n                      {`${district.name_zh}`}\n                    </FlexLink>\n                  ))}\n                </Columns>\n\n                <SeperatedColumns>\n                  <Typography variant=\"h6\" gutterBottom>\n                    建制派撞區 - {estab_clash.length}區\n                  </Typography>\n                </SeperatedColumns>\n                <Columns>\n                  {estab_clash.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(`district/2019/${district.code}`)\n                      }\n                    >\n                      {`${district.name_zh}`}\n                    </FlexLink>\n                  ))}\n                </Columns>\n\n                {/* <Typography variant=\"h6\" gutterBottom>\n                  5人混戰 - {candi_5.length}區\n                </Typography>\n                <Columns>\n                  {candi_5.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(\n                          `district/2019/${district.code}`\n                        )\n                      }\n                    >\n                      {`${district.name_zh}`}\n                    </FlexLink>\n                  ))}\n                </Columns> */}\n\n                {/* <Typography variant=\"h6\" gutterBottom>\n                  4人混戰 - {candi_4.length}區\n                </Typography>\n                <Columns>\n                  {candi_4.map((district, index) => (\n                    <FlexLink\n                      key={index}\n                      onClick={() =>\n                        props.history.push(\n                          `district/2019/${district.code}`\n                        )\n                      }\n                    >\n                      {`${district.name_zh}`}\n                    </FlexLink>\n                  ))}\n                </Columns> */}\n              </Container>\n            )}\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default withRouter(Summary)\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\nimport * as d3 from 'd3'\nimport { FONT_FAMILY, COLORS } from 'ui/theme'\nimport {\n  getConstituencyUriFromTag,\n  getCodeFromDistrictName,\n} from 'utils/helper'\n\nconst ROW_HEIGHT = 20\n\nconst Styled = styled(Box)`\n  && {\n    .link {\n      text {\n        cursor: pointer;\n        color: ${COLORS.main.primary};\n        font-weight: 500;\n      }\n    }\n  }\n`\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const CAMP_COLORS = [\n    COLORS.camp.establishment.background,\n    COLORS.camp.other.background,\n    COLORS.camp.democracy.background,\n  ]\n\n  const d3Container = useRef(null)\n\n  const updateLegend = (res, svg) => {\n    const data = [\n      {\n        camp: 'establishment',\n        label: '建制',\n        color: CAMP_COLORS[0],\n        count: res.data.map(d => d['建制']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['建制'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n      // {\n      //   camp: 'other',\n      //   label: '其他',\n      //   color: CAMP_COLOR_OTH,\n      //   count: res.data.map(d => d['其他']).reduce((c, v) => c + v, 0),\n      // },\n      {\n        camp: 'democracy',\n        label: '民主',\n        color: CAMP_COLORS[2],\n        count: res.data.map(d => d['民主']).reduce((c, v) => c + v, 0),\n        overhalf_count: res.data\n          .map(d => (d['民主'] > d.total / 2 ? 1 : 0))\n          .reduce((c, v) => c + v, 0),\n      },\n    ]\n\n    svg.selectAll('.legend').remove()\n\n    const legend = svg\n      .selectAll('legend')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr(\n        'transform',\n        (d, i) => `translate(${i * (dimensions.width - 90)}, 8)`\n      )\n\n    legend\n      .append('text')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dy', '.5em')\n      .style('text-anchor', 'start')\n      .attr('font-size', '14px')\n      .text(function(d) {\n        return d.overhalf_count > 9\n          ? `${d.label}${d.overhalf_count}區過半數`\n          : ''\n      })\n\n    legend\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', 16)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return d.color\n      })\n\n    legend\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 29)\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return `${d.label} ${d.count}席`\n      })\n  }\n\n  const drawChart = res => {\n    const { columns, data } = res\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const margin = { top: 65, right: 15, bottom: 0, left: 50 }\n    const width = dimensions.width\n    const height = data.length * ROW_HEIGHT + margin.top + margin.bottom\n\n    const labels = ['建制', '其他', '民主']\n    const series = d3\n      .stack()\n      .keys(columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    series.forEach((s, index) => {\n      s.forEach((d, y) => {\n        d.count = data[y][labels[index]]\n        d.index = index\n      })\n    })\n\n    const yAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(${margin.left},0)`)\n        .attr('class', 'link')\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(CAMP_COLORS)\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const isCreate = d3\n      .select(d3Container.current)\n      .select('svg')\n      .empty()\n\n    if (isCreate) {\n      const svg = d3\n        .select(d3Container.current)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height)\n\n      const bar = svg\n        .append('g')\n        .selectAll('g')\n        .data(series)\n        .enter()\n        .append('g')\n\n      bar\n        .attr('fill', d => color(d.key))\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .attr('x', d => (d.index === 0 ? x(d[0]) : x(d[1])))\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', 0)\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => x(d[0]))\n        .attr('width', d => x(d[1]) - x(d[0]))\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', '12px')\n        .attr('fill', d => {\n          switch (d.index) {\n            case 0:\n            case 2:\n              return 'black'\n            default:\n              return 'white'\n          }\n        })\n\n      // Add the y axis and add on click function to it\n      svg.append('g').call(yAxis)\n      svg.selectAll('.tick').on('click', function(d, i) {\n        const code = getCodeFromDistrictName(d)\n        window.location = getConstituencyUriFromTag(code)\n      })\n\n      svg.append('g').call(xAxis)\n\n      // middle line\n      const middle = (width + margin.left - margin.right) / 2\n      svg\n        .append('line')\n        .attr('x1', middle + 1)\n        .attr('y1', margin.top)\n        .attr('x2', middle + 1)\n        .attr('y2', height - margin.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#3a3a3a')\n        .attr('opacity', '0.6')\n        .style('stroke-dasharray', '10, 4')\n\n      //Legend\n      updateLegend(res, svg)\n    } else {\n      // Update chart\n      const svg = d3.select(d3Container.current).select('svg')\n\n      const bar = svg\n        .select('g')\n        .selectAll('g')\n        .data(series)\n\n      bar\n        .selectAll('rect')\n        .data(d => d)\n        .join('rect')\n        .transition()\n        .delay(function(d) {\n          return Math.random() * 1000\n        })\n        .duration(1000)\n        .attr('x', d => {\n          return x(d[0])\n        })\n        .attr('y', (d, i) => y(d.data.name))\n        .attr('width', d => x(d[1]) - x(d[0]))\n        .attr('height', y.bandwidth())\n\n      bar\n        .selectAll('text')\n        .data(d => d)\n        .join('text')\n        .text(function(d, i, groups, f) {\n          return d.count === 0\n            ? ''\n            : d.count + (d.count / d.data.total > 0.1 ? '席' : '')\n        })\n        .attr('opacity', 0)\n        .attr('x', d => {\n          switch (d.index) {\n            case 0:\n              return x(d[0]) + 8\n            case 2:\n              return x(d[1]) - 8\n            default:\n              return x(d[0]) + (x(d[1]) - x(d[0])) / 2\n          }\n        })\n        .attr('y', (d, i) => y(d.data.name) + y.bandwidth() / 2)\n        .attr('alignment-baseline', 'central')\n        .attr('text-anchor', d => {\n          switch (d.index) {\n            case 0:\n              return 'start'\n            case 2:\n              return 'end'\n            default:\n              return 'middle'\n          }\n        })\n      bar\n        .selectAll('text')\n        .transition()\n        .delay(function(d) {\n          return 800 + Math.random() * 500\n        })\n        .attr('opacity', 1)\n\n      updateLegend(res, svg)\n    }\n  }\n\n  const updateWindowSize = () => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', updateWindowSize)\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    updateWindowSize()\n  }, [])\n\n  return (\n    <Styled>\n      <div ref={d3Container} style={{ height: 'auto', width: '100%' }}></div>\n    </Styled>\n  )\n}\n","import React from 'react'\nimport Slider from '@material-ui/core/Slider'\n\nexport default props => {\n  return <Slider {...props} />\n}\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${COLORS.primary};\n  }\n`\n\nexport const SuccessText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.success};\n    }\n  }\n`\n\nexport const FailureText = styled(Typography)`\n  && {\n    && {\n      font-weight: 500;\n      color: ${COLORS.common.failure};\n    }\n  }\n`\n\nexport default props => {\n  return <Typography {...props} />\n}\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Slider from 'components/atoms/Slider'\nimport Text from 'components/atoms/Text'\n\nimport Columns from 'components/atoms/Columns'\nimport styled from 'styled-components'\nimport { Box } from '@material-ui/core'\n\nconst SliderContainer = styled(Box)`\n  && {\n    padding-left: 16px;\n    flex-grow: 1;\n    padding-right: 16px;\n  }\n`\n\nconst Label = styled(Text)`\n  && {\n    min-width: 80px;\n  }\n`\n\nexport const ValueSlider = props => {\n  const { value, setValue } = props\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue)\n  }\n\n  const { label, className, color } = props\n  return (\n    <div className={className}>\n      <Columns>\n        <Label>{label}</Label>\n        <SliderContainer>\n          <Slider value={value} onChange={handleSliderChange} color={color} />\n        </SliderContainer>\n        <Text>{value}%</Text>\n      </Columns>\n    </div>\n  )\n}\n\nValueSlider.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.number.isRequired,\n  setValue: PropTypes.func.isRequired,\n}\n\nexport default ValueSlider\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\n\nTabBar.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n  selectedTab: PropTypes.number.isRequired,\n  setSelectedTab: PropTypes.func.isRequired,\n}\n\nexport default function TabBar(props) {\n  const { titles, selectedTab, setSelectedTab } = props\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n\n  return (\n    <>\n      <Tabs value={selectedTab} onChange={handleChange} centered={true}>\n        {titles.map((title, index) => (\n          <Tab\n            label={title}\n            id={`scrollable-auto-tab-${index}`}\n            key={index}\n            aria-controls={`scrollable-auto-tabpanel-${index}`}\n          />\n        ))}\n      </Tabs>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Typography from '@material-ui/core/Typography'\nimport TabBar from 'components/molecules/TabBar'\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array.isRequired,\n}\n\nexport default function ScrollableTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(0)\n  const { titles, children } = props\n\n  return (\n    <>\n      <TabBar\n        titles={titles}\n        setSelectedTab={setSelectedTab}\n        selectedTab={selectedTab}\n      />\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\n\nexport const UnstyledButton = styled(Button)`\n  && {\n    margin: 0;\n    padding: 0;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport ValueSlider from 'components/molecules/ValueSlider'\nimport CheckBox from 'components/molecules/CheckBox'\nimport PropTypes from 'prop-types'\nimport Tabs from 'components/organisms/Tabs'\nimport { COLORS } from 'ui/theme'\nimport Text from 'components/atoms/Text'\nimport Rows from 'components/atoms/Rows'\nimport { Box } from '@material-ui/core'\nimport Collapse from '@material-ui/core/Collapse'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\nimport { UnstyledButton } from 'components/atoms/Button'\n\nconst StyledValueSlider = styled(ValueSlider)`\n  && {\n    margin-top: 8px;\n    .MuiSlider-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst TabSection = styled(Box)`\n  && {\n    padding: 8px 0 0;\n  }\n`\n\nconst StyledCheckBox = styled(CheckBox)`\n  && {\n    .MuiSvgIcon-root {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst ToggleButton = styled(UnstyledButton)`\n  && {\n    border-radius: 0;\n    width: 100%;\n    font-size: 14px;\n    text-align: center;\n    padding: 5px 0px;\n    color: color: ${COLORS.main.text};\n    :hover {\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nPredictionChartPanel.propTypes = {\n  settings: PropTypes.object.isRequired,\n  setSettings: PropTypes.func.isRequired,\n}\n\nfunction PredictionChartPanel(props) {\n  const { settings, setSettings } = props\n\n  const [showSettings, setShowSettings] = React.useState(false)\n\n  const handleClose = reason => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setShowSettings(!showSettings)\n  }\n\n  const setSettingConfigFunc = field => flag => {\n    setSettings({\n      config: Object.assign(settings.config, { [field]: flag }),\n      camp_rate: [...settings.camp_rate],\n      vote_rate: [...settings.vote_rate],\n    })\n  }\n\n  const setSettingFunc = (x, y) => value =>\n    setSettings({\n      config: {\n        ...settings.config,\n      },\n      camp_rate: settings.camp_rate.map((v, i) =>\n        x === 0 && y === i ? value : v\n      ),\n      vote_rate: settings.vote_rate.map((v, i) =>\n        x === 1 && y === i ? value : v\n      ),\n    })\n\n  /* \n     20191026 @wingkwong: \n        <Tabs> iterates each children so that we cannot just place the compnent between <Tabs> and <TabSection>\n    */\n  const renderSettings = () => {\n    return (\n      <>\n        <ToggleButton onClick={handleClose}>\n          {showSettings ? '隱藏設定' : '顯示設定'}\n          {showSettings ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        </ToggleButton>\n        <Collapse in={showSettings}>\n          <Rows>\n            <StyledCheckBox\n              label=\"只計算新增選民，同時假設上屆投票選民維持相冋政治取向\"\n              checked={settings.config.reference_last_election}\n              setChecked={setSettingConfigFunc('reference_last_election')}\n            ></StyledCheckBox>\n            <StyledCheckBox\n              label=\"為上屆自動當選議員加入對立陣營對手\"\n              checked={settings.config.auto_won_add_components}\n              setChecked={setSettingConfigFunc('auto_won_add_components')}\n            ></StyledCheckBox>\n          </Rows>\n        </Collapse>\n      </>\n    )\n  }\n  return (\n    <div>\n      <Tabs titles={['投票取向', '投票率']} buttonLayout=\"centered\">\n        <TabSection>\n          {renderSettings()}\n          <Text variant=\"h5\">民主支持率</Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.camp_rate[0]}\n            setValue={setSettingFunc(0, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.camp_rate[1]}\n            setValue={setSettingFunc(0, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.camp_rate[2]}\n            setValue={setSettingFunc(0, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n        <TabSection>\n          {renderSettings()}\n          <Text variant=\"h5\">已登記選民投票率</Text>\n          <StyledValueSlider\n            label={'18-30歲'}\n            value={settings.vote_rate[0]}\n            setValue={setSettingFunc(1, 0)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'31-59歲'}\n            value={settings.vote_rate[1]}\n            setValue={setSettingFunc(1, 1)}\n          ></StyledValueSlider>\n          <StyledValueSlider\n            label={'60歲及以上'}\n            value={settings.vote_rate[2]}\n            setValue={setSettingFunc(1, 2)}\n          ></StyledValueSlider>\n        </TabSection>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default PredictionChartPanel\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FormControlLabel, Checkbox } from '@material-ui/core/'\n\nCheckBox.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  setChecked: PropTypes.func.isRequired,\n}\n\nexport default function CheckBox(props) {\n  const { label, checked, setChecked, className } = props\n\n  function handleChange(event) {\n    setChecked(event.target.checked)\n  }\n\n  return (\n    <>\n      <FormControlLabel\n        className={className}\n        control={<Checkbox checked={checked} onChange={handleChange} />}\n        label={label}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, CircularProgress } from '@material-ui/core'\nimport Text from 'components/atoms/Text'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nLoadingButton.propTypes = {\n  onClick: PropTypes.func,\n  isLoading: PropTypes.bool.isRequired,\n  label: PropTypes.string.isRequired,\n}\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  && {\n    margin: 4px;\n    color: ${COLORS.main.background};\n  }\n`\n\nconst WhiteText = styled(Text)`\n  && {\n    color: ${COLORS.main.background};\n  }\n`\n\nexport default function LoadingButton(props) {\n  const { label, isLoading, onClick, className } = props\n\n  return (\n    <>\n      <Button\n        variant=\"outlined\"\n        className={className}\n        disabled={isLoading}\n        onClick={onClick}\n      >\n        {isLoading && (\n          <>\n            <StyledCircularProgress size={14} color=\"secondary\" />\n            <WhiteText>{label}</WhiteText>\n          </>\n        )}\n        {!isLoading && <>{label}</>}\n      </Button>\n    </>\n  )\n}\n","import GoogleAnalytics from 'react-ga'\n\nconst trackingId = process.env.REACT_APP_GA_TRACKING_ID\nif (!trackingId) {\n  throw new Error(\n    'Invalid google tracking ID. or set to UA-000000-01 if you dont have any'\n  )\n}\nGoogleAnalytics.initialize(trackingId)\n\nexport function fireEvent({ ca, ac, lb, val = 1, nonInteraction = true }) {\n  GoogleAnalytics.event({\n    category: `${ca}`,\n    action: `${ac}_${lb}`,\n    label: lb,\n    value: val,\n    nonInteraction: nonInteraction,\n  })\n  console.log(`fire Event!`)\n}\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from 'constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/atoms/charts/StackedNormalizedHorizontalBarChart'\nimport PredictionChartPanel from 'components/organisms/PredictionChartPanel'\nimport LoadingButton from 'components/molecules/LoadingButton'\nimport Text from 'components/atoms/Text'\nimport axios from 'axios'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\nimport { DefaultLink } from 'components/atoms/Link'\nimport { fireEvent } from 'utils/ga_fireevent'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst PredictionChartHeader = styled(Box)`\n  && {\n    display: block;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst StyledLoadingButton = styled(LoadingButton)`\n  && {\n    width: 100%;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    padding: 5px 16px;\n    :hover {\n      color: ${COLORS.main.primary};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data, sortFunc) {\n  const res = {\n    data: data\n      .map(d => {\n        return {\n          name: DCREGION[d.code].zh_hk,\n          建制: DCREGION[d.code].unelected_dc_seat + (d.count['建制'] || 0), // 當然議員\n          民主: d.count['民主'] || 0,\n          其他: d.count['其他'] || 0,\n          total: Object.values(d.count).reduce((acc, c) => {\n            acc += c\n            return acc\n          }, 0),\n        }\n      })\n      .sort(\n        sortFunc\n          ? sortFunc\n          : (a, b) => b['建制'] / b.total - a['建制'] / a.total\n      ), // default sort by established count\n    columns: ['name', '建制', '其他', '民主'],\n  }\n  return res\n}\n\nconst sortByDefaultChartOrderFunc = defaultChartData => (a, b) => {\n  const indexFromOriginalChartData = record => {\n    let index = defaultChartData.length\n    defaultChartData.data.forEach((v, i) => {\n      if (v.name === record.name) {\n        index = i\n        return i\n      }\n    })\n    return index\n  }\n  return indexFromOriginalChartData(a) - indexFromOriginalChartData(b)\n}\n\n// const AGE_GROUP_YOUNG = ['18-20', '21-25', '26-30']\nconst AGE_GROUP_MIDDLE = ['31-35', '36-40', '41-45', '46-50', '51-55', '56-60']\nconst AGE_GROUP_OLD = ['61-65', '66-70', '71+']\n\nconst STAT_TYPE_NEW_VOTERS = 'NEW_VOTERS'\nconst STAT_TYPE_ALL_VOTERS = 'VOTERS'\n\nconst groupExpectDataByRegionAndCamp = (constituencies, settings) => {\n  const getVoteCountBySetting = (stat, camp, settings) => {\n    let settingIndex = 0\n    if (AGE_GROUP_MIDDLE.indexOf(stat.category_2) >= 0) {\n      settingIndex = 1\n    } else if (AGE_GROUP_OLD.indexOf(stat.category_2) >= 0) {\n      settingIndex = 2\n    }\n\n    const votePercentage = settings.vote_rate[settingIndex] / 100.0\n    let yellowPercentage = settings.camp_rate[settingIndex] / 100.0\n    if (camp === '建制') {\n      yellowPercentage = 1 - yellowPercentage\n    } else if (camp === '其他') {\n      yellowPercentage = 0 // TODO: how to calculate this?\n    }\n\n    return stat.count * yellowPercentage * votePercentage\n  }\n  const getProjectedVotes = (type, camp, settings, voteStats) => {\n    return voteStats\n      .filter(s => s.subtype === type)\n      .map(s => getVoteCountBySetting(s, camp, settings))\n      .reduce((c, v) => c + v, 0)\n  }\n  // First calculate the winner\n  const expectedResult = constituencies.map(constituency => {\n    let camp = '建制' // default camp = 建制 is this good?\n\n    if (\n      constituency.predecessors &&\n      constituency.predecessors.length > 0 &&\n      settings.config.reference_last_election\n    ) {\n      // if there is predecessor, we use only the new voters\n\n      if (\n        constituency.predecessors[0].predecessor.candidates.length === 1 &&\n        settings.config.auto_won_add_components\n      ) {\n        const camps = ['民主', '建制', '其他']\n        const onlyCandidate =\n          constituency.predecessors[0].predecessor.candidates[0]\n        camps.forEach(camp => {\n          // mock the votes for the last election\n          const votes =\n            getProjectedVotes(\n              STAT_TYPE_ALL_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            ) -\n            getProjectedVotes(\n              STAT_TYPE_NEW_VOTERS,\n              camp,\n              settings,\n              constituency.vote_stats\n            )\n\n          if (onlyCandidate.camp !== camp) {\n            constituency.predecessors[0].predecessor.candidates.push({\n              camp,\n              votes,\n              mock: true,\n            })\n          } else {\n            onlyCandidate.votes = votes\n          }\n        })\n      }\n      let maxVote = 0\n      constituency.predecessors[0].predecessor.candidates.forEach(c => {\n        const projectedVotes =\n          c.votes +\n          getProjectedVotes(\n            STAT_TYPE_NEW_VOTERS,\n            c.camp,\n            settings,\n            constituency.vote_stats\n          )\n        if (\n          projectedVotes >= maxVote &&\n          (!c.mock || settings.config.auto_won_add_components)\n        ) {\n          camp = c.camp\n          maxVote = projectedVotes\n        }\n      })\n    } else {\n      // else we calculate from all voters\n      const establishCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '建制',\n        settings,\n        constituency.vote_stats\n      )\n      const democracyCount = getProjectedVotes(\n        STAT_TYPE_ALL_VOTERS,\n        '民主',\n        settings,\n        constituency.vote_stats\n      )\n      if (democracyCount > establishCount) {\n        camp = '民主'\n      }\n    }\n\n    return {\n      cacode: constituency.code,\n      camp,\n    }\n  })\n  const byCodes = _.groupBy(expectedResult, c => c.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nconst CampCompareChartContainer = props => {\n  const { className } = props\n  const [predictEnabled, setPredictEnabled] = React.useState(false)\n  const [isLoadingPrediction, setIsLoadingPrediction] = React.useState(true)\n  const [predictoinData, setPredictionData] = React.useState({})\n  const [settings, setSettings] = React.useState({\n    config: {\n      auto_won_add_components: true,\n      reference_last_election: true,\n    },\n    camp_rate: [60, 50, 40],\n    vote_rate: [40, 40, 40],\n  })\n  useEffect(() => {\n    async function fetchData() {\n      const result = await axios(`/static/data/prediction.json`)\n      if (result.status === 200) {\n        setPredictionData(result.data.data)\n        setIsLoadingPrediction(false)\n      }\n    }\n    fetchData()\n  }, [])\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const dataFroGraph = groupDataByRegionAndCamp(data.dcd_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n\n        let d3Data = dataForD3\n\n        if (!isLoadingPrediction && predictEnabled) {\n          const expectedDataForGraph = groupExpectDataByRegionAndCamp(\n            predictoinData.dcd_constituencies,\n            settings\n          )\n          d3Data = convertToD3Compatible(\n            expectedDataForGraph,\n            sortByDefaultChartOrderFunc(dataForD3)\n          )\n        }\n\n        return (\n          <Container className={className}>\n            <PredictionChartHeader>\n              <Text variant=\"h5\">\n                {predictEnabled ? '2019選舉結果模擬' : '現屆區議會勢力分布'}\n              </Text>\n              <br />\n              <Text variant=\"body2\">\n                {predictEnabled && (\n                  <>\n                    <p>\n                      本模擬綜合2019年選民登記數字，18及19年間新增選民數字，以及2015區議會選舉實際投票結果。\n                    </p>\n                    <p>\n                      首先將15年區選各選區投票結果歸納為分為「建制」、「民主」及「其他」三陣營，並假設選民維持投票取向，並按其比例將各陣營得票分配至2018的選民登記數字。\n                    </p>\n                    <p>\n                      滑桿只調較2018及19年間新增選民的投票取向及投票率，如欲直接調較19年選民的取態，請到「設定\n                      」取消「只計算新增選民，同時假設上屆投票選民維持相冋政治取向」一項。\n                    </p>\n                    <p>\n                      是次選舉將選出452個民選議席，連同新界區27名當然議員共479席。當然議員即各區鄉事委員會主席，故這些議席全歸類為建制派。\n                    </p>\n                    <p>\n                      選舉結果由眾多因素影響，故模擬結果僅供參考，亦因數據來源限制而簡化，如有建議歡迎\n                      <DefaultLink\n                        target=\"_blank\"\n                        href=\"https://forms.gle/irD6tEznWPNda6w59\"\n                      >\n                        回報\n                      </DefaultLink>\n                      。\n                    </p>\n                  </>\n                )}\n              </Text>\n              {!predictEnabled && (\n                <StyledLoadingButton\n                  isLoading={loading}\n                  onClick={() => {\n                    setPredictEnabled(true)\n                    fireEvent({\n                      ca: 'simulation',\n                      ac: 'click',\n                      lb: 'start_simulate',\n                    })\n                  }}\n                  label=\"模擬結果\"\n                />\n              )}\n            </PredictionChartHeader>\n            <br />\n            {!loading && predictEnabled && (\n              <PredictionChartPanel\n                settings={settings}\n                setSettings={setSettings}\n              />\n            )}\n            <StackedNormalizedHorizontalBarChart\n              data={d3Data}\n            ></StackedNormalizedHorizontalBarChart>\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport { Typography, Grid } from '@material-ui/core'\n\nconst TimeGrid = styled(Grid)`\n  && {\n    text-align: center;\n  }\n`\n\nconst Time = styled(Typography)`\n  && {\n    font-weight: 700;\n  }\n`\n\nconst Unit = styled(Typography)`\n  && {\n  }\n`\n\nclass Countdown extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n    }\n  }\n\n  componentDidMount() {\n    // update every second\n    this.interval = setInterval(() => {\n      const date = this.calculateCountdown(this.props.date)\n      date ? this.setState(date) : this.stop()\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.stop()\n  }\n\n  calculateCountdown(endDate) {\n    let diff = (Date.parse(new Date(endDate)) - Date.parse(new Date())) / 1000\n\n    // clear countdown when date is reached\n    if (diff <= 0) return false\n\n    const timeLeft = {\n      years: 0,\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0,\n      millisec: 0,\n    }\n\n    // calculate time difference between now and expected date\n    if (diff >= 365.25 * 86400) {\n      // 365.25 * 24 * 60 * 60\n      timeLeft.years = Math.floor(diff / (365.25 * 86400))\n      diff -= timeLeft.years * 365.25 * 86400\n    }\n    if (diff >= 86400) {\n      // 24 * 60 * 60\n      timeLeft.days = Math.floor(diff / 86400)\n      diff -= timeLeft.days * 86400\n    }\n    if (diff >= 3600) {\n      // 60 * 60\n      timeLeft.hours = Math.floor(diff / 3600)\n      diff -= timeLeft.hours * 3600\n    }\n    if (diff >= 60) {\n      timeLeft.min = Math.floor(diff / 60)\n      diff -= timeLeft.min * 60\n    }\n    timeLeft.sec = diff\n\n    return timeLeft\n  }\n\n  stop() {\n    clearInterval(this.interval)\n  }\n\n  addLeadingZeros(value) {\n    value = String(value)\n    while (value.length < 2) {\n      value = '0' + value\n    }\n    return value\n  }\n\n  render() {\n    const countDown = this.state\n\n    return (\n      <>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.days)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.hours)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.min)}</Time>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Time variant=\"h1\">{this.addLeadingZeros(countDown.sec)}</Time>\n          </TimeGrid>\n        </Grid>\n        <Grid container>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">天</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">小時</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">分鐘</Unit>\n          </TimeGrid>\n          <TimeGrid item xs={3}>\n            <Unit variant=\"h6\">秒</Unit>\n          </TimeGrid>\n        </Grid>\n      </>\n    )\n  }\n}\n\nCountdown.defaultProps = {\n  date: new Date(),\n}\n\nexport default Countdown\n","import styled from 'styled-components'\nimport Columns from 'components/atoms/Columns'\nimport { COLORS } from 'ui/theme'\n\nexport const Alert = styled(Columns)`\n  && {\n    width: 100%;\n    padding: 4px 16px 1px;\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n  }\n`\n","import * as turf from '@turf/turf'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getSingleFeatureFromPoint = ({ lng, lat }) => {\n  const pt = turf.point([lng, lat])\n  // TODO: consider using different year in future\n  // but need to take care of app size\n  const result = {\n    code: null,\n    year: 2019,\n  }\n  for (let i = 0; i < dc2019.features.length; i++) {\n    const feature = dc2019.features[i]\n    const poly = turf.polygon(feature.geometry.coordinates)\n    if (turf.booleanPointInPolygon(pt, poly)) {\n      result.code = feature.properties.CACODE\n      break\n    }\n  }\n  return result\n}\n\nexport const getAllFeaturesFromPoint = (\n  point,\n  featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n) => {\n  const pt = turf.point([point.lng, point.lat])\n  const result = featuresArray.map(feature => {\n    let polygonProps = {}\n    for (let i = 0, n = feature.features.length; i < n; i++) {\n      const poly = turf.polygon(feature.features[i].geometry.coordinates)\n      if (turf.booleanPointInPolygon(pt, poly)) {\n        polygonProps = { ...feature.features[i].properties }\n        break\n      }\n    }\n    return {\n      year: feature.name.split('_')[1],\n      ...polygonProps,\n    }\n  })\n\n  return result\n}\n\nexport const getCentroidFromYearAndCode = (year, code) => {\n  const featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n  const selectedIndex = [2003, 2007, 2011, 2015, 2019].findIndex(\n    y => y === year\n  )\n\n  if (selectedIndex > -1) {\n    const selectedFeature = featuresArray[selectedIndex]\n    const polygon = selectedFeature.features.find(\n      feature => feature.properties.CACODE === code\n    )\n    const centroid = turf.centroid(polygon)\n    return centroid.geometry.coordinates\n  }\n  return\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport match from 'autosuggest-highlight/match'\nimport parse from 'autosuggest-highlight/parse'\nimport TextField from '@material-ui/core/TextField'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport { getSingleFeatureFromPoint } from 'utils/features'\nimport _ from 'lodash'\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          classes: {\n            input: classes.input,\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton color=\"primary\" aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.label, query)\n  const parts = parse(suggestion.label, matches)\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      {parts.map((part, index) =>\n        part.highlight ? (\n          <span key={String(index)} style={{ fontWeight: 500 }}>\n            {part.text}\n          </span>\n        ) : (\n          <strong key={String(index)} style={{ fontWeight: 300 }}>\n            {part.text}\n          </strong>\n        )\n      )}\n    </MenuItem>\n  )\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#7B68EE',\n  },\n})\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    value: '',\n    suggestions: [],\n  }\n\n  debounced = null\n\n  async getSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    const inputLength = inputValue.length\n\n    if (inputLength > 0) {\n      const records = await AddressParser.parse(inputValue)\n      const result = records\n        .filter((_, index) => index < 10)\n        .map(record => ({\n          coordinate: record.coordinate(),\n          label: record.fullAddress(AddressParser.Address.LANG_ZH),\n        }))\n        .filter(\n          (ele, index, self) =>\n            index === self.findIndex(record => record.label === ele.label)\n        )\n\n      return result\n    }\n\n    return []\n  }\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    if (this.debounced) {\n      this.debounced.cancel()\n    }\n    this.debounced = _.debounce(() => {\n      this.getSuggestions(value).then(result => {\n        this.setState({\n          suggestions: result,\n        })\n      })\n    }, 300)\n    this.debounced()\n  }\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    })\n  }\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    })\n  }\n\n  handleSuggestionSelected = (\n    event,\n    { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }\n  ) => {\n    const constituency = getSingleFeatureFromPoint(suggestion.coordinate)\n    // TODO: better to use action to dispatch this event\n    this.props.handleAddressSelected(constituency)\n\n    this.setState({\n      value: '',\n    })\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      onSuggestionSelected: this.handleSuggestionSelected,\n      getSuggestionValue,\n      renderSuggestion,\n    }\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: '輸入屋苑自動搜尋 !',\n            value: this.state.value,\n            onChange: this.handleChange('value'),\n            InputLabelProps: {\n              shrink: true,\n            },\n          }}\n          theme={{\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n            input: classes.suggestInput,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper\n              square\n              {...options.containerProps}\n              style={{\n                width: '100%',\n              }}\n            >\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    )\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(IntegrationAutosuggest)\n","import styled from 'styled-components'\nimport Avatar from '@material-ui/core/Avatar'\nimport { COLORS } from 'ui/theme'\n\nexport const PeopleAvatar = styled(Avatar)`\n  && {\n    opacity: ${props => props.opacity};\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    border: ${props => props.borderwidth}px\n      ${props => props.camp && COLORS.camp[props.camp].background} solid;\n  }\n`\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport { Box, TextField } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\n//import Avatar from '@material-ui/core/Avatar'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport { withApollo } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport _ from 'lodash'\nimport styled from 'styled-components'\nimport { getColorFromCamp } from 'utils/helper'\n\nconst GET_PEOPLE = gql`\n  query($nameRegex: String) {\n    dcd_candidates(\n      where: {\n        person: {\n          _or: [\n            { name_zh: { _like: $nameRegex } }\n            { name_en: { _ilike: $nameRegex } }\n          ]\n        }\n      }\n      limit: 50\n      order_by: { person_id: asc, year: desc }\n      distinct_on: person_id\n    ) {\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n      }\n      camp\n      year\n      constituency {\n        code\n        name_zh\n        name_en\n        district {\n          dc_name_zh\n          dc_name_en\n        }\n      }\n    }\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton color=\"primary\" aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nconst styles = theme => ({\n  root: {\n    height: 100,\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#ffd731',\n  },\n})\n\nconst PeopleSearcher = props => {\n  const { classes, handlePeopleSelected } = props\n  const [value, setValue] = useState('')\n  const [suggestions, setSuggestions] = useState([])\n  let debounced = null\n\n  const onChange = (event, { newValue }) => {\n    setValue(newValue)\n  }\n\n  const fetchUsers = async keyword => {\n    const { data } = await props.client.query({\n      query: GET_PEOPLE,\n      variables: {\n        nameRegex: `%${keyword}%`,\n      },\n    })\n    data.dcd_candidates.sort((a, b) => b.year - a.year)\n    return data.dcd_candidates\n  }\n\n  const onSuggestionsFetchRequested = ({ value }) => {\n    if (debounced) {\n      debounced.cancel()\n    }\n    debounced = _.debounce(() => {\n      fetchUsers(value).then(result => {\n        setSuggestions(result)\n      })\n    }, 500)\n    debounced()\n  }\n\n  const onSuggestionsClearRequested = () => {\n    setSuggestions([])\n  }\n\n  const getSuggestionValue = suggestion => {\n    return suggestion.name_zh ? suggestion.name_zh : suggestion.name_en\n  }\n\n  const renderSuggestion = (suggestion, { query, isHighlighted }) => {\n    const homeUrl = process.env.REACT_APP_HOST_URI\n    const { person, camp, constituency } = suggestion\n    const { uuid, name_zh, name_en } = person\n    const district = constituency['district']\n\n    const avatarPath = uuid\n      ? `${homeUrl}/static/images/avatar/${uuid}.jpg`\n      : `${homeUrl}/static/images/avatar/default.png`\n\n    // keyword this is not accessible here. so define the style here\n    const suggestionNameStyle = {\n      float: 'left',\n      marginLeft: '20px',\n      lineHeight: '45px',\n    }\n    const boldStyle = {\n      fontWeight: '800',\n    }\n    const selectedSuggestionNameStyle = {\n      ...suggestionNameStyle,\n      ...boldStyle,\n    }\n    const suggestionDistrictStyle = {\n      marginLeft: '8px',\n      fontWeight: 500,\n      fontSize: '14px',\n      color: '#777777',\n      float: 'right',\n      textAlign: 'right',\n      lineHeight: '46px',\n    }\n    const selectedSuggestionDistrictStyle = {\n      ...suggestionDistrictStyle,\n      ...boldStyle,\n    }\n\n    return (\n      <MenuItem selected={isHighlighted} component=\"div\">\n        <PeopleAvatar\n          borderwidth={2}\n          camp={getColorFromCamp(camp)}\n          src={avatarPath}\n          imgProps={{\n            onError: e => {\n              e.target.src = `${homeUrl}/static/images/avatar/default.png`\n            },\n          }}\n          style={{\n            width: '48px',\n            height: '48px',\n            borderRadius: '24px',\n          }}\n        />\n        <div>\n          <span\n            style={\n              isHighlighted ? suggestionNameStyle : selectedSuggestionNameStyle\n            }\n          >\n            {name_zh ? name_zh : name_en}\n          </span>\n          <span\n            style={\n              isHighlighted\n                ? suggestionDistrictStyle\n                : selectedSuggestionDistrictStyle\n            }\n          >\n            {district\n              ? `${district['dc_name_zh']}｜${constituency['name_zh']}`\n              : ''}\n          </span>\n        </div>\n      </MenuItem>\n    )\n  }\n\n  const renderSuggestionsContainer = options => (\n    <Paper\n      square\n      {...options.containerProps}\n      style={{\n        width: '100%',\n      }}\n    >\n      {options.children}\n    </Paper>\n  )\n\n  const onSuggestionSelected = (evt, { suggestion }) => {\n    handlePeopleSelected(suggestion.person)\n  }\n\n  // Autosuggest will pass through all these props to the input.\n  const inputProps = {\n    classes,\n    placeholder: '輸入候選人姓名...',\n    value: value || '',\n    onChange,\n    InputLabelProps: {\n      shrink: true,\n    },\n  }\n\n  // Finally, render it!\n  return (\n    <Container>\n      <Autosuggest\n        suggestions={suggestions}\n        onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={onSuggestionsClearRequested}\n        onSuggestionSelected={onSuggestionSelected}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        renderSuggestionsContainer={renderSuggestionsContainer}\n        inputProps={inputProps}\n        renderInputComponent={renderInputComponent}\n        theme={{\n          suggestionsList: classes.suggestionsList,\n          suggestion: classes.suggestion,\n          input: classes.suggestInput,\n        }}\n      />\n    </Container>\n  )\n}\n\nPeopleSearcher.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withApollo(withStyles(styles)(PeopleSearcher))\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nconst AreasTabs = styled(Tabs)`\n  && {\n  }\n`\n// Updated 2019-10-19 Hackathon - make the AreasTab look like a button\nconst AreasTab = styled(Tab)`\n  && {\n    background-color: ${COLORS.main.primary};\n    color: ${COLORS.main.background};\n    margin: 3px 5px;\n    :hover {\n      color: ${COLORS.main.primary};\n      background-color: ${COLORS.main.background};\n      border-color: 1px ${COLORS.main.primary} solid;\n    }\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`district-tabpanel-${index}`}\n      aria-labelledby={`district-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n}\n\nexport default function AreaTabs(props) {\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.expanded ? 0 : false\n  )\n  const [expanded, setExpanded] = React.useState(props.expanded)\n  const { titles, children } = props\n\n  function handleChange(event, newValue) {\n    if (selectedTab === newValue) {\n      setExpanded(!expanded)\n      setSelectedTab(false)\n    } else {\n      setExpanded(true)\n      setSelectedTab(newValue)\n    }\n  }\n\n  return (\n    <>\n      <AreasTabs value={selectedTab} onChange={handleChange} centered>\n        {titles.map((title, index) => (\n          <AreasTab\n            label={title}\n            id={`district-tab-${index}`}\n            key={index}\n            aria-controls={`district-tabpanel-${index}`}\n          />\n        ))}\n      </AreasTabs>\n      {// TODO: support single tab\n      children &&\n        children.length > 0 &&\n        children.map((child, index) => (\n          <TabPanel key={index} hidden={!expanded || selectedTab !== index}>\n            {child}\n          </TabPanel>\n        ))}\n    </>\n  )\n}\n","import React from 'react'\nimport { Typography, Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n} from '@material-ui/core'\nimport _ from 'lodash'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_AREA } from 'queries/gql'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport AreaTabs from 'components/organisms/AreaTabs'\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n} from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n    text-align: left;\n  }\n`\n\nconst DistrictExpansionPanel = styled(ExpansionPanel)`\n  && {\n    margin: 5px 0;\n    box-shadow: none;\n  }\n`\n\nconst DistrictExpansionPanelSummary = styled(ExpansionPanelSummary)`\n  && {\n  }\n`\n\nconst DistrictExpansionPanelDetails = styled(ExpansionPanelDetails)`\n  && {\n    padding: 16px;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  const renderDCCA = district => {\n    return (\n      <div key={district.dc_code}>\n        <DistrictContainer\n          key={district.dc_code}\n          onClick={() => {\n            dispatch({ type: DRAWER_CLOSE })\n            props.history.push(getDistrictOverviewUriFromTag(district.dc_code))\n          }}\n          color=\"secondary\"\n        >\n          <Typography variant=\"h5\">總覽</Typography>\n        </DistrictContainer>\n        {district.constituencies.map(c => {\n          return (\n            <DistrictContainer\n              key={c.code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(getConstituencyUriFromTag(c.code))\n              }}\n              color=\"secondary\"\n            >\n              <Typography variant=\"h5\">{c.name_zh}</Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const renderArea = (area, i) => (\n    <div key={`area-${i}`}>\n      {area.districts.map((d, index) => (\n        <DistrictExpansionPanel\n          key={`district-panel-${d.dc_code}`}\n          TransitionProps={{ unmountOnExit: true }}\n        >\n          <DistrictExpansionPanelSummary\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n            expandIcon={<ExpandMoreIcon />}\n          >\n            <Typography variant=\"h5\">{d.dc_name_zh}</Typography>\n          </DistrictExpansionPanelSummary>\n          <DistrictExpansionPanelDetails>\n            {renderDCCA(d)}\n          </DistrictExpansionPanelDetails>\n        </DistrictExpansionPanel>\n      ))}\n    </div>\n  )\n\n  return (\n    <Container>\n      <Query query={QUERY_GET_AREA}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const areas = _.uniqBy(\n            data.dcd_districts.map(d => ({\n              area_code: d.area_code,\n              area_name_zh: d.area_name_zh,\n            })),\n            'area_code'\n          )\n\n          const areasWithDistricts = areas.map(a => ({\n            ...a,\n            districts: data.dcd_districts.filter(\n              d => d.area_name_zh === a.area_name_zh\n            ),\n          }))\n\n          const areaNames = areas.map(a => a.area_name_zh)\n\n          return (\n            <AreaTabs titles={areaNames} expanded={props.expanded}>\n              {areasWithDistricts.map((a, index) => {\n                return renderArea(a, index)\n              })}\n            </AreaTabs>\n          )\n        }}\n      </Query>\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport AddressSearcher from 'components/molecules/AddressSearcher'\nimport PeopleSearcher from 'components/molecules/PeopleSearcher'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport { COLORS } from 'ui/theme'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport { getProfilePath } from 'utils/helper'\nimport DistrictSelector from 'components/molecules/DistrictSelector'\nimport { fireEvent } from 'utils/ga_fireevent'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    position: relative;\n    left: 0;\n    right: 0;\n    padding: 21px 0px;\n  }\n`\n\nconst TabContainer = styled(Box)`\n  && {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    margin: 10px 10px 15px 10px;\n    padding-bottom: 15px;\n    color: ${props =>\n      props.active === 'active' ? COLORS.main.primary : COLORS.main.text};\n    border-bottom: ${props =>\n      props.active === 'active' ? `1px solid ${COLORS.main.primary}` : 'none'};\n    border-radius: 0px;\n  }\n`\n\nfunction SearchTab(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.selectedTab || 'district'\n  )\n  function handleAddressSelected(result) {\n    /* TODO:\n      Use context (?) to store the Global district result array\n      When user select click previous button in district page,\n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${result.year}/${result.code}`)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function handlePeopleSelected(person) {\n    const path = getProfilePath(person)\n    props.history.push(path)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function onTabSelected(tab) {\n    return () => {\n      fireEvent({\n        ca: 'search',\n        ac: 'click',\n        lb: `by_${tab}`,\n      })\n      setSelectedTab(tab)\n    }\n  }\n\n  function renderSearchDistrict() {\n    return (\n      <ContentRowContainer>\n        <DistrictSelector expanded={false} />\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  function renderSearchPeople() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <PeopleSearcher handlePeopleSelected={handlePeopleSelected} />\n        </AddressSearchContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  return (\n    <Container>\n      <TabContainer>\n        <TabButton\n          active={selectedTab === 'district' ? 'active' : 'inactive'}\n          onClick={onTabSelected('district')}\n        >\n          <Typography variant=\"h3\">找選區</Typography>\n        </TabButton>\n        <TabButton\n          active={selectedTab === 'people' ? 'active' : 'inactive'}\n          onClick={onTabSelected('people')}\n        >\n          <Typography variant=\"h3\">找候選人</Typography>\n        </TabButton>\n      </TabContainer>\n      {selectedTab === 'district'\n        ? renderSearchDistrict()\n        : renderSearchPeople()}\n    </Container>\n  )\n}\n\nexport default withRouter(SearchTab)\n","import React, { Component } from 'react'\nimport { Query } from 'react-apollo'\nimport Summary from 'components/templates/Summary'\nimport CampCompareChartContainer from 'components/templates/CampCompareChartContainer'\nimport Countdown from 'components/atoms/Countdown'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport { Alert } from 'components/atoms/Alert'\nimport SearchTab from 'components/organisms/SearchTab'\nimport { QUERY_GET_CONFIG } from 'queries/gql'\nimport { COLORS } from 'ui/theme'\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 16px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst StyledCampCompareChartContainer = styled(CampCompareChartContainer)`\n  && {\n    margin-top: 16px;\n  }\n`\nconst CountdownContainer = styled.div`\n  && {\n    width: 100%;\n  }\n`\n\nconst StyledSearchTab = styled(SearchTab)`\n  && {\n    padding: 100px;\n  }\n`\nconst ConfigCenterText = styled.div`\n  && {\n    width: 100%;\n    text-align: center;\n    a {\n      text-decoration: none;\n      color: ${COLORS.main.primary};\n    }\n  }\n`\n\nconst electionDate = 'Nov 24, 2019 07:30:00'\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n  onTabSelected(type) {}\n\n  renderAlert = () => {\n    return (\n      <Query query={QUERY_GET_CONFIG} variables={{ key: 'landing_alert' }}>\n        {({ loading, error, data }) => {\n          if (loading || error) return null\n          return data.dcd_config[0] ? (\n            <Alert>\n              <Typography variant=\"h6\" gutterBottom>\n                {data.dcd_config[0].value.text}\n              </Typography>\n            </Alert>\n          ) : (\n            <></>\n          )\n        }}\n      </Query>\n    )\n  }\n\n  renderCenterText = () => {\n    return (\n      <Query\n        query={QUERY_GET_CONFIG}\n        variables={{ key: 'landing_center_text' }}\n      >\n        {({ loading, error, data }) => {\n          if (loading || error) return null\n          return data.dcd_config[0] ? (\n            <ConfigCenterText variant=\"h6\" gutterBottom>\n              <div\n                dangerouslySetInnerHTML={{\n                  __html: data.dcd_config[0].value.html_text,\n                }}\n              />\n            </ConfigCenterText>\n          ) : (\n            <></>\n          )\n        }}\n      </Query>\n    )\n  }\n\n  render() {\n    return (\n      <>\n        {this.renderAlert()}\n        <TopSection>\n          {Date.parse(new Date(electionDate)) > Date.parse(new Date()) && (\n            <CountdownContainer>\n              <Typography\n                variant=\"h5\"\n                style={{ textAlign: 'center' }}\n                gutterBottom\n              >\n                距離投票日\n              </Typography>\n              <Countdown date={electionDate} />\n            </CountdownContainer>\n          )}\n          {/* <LandingIcon /> */}\n        </TopSection>\n        <Container>\n          <Summary />\n          {this.renderCenterText()}\n          <StyledSearchTab />\n          <StyledCampCompareChartContainer />\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default IndexPage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport SwipeableViews from 'react-swipeable-views'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    box-shadow: none;\n    background: white;\n    .MuiTabs-indicator {\n      background: ${props => props.indicatorcolor || 'black'};\n    }\n  }\n`\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <>{children}</>\n    </Typography>\n  )\n}\n\nScrollableTabs.propTypes = {\n  children: PropTypes.node,\n  titles: PropTypes.array,\n  buttonLayout: PropTypes.oneOf(['left', 'centered']),\n}\n\nScrollableTabs.defaultProps = {\n  buttonLayout: 'left',\n}\n\nexport default function ScrollableTabs(props) {\n  const {\n    titles,\n    children,\n    buttonLayout,\n    indicatorcolor,\n    tabnumber = 0,\n    variant,\n  } = props\n  const [selectedTab, setSelectedTab] = React.useState(tabnumber)\n  function handleChange(event, newValue) {\n    setSelectedTab(newValue)\n  }\n  function handleChangeIndex(newValue) {\n    setSelectedTab(newValue)\n  }\n\n  const shouldCenter = buttonLayout === 'centered' ? true : false\n\n  return (\n    <>\n      <StyledAppBar position=\"static\" indicatorcolor={indicatorcolor}>\n        <Tabs\n          value={selectedTab}\n          onChange={handleChange}\n          centered={shouldCenter}\n          variant={variant || 'scrollable'} // 'centered', 'scrollable', 'fullWidth'\n          scrollButtons=\"auto\"\n        >\n          {titles.map((title, index) => (\n            <Tab\n              label={title}\n              id={`scrollable-auto-tab-${index}`}\n              key={index}\n              aria-controls={`scrollable-auto-tabpanel-${index}`}\n            />\n          ))}\n        </Tabs>\n      </StyledAppBar>\n      <SwipeableViews index={selectedTab} onChangeIndex={handleChangeIndex}>\n        {// TODO: support single tab\n        children &&\n          children.length > 0 &&\n          children\n            .filter(child => child)\n            .map((child, index) => <TabPanel key={index}>{child}</TabPanel>)}\n      </SwipeableViews>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport styled from 'styled-components'\n\nconst MobileTableCell = styled(TableCell)`\n  && {\n    padding: 8px 10px;\n  }\n`\n\nconst CouncillorMeetingAttendace = props => {\n  const { meetings } = props\n\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <MobileTableCell align=\"left\">會議</MobileTableCell>\n          <MobileTableCell align=\"left\">性質</MobileTableCell>\n          <MobileTableCell align=\"left\">年份</MobileTableCell>\n          <MobileTableCell align=\"left\">與席</MobileTableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {meetings.map((m, index) => (\n          <TableRow key={index}>\n            <MobileTableCell component=\"th\" scope=\"row\">\n              {m.meeting.meet_name}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_type}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.meeting.meet_year}\n            </MobileTableCell>\n            <MobileTableCell align=\"left\">\n              {m.attended}/{m.total}\n            </MobileTableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  )\n}\n\nCouncillorMeetingAttendace.propsType = {\n  meetings: PropTypes.array,\n}\n\nexport default CouncillorMeetingAttendace\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_MEETING_ATTENDANCES } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport CouncillorMeetingAttendace from 'components/templates/CouncillorMeetingAttendance'\nimport _ from 'lodash'\n\nconst CouncillorMeetingAttendaceContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_MEETING_ATTENDANCES}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const meetings = _.flatten(\n          data.dcd_councillors.map(c => c.meeting_attendances)\n        )\n        return (\n          <>\n            <CouncillorMeetingAttendace meetings={meetings} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorMeetingAttendaceContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default CouncillorMeetingAttendaceContainer\n","import styled from 'styled-components'\nimport Card from '@material-ui/core/Card'\nimport React from 'react'\n\nconst StyledCard = styled(Card)`\n  && {\n    padding: 16px;\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nexport const PlainCard = props => {\n  return <StyledCard {...props}>{props.children}</StyledCard>\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { PlainCard } from 'components/molecules/Card'\nimport Typography from '@material-ui/core/Typography'\nimport { Box, Grid } from '@material-ui/core'\nimport { SuccessText, FailureText } from '../atoms/Text'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { formatNumber } from 'utils/helper'\nimport {\n  getCentroidFromYearAndCode,\n  getAllFeaturesFromPoint,\n} from 'utils/features'\n\nconst PersonElectionHistoriesTitle = styled.div`\n  && {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n`\n\nconst createQueryStringToBattlegroundPage = election => {\n  let targetPath = `/district/2019/${election.constituency.code}`\n  switch (election.year) {\n    case 2019:\n      return targetPath\n    case 2015:\n    case 2011:\n    case 2007:\n    case 2003:\n      const coordinates = getCentroidFromYearAndCode(\n        election.year,\n        election.constituency.code\n      )\n      const point = {\n        lng: coordinates[0],\n        lat: coordinates[1],\n      }\n      const dccaHistories = getAllFeaturesFromPoint(point)\n      targetPath = `/district/2019/${\n        dccaHistories.find(history => history.year === '2019').CACODE\n      }`\n      return targetPath + `?year=${election.year}`\n    default:\n      return '#'\n  }\n}\n\nconst PersonElectionHistories = props => {\n  const { histories } = props\n\n  histories.sort((a, b) => {\n    if (b.year > a.year) return 1\n    else if (b.year < a.year) return -1\n    else {\n      if (b.election_type === 'ordinary' && a.election_type === 'by-election')\n        return 1\n      else return -1\n    }\n  })\n\n  return (\n    <>\n      {histories.map((m, index) => (\n        <UnstyledNavLink\n          key={index}\n          to={createQueryStringToBattlegroundPage(m)}\n        >\n          <PlainCard color=\"#fafafa\">\n            <PersonElectionHistoriesTitle>\n              <Box>\n                <Typography variant=\"h6\" gutterBottom>\n                  {m.year}\n                </Typography>\n              </Box>\n              <Box>\n                {createQueryStringToBattlegroundPage(m) !== '#' && (\n                  <NavigateNextIcon />\n                )}\n              </Box>\n            </PersonElectionHistoriesTitle>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h5\">{m.constituency.name_zh}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h5\">{`${m.political_affiliation || '-'}（${\n                  m.camp\n                }）`}</Typography>\n              </Grid>\n              <Grid item xs={3}>\n                {m.is_won ? (\n                  <SuccessText>\n                    {m.votes > 0 ? `${formatNumber(m.votes)}票` : '自動當選'}\n                  </SuccessText>\n                ) : (\n                  <FailureText>\n                    {m.votes > 0 && `${formatNumber(m.votes)}票`}\n                  </FailureText>\n                )}\n              </Grid>\n            </Grid>\n            <Grid container>\n              <Grid item xs={4}>\n                <Typography variant=\"h6\">{m.constituency.code}</Typography>\n              </Grid>\n              <Grid item xs={5}>\n                <Typography variant=\"h6\">報稱政治聯繫</Typography>\n              </Grid>\n              {m.votes > 0 ? (\n                <Grid item xs={3}>\n                  {m.is_won ? (\n                    <SuccessText>當選</SuccessText>\n                  ) : (\n                    <FailureText>落敗</FailureText>\n                  )}\n                </Grid>\n              ) : (\n                <Grid item xs={3}></Grid>\n              )}\n            </Grid>\n          </PlainCard>\n        </UnstyledNavLink>\n      ))}\n    </>\n  )\n}\n\nPersonElectionHistories.propsType = {\n  histories: PropTypes.array,\n}\n\nexport default PersonElectionHistories\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_PERSON_ELECTIONS } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport PersonElectionHistories from 'components/templates/PersonElectionHistories'\n\nconst PersonElectionHistoriesContainer = props => {\n  const { personId } = props\n  return (\n    <Query\n      query={QUERY_GET_PERSON_ELECTIONS}\n      variables={{ person_id: personId }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <PersonElectionHistories\n              histories={data.dcd_people_by_pk.candidates}\n            />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nPersonElectionHistoriesContainer.propsType = {\n  personId: PropTypes.int,\n}\nexport default PersonElectionHistoriesContainer\n","import styled from 'styled-components'\nimport { Card, CardContent } from '@material-ui/core'\nimport Text from '../atoms/Text'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Microlink from '@microlink/react'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 16px;\n    background-color: ${props => props.color || '#fff'};\n  }\n`\n\nconst StyledMicrolink = styled(Microlink)`\n  && {\n    width: 100%;\n    max-width: calc(100vw - 64px);\n  }\n`\n\nconst getPersonVoteText = personVote => {\n  switch (personVote) {\n    case 'MOVE':\n      return '動議'\n    case 'SECOND':\n      return '和議'\n    case 'YES':\n      return '贊成'\n    case 'NO':\n      return '否決'\n    case 'ABSTAIN':\n      return '棄權'\n    case 'ABSENT':\n      return '缺席'\n    case 'NORECORD':\n      return '無紀錄'\n    case 'PRESENT':\n      return '與席'\n    default:\n      return ''\n  }\n}\n\nconst getEventTypeText = (type, personVote) => {\n  switch (type) {\n    case 'VOTE':\n      return `[投票 - ${getPersonVoteText(personVote)}]`\n    case 'SPEECH':\n      return '[言論]'\n    default:\n      return ''\n  }\n}\n\nconst trimDescription = description => {\n  if (!description) return ''\n  return description.length > 100\n    ? description.substring(0, 100) + '...'\n    : description\n}\n\nconst validateUrl = url => {\n  const patt = /(http|https):\\/\\/.*/\n  const match = patt.exec(url)\n  return match ? match[0] : null\n}\n\nconst PersonEvent = props => {\n  const { title, eventType, date, description, url, personVote } = props\n  const validatedUrl = validateUrl(url)\n\n  return (\n    <StyledCard>\n      <CardContent>\n        <Text gutterBottom>{date}</Text>\n        {eventType === 'MEDIA' && validatedUrl ? (\n          <StyledMicrolink url={validatedUrl} size=\"large\" />\n        ) : (\n          <>\n            <Text variant=\"h5\" gutterBottom>\n              {`${getEventTypeText(eventType, personVote)} ${title}`}\n            </Text>\n            <Text color=\"textSecondary\">{trimDescription(description)}</Text>\n          </>\n        )}\n      </CardContent>\n    </StyledCard>\n  )\n}\n\nPersonEvent.propTypes = {\n  children: PropTypes.node,\n  title: PropTypes.string.isRequired,\n  eventType: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n}\n\nexport default PersonEvent\n","//\n\nimport React, { useEffect, useState } from 'react'\nimport Rows from 'components/atoms/Rows'\nimport PropTypes from 'prop-types'\nimport { Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport axios from 'axios'\nimport PersonEvent from 'components/molecules/PersonEvent'\nimport Typography from '@material-ui/core/Typography'\nimport { DefaultLink } from 'components/atoms/Link'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    margin-top: 32px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    border: 1px black solid;\n    height: 48px;\n    padding: 0 32px;\n  }\n`\n\nconst FCPersonData = props => {\n  const { fcUuid, name, filterFunc } = props\n  const [events, setEvents] = useState([])\n  useEffect(() => {\n    async function fetchData() {\n      const result = await axios(\n        `https://api.hkfactcheck.io/persons/${fcUuid}/events`\n      )\n\n      setEvents(result.data.filter(filterFunc).filter((_, i) => i < 5))\n    }\n    fetchData()\n  }, [])\n  const fcUri = `https://hkfactcheck.io/person/${fcUuid}/${name}`\n\n  return (\n    <>\n      <Container>\n        {events.length > 0 ? (\n          <Typography variant=\"body\">\n            以下資料取自\n            <DefaultLink target=\"_blank\" href={fcUri}>\n              選區事實處\n            </DefaultLink>\n            ，如有補充或錯漏，請即\n            <DefaultLink target=\"_blank\" href={fcUri}>\n              報料\n            </DefaultLink>\n            ！\n          </Typography>\n        ) : (\n          <Typography variant=\"body\">\n            此人未有事件記錄，請即到\n            <DefaultLink target=\"_blank\" href={fcUri}>\n              選區事實處\n            </DefaultLink>\n            報料！\n          </Typography>\n        )}\n      </Container>\n      <Rows>\n        {events.map(event => (\n          <PersonEvent key={event.eventId} {...event}></PersonEvent>\n        ))}\n        {events.length > 0 && (\n          <Container>\n            <StyledButton\n              onClick={() => {\n                const win = window.open(fcUri, '_blank')\n                win.focus()\n              }}\n            >\n              更多資料及往績\n            </StyledButton>\n          </Container>\n        )}\n      </Rows>\n    </>\n  )\n}\n\nFCPersonData.propsType = {\n  uuid: PropTypes.string,\n  fcUuid: PropTypes.string,\n  filterFunc: PropTypes.func.isRequired,\n}\n\nexport default FCPersonData\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\n\nconst StyledChip = styled(Chip)`\n  && {\n    font-size: ${props => props.fontsize || 12}px;\n    background: ${props => props.backgroundcolor || COLORS.main.primary};\n    color: ${props => props.textcolor || COLORS.main.background};\n    border: ${props => props.borderwidth || 0}px\n      ${props => props.bordercolor || 'rgba(0, 0, 0, 0.5)'} solid;\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      fontSize={props.fontsize}\n      textcolor={props.textcolor}\n      backgroundcolor={props.backgroundcolor}\n      bordercolor={props.bordercolor}\n      borderwidth={props.borderwidth}\n      label={props.value}\n      size=\"small\"\n      onClick={props.handleClick}\n      className={props.className}\n    />\n  )\n}\n","import styled from 'styled-components'\nimport React from 'react'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport InfoIcon from '@material-ui/icons/InfoOutlined'\nimport ErrorIcon from '@material-ui/icons/ErrorOutline'\nconst InfoIconSvg = styled(InfoIcon)`\n  && {\n    font-size: ${props => props.size || 16}px;\n    vertical-align: bottom;\n  }\n`\n\nconst ErrorIconSvg = styled(ErrorIcon)`\n  && {\n    font-size: ${props => props.size || 16}px;\n    vertical-align: bottom;\n  }\n`\n\nexport const HtmlTooltip = styled(props => (\n  <Tooltip\n    className={props.className}\n    classes={{ popper: props.className, tooltip: 'tooltip' }}\n    title={\n      <>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: props.text,\n          }}\n        />\n      </>\n    }\n    {...props}\n    onClick={evt => {\n      evt.preventDefault()\n      evt.stopPropagation()\n      evt.nativeEvent.stopPropagation()\n      evt.nativeEvent.stopImmediatePropagation()\n    }}\n  >\n    {props.type === 'error' ? (\n      <ErrorIconSvg size={props.size || 16} />\n    ) : (\n      <InfoIconSvg size={props.size || 16} />\n    )}\n  </Tooltip>\n))`\n  & .tooltip {\n    border: 1px solid #000;\n    background-color: #fff;\n    color: #000;\n  }\n  & .MuiTooltip-tooltipPlacementBottom {\n    margin: 5px 0px 0px;\n  }\n`\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport { Typography, Grid, Breadcrumbs, Avatar } from '@material-ui/core'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport HtmlParagraph from 'components/atoms/HtmlParagraph'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { getColorFromCamp } from 'utils/helper'\nimport CouncillorMeetingAttendanceContainer from 'components/containers/CouncillorMeetingAttendanceContainer'\nimport PersonElectionHistoriesContainer from 'components/containers/PersonElectionHistoriesContainer'\nimport FCPersonData from 'components/templates/FCPersonData'\nimport { COLORS } from 'ui/theme'\nimport { Tag } from 'components/atoms/Tag'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport {\n  getDistrictOverviewUriFromTag,\n  getConstituencyUriFromTag,\n} from 'utils/helper'\n\n// TODO: add age, camp & related_organization\nconst GET_PEOPLE_PROFILE = gql`\n  query($uuid: uuid!) {\n    dcd_people(where: { uuid: { _eq: $uuid } }) {\n      id\n      uuid\n      fc_uuid\n      name_zh\n      name_en\n      gender\n      related_organization\n      estimated_yob\n      description\n      councillors {\n        meeting_attendances {\n          id\n        }\n        year\n        cacode\n        term_from\n        term_to\n        career\n        district {\n          dc_name_zh\n          dc_code\n        }\n        political_affiliation\n        post\n        constituency {\n          id\n          year\n          name_zh\n        }\n      }\n      candidates {\n        constituency {\n          name_zh\n          code\n          district {\n            dc_name_zh\n            dc_code\n          }\n        }\n        candidate_number\n        is_won\n        fb_id\n        occupation\n        political_affiliation\n        age\n        cacode\n        camp\n        election_type\n        year\n        votes\n      }\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    height: 116px;\n    position: relative;\n    display: flex;\n    background: linear-gradient(\n      ${props => COLORS.camp[props.camp].background} 84px,\n      rgba(255, 255, 255, 0) 32px\n    );\n  }\n`\n\nconst CandidateAvatorContainer = styled(Box)`\n  && {\n    position: absolute;\n    left: 16px;\n    bottom: 8px;\n  }\n`\n\nconst PersonName = styled.div`\n  && {\n    position: absolute;\n    left: 116px;\n    top: 32px;\n    color: ${props => COLORS.camp[props.camp].text};\n  }\n`\n\nconst ElectionStatus = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row-reverse;\n    width: 100%;\n    div {\n      margin: 8px 8px 0 0;\n    }\n  }\n`\n\nconst FacebookPageButton = styled(UnstyledLink)`\n  && {\n    display: block;\n    position: relative;\n    width: 0px;\n    height: 0px;\n    right: 40px;\n    bottom: -50px;\n    img {\n      height: 16px;\n      width: 16px;\n    }\n  }\n`\n\nconst PersonHighlightContainer = styled(FlexRowContainer)`\n  && {\n    padding: 16px;\n    text-align: left;\n  }\n`\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\nconst PersonDescriptionParagraph = styled(HtmlParagraph)`\n  && {\n    margin-top: 0px;\n    padding-left: 16px;\n    padding-right: 16px;\n    margin-bottom: 8px;\n  }\n`\n\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderFacebook = person => {\n    let url = 'https://facebook.com/'\n    let fb_id = person.candidates[0].fb_id\n    if (fb_id && fb_id !== 'n/a') {\n      url += fb_id\n      return (\n        <FacebookPageButton target=\"_blank\" href={url} aria-label=\"Facebook\">\n          <Avatar\n            width={'8px'}\n            height={'8px'}\n            borderwidth={'0'}\n            src={`/static/images/facebook.svg`}\n          />\n        </FacebookPageButton>\n      )\n    }\n    return\n  }\n\n  renderIntroText = (person, currentTerm) => {\n    let text\n    if (\n      currentTerm &&\n      currentTerm.term_to &&\n      Date.parse(new Date()) < Date.parse(currentTerm.term_to)\n    ) {\n      text = `現任${currentTerm.district.dc_name_zh}區議員（${currentTerm.constituency.name_zh}）`\n    } else {\n      const electionResult = person.candidates[0].is_won ? '當選' : '參選'\n      text = `${electionResult}${person.candidates[0].year}年${person.candidates[0].constituency.district.dc_name_zh}區議員（${person.candidates[0].constituency.name_zh}）`\n    }\n\n    return <Typography variant=\"h6\">{text}</Typography>\n  }\n\n  renderElectionStatusText = (person, currentTerm) => {\n    let tags = []\n    let primaryText\n\n    if (\n      person.candidates[0].year === 2019 &&\n      person.candidates[0].election_type === 'ordinary'\n    ) {\n      if (currentTerm) {\n        primaryText = '競逐連任'\n      } else if (person.candidates.length === 1) {\n        primaryText = '首度參選'\n      } else if (person.candidates.length > 1) {\n        if (\n          !person.candidates.find(p => p.is_won) &&\n          person.candidates.length > 2\n        ) {\n          primaryText = '屢敗屢戰'\n        } else if (!person.candidates[1].is_won) {\n          primaryText = '捲土重來'\n        }\n      }\n    }\n\n    if (primaryText) tags.push(primaryText)\n\n    if (person.candidates.length > 1) {\n      if (person.candidates[1].is_won && person.candidates[1].votes === 0) {\n        tags.push('上屆自動當選')\n      }\n\n      if (person.candidates[0].cacode[0] !== person.candidates[1].cacode[0]) {\n        tags.push('跨區參選')\n      }\n    }\n\n    if (tags.length > 0) {\n      return (\n        <ElectionStatus>\n          {tags.map(tag => (\n            <Tag\n              textcolor=\"black\"\n              value={tag}\n              borderwidth={1}\n              backgroundcolor={'transparent'}\n            />\n          ))}\n        </ElectionStatus>\n      )\n    }\n\n    return null\n  }\n\n  render() {\n    const {\n      match: {\n        params: { uuid },\n      },\n    } = this.props\n\n    const homeUrl = process.env.REACT_APP_HOST_URI\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ uuid }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const person = data.dcd_people[0]\n\n          const currentTerm =\n            person.councillors &&\n            person.councillors[person.councillors.length - 1]\n          const lastElection =\n            person.candidates &&\n            person.candidates.sort((a, b) => {\n              if (b.year > a.year) return 1\n              else if (b.year < a.year) return -1\n              else {\n                if (\n                  b.election_type === 'ordinary' &&\n                  a.election_type === 'by-election'\n                )\n                  return 1\n                else return -1\n              }\n            })[0]\n          const hasMeetings =\n            person.councillors &&\n            person.councillors.length > 0 &&\n            person.councillors\n              .map(c => c.meeting_attendances && c.meeting_attendances.length)\n              .reduce((c, v) => Math.max(c, v), 0) > 0\n\n          const personHighlight = []\n\n          if (person.estimated_yob) {\n            personHighlight.push({\n              xs: 2,\n              title: '年齡',\n              tips: '根據候選人簡介的年齡推算',\n              text: `${2019 - person.estimated_yob}歲`,\n            })\n          }\n\n          personHighlight.push({\n            xs: 6,\n            title: '相關組織 ',\n            tips: '候選人或議員的所屬政黨或社區組織，來源綜合媒體報道',\n            text: person.related_organization || '-',\n          })\n\n          personHighlight.push({\n            xs: 4,\n            title: '職業 ',\n            tips:\n              '候選人：取自最近選舉的候選人簡介<br />議員：取自區議會網頁<br />來源綜合媒體報道',\n            text:\n              (currentTerm && currentTerm.career) || lastElection.occupation,\n          })\n\n          const titles = []\n\n          if (person.fc_uuid) {\n            titles.push('個人立場')\n            titles.push('媒體報導')\n          }\n\n          titles.push('參選紀錄')\n\n          if (hasMeetings) titles.push('會議出席率')\n\n          return (\n            <>\n              {lastElection.year === 2019 &&\n                lastElection.election_type === 'ordinary' && (\n                  <BreadcrumbsContainer>\n                    <Breadcrumbs\n                      separator={<NavigateNextIcon fontSize=\"small\" />}\n                      aria-label=\"breadcrumb\"\n                    >\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(`/district/2019`)\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {lastElection.year}\n                        </Typography>\n                      </UnstyledLink>\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(\n                            getDistrictOverviewUriFromTag(\n                              lastElection.constituency.district.dc_code\n                            )\n                          )\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {lastElection.constituency.district.dc_name_zh}\n                        </Typography>\n                      </UnstyledLink>\n                      <UnstyledLink\n                        onClick={() => {\n                          this.props.history.push(\n                            getConstituencyUriFromTag(\n                              lastElection.constituency.code\n                            )\n                          )\n                        }}\n                      >\n                        <Typography color=\"textPrimary\">\n                          {lastElection.constituency.name_zh}（\n                          {lastElection.constituency.code}）\n                        </Typography>\n                      </UnstyledLink>\n                      <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                        {person.name_zh}\n                      </Typography>\n                    </Breadcrumbs>\n                  </BreadcrumbsContainer>\n                )}\n\n              <CandidateHeaderContainer\n                camp={getColorFromCamp(lastElection && lastElection.camp)}\n              >\n                {this.renderElectionStatusText(person, currentTerm)}\n                <CandidateAvatorContainer>\n                  <PeopleAvatar\n                    dimension={'84px'}\n                    borderwidth={'0'}\n                    src={`${homeUrl}/static/images/avatar/${person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                      },\n                    }}\n                  />\n                </CandidateAvatorContainer>\n                <Box>\n                  <PersonName\n                    camp={getColorFromCamp(lastElection && lastElection.camp)}\n                  >\n                    {person.name_en ? (\n                      <>\n                        <Typography\n                          variant=\"h3\"\n                          style={{ marginBottom: '5px' }}\n                        >\n                          {person.name_zh || person.name_en}\n                        </Typography>\n                        <Typography\n                          variant=\"h5\"\n                          style={{ marginBottom: '5px' }}\n                        >\n                          {person.name_en || ''}\n                        </Typography>\n                      </>\n                    ) : (\n                      <Typography variant=\"h3\" style={{ marginBottom: '3px' }}>\n                        {person.name_zh || person.name_en}\n                      </Typography>\n                    )}\n\n                    {this.renderIntroText(person, currentTerm)}\n                  </PersonName>\n                  {this.renderFacebook(person)}\n                </Box>\n              </CandidateHeaderContainer>\n\n              <PersonHighlightContainer>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h5\">{highlight.text}</Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n                <Grid container>\n                  {personHighlight.map((highlight, index) => (\n                    <Grid item key={index} xs={highlight.xs} pr={1}>\n                      <Typography variant=\"h6\">\n                        {highlight.title}\n                        <HtmlTooltip\n                          disableFocusListener\n                          disableTouchListener\n                          text={highlight.tips}\n                          placement=\"bottom\"\n                          size={21}\n                        />\n                      </Typography>\n                    </Grid>\n                  ))}\n                </Grid>\n              </PersonHighlightContainer>\n              {person.description && (\n                <PersonDescriptionParagraph text={person.description} />\n              )}\n              <ScrollableTabs\n                titles={titles}\n                indicatorcolor={\n                  COLORS.camp[\n                    getColorFromCamp(lastElection && lastElection.camp)\n                  ].background\n                }\n                variant=\"scrollable\"\n              >\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                    filterFunc={record => record.eventType !== 'MEDIA'}\n                  />\n                )}\n                {person.fc_uuid && (\n                  <FCPersonData\n                    fcUuid={person.fc_uuid}\n                    name={person.name_zh || person.name_en}\n                    filterFunc={record => record.eventType === 'MEDIA'}\n                  />\n                )}\n                <PersonElectionHistoriesContainer personId={person.id} />\n                {hasMeetings && (\n                  <CouncillorMeetingAttendanceContainer personId={person.id} />\n                )}\n              </ScrollableTabs>\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default ProfilePage\n","import { Typography } from '@material-ui/core'\nimport React from 'react'\n\nexport default props => {\n  return (\n    <Typography\n      className={props.className}\n      dangerouslySetInnerHTML={{ __html: props.text }}\n    ></Typography>\n  )\n}\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'ui/responsive'\nimport { SeperatedColumns } from 'components/atoms/Columns'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    councillors: PropTypes.array.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, councillors, district, stations } = this.props\n    const councillor = councillors.length > 0 ? councillors[0] : {}\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedColumns>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedColumns>\n          <RegionText>{district.dc_name_zh}</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedColumns>\n            <Typography variant=\"h6\">區議員</Typography>\n            <Typography>\n              {councillor.person ? councillor.person.name_zh : '-'}\n            </Typography>\n          </SeperatedColumns>\n          <SeperatedColumns>\n            <Typography variant=\"h6\">政治聯繫</Typography>\n            <Typography>{councillor.political_affiliation || '-'}</Typography>\n          </SeperatedColumns>\n          <SeperatedColumns>\n            <Typography variant=\"h6\">投票站</Typography>\n            {stations.map((station, index) => (\n              <Typography key={index} variant=\"subtitle2\">\n                {station.name_zh}\n              </Typography>\n            ))}\n          </SeperatedColumns>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas } = this.props\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          主要屋邨 / 地區\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              <Typography variant=\"body1\">\n                {`${Object.keys(area)[0]} ${area[Object.keys(area)[0]]}`}\n              </Typography>\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\n// import VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from 'components/atoms/charts/WaffleChart'\n\n// TODO: change this to dcd data\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      name: '不能投票',\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      name: '沒有投票',\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      name: '投票失效',\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      name: `投給${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">人口資料</Typography>\n              {/* <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              /> */}\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../OLMap'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'ui/responsive'\n\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = person => {\n    this.props.history.push(\n      `/profile/${person.name_zh || person.name_en}/${person.uuid}`\n    )\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dcd_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox></FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CANDIDATES } from 'queries/gql'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { UnstyledNavLink } from 'components/atoms/Link'\nimport { Tag } from 'components/atoms/Tag'\nimport Rows from 'components/atoms/Rows'\nimport { SeperatedColumns } from 'components/atoms/Columns'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport { Box, Typography, Grid } from '@material-ui/core'\nimport styled from 'styled-components'\nimport {\n  getColorFromCamp,\n  getConstituencyTagsByCandidateCamps,\n} from 'utils/helper'\nimport { COLORS } from 'ui/theme'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst CandidateList = styled(Grid)`\n  && {\n  }\n`\n\nconst CandidateGrid = styled(Grid)`\n  && {\n    margin-bottom: 8px;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n  }\n`\n\nconst StyledTag = styled(Tag)`\n  && {\n    margin-left: 4px;\n  }\n`\n\nconst Candidate = styled(Box)`\n  && {\n    position: relative;\n    width: auto;\n    text-align: center;\n    & > div {\n      margin: 0 auto;\n    }\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: relative;\n    margin-bottom: -18px !important;\n    top: -19px;\n    left: -28px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst ControversialAlert = styled.div`\n  && {\n    position: relative;\n    margin-bottom: -21px !important;\n    top: -21px;import { Tag } from 'components/atoms/Tag';\n\n    left: 30px;\n  }\n`\nconst CandidateName = styled(Typography)`\n  && {\n    margin-top: 5px;\n    font-weight: 700;\n  }\n`\n\nconst CandidatesContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CANDIDATES}\n      variables={{ code, year }} // variables={{ code, year }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const candidates =\n          data.dcd_candidates &&\n          data.dcd_candidates.filter(c => c.election_type === 'ordinary')\n\n        const tags = getConstituencyTagsByCandidateCamps(candidates)\n        return (\n          <>\n            {candidates.length > 0 && (\n              <>\n                <Rows>\n                  <SeperatedColumns>\n                    <Typography variant=\"h6\" gutterBottom>\n                      已接獲提名\n                    </Typography>\n                    {tags.length > 0 && (\n                      <TagContainer>\n                        {tags.map((tag, index) => (\n                          <StyledTag value={tag} key={index} />\n                        ))}\n                      </TagContainer>\n                    )}\n                  </SeperatedColumns>\n                </Rows>\n                <Rows>\n                  <SeperatedColumns>\n                    <CandidateList container direction=\"row\">\n                      {/* Max 3 columns and always centered */}\n                      {candidates.map(candidate => (\n                        <CandidateGrid\n                          key={candidate.person.id}\n                          item\n                          xs={\n                            candidates.length < 3 ? 12 / candidates.length : 4\n                          }\n                          sm={\n                            candidates.length < 4 ? 12 / candidates.length : 3\n                          }\n                          md={\n                            candidates.length < 6 ? 12 / candidates.length : 2\n                          }\n                        >\n                          <UnstyledNavLink\n                            to={`/profile/${candidate.person.name_zh ||\n                              candidate.person.name_en}/${\n                              candidate.person.uuid\n                            }`}\n                          >\n                            <Candidate>\n                              <PeopleAvatar\n                                dimension=\"84px\"\n                                borderwidth={'4'}\n                                camp={getColorFromCamp(candidate.camp)}\n                                src={`${IMAGE_HOST_URI}/static/images/avatar/${candidate.person.uuid}.jpg`}\n                                imgProps={{\n                                  onError: e => {\n                                    e.target.src =\n                                      IMAGE_HOST_URI +\n                                      '/static/images/avatar/default.png'\n                                  },\n                                }}\n                                opacity={\n                                  candidate.nominate_status ===\n                                    'disqualified' ||\n                                  candidate.nominate_status === 'suspended'\n                                    ? 0.1\n                                    : 1\n                                }\n                              />\n                              {candidate.candidate_number > 0 && (\n                                <CandidateNumber\n                                  dimension=\"18px\"\n                                  camp={getColorFromCamp(candidate.camp)}\n                                >\n                                  {candidate.candidate_number}\n                                </CandidateNumber>\n                              )}\n                              {candidate.tags.findIndex(\n                                tag =>\n                                  tag.type === 'camp' && tag.tag === '有爭議'\n                              ) > -1 && (\n                                <ControversialAlert>\n                                  <HtmlTooltip\n                                    disableFocusListener\n                                    disableTouchListener\n                                    text=\"侯選人政治立場未明\"\n                                    placement=\"bottom\"\n                                    size={21}\n                                  />\n                                </ControversialAlert>\n                              )}\n                              <CandidateName variant=\"h5\">\n                                {candidate.person.name_zh ||\n                                  candidate.person.name_en}\n                              </CandidateName>\n\n                              <Typography variant=\"body2\">\n                                {candidate.political_affiliation ||\n                                  '未報稱政治聯繫'}\n                              </Typography>\n\n                              {candidate.nominate_status === 'disqualified' && (\n                                <Typography variant=\"body2\">\n                                  取消資格\n                                </Typography>\n                              )}\n                              {candidate.nominate_status === 'suspended' && (\n                                <Typography variant=\"body2\">\n                                  宣布棄選\n                                </Typography>\n                              )}\n                            </Candidate>\n                          </UnstyledNavLink>\n                        </CandidateGrid>\n                      ))}\n                    </CandidateList>\n                  </SeperatedColumns>\n                </Rows>\n              </>\n            )}\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCandidatesContainer.propsType = {\n  // cacode: PropTypes.string,\n  // year: PropTypes.number,\n}\nexport default CandidatesContainer\n","import React from 'react'\nimport { Card, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { Tag } from 'components/atoms/Tag'\nimport Box from '@material-ui/core/Box'\nimport Columns from 'components/atoms/Columns'\nimport { getDistrictListUriFromTag } from 'utils/helper'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 0 0 16px;\n    padding: 16px;\n    height: auto;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nconst ConstituencyCard = props => {\n  const { year, constituency } = props\n  const { tags } = constituency\n  const sortedTags = tags.sort((a, b) =>\n    a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n  )\n\n  return (\n    <StyledCard\n      onClick={() => {\n        props.history.push(`/district/2019/${constituency.code}`)\n      }}\n    >\n      <Typography variant=\"h6\" gutterBottom>\n        {constituency.name_zh}（{constituency.code}）\n      </Typography>\n      <Columns>\n        {sortedTags.map((tag, index) => (\n          <TagContainer>\n            <Tag\n              key={index}\n              value={tag.tag}\n              handleClick={evt => {\n                evt.stopPropagation()\n                props.history.push(getDistrictListUriFromTag(tag.tag))\n              }}\n            />\n          </TagContainer>\n        ))}\n      </Columns>\n      <CandidatesContainer year={year} code={constituency.code} />\n    </StyledCard>\n  )\n}\n\nexport default withRouter(ConstituencyCard)\n","import React from 'react'\nimport styled from 'styled-components'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nconst Placeholder = styled.div`\n  && {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst CentredCircularProgress = styled(CircularProgress)`\n  && {\n    max-width: 50%;\n  }\n`\n\nexport const Loading = props => {\n  return (\n    <Placeholder>\n      <CentredCircularProgress thickness={3} size={64} color=\"secondary\" />\n    </Placeholder>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CONSTITUENCIES_BY_TAG } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictListPage = props => {\n  const {\n    match: {\n      params: { year, tag },\n    },\n  } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CONSTITUENCIES_BY_TAG}\n      variables={{ tag, year: 2019 }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${tag}：${data.dcd_constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {data.dcd_constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictListPage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text, Icon } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport Feature from 'ol/Feature'\nimport Point from 'ol/geom/Point'\nimport styled from 'styled-components'\nimport { COLORS } from 'ui/theme'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.1)',\n  }),\n  stroke: new Stroke({\n    color: '#356272',\n    width: 1,\n  }),\n  text: new Text({\n    font: '14px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: '#356272',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 3,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,255,0.5)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nconst hoverStyle = new Style({\n  stroke: new Stroke({\n    color: COLORS.main.primary,\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,255,0,0.2)',\n  }),\n  text: new Text({\n    font: 'bold 16px Noto Sans TC, sans-serif',\n    fill: new Fill({\n      color: COLORS.main.primary,\n    }),\n    stroke: new Stroke({\n      color: 'white',\n      width: 3,\n    }),\n  }),\n})\n\nclass DCCACompareMap extends Component {\n  featureOverlay\n  featureHover\n  highlightedFeature\n  hoveredFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code, handleMapLoaded } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n    let vectorLayer\n    let geoMarker\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n      controls: [],\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    // Add layer for placing marker, set marker's style\n    let markerCoordinates = this.props.currentPoint\n    vectorLayer = new VectorLayer({\n      name: 'marker',\n      source: new VectorSource(),\n      style: function(feature) {\n        return new Style({\n          image: new Icon({\n            anchor: [0.5, 1],\n            scale: 0.25,\n            src: '/static/images/marker.png',\n          }),\n        })\n      },\n    })\n    map.addLayer(vectorLayer)\n\n    this.featureHover = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        hoverStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return hoverStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n\n          const loadedResult = {\n            centroid: features[i]\n              .getGeometry()\n              .getInteriorPoint()\n              .getCoordinates(),\n          }\n\n          handleMapLoaded(loadedResult)\n          break\n        }\n      }\n    }\n\n    // Add marker to the place user clicked\n    geoMarker = new Feature({\n      type: 'geoMarker',\n      geometry: new Point([markerCoordinates['lng'], markerCoordinates['lat']]),\n    })\n    geoMarker.setProperties({ ENAME: '', CNAME: '' })\n\n    vectorLayer.getSource().addFeature(geoMarker)\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const selectBySingleClick = new Select()\n    map.addInteraction(selectBySingleClick)\n    selectBySingleClick.on('select', this.mapClick)\n\n    // const selectByHover = new Select({\n    //   condition: pointerMove,\n    // })\n    // map.addInteraction(selectByHover)\n    // selectByHover.on('select', this.mapHover)\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  highlightHoveredFeature(feature) {\n    if (this.hoveredFeature) {\n      this.featureHover.getSource().removeFeature(this.hoveredFeature)\n    }\n\n    this.featureHover.getSource().addFeature(feature)\n    this.hoveredFeature = feature\n  }\n\n  mapClick = e => {\n    const { year, changeDistrict, handleMapClick } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    let geoMarker = new Feature({\n      type: 'geoMarker',\n      geometry: new Point(e.mapBrowserEvent.coordinate),\n    })\n    geoMarker.setProperties({ ENAME: '', CNAME: '' })\n\n    this.state.map.getLayers().forEach(layer => {\n      if (layer.get('name') !== undefined && layer.get('name') === 'marker') {\n        layer.getSource().clear()\n        layer.getSource().addFeature(geoMarker)\n      }\n    })\n    handleMapClick(e.mapBrowserEvent.coordinate)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n\n    // No more select polygon\n    e.target.getFeatures().clear()\n  }\n\n  mapHover = e => {\n    //const { year, changeDistrict, handleMapClick } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightHoveredFeature(selectedFeature)\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default DCCACompareMap\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport { Tag } from '../atoms/Tag'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport {\n  getColorFromPoliticalAffiliation,\n  getCouncillorMeta,\n  formatNumber,\n} from 'utils/helper'\n\nconst Councillor = props => {\n  const { councillors } = props\n  if (councillors.length === 0) {\n    return <> </>\n  }\n  // we just get the latest councillor from the dc\n  const councillor = councillors[0]\n  const tags = [] //['競逐連任']\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n  const meta = getCouncillorMeta(councillor)\n\n  return (\n    <UnstyledNavLink\n      key={councillor.code}\n      to={`/profile/${councillor.person.name_zh || councillor.person.name_en}/${\n        councillor.person.uuid\n      }`}\n    >\n      <Box>\n        <Box display=\"flex\">\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\" gutterBottom>\n              {`${councillor.term_from.substring(0, 4)} `}\n              {`${councillor.constituency.name_zh} （${councillor.constituency.code}）`}\n            </Typography>\n          </Box>\n          <Box>\n            {tags.length > 0 &&\n              tags.map((tag, index) => <Tag value={tag} key={index} />)}\n          </Box>\n        </Box>\n\n        <Grid container wrap=\"nowrap\" spacing={1}>\n          <Grid item>\n            <PeopleAvatar\n              dimension=\"60px\"\n              borderwidth={'3'}\n              camp={getColorFromPoliticalAffiliation(\n                councillor.political_affiliation\n              )}\n              src={`${IMAGE_HOST_URI}/static/images/avatar/${councillor.person.uuid}.jpg`}\n              imgProps={{\n                onError: e => {\n                  e.target.src =\n                    IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                },\n              }}\n            />\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"h4\" gutterBottom>\n              {councillor.person.name_zh}\n            </Typography>\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">報稱政治聯繫</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {councillor.political_affiliation}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box display=\"flex\">\n              <Box pr={1} alignSelf=\"flex-end\">\n                <Typography variant=\"body2\">\n                  {meta.lastParticipated.year}\n                  選舉結果\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">\n                  {meta.lastParticipated.votesDiff === 0 && '自動當選'}\n                  {meta.lastParticipated.votesDiff > 0 &&\n                    `${\n                      meta.lastParticipated.votesDiff /\n                        meta.lastParticipated.votes >\n                      0.2\n                        ? '大'\n                        : meta.lastParticipated.votesDiff /\n                            meta.lastParticipated.votes <\n                          0.05\n                        ? '險'\n                        : ''\n                    }勝${formatNumber(meta.lastParticipated.votesDiff)}票`}\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    </UnstyledNavLink>\n  )\n}\n\nexport default Councillor\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_COUNCILLOR } from 'queries/gql'\nimport PropTypes from 'prop-types'\nimport Councillor from 'components/templates/Councillor'\n\nconst CouncillorContainer = props => {\n  const { code, year } = props\n\n  return (\n    <Query query={QUERY_GET_COUNCILLOR} variables={{ code, year }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Councillor councillors={data.dcd_councillors} />\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCouncillorContainer.propsType = {\n  cacode: PropTypes.string,\n  year: PropTypes.number,\n}\nexport default CouncillorContainer\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const color = d3\n      .scaleOrdinal()\n      .range([\n        props.firstColor ? props.firstColor : '#ca0020',\n        props.secondColor ? props.secondColor : '#f4a582',\n      ])\n\n    const margin = { top: 50, right: 20, bottom: 30, left: 40 }\n\n    const width = dimensions.width - margin.left - margin.right\n    const height = dimensions.width - margin.top - margin.bottom\n\n    const max = _.max(_.maxBy(data, r => _.max(r.values)).values)\n\n    const svg = d3\n      .select(d3Container.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    svg.selectAll('g').remove()\n    const chart = svg\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n\n    const yScale = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, max]) // space for showing legend\n\n    const x0 = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(data.map(s => s.label))\n      .padding(0.1)\n\n    const x1 = d3\n      .scaleBand()\n      .domain(d3.range(2))\n      .range([0, x0.bandwidth() - 10])\n    // y axis\n    chart.append('g').call(d3.axisLeft(yScale))\n\n    // draw the lines\n    chart\n      .append('g')\n      .style('color', 'lightgrey')\n      .style('stroke-opacity', '0.7')\n      .call(\n        d3\n          .axisLeft(yScale)\n          .tickSizeOuter(0)\n          .tickSizeInner(-width)\n          .tickFormat('')\n      )\n\n    // x axis\n    chart\n      .append('g')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(x0))\n      .selectAll('text')\n      .attr('transform', 'translate(0,0)rotate(-45)')\n      .style('text-anchor', 'end')\n      .style('fill', '#69a3b2')\n\n    const slice = svg\n      .selectAll('.slice')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'g')\n      .attr(\n        'transform',\n        d => `translate(${x0(d.label) + margin.left + 5},${margin.top})`\n      )\n\n    slice\n      .selectAll('rect')\n      .data(d => d.values)\n      .enter()\n      .append('rect')\n      .attr('width', x1.bandwidth())\n      .attr('x', (d, i) => x1(i))\n      .attr('y', d => yScale(0))\n      .attr('height', d => height - yScale(0))\n      .style('fill', (d, i) => color(i))\n\n    slice\n      .selectAll('rect')\n      .transition()\n      .delay(function(d) {\n        return Math.random() * 1000\n      })\n      .duration(1000)\n      .attr('y', d => yScale(d))\n      .attr('height', d => height - yScale(d))\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(data[0].labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${i * 20})`)\n\n    legend\n      .append('rect')\n      .attr('x', width - 20)\n      .attr('width', 14)\n      .attr('height', 14)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width)\n      .attr('y', 7)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <svg\n        ref={d3Container}\n        style={{ height: dimensions.width, width: '100%' }}\n      ></svg>\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport GroupedBarChart from 'components/atoms/charts/GroupedBarChart'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCY_STATS } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { COLORS } from 'ui/theme'\n\nexport default props => {\n  const [filterIndex] = useState(0)\n\n  const getDataForChat = voteStats => {\n    /**\n     * voteStats = [{\n     *  type: \"BY_GENDER_AGE\",\n     *  subtype: \"VOTERS/NEW_VOTERS\",\n     *  category_1: \"FEMALE/MALE\",\n     *  category_2: \"21-25\"\n     *  count: 10\n     * }]\n     */\n\n    const isFiltered = gender => {\n      if (gender === 'MALE' && filterIndex === 1) {\n        return false\n      } else if (gender === 'FEMALE' && filterIndex === 2) {\n        return false\n      }\n      return true\n    }\n    const data = _.values(_.groupBy(voteStats, stat => stat.category_2))\n    data.forEach(row => {\n      row.label = row[0].category_2\n      row.values = _.values(_.groupBy(row, r => r.subtype)).map(r =>\n        r\n          .filter(v => isFiltered(v.category_1))\n          .map(v => v.count)\n          .reduce((c, v) => c + v, 0)\n      )\n      row.values = [row.values[0] - row.values[1], row.values[0]]\n      row.labels = ['2018', '2019']\n    })\n\n    /**\n     * [{\n     *  label: \"21-22\",\n     *  values: [200, 159] // -> 2019 vs 2018\n     * }]\n     */\n\n    return data\n  }\n\n  const getTransformedData = data => {\n    const newData = []\n    const valueDict = {}\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].category_2 === '18-20' || data[i].category_2 === '71+') {\n        newData.push(data[i])\n      } else {\n        const ageGroupPrefix = data[i].category_2[0] // e.g. 21-25 and 26-30 will have the same first digit\n        const dictKey =\n          ageGroupPrefix +\n          data[i].category_1 /* gender */ +\n          data[i].subtype /* VOTERS, NEW_VOTERS */\n        if (typeof valueDict[dictKey] === 'undefined') {\n          // no existing count for this key\n          valueDict[dictKey] = data[i].count\n        } else {\n          data[i].count += valueDict[dictKey]\n          data[i].category_2 =\n            ageGroupPrefix + '1-' + (parseInt(ageGroupPrefix) + 1) + '0'\n          newData.push(data[i])\n        }\n      }\n    }\n    return newData\n  }\n\n  const getMeta = voteStats => {\n    const meta = {\n      increased: 0,\n      mostIncreasedGroup: null,\n    }\n    const total = voteStats\n      .filter(v => v.subtype === 'VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    const newVotes = voteStats\n      .filter(v => v.subtype === 'NEW_VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    let max = 0\n    const groupedByAge = _.groupBy(voteStats, v => v.category_2)\n    Object.keys(groupedByAge).forEach(age => {\n      const genders = groupedByAge[age]\n      const groupedByGender = _.groupBy(genders, v => v.category_1)\n      Object.keys(groupedByGender).forEach(gender => {\n        const types = groupedByGender[gender]\n        const groupedByType = _.groupBy(types, v => v.subtype)\n        const newVoters = groupedByType['NEW_VOTERS'][0].count\n        const totalVoters = groupedByType['VOTERS'][0].count\n        if (newVoters / totalVoters > max) {\n          max = _.round(newVoters / totalVoters, 4)\n          meta.mostIncreasedGroup = {\n            gender,\n            age,\n            max,\n          }\n        }\n      })\n    })\n    // .filter(v => v.subtype === 'NEW_VOTERS')\n    // .forEach(v => {\n    //   if (v.count > max) {\n    //     meta.mostIncreasedGroup = {\n    //       gender: v.category_1,\n    //       age: v.category_2\n    //     }\n    //   }\n    // })\n    meta.increased = _.round(newVotes / (total - newVotes), 4)\n\n    return meta\n  }\n\n  return (\n    // TODO: support page other than battleground page\n    <>\n      <Query\n        query={QUERY_CONSTITUENCY_STATS}\n        variables={{ year: 2019, code: props.code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          if (data.dcd_constituencies.length === 0) {\n            console.error(`cannot find constituency. code: ${props.code}`)\n            return `Error!`\n          }\n\n          // 2019-10-19 Hackathon - Reduce grouping for voters bar chart\n          const transformedData = getTransformedData(\n            data.dcd_constituencies[0].vote_stats\n          )\n          // transform the data to desire format\n          const chartData = getDataForChat(transformedData)\n          const meta = getMeta(transformedData)\n          return (\n            <>\n              <Typography variant=\"h2\">\n                選民人數增加{_.round(meta.increased * 100, 2)}%\n              </Typography>\n              <Typography variant=\"h4\">\n                最大增幅組別：{meta.mostIncreasedGroup.age}歲的\n                {meta.mostIncreasedGroup.gender === 'MALE' ? '男' : '女'}\n                性選民增加了\n                {_.round(meta.mostIncreasedGroup.max * 100, 2)}%\n              </Typography>\n              <GroupedBarChart\n                data={chartData}\n                firstColor={COLORS.main.secondary}\n                secondColor={COLORS.main.primary}\n              />\n            </>\n          )\n        }}\n      </Query>\n    </>\n  )\n}\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport { Tag } from 'components/atoms/Tag'\nimport DistrictNewVoterChartContainer from 'components/containers/DistrictNewVoterChartContainer'\nimport Columns, { SeperatedColumns } from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport Box from '@material-ui/core/Box'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport KeyboardArrowUp from '@material-ui/icons/KeyboardArrowUp'\nimport { getDistrictListUriFromTag, formatNumber } from 'utils/helper'\nimport { withRouter } from 'react-router-dom'\nimport { SuccessText, FailureText } from 'components/atoms/Text'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 0 16px;\n    box-shadow: none;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nclass DCCAOverview extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGraph: false,\n    }\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  toggleGraph() {\n    this.setState({\n      showGraph: !this.state.showGraph,\n    })\n  }\n\n  render() {\n    const { code, tags, voterData, description } = this.props\n    const sortedTags = tags.sort((a, b) =>\n      a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n    )\n    const new_voters_percentage = (\n      (100 * voterData.aggregations.new_voters) /\n      (voterData.aggregations.all_voters - voterData.aggregations.new_voters)\n    ).toFixed(2)\n    return (\n      <>\n        <Container>\n          {description && (\n            <SeperatedColumns>\n              <Typography variant=\"h6\">{description}</Typography>\n            </SeperatedColumns>\n          )}\n          <SeperatedColumns>\n            <Rows>\n              <UnstyledButton onClick={this.toggleGraph.bind(this)}>\n                <Typography variant=\"h6\">\n                  選民人數 {formatNumber(voterData.aggregations.all_voters)}{' '}\n                  {' ('}\n                  {new_voters_percentage > 0 ? (\n                    <SuccessText display=\"inline\">\n                      +{new_voters_percentage}%\n                    </SuccessText>\n                  ) : (\n                    <FailureText display=\"inline\">\n                      -{new_voters_percentage}%\n                    </FailureText>\n                  )}\n                  )\n                </Typography>\n                {this.state.showGraph ? (\n                  <KeyboardArrowUp fontSize=\"small\" />\n                ) : (\n                  <ExpandMoreIcon fontSize=\"small\" />\n                )}\n              </UnstyledButton>\n              {this.state.showGraph && (\n                <DistrictNewVoterChartContainer code={code} />\n              )}\n            </Rows>\n          </SeperatedColumns>\n          <Columns>\n            {sortedTags.map((tag, index) => (\n              <TagContainer key={index}>\n                <Tag\n                  value={tag.tag}\n                  handleClick={() => {\n                    this.props.history.push(getDistrictListUriFromTag(tag.tag))\n                  }}\n                />\n              </TagContainer>\n            ))}\n          </Columns>\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withRouter(DCCAOverview)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport { PeopleAvatar } from '../atoms/Avatar'\nimport Columns from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport { COLORS } from 'ui/theme'\nimport { UnstyledNavLink } from 'components/atoms/Link'\n\nimport { formatNumber, getColorFromCamp } from 'utils/helper'\n\nconst Container = styled.div`\n  && {\n    padding-top: 16px;\n  }\n`\nconst CandiateBox = styled(Box)`\n  && {\n    display: flex;\n    margin: 8px 0 8px;\n  }\n`\n\nconst CandidateAvatar = styled(Columns)`\n  && {\n    position: relative;\n    width: auto;\n    margin-right: 16px;\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: absolute;\n    top: 40px;\n    left: 3px;\n    border-radius: 50%;\n    font-size: 10px;\n    font-weight: 600;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst CandidateName = styled(Columns)`\n  && {\n    width: auto;\n    min-width: 120px;\n    .person-name {\n      font-weight: 600;\n    }\n  }\n`\n\nconst VotePercentageBar = styled(LinearProgress)`\n  && {\n    background: transparent;\n    width: 100%;\n    height: 16px;\n    .MuiLinearProgress-barColorPrimary {\n      background-color: ${props => COLORS.camp[props.camp].background};\n    }\n  }\n`\n\nconst VoteText = styled(Typography)`\n  && {\n    font-size: 14px;\n    font-weight: 600;\n    .vote-percentage {\n      font-size: 12px;\n    }\n  }\n`\n\nconst DCCAElectionResult = props => {\n  const { electionResult } = props\n\n  const IMAGE_HOST_URI =\n    process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.io'\n\n  const sortedCandidates = electionResult.candidates.sort(\n    (a, b) => b.votes - a.votes\n  )\n  return (\n    <Container>\n      <Typography variant=\"h6\">\n        {electionResult.year}年 - {electionResult.name_zh}（\n        {electionResult.code}）\n      </Typography>\n      {sortedCandidates.map((candidate, index) => {\n        candidate.vote_percentage = (\n          (candidate.votes / electionResult.vote_sum) *\n          100\n        ).toFixed(1)\n        return (\n          <UnstyledNavLink\n            key={index}\n            to={`/profile/${candidate.person.name_zh ||\n              candidate.person.name_en}/${candidate.person.uuid}`}\n          >\n            <CandiateBox>\n              <CandidateAvatar>\n                <PeopleAvatar\n                  dimension=\"60px\"\n                  borderwidth={'3'}\n                  camp={getColorFromCamp(candidate.camp)}\n                  src={`${IMAGE_HOST_URI}/static/images/avatar/${candidate.person.uuid}.jpg`}\n                  imgProps={{\n                    onError: e => {\n                      e.target.src =\n                        IMAGE_HOST_URI + '/static/images/avatar/default.png'\n                    },\n                  }}\n                />\n                {candidate.candidate_number > 0 && (\n                  <CandidateNumber\n                    dimension=\"16px\"\n                    camp={getColorFromCamp(candidate.camp)}\n                  >\n                    {candidate.candidate_number}\n                  </CandidateNumber>\n                )}\n                {/* {candidate.is_won && 'win'} */}\n              </CandidateAvatar>\n              <CandidateName>\n                <Rows>\n                  <Typography variant=\"h5\" className=\"person-name\">\n                    {candidate.person.name_zh}\n                  </Typography>\n                </Rows>\n                <Rows>\n                  <Typography variant=\"body2\">\n                    {candidate.political_affiliation} （{candidate.camp}）\n                  </Typography>\n                </Rows>\n              </CandidateName>\n              <Columns>\n                {candidate.votes > 0 ? (\n                  <>\n                    <Rows>\n                      <VoteText>\n                        {formatNumber(candidate.votes)}票{' '}\n                        <span className=\"vote-percentage\">\n                          （{candidate.vote_percentage}%）\n                        </span>\n                      </VoteText>\n                    </Rows>\n                    <Rows>\n                      <VotePercentageBar\n                        variant=\"determinate\"\n                        camp={getColorFromCamp(candidate.camp)}\n                        value={\n                          (candidate.vote_percentage /\n                            sortedCandidates[0].vote_percentage) *\n                          100\n                        }\n                      />\n                    </Rows>\n                  </>\n                ) : (\n                  <Typography variant=\"h5\">自動當選</Typography>\n                )}\n              </Columns>\n            </CandiateBox>\n          </UnstyledNavLink>\n        )\n      })}\n    </Container>\n  )\n}\n\nexport default DCCAElectionResult\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport ScrollableTabs from 'components/organisms/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { Typography } from '@material-ui/core'\nimport DCCAElectionResult from 'components/templates/DCCAElectionResult'\nimport Box from '@material-ui/core/Box'\nimport { COLORS } from 'ui/theme'\nimport { getColorFromCamp } from 'utils/helper'\n\nconst DCCAElectionResultContainer = styled(Box)`\n  && {\n    padding: 0 16px;\n  }\n`\nconst CampText = styled.div`\n  && {\n    border-bottom: 2px ${props => COLORS.camp[props.camp].background} solid;\n    margin-bottom: 2px;\n  }\n`\n\nclass DCCAElectionHistories extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  createQuery(history) {\n    const queries = history.map(\n      ({ CACODE: code, year }) => `\n    dcd_constituencies_${year}_${code}: dcd_constituencies(where: { year: { _eq: $year${year} }, code: { _eq: $code${code} } }) {\n      code\n      year\n      name_zh\n      candidates(where: { year: { _eq: $year${year} }, cacode: { _eq: $code${code} } }) {\n        person {\n          name_zh\n          uuid\n        }\n        candidate_number\n        camp\n        votes\n        vote_percentage\n        is_won\n        political_affiliation\n      }\n    }\n    dcd_candidates_aggregate_${year}_${code}: dcd_candidates_aggregate(\n      where: { year: { _eq: $year${year} }, cacode: { _eq: $code${code} } }\n    ) {\n      aggregate {\n        sum {\n          votes\n        }\n      }\n    }\n`\n    )\n\n    const variables = history.reduce((obj, { CACODE: code, year }) => {\n      obj[`code${code}`] = code\n      obj[`year${year}`] = year\n      return obj\n    }, {})\n\n    const variableLine = Object.keys(variables).map(\n      key => `$${key}: ${key.startsWith('year') ? 'Int' : 'String'}!`\n    )\n\n    const query = gql`\n  query(${variableLine.join(', ')}) {\n    ${queries.join('\\n')}\n  }`\n    return {\n      query,\n      variables,\n    }\n  }\n\n  render() {\n    const { histories, presetTabIndex } = this.props\n    const filteredHistories = histories.filter(\n      history => history.year !== '2019'\n    )\n\n    const { query, variables } = this.createQuery(filteredHistories)\n\n    return (\n      <Query query={query} variables={variables}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          const constituencies = []\n          const year_vote_sum = {}\n\n          const keys = Object.keys(data)\n          for (const key of keys) {\n            if (key.includes('dcd_constituencies')) {\n              constituencies.push(data[key][0])\n            }\n\n            if (key.includes('dcd_candidates_aggregate')) {\n              const year = key.split('_')[3]\n              year_vote_sum[year] = data[key].aggregate.sum\n            }\n          }\n\n          return (\n            <ScrollableTabs\n              tabnumber={\n                presetTabIndex < 0\n                  ? filteredHistories.length > 0\n                    ? filteredHistories.length - 1\n                    : 0\n                  : presetTabIndex\n              }\n              indicatorcolor={COLORS.main.primary}\n              variant=\"fullWidth\"\n              titles={constituencies.map(electionResult => {\n                return (\n                  <React.Fragment key={electionResult.year}>\n                    <CampText\n                      camp={getColorFromCamp(\n                        electionResult.candidates.find(candi => candi.is_won)\n                          .camp\n                      )}\n                    >\n                      {\n                        electionResult.candidates.find(candi => candi.is_won)\n                          .camp\n                      }\n                    </CampText>\n                    <Typography variant=\"body2\">\n                      {electionResult.year}\n                    </Typography>\n                  </React.Fragment>\n                )\n              })}\n            >\n              {constituencies.map(electionResult => {\n                electionResult.vote_sum =\n                  year_vote_sum[electionResult.year].votes\n                return (\n                  <DCCAElectionResultContainer key={electionResult.year}>\n                    <DCCAElectionResult electionResult={electionResult} />\n                  </DCCAElectionResultContainer>\n                )\n              })}\n            </ScrollableTabs>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default DCCAElectionHistories\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport DCCACompareMap from '../../DCCACompareMap'\nimport { Query } from 'react-apollo'\nimport MainAreas from 'components/district/MainAreas'\nimport CouncillorContainer from 'components/containers/CouncillorContainer'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\nimport DCCAOverview from 'components/district/DCCAOverview'\nimport { UnstyledButton } from 'components/atoms/Button'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\nimport Collapse from '@material-ui/core/Collapse'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\nimport { Typography } from '@material-ui/core'\nimport { PlainCard } from '../../molecules/Card'\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport { UnstyledLink } from 'components/atoms/Link'\nimport { Alert } from 'components/atoms/Alert'\nimport { getDistrictOverviewUriFromTag, getParameterByName } from 'utils/helper'\nimport {\n  getCentroidFromYearAndCode,\n  getAllFeaturesFromPoint,\n} from 'utils/features'\nimport DCCAElectionHistories from 'components/templates/DCCAElectionHistories'\n\nconst groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n    padding: 0 16px 0;\n  }\n`\n\nconst BreadcrumbsContainer = styled(Box)`\n  && {\n    flex-grow: 1;\n    padding: 4px 16px;\n  }\n`\nconst ToggleMapButton = styled(UnstyledButton)`\n  && {\n    border-radius: 0;\n    width: 100%;\n    font-size: 14px;\n    text-align: center;\n  }\n`\n\nclass BattleGroundPage extends Component {\n  constructor(props) {\n    super(props)\n    const centroid = getCentroidFromYearAndCode(2019, props.match.params.code)\n    this.state = {\n      showMap: true,\n      currentPoint: {\n        lng: centroid[0],\n        lat: centroid[1],\n      },\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  handleMapClick = coordinate => {\n    const point = {\n      lng: coordinate[0],\n      lat: coordinate[1],\n    }\n\n    this.setState({ currentPoint: point })\n  }\n\n  handleMapLoaded = props => {\n    const { centroid } = props\n    const point = {\n      lng: centroid[0],\n      lat: centroid[1],\n    }\n\n    this.setState({ currentPoint: point })\n  }\n  onPrevElection() {\n    const {\n      match: {\n        params: { code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const { showMap } = this.state\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n      location: { search },\n    } = this.props\n\n    // Preset Tab for election history by matching query ?year=<year>\n    const queryYear = getParameterByName('year', search)\n    const presetTabIndex = ['2003', '2007', '2011', '2015'].findIndex(\n      year => year === queryYear\n    )\n\n    return (\n      <>\n        <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n          {({ loading, error, data }) => {\n            if (loading) return null\n            if (error) return `Error! ${error}`\n            const district = data.dcd_constituencies[0]\n            const previousDistricts = district.predecessors.filter(\n              district =>\n                district.intersect_area === null ||\n                district.intersect_area > 1000\n            )\n\n            const pointHistory = getAllFeaturesFromPoint(\n              this.state.currentPoint\n            )\n\n            const DCCAStatus =\n              district.tags &&\n              district.tags.find(tag => tag.type === 'boundary')\n\n            return (\n              <>\n                <BreadcrumbsContainer>\n                  <Breadcrumbs\n                    separator={<NavigateNextIcon fontSize=\"small\" />}\n                    aria-label=\"breadcrumb\"\n                  >\n                    <UnstyledLink\n                      onClick={() => {\n                        this.props.history.push(`/district/2019`)\n                      }}\n                    >\n                      <Typography color=\"textPrimary\"> {year}</Typography>\n                    </UnstyledLink>\n                    <UnstyledLink\n                      onClick={() => {\n                        this.props.history.push(\n                          getDistrictOverviewUriFromTag(\n                            district.district.dc_code\n                          )\n                        )\n                      }}\n                    >\n                      <Typography color=\"textPrimary\">\n                        {district.district.dc_name_zh}\n                      </Typography>\n                    </UnstyledLink>\n                    <Typography color=\"primary\" style={{ fontWeight: 600 }}>\n                      {district.name_zh}（{code}）\n                    </Typography>\n                  </Breadcrumbs>\n                </BreadcrumbsContainer>\n                {DCCAStatus && (\n                  <Alert>\n                    <Typography variant=\"h6\" gutterBottom>\n                      {DCCAStatus.tag === '改劃界'\n                        ? `此選區於2019年更改劃界`\n                        : `此選區為2019年${DCCAStatus.tag}`}\n                    </Typography>\n                  </Alert>\n                )}\n                <Container>\n                  <CandidatesContainer year={year} code={district.code} />\n                </Container>\n                <DCCAOverview\n                  year={year}\n                  name_zh={district.name_zh}\n                  dc_code={district.district.dc_code}\n                  dc_name_zh={district.district.dc_name_zh}\n                  code={district.code}\n                  tags={district.tags}\n                  voterData={groupVoteStat(district.vote_stats)}\n                  description={district.description}\n                />\n                {/* TODO Refactor style for ToggleMap Button */}\n                <ToggleMapButton\n                  onClick={() => this.setState({ showMap: !showMap })}\n                >\n                  {showMap ? '隱藏地圖' : '顯示地圖'}\n                  {showMap ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </ToggleMapButton>\n                <Collapse in={showMap}>\n                  <Box width={'100%'} height={{ sm: '300px', md: '400px' }}>\n                    <DCCACompareMap\n                      year={year}\n                      code={code}\n                      currentPoint={this.state.currentPoint}\n                      changeDistrict={this.handleChangeDistrict}\n                      handleMapClick={this.handleMapClick}\n                      handleMapLoaded={this.handleMapLoaded}\n                    />\n                  </Box>\n                </Collapse>\n                <MainAreas areas={district.main_areas || []} />\n\n                {DCCAStatus && (\n                  <Container>\n                    <Typography variant=\"h6\">\n                      {DCCAStatus.tag === '改劃界'\n                        ? `此選區於2019年更改劃界`\n                        : `此選區為2019年${DCCAStatus.tag}`}\n                    </Typography>\n                  </Container>\n                )}\n                <DCCAElectionHistories\n                  histories={pointHistory}\n                  presetTabIndex={presetTabIndex}\n                />\n                <PlainCard>\n                  <Typography variant=\"h6\">現任區議員</Typography>\n                  {previousDistricts.length > 1 && (\n                    <Typography variant=\"h6\">{`此區與上屆${previousDistricts.length}個選區重疊`}</Typography>\n                  )}\n                  {previousDistricts.map((d, index) => (\n                    <CouncillorContainer\n                      key={index}\n                      year={2015}\n                      code={d.predecessor.code}\n                    />\n                  ))}\n                </PlainCard>\n              </>\n            )\n          }}\n        </Query>\n      </>\n    )\n  }\n}\n\nexport default BattleGroundPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { DefaultLink } from 'components/atoms/Link'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h5\">關於候選人陣營</Typography>\n        <p>\n          候選人的政治陣營，反映他們對政治議題的看法。一般而言，每人對各項議題可持不同立場，難以用一兩個詞語概括候選人背景。\n        </p>\n\n        <Typography variant=\"h5\">陣營分類（2019區議會選舉）</Typography>\n\n        <p>\n          本屆區議會選舉的候選人政治陣營取自\n          <DefaultLink target=\"_blank\" href=\"https://hkfactcheck.io\">\n            選區事實處\n          </DefaultLink>\n          \b，該網站收集大眾意見，並跟據以下資料綜合判斷：\n        </p>\n        <ol>\n          <li>最近申報之政治聯繫；</li>\n          <li>過往申報之政治聯繫；</li>\n          <li>該政治聯系於重大政治議題上的取態；</li>\n          <li>相關人士及其於重大政治議題上的取態；</li>\n          <li>本人於重大政治議題上的取態；</li>\n          <li>各媒體提及該人士時所使用的介紹文字；</li>\n          <li>與其他組織的關聯。 遇有爭議個案，一律以「其他/未清楚」取代。</li>\n        </ol>\n\n        <p>\n          如任何人分類有任何意見，歡迎反映或電郵至\n          <DefaultLink target=\"_blank\" href=\"mailto:hkfactcheck@gmail.com\">\n            mailto:hkfactcheck@gmail.com\n          </DefaultLink>\n          \b。\n        </p>\n\n        <Typography variant=\"h5\">2019之前的陣營分類</Typography>\n\n        <p>\n          至於2019年以前之候選人陣營分類，則取自\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://github.com/initiummedia/hk_district_council_election\"\n          >\n            端傳媒於2017年整理之檔案\n          </DefaultLink>\n          ，本網站刊載前已盡力確保資料真確性，如有建議或錯漏，歡迎\n          <DefaultLink\n            target=\"_blank\"\n            href=\"https://forms.gle/irD6tEznWPNda6w59\"\n          >\n            反映\n          </DefaultLink>\n          或電郵至\n          <DefaultLink target=\"_blank\" href=\"mailto:chiangsumlui@gmail.com\">\n            chiangsumlui@gmail.com\n          </DefaultLink>\n          ，我們會盡快跟進。\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n    p {\n      margin-bottom: 1rem;\n    }\n    p,\n    li {\n      font-size: 14px;\n    }\n    ol {\n      padding-left: 1rem;\n    }\n    ul li {\n      list-style-type: none;\n    }\n  }\n`\n\nconst DisclaimerPage = props => {\n  return (\n    <>\n      <Container>\n        <Typography variant=\"h4\" gutterBottom>\n          區議會代表甚麼？\n        </Typography>\n        <br />\n\n        <Typography variant=\"h5\">參與地區事務討論</Typography>\n        <p>\n          政府會就地區政策諮詢區議會。以往曾有不成文規定，區議會反對的政策，政府不會呈上立法會，惟這個做法已非必然。雖然如此，在一些地區民生議題，如巴士路線和道路規劃等，區議會的意見仍能左右決策。\n        </p>\n\n        <Typography variant=\"h5\">掌握每年千萬撥款</Typography>\n        <p>\n          未計算其他津貼，一般區議員的每月酬金為34,000元。在香港或不算高薪，但區議會可因應各項社區事務撥款，例如區內的小型工程，每區區議會每年便有大約2,000萬撥款可供調配。\n        </p>\n\n        <Typography variant=\"h5\">123張選委入場券</Typography>\n        <p>\n          立法會選舉與特首選舉一直被質疑並非民主選舉。相較之下，撇除27個當然議席，452區議員全由市民選出，而區議會選舉的結果，亦會直接影響另外兩個選舉。\n        </p>\n\n        <p>\n          現時，立法會功能組別內有6名議員由區議會產生，分別是由全港區議員互選的「區議會（第一）」，以及5名由區議員參與及提名，再由不屬其他功能組別的市民選出的「區議會（第二）」，俗稱「超級區議會」。\n        </p>\n\n        <p>\n          另外，特首選委1,200人中，有117人屬「港九各區議會」(57人)及「新界各區議會」(60人)，由相應選區的區議會互選產生。值得注意的是，由於香港的政治陣營大致分為建制派及泛民主派，按以往情況，這些選委席位，均會由區議會佔半數以上的陣營全取。\n        </p>\n\n        <p>\n          加上6名立法會議員是當然選委，區議會選舉的結果，亦將左右10分1特首選委之爭。\n        </p>\n      </Container>\n    </>\n  )\n}\n\nexport default DisclaimerPage\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </>\n    )\n  }\n}\n\nexport default withStyles(NotFoundPage)\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport ShareIcon from '@material-ui/icons/Share'\nimport CopyIcon from '@material-ui/icons/Link'\nimport styled from 'styled-components'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { getCurrentUrl } from 'utils/helper'\nimport {\n  FacebookShareButton,\n  TelegramShareButton,\n  WhatsappShareButton,\n  TwitterShareButton,\n  FacebookIcon,\n  TelegramIcon,\n  WhatsappIcon,\n  TwitterIcon,\n} from 'react-share'\n\nconst RightIconButton = styled(IconButton)`\n  && {\n    position: absolute;\n    right: 0;\n  }\n`\n\nconst StyledCopyIcon = styled(CopyIcon)`\n  && {\n    width: 32px;\n    height: 32px;\n  }\n`\n\nfunction getShareUrl(url, platform) {\n  return updateUrlParameter(\n    updateUrlParameter(url, 'utm_source', platform),\n    'utm_medium',\n    'social_share'\n  )\n}\n\n// https://gist.github.com/niyazpk/f8ac616f181f6042d1e0\nfunction updateUrlParameter(uri, key, value) {\n  // remove the hash part before operating on the uri\n  var i = uri.indexOf('#')\n  var hash = i === -1 ? '' : uri.substr(i)\n  uri = i === -1 ? uri : uri.substr(0, i)\n\n  var re = new RegExp('([?&])' + key + '=.*?(&|$)', 'i')\n  var separator = uri.indexOf('?') !== -1 ? '&' : '?'\n\n  if (!value) {\n    // remove key-value pair if value is empty\n    uri = uri.replace(new RegExp('([?&]?)' + key + '=[^&]*', 'i'), '')\n    if (uri.slice(-1) === '?') {\n      uri = uri.slice(0, -1)\n    }\n    // replace first occurrence of & by ? if no ? is present\n    if (uri.indexOf('?') === -1) uri = uri.replace(/&/, '?')\n  } else if (uri.match(re)) {\n    uri = uri.replace(re, '$1' + key + '=' + value + '$2')\n  } else {\n    uri = uri + separator + key + '=' + value\n  }\n  return uri + hash\n}\n\nfunction ShareButton(props) {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n\n  const handleShareButtonClick = event => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleShareButtonClose = () => {\n    setAnchorEl(null)\n  }\n\n  const url = getCurrentUrl()\n\n  return (\n    <>\n      <RightIconButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Share\"\n        aria-controls=\"share-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleShareButtonClick}\n      >\n        <ShareIcon />\n      </RightIconButton>\n      <Menu\n        id=\"share-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleShareButtonClose}\n      >\n        <MenuItem>\n          <FacebookShareButton\n            url={getShareUrl(url, 'facebook')}\n            children={<FacebookIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <TelegramShareButton\n            url={getShareUrl(url, 'telegram')}\n            children={<TelegramIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <WhatsappShareButton\n            url={getShareUrl(url, 'whatsapp')}\n            children={<WhatsappIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <TwitterShareButton\n            url={getShareUrl(url, 'twitter')}\n            children={<TwitterIcon size={32} round={true} />}\n          />\n        </MenuItem>\n        <MenuItem onClick={handleShareButtonClose}>\n          <StyledCopyIcon\n            onClick={() => {\n              navigator.clipboard.writeText(url)\n            }}\n          />\n        </MenuItem>\n      </Menu>\n    </>\n  )\n}\n\nexport default ShareButton\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport { UnstyledNavLink } from '../atoms/Link'\nimport ShareButton from './ShareButton'\nimport { fireEvent } from 'utils/ga_fireevent'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    background: white;\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst AppBarTitle = styled(UnstyledNavLink)`\n  && {\n    left: auto;\n    right: auto;\n    width: 100%;\n    position: absolute;\n  }\n`\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\">\n        <Toolbar disableGutters>\n          <AppBarTitle to={'/'}>\n            <Typography variant=\"h1\" align=\"center\">\n              <span role=\"img\" aria-label=\"區議會 2019\">\n                區議會 2019 ✋🏻💜⚡\n              </span>\n            </Typography>\n          </AppBarTitle>\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Search\"\n            onClick={() => {\n              dispatch({ type: DRAWER_OPEN })\n              fireEvent({\n                ca: 'general',\n                ac: 'click',\n                lb: 'menu_drawer',\n              })\n            }}\n          >\n            <MenuIcon />\n          </IconButton>\n          <ShareButton\n            onClick={() =>\n              fireEvent({\n                ca: 'general',\n                ac: 'click',\n                lb: 'share_button',\n              })\n            }\n          />\n        </Toolbar>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Divider from '@material-ui/core/Divider'\nimport { UnstyledLink, DefaultLink } from 'components/atoms/Link'\nimport { Typography } from '@material-ui/core'\nimport Columns from 'components/atoms/Columns'\nimport { withRouter } from 'react-router-dom'\n\nconst StyledFooter = styled(Box)`\n  && {\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n    padding: 16px;\n  }\n`\n\nconst StyledDivider = styled(Divider)`\n  && {\n    margin: 16px 0;\n  }\n`\n\nconst StyledFooterLink = styled(UnstyledLink)`\n  && {\n    color: rgba(0, 0, 0, 0.87);\n  }\n`\n\nconst LinkBox = styled(Box)`\n  && {\n    margin: 8px 16px 8px 0;\n    word-break: keep-all;\n    overflow: hidden;\n  }\n`\n\nfunction Footer(props) {\n  return (\n    <>\n      <StyledFooter>\n        <StyledDivider />\n        <Typography variant=\"body2\" gutterBottom>\n          本網站所刊載資訊全為公開資料，歸納自\n          <DefaultLink href=\"https://www.eac.hk/\">選舉管理委員會</DefaultLink>丶\n          <DefaultLink href=\"https://www.reo.gov.hk/\">選舉事務處</DefaultLink>丶\n          <DefaultLink href=\"https://www.censtatd.gov.hk/\">\n            政府統計處\n          </DefaultLink>\n          丶\n          <DefaultLink href=\"https://www.districtcouncils.gov.hk\">\n            各區區議會網站\n          </DefaultLink>\n          及\n          <DefaultLink href=\"https://github.com/initiummedia/hk_district_council_election\">\n            端傳媒\n          </DefaultLink>\n          ，刊載前已盡力確保資料真確性，如有建議或錯漏，請按\n          <DefaultLink href=\"https://forms.gle/irD6tEznWPNda6w59\">\n            此鏈結\n          </DefaultLink>\n          回報。\n        </Typography>\n        <Typography variant=\"body2\">\n          本網站與任何2019年區議會選舉候選人或其助選成員無關，刊載資料目的非為促使或阻礙任何候選人在選舉中當選。\n        </Typography>\n        <StyledDivider />\n        <Columns>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://www.facebook.com/g0vhk.io\"\n            >\n              g0vhk.io\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              onClick={\n                () => props.history.push(`/disclaimer`)\n                // console.log(props)\n              }\n            >\n              關於候選人陣營\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://forms.gle/irD6tEznWPNda6w59\"\n            >\n              反映意見\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink\n              target=\"_blank\"\n              href=\"https://github.com/cswbrian/district-councils-dashboard\"\n            >\n              GitHub\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <StyledFooterLink target=\"_blank\" href=\"https://hkfactcheck.io/\">\n              選區事實處\n            </StyledFooterLink>\n          </LinkBox>\n          <LinkBox>\n            <div\n              className=\"fb-like\"\n              data-href=\"https://dc2019.g0vhk.io\"\n              data-width=\"\"\n              data-layout=\"standard\"\n              data-action=\"like\"\n              data-size=\"small\"\n              data-show-faces=\"true\"\n              data-share=\"true\"\n            ></div>\n          </LinkBox>\n        </Columns>\n      </StyledFooter>\n    </>\n  )\n}\n\nexport default withRouter(Footer)\n","import React from 'react'\nimport GoogleAnalytics from 'react-ga'\n\nconst trackingId = process.env.REACT_APP_GA_TRACKING_ID\nif (!trackingId) {\n  throw new Error(\n    'Invalid google tracking ID. or set to UA-000000-01 if you dont have any'\n  )\n}\nGoogleAnalytics.initialize(trackingId)\n\nconst withTracker = (WrappedComponent, options = {}) => {\n  const trackPage = page => {\n    GoogleAnalytics.set({\n      page,\n      ...options,\n    })\n    GoogleAnalytics.pageview(page)\n  }\n\n  const HOC = class extends React.Component {\n    componentDidMount() {\n      const page = this.props.location.pathname\n      trackPage(page)\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const currentPage = this.props.location.pathname\n      const nextPage = nextProps.location.pathname\n\n      if (currentPage !== nextPage) {\n        trackPage(nextPage)\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />\n    }\n  }\n\n  return HOC\n}\n\nexport default withTracker\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport SearchTab from 'components/organisms/SearchTab'\nimport Typography from '@material-ui/core/Typography'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst LeftMargin = styled(ExpandedRow)`\n  && {\n    min-height: 48px;\n    align-items: center;\n    padding: 0 16px 0 16px;\n    cursor: pointer;\n  }\n`\nconst SearchMenu = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  function goToPage(route) {\n    props.history.push(route)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  return (\n    <>\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/')}\n        >\n          返回首頁\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/district/2019')}\n        >\n          全港選區一覽\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() => goToPage('/about-dc')}\n        >\n          關於區議會選舉\n        </Typography>\n      </LeftMargin>\n\n      <LeftMargin>\n        <Typography\n          variant=\"h5\"\n          color=\"secondary\"\n          onClick={() =>\n            (window.location.href =\n              'https://docs.google.com/forms/u/1/d/e/1FAIpQLSdXtbdry3w8hkmZuN0MJaj2CP2X3RUUnCTWLnOujsfx1pHDrw/viewform?usp=send_form')\n          }\n        >\n          反映意見\n        </Typography>\n      </LeftMargin>\n      <LeftMargin>\n        <SearchTab />\n      </LeftMargin>\n    </>\n  )\n}\n\nexport default withRouter(SearchMenu)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Drawer from '@material-ui/core/Drawer'\n\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport SearchMenu from 'components/organisms/SearchMenu'\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst MenuContainer = styled(Box)`\n  && {\n    margin-top: 48px;\n    display: flex;\n    width: 100%;\n    flex-flow: column;\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    padding: 12px;\n  }\n`\n\nconst useStyles = makeStyles(theme => ({\n  drawerPaper: {\n    width: '500px',\n    maxWidth: '100%',\n  },\n}))\n\nfunction AppDrawer(props) {\n  const {\n    drawer: { dispatch, state },\n  } = React.useContext(ContextStore)\n  const classes = useStyles()\n\n  return (\n    <Drawer\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n      anchor=\"left\"\n      open={state.open}\n      variant=\"persistent\"\n    >\n      <Container>\n        <NavBarButton\n          color=\"inherit\"\n          component=\"span\"\n          aria-label=\"Menu\"\n          onClick={() => {\n            dispatch({ type: DRAWER_CLOSE })\n          }}\n        >\n          <CloseIcon fontSize=\"small\" />\n        </NavBarButton>\n        <MenuContainer>\n          <SearchMenu />\n        </MenuContainer>\n      </Container>\n    </Drawer>\n  )\n}\n\nexport default withRouter(AppDrawer)\n","import React, { Component } from 'react'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { withRouter } from 'react-router-dom'\nimport { Box, Grid } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { getColorFromCamp } from 'utils/helper'\nimport { COLORS } from 'ui/theme'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableCell from '@material-ui/core/TableCell'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst CandidateNumber = styled(Box)`\n  && {\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\n\nconst StyledTableCell = styled(TableCell)`\n  && {\n    padding: 6px 6px 6px 12px;\n  }\n`\n\nconst StyledTableRow = styled(TableRow)`\n  && {\n    cursor: pointer;\n    padding: 0 10px;\n    td {\n      color: ${props => props.textcolor || 'black'};\n    }\n  }\n`\n// const StyledCandidateTags = styled(CandidateTags)`\n//   && {\n//     display: inline;\n//     margin-left: 2px;\n//   }\n// `\n\nconst CandidateGrid = props => {\n  const { candidate } = props\n  return (\n    <Grid\n      container\n      direction=\"row\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={1}\n      style={{ minWidth: '140px' }}\n    >\n      {candidate.candidate_number > 0 && (\n        <Grid item>\n          <CandidateNumber\n            item\n            key={candidate.candidate_number}\n            dimension=\"18px\"\n            camp={getColorFromCamp(candidate.camp)}\n          >\n            {candidate.candidate_number}\n          </CandidateNumber>\n        </Grid>\n      )}\n      <Grid item>\n        <PeopleAvatar\n          dimension=\"40px\"\n          borderwidth={2}\n          camp={getColorFromCamp(candidate.camp)}\n          src={`${IMAGE_HOST_URI}/static/images/avatar/${candidate.person.uuid}.jpg`}\n          imgProps={{\n            onError: e => {\n              e.target.src =\n                IMAGE_HOST_URI + '/static/images/avatar/default.png'\n            },\n          }}\n          opacity={\n            candidate.nominate_status === 'disqualified' ||\n            candidate.nominate_status === 'suspended'\n              ? 0.1\n              : 1\n          }\n        />\n      </Grid>\n      <Grid item>\n        {candidate.person.name_zh || candidate.person.name_en}\n        {candidate.tags.findIndex(\n          tag => tag.type === 'camp' && tag.tag === '有爭議'\n        ) > -1 && (\n          <HtmlTooltip\n            disableFocusListener\n            disableTouchListener\n            text=\"侯選人政治立場未明\"\n            placement=\"bottom\"\n            size={16}\n          />\n        )}\n        {candidate.nominate_status === 'disqualified' && (\n          <>\n            <br />\n            <span>(取消資格)</span>\n          </>\n        )}\n        {candidate.nominate_status === 'suspended' && (\n          <>\n            <br />\n            <span>(棄選)</span>\n          </>\n        )}\n      </Grid>\n    </Grid>\n  )\n}\n\nclass CandidatesTableContent extends Component {\n  matchCamp(candidate, showDemocracy, showEstablishment, showOthers) {\n    if (showDemocracy && candidate.camp === '民主') return true\n    if (showEstablishment && candidate.camp === '建制') return true\n    if (showOthers && candidate.camp === '其他') return true\n    return false\n  }\n\n  render() {\n    const { props, matchCamp } = this\n    const { candidates, showEstablishment, showDemocracy, showOthers } = props\n    return (\n      <>\n        {candidates\n          .filter(candidate =>\n            matchCamp(candidate, showDemocracy, showEstablishment, showOthers)\n          )\n          .map(candidate => (\n            <StyledTableRow\n              key={candidate.person.id}\n              onClick={() => {\n                props.history.push(\n                  `/profile/${candidate.person.name_zh ||\n                    candidate.person.name_en}/${candidate.person.uuid}`\n                )\n              }}\n              textcolor={\n                candidate.nominate_status === 'disqualified' ||\n                candidate.nominate_status === 'suspended'\n                  ? 'grey'\n                  : 'black'\n              }\n            >\n              <StyledTableCell>\n                <CandidateGrid\n                  key={candidate.person.id}\n                  candidate={candidate}\n                />\n              </StyledTableCell>\n              <StyledTableCell>\n                {candidate.person.related_organization || '-'}\n              </StyledTableCell>\n              <StyledTableCell>\n                {candidate.political_affiliation || '-'}\n              </StyledTableCell>\n            </StyledTableRow>\n          ))}\n      </>\n    )\n  }\n}\n\nexport default withRouter(CandidatesTableContent)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport CandidatesTableContent from 'components/molecules/candidate/CandidatesTableContent'\nimport { TableRow, TableCell, Box, Typography } from '@material-ui/core'\nimport { getConstituencyTagsByCandidateCamps } from 'utils/helper'\nimport { Tag } from 'components/atoms/Tag'\nimport { SeperatedColumns } from 'components/atoms/Columns'\n\nconst ConstituencyNameTableRow = styled(TableRow)`\n  && {\n    cursor: pointer;\n  }\n`\n\nconst StyledTag = styled(Tag)`\n  && {\n    margin-left: 4px;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n  }\n`\n\nconst ConstituencyTableContent = props => {\n  const {\n    year,\n    constituency,\n    showEstablishment,\n    showDemocracy,\n    showBlank,\n    showOthers,\n  } = props\n  const tags = getConstituencyTagsByCandidateCamps(constituency.candidates)\n\n  return (\n    <>\n      <ConstituencyNameTableRow\n        onClick={() => {\n          props.history.push(`/district/${year}/${constituency.code}`)\n        }}\n      >\n        <TableCell colSpan={5}>\n          <SeperatedColumns>\n            <Typography variant=\"h6\">\n              {constituency.name_zh}（{constituency.code}）\n            </Typography>\n            <TagContainer>\n              {tags.length > 0 &&\n                tags.map((tag, index) => <StyledTag value={tag} key={index} />)}\n            </TagContainer>\n          </SeperatedColumns>\n        </TableCell>\n      </ConstituencyNameTableRow>\n      <CandidatesTableContent\n        candidates={constituency.candidates}\n        year={year}\n        showEstablishment={showEstablishment}\n        showDemocracy={showDemocracy}\n        showBlank={showBlank}\n        showOthers={showOthers}\n      />\n    </>\n  )\n}\n\nexport default withRouter(ConstituencyTableContent)\n","import React from 'react'\nimport ConstituencyTableContent from 'components/molecules/constituency/ConstituencyTableContent'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport TableCell from '@material-ui/core/TableCell'\nimport { Typography } from '@material-ui/core'\nimport TableRow from '@material-ui/core/TableRow'\n\nconst DistrictNameTableRow = styled(TableRow)`\n  && {\n    cursor: pointer;\n  }\n`\n\nconst DistrictTableContent = props => {\n  const {\n    district,\n    year,\n    showEstablishment,\n    showDemocracy,\n    showBlank,\n    showOthers,\n  } = props\n  return (\n    <>\n      <DistrictNameTableRow\n        onClick={() => {\n          props.history.push(`/district/${year}/${district.dc_code}`)\n        }}\n      >\n        <TableCell colSpan={5}>\n          <Typography variant=\"h4\">{district.dc_name_zh}</Typography>\n          <Typography variant=\"body2\" gutterBottom>\n            {district.constituencies.length}個選區\n          </Typography>\n          {district.dc_description_zh && (\n            <Typography variant=\"body1\">\n              {district.dc_description_zh}\n            </Typography>\n          )}\n        </TableCell>\n      </DistrictNameTableRow>\n      {district.constituencies.map(constituency => {\n        return (\n          <ConstituencyTableContent\n            key={constituency.id}\n            constituency={constituency}\n            year={year}\n            showEstablishment={showEstablishment}\n            showDemocracy={showDemocracy}\n            showBlank={showBlank}\n            showOthers={showOthers}\n          />\n        )\n      })}\n    </>\n  )\n}\n\nexport default withRouter(DistrictTableContent)\n","import Box from '@material-ui/core/Box'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport { withStyles } from '@material-ui/core/styles'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport { COLORS } from 'ui/theme'\nimport React, { Component } from 'react'\n\nconst styles = {\n  establishment: {\n    '& svg': {\n      fill: COLORS.camp['establishment'].background,\n    },\n  },\n  democracy: {\n    '& svg': {\n      fill: COLORS.camp['democracy'].background,\n    },\n  },\n  others: {\n    '& svg': {\n      fill: COLORS.camp['other'].background,\n    },\n  },\n}\n\nclass CampSelector extends Component {\n  constructor(props) {\n    super(props)\n    const { classes } = props\n    this.camps = [\n      {\n        name: 'democracy',\n        text: '民主',\n        color: 'asdf',\n        className: classes.democracy,\n      },\n      { name: 'establishment', text: '建制', className: classes.establishment },\n      { name: 'others', text: '其他', className: classes.others },\n    ]\n    this.state = {\n      checked: {\n        democracy: true,\n        establishment: true,\n        others: true,\n      },\n    }\n  }\n\n  handleChange(evt) {\n    const checked = this.state.checked\n    const name = evt.target.value\n    checked[name] = evt.target.checked\n    this.setState({ ...this.state, checked: checked })\n    const { onChange } = this.props\n    if (onChange) {\n      onChange(\n        this.state.checked.democracy,\n        this.state.checked.establishment,\n        this.state.checked.others\n      )\n    }\n  }\n\n  render() {\n    const { state } = this\n    return (\n      <div>\n        <FormGroup row>\n          <Box m={2} />\n          <FormControlLabel control={<div></div>} label=\"顯示：\" />\n          {this.camps.map(c => (\n            <FormControlLabel\n              control={\n                <Checkbox\n                  className={c.className}\n                  checked={state.checked[c.name]}\n                  value={c.name}\n                  onChange={this.handleChange.bind(this)}\n                />\n              }\n              label={c.text}\n            />\n          ))}\n        </FormGroup>\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(CampSelector)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport DistrictTableContent from 'components/molecules/district/DistrictTableContent'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableRow from '@material-ui/core/TableRow'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport CampSelector from 'components/atoms/CampSelector'\nimport styled from 'styled-components'\n\nconst StyledTableCell = styled(TableCell)`\n  && {\n    padding: 6px 0px 6px 16px;\n    :last-child {\n      padding: 6px 0px 6px 16px;\n    }\n  }\n`\n\nclass DistrictsTable extends Component {\n  static propTypes = {\n    districts: PropTypes.array.isRequired,\n    year: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      checked: {\n        democracy: true,\n        establishment: true,\n        others: true,\n        blank: true,\n      },\n    }\n  }\n\n  handleChange(democracy, establishment, others, blank) {\n    const checked = { democracy, establishment, others, blank }\n    this.setState({ ...this.state, checked: checked })\n  }\n\n  render() {\n    const { districts, year } = this.props\n    const { state } = this\n    const { democracy, establishment, others, blank } = state.checked\n    return (\n      <div>\n        <CampSelector onChange={this.handleChange.bind(this)} />\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <StyledTableCell>候選人</StyledTableCell>\n              <StyledTableCell>\n                相關組織{' '}\n                <HtmlTooltip\n                  disableFocusListener\n                  disableTouchListener\n                  text=\"候選人或議員的所屬政黨或社區組織，來源綜合媒體報道\"\n                  placement=\"bottom\"\n                  size={20}\n                />\n              </StyledTableCell>\n              <StyledTableCell>\n                報稱政治聯繫{' '}\n                <HtmlTooltip\n                  disableFocusListener\n                  disableTouchListener\n                  text=\"根據候選人提名表格上所填報的政治聯繫\"\n                  placement=\"bottom\"\n                  size={20}\n                />\n              </StyledTableCell>\n              {/* <TableCell>得票</TableCell> */}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {districts.map(district => (\n              <DistrictTableContent\n                showEstablishment={establishment}\n                showDemocracy={democracy}\n                showOthers={others}\n                showBlank={blank}\n                key={district.dc_code}\n                district={district}\n                year={year}\n              />\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    )\n  }\n}\n\nexport default DistrictsTable\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_DISTRICT } from 'queries/gql'\nimport { Loading } from 'components/atoms/Loading'\nimport DistrictsTable from 'components/molecules/district/DistrictsTable'\n\nconst DistrictOverviewPage = props => {\n  const {\n    match: {\n      params: { year, code },\n    },\n  } = props\n\n  return (\n    <Query query={QUERY_GET_DISTRICT} variables={{ code, year }}>\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        const districts = data.dcd_districts\n\n        return <DistrictsTable districts={districts} year={year} />\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictOverviewPage\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_ALL_DISTRICTS } from 'queries/gql'\nimport { Loading } from 'components/atoms/Loading'\nimport DistrictsTable from 'components/molecules/district/DistrictsTable'\n\nconst DistrictAllPage = props => {\n  const {\n    match: {\n      params: { year },\n    },\n  } = props\n\n  return (\n    <Query query={QUERY_GET_ALL_DISTRICTS} variables={{ year }}>\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        const districts = data.dcd_districts\n\n        return <DistrictsTable districts={districts} year={year} />\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictAllPage\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport IndexPage from 'components/pages/landing'\nimport ProfilePage from 'components/pages/profile'\nimport DistrictPage from 'components/pages/district'\nimport DistrictListPage from 'components/pages/district/list'\nimport BattleGroundPage from 'components/pages/battleground'\nimport DisclaimerPage from 'components/pages/disclaimer'\nimport AboutDCPage from 'components/pages/about/dc'\nimport NotfoundPage from 'components/pages/notfound'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme from 'ui/theme'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport MobileAppBar from 'components/organisms/MobileAppBar'\nimport Footer from 'components/organisms/Footer'\nimport { ContextStoreProvider } from 'ContextStore'\nimport withTracker from './WithTracker'\nimport SearchDrawer from 'components/pages/SearchDrawer'\nimport DistrictOverviewPage from 'components/pages/district/overview'\nimport DistrictAllPage from 'components/pages/district/all'\n\nconst client = new ApolloClient({\n  uri: process.env.REACT_APP_GRAPHQL_URI,\n})\n\nconst Root = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    margin: auto;\n    overflow: hidden;\n    background-color: white;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    overflow: auto;\n  }\n`\n\nconst Wrapper = styled(Box)`\n  && {\n    flex: 1;\n    width: 100%;\n    max-width: 1024px;\n    margin: auto;\n  }\n`\n\nconst App = props => {\n  if (!process.env.REACT_APP_GRAPHQL_URI) {\n    throw new Error('Graphql host not yet set')\n  }\n\n  return (\n    <ApolloProvider client={client}>\n      <MuiThemeProvider theme={theme}>\n        <ContextStoreProvider>\n          <Root>\n            <ContentContainer>\n              <CssBaseline />\n              <Wrapper>\n                <MobileAppBar />\n                <main>\n                  <Switch>\n                    <Route exact path=\"/\" component={withTracker(IndexPage)} />\n                    <Route\n                      path=\"/profile/:name/:uuid\"\n                      component={withTracker(ProfilePage)}\n                    />\n                    <Route\n                      path=\"/district/:year/tags/:tag\"\n                      component={withTracker(DistrictListPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code(\\w{1})\"\n                      component={withTracker(DistrictOverviewPage)}\n                    />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={withTracker(BattleGroundPage)}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={withTracker(DistrictPage)}\n                    />\n                    <Route\n                      path=\"/district/:year\"\n                      component={withTracker(DistrictAllPage)}\n                    />\n                    <Route\n                      path=\"/disclaimer\"\n                      component={withTracker(DisclaimerPage)}\n                    />\n                    <Route\n                      path=\"/about-dc\"\n                      component={withTracker(AboutDCPage)}\n                    />\n                    <Route component={withTracker(NotfoundPage)} />\n                  </Switch>\n                </main>\n              </Wrapper>\n              <Footer />\n            </ContentContainer>\n            <SearchDrawer />\n          </Root>\n        </ContextStoreProvider>\n      </MuiThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}